# SPCSS01168509|[SC9863A1][Waterworld][FS301-A13][13411][智能手机][A6][QZ]HAC:vowifi无法连接上5GwifiB3频段|HAC:vowifi无法连接上5GwifiB3频段
A12有项目用这种方式设置之后就可以连接，
vendor/bin/hw/wpa_cli -iwpa_wlan0 -p/dev/socket DRIVER country MX
请问A13上是否有类似的命令吗？
附件LOG已上传。||
# SPCSS01168508|[UMS9230][Waterworld][FM626][12929][平板][XM] CtsIkeTestCases 今天突然跑不过|CtsIkeTestCases
android.ipsec.ike.cts.IkeSessionDigitalSignatureTest#testIkeSessionSetupAndChildSessionSetupWithTransportMode
今天突然FAIL
拿了之前能过的版本试了也是fail
看报错个人分析是因为连接超时，怀疑是谷歌后台这两天修改了什么导致的
请问平台是否有收到这种报错
谢谢||
# SPCSS01168506|[UMS9117-L][Waterworld][FF615][11545][手机][XM]帮忙安排整机应用层吞吐率测试。|客户反馈LTE速率偏低，我们验证了主板传导的物理层吞吐率是正常的，有10M/5M左右，如附件测试数据，现在想测试下应用层的吞吐率，因我司没有这个仪器环境，所以想麻烦贵司帮忙安排测试下。
请尽快安排下，并提供收件人地址，我们好安排寄整机，谢谢！
测试频段LTE B3/5/40，支持cat1。||
# SPCSS01168503|[SC7731E][Waterworld][A507-SC7731E][13273][手机]测试反馈2G/3G实网待机功耗高。|一，测试反馈2G/3G实网待机功耗高。带gms user版本软件，关闭wifi和蓝牙，关闭移动数据，然后
 1，sim1卡槽插移动卡（2G网），平均待机功耗4.8ma左右，要求小于等于3ma
 2，sim2卡槽插移动卡（2G网），平均待机功耗4.8ma左右，要求小于等于3ma
 3，sim1卡槽插移动卡（2G网），sim2卡槽插移动卡（2G网），平均待机功耗6.4ma左右，要求小于等于5ma
 4，sim1卡槽插联通卡（3G网），平均待机功耗5.2ma左右，要求小于等于5ma
 5，sim1卡槽插移动卡（2G网），sim2卡槽插联通卡（3G网），平均待机功耗8.3ma左右，要求小于等于7ma
二，飞行模式，不插卡，待机电流在2.3ma左右。
请帮忙分析。
||
# SPCSS01168456|[SC9832E][Waterworld][A507-SC9832E-A13][14037][Other]重启手机打开相机概率性闪退|hi sprd:
    客户测试发现重启手机打开相机出现概率性闪退，该项目着急量产，帮忙加急分析一下，谢谢~

    ylog已上传附件||
# SPCSS01168372|[SC9832E][Waterworld][FS170-SC9832E][13244][手机]【A1】客户反馈:workspace第二页出现点击桌面app图标无响应
步骤：

现象：

分析：
Dear sprd:
       客户反馈:手机用了一段时间后，workspace第二页会出现点击桌面app图标无响应，
     此时可以左右滑动，并且滑动到menu界面后，同样的位置是可以启动menu界面的APP。

     所以，从客户的反馈视频来看，感觉是workspace第二页的APP图标无法启动了。
     我们这边复测了很久都没复现到，麻烦帮忙看看。
     对应的YLOG和视频见附件。

     桌面默认是有2页，见附件1.png和2.png。
     据客户反馈，目前1.png这个界面上没出现过，都是在2.png这个界面才概率性出现。
     谢谢|
==== State: Opened by: cmadmin on 10 May 2023 19:09:15 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168352|[SC7731E][Waterworld][FS301-SC7731E-A12][13639][CEBU-智能手机][QZ][A6]Monkey压测过程中出现dump，log和vmlinux上传至FTP 6g多稍后上传 请帮忙分析，谢谢|早上看出现Dump，6号开始跑的，大概跑了4天左右出现：
[exception_reboot_reason]: kernel_crash
[exception_panic_reason]: Fatal exception
[exception_time]: 2023-03-15_05-44-23
[exception_file_info]: not-bugon
[exception_task_id]: 22137
[exception_task_family]: [HeapTaskDaemon, 22137][main, 368]
[exception_pc_symbol]: [<fa24c327>] 0x80808080
[exception_stack_info]: [<e2421137>] prepare_exception_info+0x154/0x16c
[<570dd5f7>] sysdump_panic_event+0x548/0x678   
[<dd7041b8>] atomic_notifier_call_chain+0x38/0x74      
[<c1bb3fed>] panic+0x170/0x374 
[<18e21c86>] arm_notify_die+0x0/0x58   
[<abcd3193>] 0xb      |
==== State: Opened by: cmadmin on 11 May 2023 09:08:49 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168334|[UIS8910FF-S][Waterworld][FF636][14095][CEBU-功能手机][遵义6部]模拟器编译报错
步骤：
1. make p=UIS8910_240x320BAR_16MB_DS_DEBUG m=resource_main

2. make p=UIS8910_240x320BAR_16MB_DS_DEBUG m=simulator_main

现象：
模拟器编译报错如下:
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\agc_exp.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\amr_arm.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\aud_algorithm.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\aud_common.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\aud_config.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\aud_dev.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\audioservice.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\clone_codec.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\custom_tone.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\daps.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\dc.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\devps.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\display.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\dsp_codec.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\dtmf_tone.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\dv.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\dv_cfg.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\eq_exp.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\generic_tone.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\gzip.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\h264_codec.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\img_proc.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\img_proc_core.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\isp_service.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\lcd.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\midi.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\mp3_new.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\parser.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\ratecontrol.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\record.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\refbase.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\rtos.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\s3d.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\sfs.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\spim.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\spml_main.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\tcpip.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\transsamplerate.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\voice.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\vsp.lib : fatal error : file not found.
E:\8910FF\lib\UIS8910_240x320BAR_16MB_DS_DEBUG\wav.lib : fatal error : file not found.

分析：
报错文件均在lib\simu目录下, 请问此平台该如何正常编译Simulator
|
==== State: Opened by: cmadmin on 10 May 2023 17:47:52 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168333|[SC9832E][Waterworld][FS273-SC9832E-A11][12639][手机][六部遵义]法国运营商 BOUYGUES 20820 VOLTE协议测试，IMS注册带Video flag，期望不带。
步骤：Switch on UE on VoLTE network 

现象：UE sends an IMS REGISTER to network with Video flag in contact header field.
This Flag allows UE to makes Video from IMS and it's not expected to network side.

分析：
[VoLTE] Video is declared in contact header field => Critique
Test Step:
1) Switch on UE on VoLTE network 
Expected results:
1) UE should send an IMS REGISTER to network without Video flag in contact header field.
Obtained results :
1) UE sends an IMS REGISTER to network with Video flag in contact header field.
This Flag allows UE to makes Video from IMS and it's not expected to network side.


|
==== State: Opened by: waterworld on 10 May 2023 17:53:05 ====

Dear sprd：

你好。
客户反馈，在法国运营商 BOUYGUES 20820 VOLTE协议测试中IMS注册带Video flag，但客户期望不带。
log已上传至附件：BOUYGUES 20820 VOLTE协议测试.IMS注册期望不带Video flag-0502.zip。
请帮忙分析，多谢~

==== State: Opened by: cmadmin on 10 May 2023 17:51:28 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168231|[SC9863A1][Waterworld][FS310-SC2703P-A13-][13533][智能手机][A6][XM]微距(ic：gc030a)，在拍照模式下不能打开，在录像模式下能打开。
步骤：
    1、打开相机app。
    2、查看more。

现象：
    1、点击Macro图标，Camera一片黑，不能打开，也没提示报错。
    2、点击DV Macro，能打开微距录像，并且录制成功。
    3、MMI 工厂测试中微距也是能打开的，驱动应该是没问题的。
分析：
    1、附件marco_error.zip为对应复现问题的log，目前我自己看是上层的setSuperMacroPhotoEnable enable = 0导致不能打开微距拍照
    具体请帮忙分析下，十分感谢。|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:11:25 ====

  == Sunny.Hu@unisoc.com On 2023-05-10T11:10:11Z (json) ==
另外 这个里面是哪个模式打不开。

	Line 19439: M006250  05-10 10:48:26.030  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModeIndex=0,change to 12
	Line 20045: M0064BA  05-10 10:48:26.242  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModule=com.dream.camera.modules.autophoto.AutoPhotoModule@b01d496,modeIndex=12
	Line 24059: M007440  05-10 10:48:28.169  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModeIndex=12,change to 32
	Line 24491: M0075FA  05-10 10:48:28.330  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModule=com.dream.camera.modules.slowmotionvideo.SlowmotionVideoModule@218193f,modeIndex=32
	Line 32259: M00943B  05-10 10:48:31.771  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModeIndex=32,change to 0
	Line 32695: M0095FA  05-10 10:48:31.924  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModule=com.dream.camera.modules.macrovideo.MacroVideoModule@2a1c0ca,modeIndex=0
	Line 38090: M00AB2D  05-10 10:48:33.769  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModeIndex=0,change to 12
	Line 38434: M00AC8C  05-10 10:48:33.879  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModule=com.dream.camera.modules.autophoto.AutoPhotoModule@1909a3,modeIndex=12
	Line 42597: M00BCB2  05-10 10:48:35.920  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModeIndex=12,change to 31
	Line 43040: M00BE74  05-10 10:48:36.075  7861  7861 I CAM_CameraActivity Drea: onModeSelected mCurrentModule=com.dream.camera.modules.slowmotionvideo.SlowmotionVideoModule@c3f1b5c,modeIndex=31

==== State: NeedInfo by: cmadmin on 10 May 2023 19:06:07 ====

  == Sunny.Hu@unisoc.com On 2023-05-10T11:05:24Z (json) ==
这个APP 不是展锐的DreamCamera2 如果底层可以打开。那贵司请在APP里面确定微距的Camera ID 然后去打开。
(2023-05-10T10:46:32Z)

==== State: Opened by: cmadmin on 10 May 2023 18:47:24 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168198|[UMS9230][Waterworld][FM626][12929][平板][XM]请帮忙确认A13 MODEM loader驱动代码中是否存在A12 memremap/memunmap没有配套使用问题|请帮忙确认A13 MODEM loader驱动代码中是否存在A12 memremap/memunmap没有配套使用问题
备注：之前CQ是SPCSS01160041，我司也check了A13对应代码，发现非go arm64代码存在问题，请帮忙在确认下相关代码
|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:14:27 ====

  == Ningbiao.Huang@unisoc.com On 20230510T11:12:57 (xml) ==
另外，还需要单独测试一次，测试到出问题，触发sysdump，然后上传sysdump和vmlinux。

==== State: NeedInfo by: cmadmin on 10 May 2023 19:00:17 ====

  == Ningbiao.Huang@unisoc.com On 2023-05-10T10:59:06Z (json) ==

请回复确认一下你们现在的测试方式。

看代码：
------ #ifdef CONFIG_ARM64
------ #define modem_memory_unmap(type, vmem)		modem_ram_unmap((type), (vmem))
------ #define ALIGN_NUM				8
------ #define ALIGN_MASK				0xFFFFFFFFFFFFFFF8
------ #else

应该是成对的，请做如下测试：
1、USB连接手机，adb root/adb shell 进入手机命令行界面；
2、执行一次网络重启测试；
3、cat /proc/vmallocinfo|grep memremap，看是否有内容输出，并记录下来；
4、cat /proc/vmallocinfo|grep modem，看是否有内容输出，并记录下来；
5、重复2~4操作3-5次，记录每次的信息并提供。

thanks

==== State: NeedInfo by: cmadmin on 10 May 2023 18:50:15 ====

  == Ningbiao.Huang@unisoc.com On 20230510T10:49:35 (xml) ==
Dear customer，

上传一下：
drivers/unisoc_platform/modem_loader/sprd_modem_loader.c

我对比看看。

thanks
(20230510T10:01:06)

==== State: Opened by: cmadmin on 10 May 2023 18:02:16 ====

  == Bo.Zhou@unisoc.com On 20230510T10:01:06 (xml) ==
ningbiao 看下， 这个patch 应该是跟着kernel版本走的吧
|
# SPCSS01168192|[SC6533G][Waterworld][FF152-LAVA][13651][CEBU-功能手机][遵义6部]编译SD卡抓log的软件，提示超空间。
步骤：配置SD卡抓Log 打开mmi trace 的内容-->编译
修改文件target.def内容如下
------ ## Trace
------ ## Disable this macro if trace is needed in any module
------ #TARGET_EXPORT_FLAG += SXS_NO_PRINTF
------ ## Individual modules
TARGET_EXPORT_FLAG += AT_NO_TRACE

------ #TARGET_EXPORT_FLAG += MMI_NO_TRACE
------ #TARGET_EXPORT_FLAG += CSW_NO_TRACE

现象：提示ROM空间超出

分析：在编译提示超空间之后，删除了一些资源以及功能，再次编译，还是提示ROM超空间。
         提示超空间的图片已上传，请帮忙分析一下原因，该如何解决，谢谢。|
==== State: NeedInfo by: cmadmin on 10 May 2023 18:17:07 ====

  == Yang.Li3@unisoc.com On 2023-05-10T10:16:02Z (json) ==
Dear Cust:
  可以尝试关闭一些不影响您功能的宏控，以及其他log 模块的宏等
(2023-05-10T08:33:45Z)
|
# SPCSS01168153|[SC9863A1][Waterworld][FS170-SC9863A1][13252][手机][A6][zy]手机IMEI配置错误，想通过软件自动更改手机IMEI|1.错误的IMEI号的手机已到用户手上，巴西想通过软件自动更改手IMEI的方式进行fota解决这个问题。
2.如果可以通过内置某一个APK来更改IMEI，也可以
3.如果模块提错了，请帮忙转下。如果描述看不懂，请及时电联
4.十分感谢|
==== State: Opened by: waterworld on 10 May 2023 20:40:20 ====

hi sprd:
    没有做防回刷相关功能，请知悉
谢谢

==== State: Opened by: cmadmin on 10 May 2023 15:59:51 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168147|[SC9820E][Waterworld][FS357-KaiOS6][14106][CEBU-功能手机]【遵义六部】FM频段可调节范围改为为76-108MHZ
步骤：

现象：目前FM频段范围默认是87.5-108，希望改成76-108

分析：|
==== State: Opened by: cmadmin on 10 May 2023 15:48:31 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168142|[SC9820E][Waterworld][FS357-KaiOS6][14106][CEBU-功能手机][遵义六部][kaios]巴西Multilaser需要测试IPV6，提供了附件测试用例，请帮忙提供对应的PICS table，谢谢
步骤：
巴西那边IPV6经常出问题，现在要对其进行测试，需要我们提供相应的pics，测试用例见附件表格“IPv6 ANATEL test requirements.xlsx”；
暂时要不到更多的信息，如有问题请直接电话沟通，谢谢。

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 17:33:00 ====

  == Jianwei.Yan@unisoc.com On 20230510T09:31:45 (xml) ==
尊敬的客户

请贵司根据本项目终端的实际支持能力，先准确填写我这边上传的“一致性测试_FeatureTable_Template_V1.7.xlsx”表格（填写此表格可以电话沟通），展锐这边再根据终端的能力来生成对应的PICS表，谢谢。
(20230510T08:09:32)

==== State: Opened by: waterworld on 10 May 2023 16:07:27 ====

附件表格 “8、PICS：Interlab EVO Feature Spreadsheet_MCN_ShenZ_2202#SKU1_All_2022-06-10 13_37_17.xlsx”
是终端提供的平板项目对应测试IPV6的pics，请看下是否有参考价值，谢谢 

==== State: Opened by: cmadmin on 10 May 2023 16:05:44 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168093|[SC9832E][Waterworld][A507-KS108][13211][手机][1部]长截屏问题
步骤：

现象：

分析：
Dear  Sprd，
   长截屏时，有些界面（如信息、邮箱等）长截屏截取后的内容为空白。请帮忙分析下是什么原因？
log及视频见附件
Thanks|
==== State: Opened by: cmadmin on 10 May 2023 15:27:28 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168047|[UMS9117-L][Waterworld][FF618][12896][CEBU-功能手机][遵义6部][HMD]Arae翻盖机双屏项目兼容第三方红石FOTA后,下载完成点击安装升级阶段无法显示正常效果.升级屏幕显示效果异常,无法正常显示效果.麻烦贵司帮忙分析一下具体情况,谢谢!|分析：
小屏Terra Luna项目上兼容处理后显示效果正常,但Arae项目大屏上相同代码无法正常显示.
FOTA功能下载流程正常,安装后结束后拔掉电池重新上电开机正常.差分升级数据成功.
当前异常情况仅在安装阶段无法正常显示效果.麻烦贵司帮忙分析一下具体情况,谢谢!
log及现象见:调试第三方红石fota异常情况视频及相关log


|
==== State: NeedInfo by: cmadmin on 10 May 2023 17:44:17 ====

  == Sunwen.He@unisoc.com On 20230510T09:43:05 (xml) ==
请问，两个项目lcd的硬件接口是否一致，大屏项目使用lcd IC是哪个型号？根据现象看背光是拉亮了的，如果硬件接口一致的话，请在tf_lcmprod.c文件中将函数_LCM_Identify内LCM_TRACE替换为BL_TRACE打印，重新抓取串口log看lcd识别到没
(20230510T07:31:53)

==== State: Opened by: waterworld on 10 May 2023 15:31:20 ====

log及相关现象已提供,见附件:调试第三方红石fota异常情况视频及相关log.zip

==== State: NeedInfo by: cmadmin on 10 May 2023 15:26:27 ====

  == Sunwen.He@unisoc.com On 20230510T07:25:07 (xml) ==
Dear Customer：
    两个项目lcd硬件接口上有什么差异？请帮抓一份fota升级的异常串口log。
(20230510T07:20:33)

==== State: Opened by: cmadmin on 10 May 2023 15:17:22 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01168043|[SC9863A][Waterworld][FS293-SC9863A-A12][12800][手机][A6][QZ]移动卡收发彩信后，移动数据图标消失|移动卡收发彩信后，移动数据图标消失,目前测试联通卡不会出现此情况。
从LOG上看到在收到短信了网络LTE被强行断开了。
已将LOG和视频上传到附件中。|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:22:40 ====

  == Peng.Chen1@unisoc.com On 20230510T11:20:44 (xml) ==
Hi waterworld：

贵司使用中国移动 CMWAP APN 配置参数不对，请参考下面AP配置后复测。

thanks

   
/vendor/sprd/telephony-res/apn/apns-conf_8_v2.xml
     <apn carrier="CMWAP"
        mcc="460"
        mnc="00"
        apn="cmwap"
        proxy="10.0.0.172"
        port="80"
        mmsproxy="10.0.0.172"
        mmsport="80"
        mmsc="http://mmsc.monternet.com"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="mms"
    />



R034AC3  05-08 14:32:48.316  1183  1183 D DCT-C-0 : setupData: apnContext={mApnType=mms mState=IDLE mWaitingApns={[[ApnSettingV7] 中国移动 Wap 网络 (China Mobile), 710, 46000, cmwap, 10.0.0.172, null, , null, 80, -1, mms | supl | dun | hipri | default | fota | ims | cbs, IP, IP, true, 0, false, 0, 0, 0, 0, null, , false, 0, 0, -1, -1, [ApnSettingV7] 中国移动彩信 (China Mobile), 711, 46000, cmwap, 10.0.0.172, http://mmsc.monternet.com, 10.0.0.172, 80, 80, -1, mms, IP, IP, true, 0, false, 0, 0, 0, 0, null, , false, 0, 0, -1, -1, [ApnSettingV7] CMWAP, 2079, 46000, cmwap, 10.0.0.172, http://mmsc.monternet.com, 10.0.0.172, 80, 80, -1, mms | supl | hipri | default, IPV4V6, IPV4V6, true, 0, false, 0, 0, 0, 0, null, , false, 0, 0, -1, -1] priority=2} mApnSetting={null} mReason=dataEnabled mDataEnabled=true}, requestType=NORMAL
(20230510T10:14:13)

==== State: Opened by: cmadmin on 10 May 2023 14:45:12 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167964|[SC9832E][Waterworld][A507-KS108][13211][手机]关机充电死机|hi sprd

     我司9832E项目反馈，在进行充放电测试中，放电到自动关机会出现死机现象。

     状态1：放电自动关机后，连接充电器，此时有充电电流，但机器一直卡在开机logo界面，
               无法正常显示关机充电图标，也未正常开机，
               乱按按键触发了附件截图中的界面，但是正常机器无法唤出此界面，
               最终通过按键强制重启开机的，但是此时显示电量百分比为0%。

     状态2：放电自动关机后，连接充电器，此时lcd不亮，充电半小时也无法正常开机，拔插电池恢复正常。
               

     备注：在国外消费者手中也复现了状态2，充电几小时一直无法正常开机，最终通过拔插电池恢复的。

             因为已出货的机器和未出货的机器都出现了这个问题，所以比较着急，麻烦贵司协助分析下。

             正在加急压测抓log。。。|
==== State: Opened by: waterworld on 10 May 2023 16:45:40 ====

hi 柯工，
      1、刚抓到了状态1的log，log中显示电池电压确实非常低，3.3V左右，并且卡在logo界面时持续充电就正常开机了，与贵司回复“过放”是一致的。log已上传，有以下疑问点。
      

    疑问点：
        正常情况下电压3.3V左右，插充电器 按开机键会出现开机logo几秒后又关机，但是状态1是一致卡在开机界面，不会关机。


      状态2还在压测中。。。


谢谢


==== State: Opened by: cmadmin on 10 May 2023 14:32:09 ====

  == Kai.Ke@unisoc.com On 20230510T06:31:39 (xml) ==
     状态1：放电自动关机后，连接充电器，此时有充电电流，但机器一直卡在开机logo界面，
——应该是电池过放，处在lk预充电阶段，参阅文档101407
Android 12.0 Kernel 5.4充电模块配置指导手册V1.0.pdf
1.2.1 低电量检测 & 1.2.2 预充电

     状态2：放电自动关机后，连接充电器，此时lcd不亮，充电半小时也无法正常开机，拔插电池恢复正常。
——串口是否吐log？如果不吐log，建议另提Bug咨询stability模块进行分析处理。
|
# SPCSS01167960|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][CD_BUG 10359]相机预览界面按上下键放大缩小，拍摄照片出现条纹花屏|把相机的分辨率切换为320x240，然后在相机的预览界面按上键放大至最高两个等级，然后拍摄照片，相机的预览界面出现条纹花屏，相关log和视频已上传到FTP上。|
==== State: Resolved by: cmadmin on 10 May 2023 17:18:09 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:

[2.Resolution        ]:



==== State: Opened by: cmadmin on 10 May 2023 17:17:45 ====

  == Rui.Zhang1@unisoc.com On 2023-05-10T09:16:46Z (json) ==
问题解决，该问题关闭，若有其他问题请另提cq

==== State: Opened by: waterworld on 10 May 2023 17:00:43 ====

好的，谢谢。

==== State: NeedInfo by: cmadmin on 10 May 2023 16:59:37 ====

  == Rui.Zhang1@unisoc.com On 2023-05-10T08:59:21Z (json) ==
拍照正常就没问题，该修改不会影响其他界面的
(2023-05-10T08:44:25Z)

==== State: Opened by: waterworld on 10 May 2023 16:44:06 ====

看了下，拍出来的是正常的，换了其他的分辨率也试了，也是正常的

==== State: NeedInfo by: cmadmin on 10 May 2023 16:35:08 ====

  == Rui.Zhang1@unisoc.com On 2023-05-10T08:33:27Z (json) ==
拍照之后的图库照片正常吗？
(2023-05-10T08:03:57Z)

==== State: Opened by: waterworld on 10 May 2023 16:02:14 ====

对的，因为上个修改的话，就好一半，所以就把offset偏移的往上拉。
那这个修改的就只影响现在的这个回显对吧，对其他的界面或者功能应该没影响吧？

==== State: NeedInfo by: cmadmin on 10 May 2023 16:00:24 ====

  == Rui.Zhang1@unisoc.com On 2023-05-10T07:57:13Z (json) ==
(In reply to waterworld from comment #3)
这样修改之后回显没有问题了吗？
(2023-05-10T06:49:45Z)

==== State: Opened by: waterworld on 10 May 2023 14:49:27 ====

我修改了这个，让offset增大，应该是可以的吧？
	offset = (dst_uv - (dc_mem_start + dc_mem_size - dc_review_size) + 1024)*2;


==== State: Opened by: waterworld on 10 May 2023 14:39:58 ====

你好：
根据下面的修改，验证了下，下半方的视频正常了，上半还是有问题，视频上传到了FTP上了


==== State: NeedInfo by: cmadmin on 10 May 2023 13:36:34 ====

  == Rui.Zhang1@unisoc.com On 20230510T05:36:17 (xml) ==
dear cus:

从视频看，是拍照后的回显界面花屏？
若是，请按照下列修改进行验证：
dcamera_app.c
_DCAMERA_DoSnapShotJpgEnc
	uint32               mem_size = 0;
	uint32               is_frame_enc = 0;
	DCAMERA_CAPTURE_DATE_T  date_mark = {0};
	++++uint32 dc_mem_start = 0; 
	++++uint32 dc_mem_size  = 0;
	++++uint32 dc_review_size = 0;
	++++uint32 offset = 0;
	dc_size.w = s_dc_info_ptr->isp_frame.width;
	dc_size.h = s_dc_info_ptr->isp_frame.height;
                ISP_ServiceRegister (ISP_SERVICE_CALLBACK_ENCODE, SCI_NULL);
		ISP_ServiceSetScaleParam (&isp_scale_param);
		ISP_ServiceStartScale();
		++++dc_mem_start = (uint32)DCAMERA_CaptureGetStartBuf(&dc_mem_size);
		++++dc_review_size = 128*160*2;
	       ++++ if(dst_uv + s_dc_info_ptr->jpeg_rect.w >=  dc_mem_start + dc_mem_size - dc_review_size )
	       ++++ {   
	          ++++  offset = dst_uv - (dc_mem_start + dc_mem_size - dc_review_size) + 1024;
	           ++++ dst_uv   -= offset;
	          ++++  dst_y    -= offset; 
	          ++++  SCI_TRACE_LOW("_DCAMERA_DoSnapShotJpgEnc memory overlay! dst_y:0x%x dst_uv:0x%x, offset %u",
	                  ++++          dst_y, dst_uv, offset);
	    ++++    }
		for (i = 0; i < s_dc_info_ptr->jpeg_rect.h; i++) {
			SCI_MEMCPY ( (void *) dst_uv, (void *) src_uv, s_dc_info_ptr->jpeg_rect.w);
			src_uv -= s_dc_info_ptr->jpeg_rect.w;
			dst_uv -= s_dc_info_ptr->jpeg_rect.w;
			SCI_MEMCPY ( (void *) dst_y, (void *) src_y, s_dc_info_ptr->jpeg_rect.w);
			src_y  -= s_dc_info_ptr->jpeg_rect.w;
			dst_y  -= s_dc_info_ptr->jpeg_rect.w;
		}
_DCAMERA_SetPreviewZoom
	DCAMERA_SIZE_T lcd_size={0};
	DCAMERA_RECT_T cap_trim_rect = {0};
	++++DCAMERA_SIZE_T dc_dst_size = {0};
if (_DCAMERA_NeedChangeDisplayMode()) {
		lcd_size.w = isp_preview_param_ptr->lcd_rect.w;
		lcd_size.h = isp_preview_param_ptr->lcd_rect.h;
		cap_trim_rect.w = width_src;
		cap_trim_rect.h = height_src;
		++++dc_dst_size.w = s_dc_info_ptr->jpeg_rect.w;
		++++dc_dst_size.h = s_dc_info_ptr->jpeg_rect.h; 
		++++#ifndef MAINLCD_SIZE_128X160
		_DCAMERA_GetCaptureTrimRect (isp_preview_param_ptr->disp_rotation,
									&lcd_size,
									&cap_trim_rect);
		++++#else
		++++_DCAMERA_GetCaptureTrimRect (isp_preview_param_ptr->disp_rotation,
			++++						&dc_dst_size,
			++++						&cap_trim_rect);
		++++#endif
		trim_rect.x = (uint32)cap_trim_rect.x;
		trim_rect.y = (uint32)cap_trim_rect.y;
		trim_rect.w = (uint32)cap_trim_rect.w;
		trim_rect.h = (uint32)cap_trim_rect.h;
	}
(20230510T05:18:39)

==== State: Opened by: cmadmin on 10 May 2023 13:17:51 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167800|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]场测 GPS 在信号差定位不更新|Dear sprd: 
   客户反馈场测GPS在信号差时， AGPS 好像没有起到作用。定位位置一直不变动，要等到GPS 信号很好定位位置才变动。 ylog稍候上传到附件，麻烦贵司帮忙看一下,感谢.|
==== State: Opened by: cmadmin on 10 May 2023 11:09:09 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167689|[UMS9230][Waterworld][A567-V3-A13][13741][CEBU-智能手机]T卡能否支持作为内部存储和便携式存储|hi sprd：
    这边客户要求T卡作为内部存储和便携式存储，软件上是否能够支持|
==== State: Opened by: cmadmin on 10 May 2023 09:54:36 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167669|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Audio resume is not working[CD_TASK5862]
音频恢复不起作用
播放MP3同时打开收音机，然后再次回到播放MP3会重复播放同一秒音乐|复现步骤：
1.打开音乐播放器播放音乐
2.退出音乐播放器，打开FM
3.调频
4.返回音乐播放器
结果：
音乐一直卡在同一秒。（概率复现），暂停再重新播放可以正常播放
期望：
正常播放

LOG和视频见附件|
==== State: NeedInfo by: cmadmin on 10 May 2023 22:15:58 ====

  == Lei.Qi@unisoc.com On 20230510T14:15:21 (xml) ==
客户您好，
   目前看播放流程挺正常的，暂未找到问题点。
   上传的music123.MP3实际是aac格式的。为排除 audiostreaming修改的影响。请帮忙还原audioservice.a，和使用正确的MP3文件测试。测试时请保证sd卡内只有一个音乐文件。
谢谢！
(20230510T10:36:56)

==== State: Opened by: waterworld on 10 May 2023 18:34:10 ====

你好，漆工：
如微信沟通，打开log后播放mp3文件，反复切换音乐播放器与收音机，log和视频如附件

==== State: Opened by: waterworld on 10 May 2023 14:24:32 ====

你好，展锐的同事：
是的，该版本合入了audio streaming，回退audioservice.a 后还是存在该现象，但是出现的概率下降很多。
我司有一个问题，该问题会不会是修改函数MMIMP3_SearchAudioFilesInDefaultFolder（ ）中MMIFMM_SearchFileInPathNoSort（ ）导致的？
为了实现客户的全盘搜索需求，我司将MMIFMM_SearchFileInPathNoSort（）的路径置空，之后为了解决all songs中文件重复两次的问题，又最后的msg_id由next_msg_id 改成 end_msg_id。
由于回退了audioservice.a后问题较难复现，我司正在抓取LOG，抓到异常会第一时间上传。麻烦先分析一下会不会是文件搜索导致的卡顿问题？

==== State: NeedInfo by: cmadmin on 10 May 2023 10:28:03 ====

  == Lei.Qi@unisoc.com On 20230510T02:27:29 (xml) ==
客户您好，
   贵司该版本是不是合入了audio streaming播放的？ 可能是这边修改引入，请先尝试回退audioservice.a 看是否还会复现。
谢谢！
(20230510T01:50:53)

==== State: Submitted by: waterworld on 10 May 2023 09:48:10 ====

 == Headline Changed from == 
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Audio resume is not working
音频恢复不起作用
播放MP3同时打开收音机，然后再次回到播放MP3会重复播放同一秒音乐
To
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Audio resume is not working[CD_TASK5862]
音频恢复不起作用
播放MP3同时打开收音机，然后再次回到播放MP3会重复播放同一秒音乐

|
# SPCSS01167632|[UMS512][Waterworld][YK693][13078][Other]上次CQ号为SPCSS01162862，询问一些代码问题，
步骤：

现象：

分析：
|
==== State: Opened by: waterworld on 10 May 2023 20:05:51 ====

Dear sprd :
第3点补充：
3.发现这个arg是由
cmr_int cmr_sns_thread_proc(struct cmr_msg *message, void *p_data)
...
    case CMR_SENSOR_EVT_IOCTL: {
        struct cmr_sns_ioctl_param *p_ioctl_param =
            (struct cmr_sns_ioctl_param *)message->data;
        camera_id = (cmr_u32)message->sub_msg_type;
        sensor_set_cxt_common(&handle->sensor_cxt[camera_id]);
        cmr_sns_ioctl(&handle->sensor_cxt[camera_id], p_ioctl_param->cmd,
                      p_ioctl_param->arg);//这里传过来的
    } break;
...
这里传过来的。

补充：
1.struct cmr_sns_ioctl_param *p_ioctl_param =
            (struct cmr_sns_ioctl_param *)message->data;
2.p_ioctl_param->arg

所以arg是message中的data成员中的
message->data->arg

您前面说message 是用来缓存其他线程发送过来的消息，这我就不知道该如何分析了，是哪里传过来呢？

==== State: Opened by: waterworld on 10 May 2023 19:45:53 ====

Dear sprd :
您好！
1.camera文件中
static cmr_int bf20a6_drv_access_val(cmr_handle handle, cmr_uint param)函数中，
没有走进
	case SENSOR_VAL_TYPE_GET_BV:
	    ret = bf20a6_drv_get_brightness(handle, param_ptr->pval);
	    break;
2.
追溯代码发现是由
sprd\vendor\sprd\modules\libcamera\oem2v6\src\cmr_sensor.c中
cmr_int cmr_sns_ioctl(struct sensor_drv_context *sensor_cxt, cmr_uint cmd,cmr_uint arg)
...
    if (PNULL != sns_ops->ext_ops[sns_cmd].ops) {
        ret = sns_ops->ext_ops[sns_cmd].ops(sensor_cxt->sns_ic_drv_handle, arg);
    }
...
的arg参数决定的

3.发现这个arg是由
cmr_int cmr_sns_thread_proc(struct cmr_msg *message, void *p_data)
...
    case CMR_SENSOR_EVT_IOCTL: {
        struct cmr_sns_ioctl_param *p_ioctl_param =
            (struct cmr_sns_ioctl_param *)message->data;
        camera_id = (cmr_u32)message->sub_msg_type;
        sensor_set_cxt_common(&handle->sensor_cxt[camera_id]);
        cmr_sns_ioctl(&handle->sensor_cxt[camera_id], p_ioctl_param->cmd,
                      p_ioctl_param->arg);//这里传过来的
    } break;
...
这里传过来的。
4. 接下来就不知道怎么分析了，麻烦您指点一下，非常感谢。

==== State: NeedInfo by: cmadmin on 10 May 2023 19:12:07 ====

  == Nian.Liu1@unisoc.com On 2023-05-10T11:11:48Z (json) ==
Dear Cus
  message可以理解为消息，camera模块里面创建线程的时候都会创建一个对应的消息队列来缓存其他线程发送过来的消息。消息里面包含消息类型，发送的数据。线程接受到消息之后根据消息类型执行不同的命令
(2023-05-10T10:57:03Z)

==== State: Opened by: waterworld on 10 May 2023 18:56:43 ====

Dear sprd :
您好！ 
sprd\vendor\sprd\modules\libcamera\oem2v6\src\cmr_sensor.c中
cmr_int cmr_sns_thread_proc(struct cmr_msg *message, void *p_data)中的message，
这个参数怎么理解？指向的是什么信息？

若您有时间，望今天回复下，谢谢！

==== State: NeedInfo by: cmadmin on 10 May 2023 18:39:08 ====

  == Nian.Liu1@unisoc.com On 20230510T10:38:36 (xml) ==
之前回复的这个有问题cov.id=0是对的

配置如下
++TARGET_BOARD_COVERED_SENSOR_SUPPORT:= true

------ #BOKEH feature
++TARGET_BOARD_BOKEH_MODE_SUPPORT := true
++PRODUCT_PROPERTY_OVERRIDES += \
++    persist.vendor.cam.fr.blur.version=1 \
++    persist.vendor.cam.ba.blur.version=1 \


PRODUCT_PROPERTY_OVERRIDES += \
++  persist.vendor.cam.blur.cov.id=2

==== State: NeedInfo by: cmadmin on 10 May 2023 14:03:37 ====

  == Nian.Liu1@unisoc.com On 2023-05-10T06:03:11Z (json) ==
(In reply to waterworld from comment #7)
设置成2前摄人像就要打开两个摄像头了
(2023-05-10T04:03:38Z)

==== State: Opened by: waterworld on 10 May 2023 12:00:15 ====

Dear sprd ：
您好！ 请尽快回复下此问题，thanks~

==== State: Opened by: waterworld on 10 May 2023 11:10:27 ====

Dear sprd :
您好，persist.vendor.cam.blur.cov.id  --  表示遮挡属性，若后摄配遮挡的话此属性需要配置为0

但是device/sprd/sharkl5Pro/yk691_ums5121h10/yk691_ums5121h10_Natv.mk中，
PRODUCT_PROPERTY_OVERRIDES += persist.vendor.cam.blur.cov.id=2
为什么要设为2呢？

==== State: NeedInfo by: cmadmin on 10 May 2023 10:48:22 ====

  == Nian.Liu1@unisoc.com On 20230510T02:47:27 (xml) ==
1. persist.vendor.cam.blur.cov.id 是什么属性呢？

   表示遮挡属性，若后摄配遮挡的话此属性需要配置为0

2. m_nPhyCameras 怎么理解呢？

   表示要打开几个物理camera,若上面属性配置为0的话，这里就要打开主摄+遮挡摄像头
(20230510T02:18:04)

==== State: Opened by: waterworld on 10 May 2023 10:17:24 ====

Dear sprd :
上午好！麻烦帮忙回复一下此问题，讲解下代码。
thanks~

==== State: Opened by: cmadmin on 10 May 2023 09:50:01 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 09 May 2023 23:38:38 ====

请问
1. persist.vendor.cam.blur.cov.id 是什么属性呢？
2. m_nPhyCameras 怎么理解呢？

能否请您讲解下SprdCamera3SinglePortrait::cameraDeviceOpen函数，不胜感激！！！

==== State: Submitted by: waterworld on 09 May 2023 23:33:38 ====

Dear sprd :
您好！ 向您请教一些hal层打开camera的逻辑代码的问题，
vendor/sprd/modules/libcamera/hal_common/multiCamera/SprdCamera3SinglePortrait.cpp
/*===========================================================================
 * FUNCTION   : cameraDeviceOpen
 *
 * DESCRIPTION: open a camera device with its ID
 *
 * PARAMETERS :
 *   @camera_id : camera ID
 *   @hw_device : ptr to struct storing camera hardware device info
 *
 * RETURN     : int32_t type of status
 *              NO_ERROR  -- success
 *              none-zero failure code
 *==========================================================================*/
int SprdCamera3SinglePortrait::cameraDeviceOpen(
    __unused int camera_id, struct hw_device_t **hw_device) {
    int rc = NO_ERROR;
    uint32_t phyId = 0;
    uint8_t master_id = 0;

    char prop[PROPERTY_VALUE_MAX] = {
        0,
    };
    property_get("persist.vendor.cam.blur.cov.id", prop, "3");

    if (camera_id == SPRD_PORTRAIT_SINGLE_ID) {
        mCameraId = CAM_BLUR_MAIN_ID_2;
        master_id = FRONT_MASTER_ID;
        m_VirtualCamera.id = CAM_BLUR_MAIN_ID_2;
        if (atoi(prop) == 1 || atoi(prop) == 2) {
            m_nPhyCameras = 2;
        } else {
            m_nPhyCameras = 1;
        }
    } else {
        mCameraId = CAM_BLUR_MAIN_ID;
        master_id = BACK_MASTER_ID;
        m_VirtualCamera.id = CAM_BLUR_MAIN_ID;
        if (atoi(prop) == 0 || atoi(prop) == 2) {
            m_nPhyCameras = 2;
        } else {
            m_nPhyCameras = 1;
        }
    }
    hw_device_t *hw_dev[m_nPhyCameras];
    setupPhysicalCameras();

    // Open all physical cameras
    for (uint32_t i = 0; i < m_nPhyCameras; i++) {
        phyId = m_pPhyCamera[i].id;
        HAL_LOGI("open %d", phyId);
        SprdCamera3HWI *hw = new SprdCamera3HWI((uint32_t)phyId);
        if (!hw) {
            HAL_LOGE("Allocation of hardware interface failed");
            return NO_MEMORY;
        }
        hw_dev[i] = NULL;

        hw->setMultiCameraMode(MODE_BLUR);
        hw->setMasterId(master_id);
        rc = hw->openCamera(&hw_dev[i]);
        if (rc != NO_ERROR) {
            HAL_LOGE("failed, camera id:%d", phyId);
            delete hw;
            closeCameraDevice();
            return rc;
        }

        m_pPhyCamera[i].dev = reinterpret_cast<camera3_device_t *>(hw_dev[i]);
        m_pPhyCamera[i].hwi = hw;
    }

    m_VirtualCamera.dev.common.tag = HARDWARE_DEVICE_TAG;
    m_VirtualCamera.dev.common.version = CAMERA_DEVICE_API_VERSION_3_2;
    m_VirtualCamera.dev.common.close = close_camera_device;
    m_VirtualCamera.dev.ops = &mCameraCaptureOps;
    m_VirtualCamera.dev.priv = (void *)&m_VirtualCamera;
    *hw_device = &m_VirtualCamera.dev.common;
    mCaptureThread->loadBlurApi();

    HAL_LOGI("X");
    return rc;
}
|
# SPCSS01167417|[UMS9230][Waterworld][FS301-Hisense][13052][Other]你好，请问外置K类功放 AW87519如何配置 ？我这边配置，出现无声的现象。麻烦帮忙看下，附件是驱动代码，Dts，以及播放视频时无声的LOG等。
步骤：配置 AW87519

现象：

分析：
|
==== State: Opened by: waterworld on 11 May 2023 09:19:59 ====

你好，今天有时间吗？麻烦帮忙看下，谢谢了。现在的状态是spk的时候没有声音，然后看了LOG是因为 没有触发 hook_general_spk 这个

==== State: Opened by: waterworld on 10 May 2023 22:53:13 ====

你好我把对应的xml文件也上传了。。麻烦明天帮忙优先处理下，谢谢。

==== State: Opened by: waterworld on 10 May 2023 17:20:23 ====

你好，如沟通无声时的 tinymix ，和接入耳机后拔出有声的  tinymix 值以上传帮忙分析下。非常感谢

==== State: Opened by: waterworld on 10 May 2023 16:45:35 ====

你好，我自己又修改了一下。现在的状态是开机之间播视频喇叭是没有声音的，但是接入耳机后再把耳机拔出来，喇叭就又声音了。附件是LOG，帮忙一起分析下，非常感谢

==== State: NeedInfo by: cmadmin on 10 May 2023 15:20:40 ====

  == Emily.Wang@unisoc.com On 20230510T07:18:47 (xml) ==
dear customer,
  从贵司提供的Log看，通路打开正常，需要确认以下信息：
1.请提供无声的tinymix信息  dump信息
2.请测试耳机/听筒播放是否正常
3.从贵司的Ylog看，贵司开启的是CONFIG_SND_SOC_AW87XXX,请确认该信息
4.dts文件中看起来配置的信息注释掉了，可是通路显示正确，还请确认dts文件的修改（pa挂在iic总线上的修改也没见到）
sound_vbc_v4_sprd_codec {
	status = "okay";
	
	/*External_Audio_Start
	sprd,spk-ext-pa-info = <0 0 2 0>;
	//sprd,spk-ext-pa-gpio = <&ap_gpio 129 0>;
	External_Audio_End*/
};

dump命令:
adb root
adb shell
setenforce 0
setprop af.media.audiofw.devices.dump 0xffffff
setprop af.media.audiofw.dump 0xffffff
echo set_dump_data_switch=0x0fff > /data/vendor/local/media/mmi.audio.ctrl
echo set_dump_data_path=/data/vendor/local/media/ > /data/vendor/local/media/mmi.audio.ctrl
echo vbc_pcm_dump=vbc_dac0 > /data/vendor/local/media/mmi.audio.ctrl
抓取数据的方法是，先输入上述命令，然后复现问题，复现后数据自动抓取并存放在/data/vendor/local/media目录，上传该目录, 谢谢。
(20230510T01:31:37)

==== State: Opened by: waterworld on 10 May 2023 09:30:07 ====

你好，按照文档配置的，还是不行。能帮忙看下吗？附件修改后的文件，和YLOG

==== State: NeedInfo by: cmadmin on 09 May 2023 17:49:15 ====

  == Emily.Wang@unisoc.com On 2023-05-09T09:48:58Z (json) ==
dear customer，
   请参考DCC101422第5章配置，若有问题请提供修改前后的文件以及对应的Ylog，谢谢。

https://unisupport.unisoc.com/file/index?fileid=101422
(2023-05-09T09:31:51Z)

==== State: Opened by: cmadmin on 09 May 2023 17:28:18 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167414|[UMS9117-L][Waterworld][FF603][11886][手机]APP语音呼叫手表，手表接听后通话一会就绿屏死机了,附件是log，和对应的axf等文件
步骤：

现象：

分析：
|
==== State: Opened by: cmadmin on 10 May 2023 14:48:30 ====

  == Zhebin.Feng@unisoc.com On 20230510T06:47:01 (xml) ==

消息队列满了，请系统组看看这个问题

TXAS_SaveMainReg(
  ?,
    cur_lr = 0x402E2000,
    cur_pc = 0x3F)
TXAS_SystemAssert(
  ?,
    file = 0x810BC124,
    line = 828,
    assert_info_ptr = 0x0)
  assert_mode = 1
  cur_sp = 2191933836
  cur_lr = 2165056877
  cur_pc = 2169298208
SCI_SendSignal(
    signal_ptr = 0x82DD99C8,
  ?)
  status = 11
  err_str = (65, 83, 83, 69, 82, 84, 58, 32, 69, 114, 114, 111, 114, 32, 48, 120, 98, 44, 84, 104, 101, 32, 113, 117, 101, 117, 101, 32, 119, 97, 115, 32, 102, 117, 108, 108, 0, 0, 0, 0, 0, 0, 0, 0, 72, 199, 237, 130, 72, 199, 237, 1
os_mp_kick(asm)
____add_f(asm)
ahpl_mpq_queue_data(asm)
service_on_audio_data(asm)
rtc_user_check_audio_stream_queued_packets(asm)
__rcv_audio_data(asm)
handle_PAudioData_v2_packet(asm)
channel_handle_rtn_packet(asm)
__channel_on_data(asm)
__iofd_read_data(asm)
os_mp_dispatch(asm)
os_poll_dispatch(asm)
__mp_queue_poll_loop(asm)
mpq_thread_entry(asm)
k_os_thread_entry(asm)
ThreadEntry(

==== State: Opened by: cmadmin on 10 May 2023 09:44:08 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167407|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][遵义6部][HMD]设置壁纸后一直处于等待弹框界面
步骤：
MEN->settings->display->Wallpaper settings->More pictures->选择一张加载失败的图片

现象：
一直处于等待弹框界面

分析：
提供了一份复现视频和LOG
|
==== State: NeedInfo by: cmadmin on 10 May 2023 14:21:21 ====

  == Wenhui.Li@unisoc.com On 2023-05-10T06:17:56Z (json) ==
hi customer:
 目前log信息不足，可以通过模拟器跟踪代码设置流程
 正常的设置流程：

  MMIAPIIDLE_SetWallpaper-->AsynGetFrameCallbackFunc-->
  --HandleAnimGetDataCnf-->IdleWin_HandleMsg-->MMIAPIFMM_CloseWaitSetWallpaper


 请在相应的函数调用流程内添加log，自行查看为什么没有调用到MMIAPIFMM_CloseWaitSetWallpaper
(2023-05-10T01:39:01Z)

==== State: Opened by: cmadmin on 10 May 2023 09:39:51 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167394|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]编辑短信，选择收件人超过30以上不稳定绿屏死机【CD-10299】|1 . 编辑短信-点击send-点击type a number or number；手动输入10个号码后，界面收件人右边显示+9，再从下方选择联系人到收件人显示为+30时，此时再选择多一个联系人后手机绿屏死机；相关log同步上传到了FTP上。|
==== State: Closed by: waterworld on 10 May 2023 17:16:39 ====

好的 已经没有出现了 谢谢

==== State: NeedInfo by: cmadmin on 10 May 2023 16:02:43 ====

  == Zhebin.Feng@unisoc.com On 20230510T08:01:04 (xml) ==
好的，如果没问题请直接关闭此CQ
(20230510T06:15:24)

==== State: Opened by: waterworld on 10 May 2023 14:14:50 ====

 == CustomerPhone Changed from == 
17689487337
To
18359199264
 == Contacter Changed from == 
郑炜灵
To
李为
 == Headline Changed from == 
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]编辑短信，选择收件人超过30以上不稳定绿屏死机
To
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]编辑短信，选择收件人超过30以上不稳定绿屏死机【CD-10299】


==== State: Opened by: waterworld on 10 May 2023 14:14:10 ====

你好:
  好的 我这边检查确认下

==== State: NeedInfo by: cmadmin on 10 May 2023 14:00:48 ====

  == Zhebin.Feng@unisoc.com On 20230510T06:00:07 (xml) ==
请检查函数GetNumberFromPb，

1、	wchar num1[MMISMS_NUMBER_MAX_LEN]={0};
      是否应该为：
          wchar num1[MMISMS_NUMBER_MAX_LEN + 2]={0};


2、
					for(re=0;re < rt;re++)
						{
							MMIAPICOM_StrToWstr(tele_num1[re],num1);
							num_sum[re].wstr_ptr = num1;
							num_sum[re].wstr_len =strlen((char*)tele_num);
							if(MMIAPICOM_CompareTwoWstr(ptr[i].wstr,ptr[i].wstr_len,num_sum[re].wstr_ptr,num_sum[re].wstr_len)==0)
								{
									/*SCI_MEMSET(&ptr[i].wstr, 0, sizeof(wchar));
									SCI_MEMSET(&ptr[i].wstr_len, 0, sizeof(uint16));*/
									SameNameSetFlagMSG(FALSE);
								}
						}
for循环中rt的值为多少
其中的tele_num1数组为20，是否正确？
怀疑是num_sum[re].wstr_ptr的下标越界了
(20230510T02:57:55)

==== State: Opened by: waterworld on 10 May 2023 10:56:46 ====

你好:
  代码已上传FTP

==== State: NeedInfo by: cmadmin on 10 May 2023 10:34:14 ====

  == Zhebin.Feng@unisoc.com On 2023-05-10T02:30:57Z (json) ==
Dear customer：
  死机原因是指针异常导致的，HandleEditSmsWinMsg此函数代码是否修改过？请提供一下代码及问题视频。
(2023-05-10T02:03:51Z)

==== State: Opened by: cmadmin on 10 May 2023 10:06:40 ====

  == Zhebin.Feng@unisoc.com On 20230510T02:03:51 (xml) ==
MMIAPICOM_Wstrncmp(
    string1 = 0x81ABE8D4 -> 49,
    string2 = 0x36343936 -> 0,
    count = 7)
MMIAPICOM_CompareTwoWstrExt(
  ?,
    wstr1_len = 8,
  ?,
    wstr2_len = 12594,
    str_flag = 1)
  str1 = 0x0
  str2 = 0x0
MMIAPICOM_CompareTwoWstr(
  ?,
  ?,
  ?,
  ?)
  return = 1
GetNumberFromPb(
    dest_info = 0x82B7E878,
    handle = 65563,
  ?)
  l = 1
  count = 21
  result = 1
  number = (number_len = 9, npi_ton = 1, number = (65, 83, 67, 96, 84, 150, 100, 18, 244, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0))
  number1 = (number_len = 0, npi_ton = 0, number = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0))
  num1 = (49, 52, 212, 232, 171, 129, 8, 0, 49, 53, 53, 53, 54, 48, 54, 52, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
  ptr = 0x81ABE8D4
  i = 0
  edit_count = 10
  str = (49, 50, 52, 54, 51, 52, 54, 52, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
  name = (wstr_ptr = 0x83E3D4B0, wstr_len = 0)
  wname = (64244, 33431, 4, 0, 63976, 33431, 21, 0, 60715, 33032, 37124, 52, 16, 0, 55, 4128, 0, 0, 1, 0, 1509, 34822, 0, 0, 23335, 34825, 0, 0, 22827, 34825)
HandleEditSmsWinMsg(
    win_id = 458847,
    msg_id = 1280,
    param = 0x0001001B)
  recode = 1
  edit_string = (wstr_ptr = 0x0, wstr_len = 0)
  child_width = (add_data = 0, type = GUIFORM_CHILD_WIDTH_AUTO)
  child_height = (add_data = 0, type = GUIFORM_CHILD_HEIGHT_AUTO)
  v_space = 20
  windata_p = 0x82B7E138
  signature_wstr = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
MMK_RunWinProc(

==== State: Opened by: cmadmin on 10 May 2023 10:02:46 ====

  == Zhebin.Feng@unisoc.com On 2023-05-10T02:02:16Z (json) ==
MMIAPICOM_Wstrncmp(string1 = 0x81ABE8D4, string2 = 0x36343936, count = 7)
MMIAPICOM_CompareTwoWstrExt(?, wstr1_len = 8, ?, wstr2_len = 12594, str_flag = 1)
MMIAPICOM_CompareTwoWstr(?, ?, ?, ?)
GetNumberFromPb(dest_info = 0x82B7E878, handle = 65563, ?)
HandleEditSmsWinMsg(win_id = 458847, msg_id = 1280, param = 0x0001001B)
MMK_RunWinProc(?, ?, ?)
MMK_DispatchToHandle(handle = 54198288, msg_id = 1280, param_ptr = 0x0001001B)
MMK_SendMsg(msg_id = 1280, param_ptr = 0x0001001B)
HandleEntryListForExWinMsg1(win_id = 54984729, ?, ?)
MMK_RunWinProc(?, ?, ?)
CTRLSYS_DispatchToHandle(handle = 55181343, msg_id = 57373, param_ptr = 0x8297FC78)
MMK_DispatchToHandle(handle = 55181343, msg_id = 57373, param_ptr = 0x8297FC78)
MMK_SendMsg(msg_id = 57373, param_ptr = 0x8297FC78)
CTRLMSG_SendNotifyEx(?, code = 57373, notify_ptr = 0x8297FC78)
ListCheckHandleOK(list_ctrl_ptr = 0x83F36A30)
ListHandleKeyOK(list_ctrl_ptr = 0x83F36A30, msg_id = 64027, is_need_notify = 0x8297FCF4)
ListCtrlHandleMsg(?, msg_id = 64027, ?)
IGUICTRL_HandleEvent(inline)
MMK_RunCtrlProc(?, ?, ?)
MMK_DefaultProcessWinMsg(win_handle = 54984729, msg_id = 64027, param = 0x8297FD98)
MMK_DispatchToHandle(handle = 54984729, msg_id = 64027, param_ptr = 0x8297FD98)
MMK_DispMsgToWin(msg_id = 64027, ?)
HandleMSGKbd(?, ?)
MMK_IsNeedKbClkNotify(inline)
MMK_DispatchMSGKbd(?)
thread_entry_P_APP(?, ?)
ThreadEntry(?)
tx_thread_shell_entry()

==== State: Opened by: waterworld on 09 May 2023 19:09:33 ====

你好：
axf和map文件已上传到FTP.

==== State: NeedInfo by: cmadmin on 09 May 2023 19:03:49 ====

  == Zhebin.Feng@unisoc.com On 20230509T11:03:18 (xml) ==
是编译出来的axf文件

==== State: NeedInfo by: cmadmin on 09 May 2023 18:57:46 ====

  == Zhebin.Feng@unisoc.com On 20230509T10:56:46 (xml) ==
请提供一下elf和map文件
(20230509T09:31:54)

==== State: Opened by: cmadmin on 09 May 2023 17:28:39 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167390|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][253396]SIM OTA operations failed to get delivered on both SIM cards in L+L scenario
步骤：
1) Insert 4G JIO SIM Cards in SUB 1 and SUB 2 .
2) Power ON the Device 
3) Let the Device registered in LTE network and with IMS Registered.
4) Perform SIM OTA operation.
5) Repete with Sub1: Jio sim, Sub2: Jio SIM and data on SUb1.
6) Check the ota operations are getting fail OR pass.
现象：
SIM OTA operations failed to get delivered on both SIM cards in L+L scenario
期望：
SIM OTA operations should get delivered on both SIM cards in L+L scenario's.

您好，海外反馈双卡SIM OTA失败，每份log中搜"RIL_STK"只有看到如下信息，没看到其他信息
RIL_STK_BIP: [stk] receiveDataThread mRecevieData != null , need wait...
log已上传附件，还请帮忙看下，谢谢

|
==== State: Opened by: cmadmin on 10 May 2023 15:44:32 ====

  == Lin.Tang1@unisoc.com On 20230510T07:43:46 (xml) ==
需要请ril协助给客户修改，谢谢！

\ram fail sim 2\ylog\ap\000-0505_121408--0505_123437\0-android.log 	
	
C0004AA  05-05 12:11:40.234 18474 18485 F libc    : FORTIFY: FD_ISSET: file descriptor -1 < 0
C0004AB  05-05 12:11:40.237 18474 18485 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 18485 (engpc), pid 18474 (engpc)
C0004CA  05-05 12:11:40.745  3696  3696 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
C0004CB  05-05 12:11:40.746  3696  3696 F DEBUG   : Native Crash TIME: 94733926
C0004CC  05-05 12:11:40.746  3696  3696 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
C0004CD  05-05 12:11:40.746  3696  3696 F DEBUG   : Build fingerprint: 'LYF/Smartphone/LYF:12/SP1A.210812.016/DB.001.01.020:userdebug/release-keys'
C0004CE  05-05 12:11:40.746  3696  3696 F DEBUG   : Revision: '0'
C0004CF  05-05 12:11:40.746  3696  3696 F DEBUG   : ABI: 'arm'
C0004D0  05-05 12:11:40.746  3696  3696 F DEBUG   : Timestamp: 2023-05-05 12:11:40.435445543+0530
C0004D1  05-05 12:11:40.746  3696  3696 F DEBUG   : Process uptime: 0s
C0004D2  05-05 12:11:40.746  3696  3696 F DEBUG   : Cmdline: /vendor/bin/engpc
C0004D3  05-05 12:11:40.746  3696  3696 F DEBUG   : pid: 18474, tid: 18485, name: engpc  >>> /vendor/bin/engpc <<<
C0004D4  05-05 12:11:40.746  3696  3696 F DEBUG   : uid: 0
C0004D5  05-05 12:11:40.746  3696  3696 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------
C0004D6  05-05 12:11:40.746  3696  3696 F DEBUG   : Abort message: 'FORTIFY: FD_ISSET: file descriptor -1 < 0'
C0004D7  05-05 12:11:40.746  3696  3696 F DEBUG   :     r0  00000000  r1  00004835  r2  00000006  r3  b3d62ea8
C0004D8  05-05 12:11:40.747  3696  3696 F DEBUG   :     r4  b3d62ebc  r5  b3d62ea0  r6  0000482a  r7  0000016b
C0004D9  05-05 12:11:40.747  3696  3696 F DEBUG   :     r8  b3d62ea8  r9  b3d62eb8  r10 b3d62ed8  r11 b3d62ec8
C0004DA  05-05 12:11:40.747  3696  3696 F DEBUG   :     ip  00004835  sp  b3d62e78  lr  b4a7cf2d  pc  b4a7cf40
C0004DB  05-05 12:11:40.747  3696  3696 F DEBUG   : backtrace:
C0004DC  05-05 12:11:40.747  3696  3696 F DEBUG   :       #00 pc 00060f40  /apex/com.android.runtime/lib/bionic/libc.so (abort+172) (BuildId: e0b2975f201bfaf34d6bad8983beb8b7)
C0004DD  05-05 12:11:40.747  3696  3696 F DEBUG   :       #01 pc 000621ff  /apex/com.android.runtime/lib/bionic/libc.so (__fortify_fatal(char const*, ...)+26) (BuildId: e0b2975f201bfaf34d6bad8983beb8b7)
C0004DE  05-05 12:11:40.747  3696  3696 F DEBUG   :       #02 pc 0007de65  /apex/com.android.runtime/lib/bionic/libc.so (__FD_ISSET_chk+48) (BuildId: e0b2975f201bfaf34d6bad8983beb8b7)
C0004DF  05-05 12:11:40.747  3696  3696 F DEBUG   :       #03 pc 000086d9  /vendor/bin/engpc (CPort::internal_read(char*, int, int)+452) (BuildId: 5795a9c5430a7eefbcfdd96be8de3ecd)
C0004E0  05-05 12:11:40.747  3696  3696 F DEBUG   :       #04 pc 000084ed  /vendor/bin/engpc (CPort::read(char*, int, int)+36) (BuildId: 5795a9c5430a7eefbcfdd96be8de3ecd)
C0004E1  05-05 12:11:40.747  3696  3696 F DEBUG   :       #05 pc 0000ac17  /vendor/bin/engpc (CTrans::trans()+210) (BuildId: 5795a9c5430a7eefbcfdd96be8de3ecd)
C0004E2  05-05 12:11:40.747  3696  3696 F DEBUG   :       #06 pc 00007763  /vendor/bin/engpc (CChnlThread::threadMain(void*)+150) (BuildId: 5795a9c5430a7eefbcfdd96be8de3ecd)
C0004E3  05-05 12:11:40.748  3696  3696 F DEBUG   :       #07 pc 000a8ca7  /apex/com.android.runtime/lib/bionic/libc.so (__pthread_start(void*)+40) (BuildId: e0b2975f201bfaf34d6bad8983beb8b7)
C0004E4  05-05 12:11:40.748  3696  3696 F DEBUG   :       #08 pc 00061e85  /apex/com.android.runtime/lib/bionic/libc.so (__start_thread+30) (BuildId: e0b2975f201bfaf34d6bad8983beb8b7)

==== State: Opened by: waterworld on 10 May 2023 14:45:46 ====

您好，
海外反馈的问题不是指FOTA，是指SIM OTA，谢谢；
https://blog.csdn.net/gender123/article/details/123189820

==== State: Opened by: cmadmin on 10 May 2023 10:24:11 ====

  == Lin.Tang1@unisoc.com On 20230510T02:23:14 (xml) ==
请 OTA 模块首先协助客户排查问题，若与网络有关，也请继续流转确认，谢谢！

==== State: Opened by: cmadmin on 09 May 2023 17:48:56 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167380|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机]SC9863A1平台搭配PMUSC2721，检测充电器PMU芯片这个口VCHG经过100R电阻的电压会比主板上没经过这个100R电阻的电压小0.3-04V，不管有没有充电电流，都有这个压差是否正常。侯工在处理中，微信有初步咨询过|
正常ADC检测引脚不应该有这么大的漏电流才对，有没有办法通过软件配置处理，让这个压差不会出现的呢。
|
==== State: Opened by: waterworld on 10 May 2023 19:18:20 ====

那如果要把这个压差消除有什么方法的吗？有什么隐患的呢？还有其它PUM芯片UMP510G和SC2720这个VCHG端的压差是多少？麻烦也说下！！

==== State: Resolved by: cmadmin on 10 May 2023 16:21:03 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
RootCause:
Dear Cus：

(1)压差0.3-0.4V为正常现象；

(2)无法通过软件进行调整；

没有特别的文件说明，CQ答复即为官方答复。

以上请知悉。
谢谢。
Solution:
Dear Cus：

(1)压差0.3-0.4V为正常现象；

(2)无法通过软件进行调整；

没有特别的文件说明，CQ答复即为官方答复。

以上请知悉。
谢谢。

==== State: Opened by: cmadmin on 10 May 2023 16:21:01 ====

  == Wanxing.Hou@unisoc.com On 20230510T08:18:13 (xml) ==
Dear Cus：

(1)压差0.3-0.4V为正常现象；

(2)无法通过软件进行调整；

(3)如微信沟通，关于OVP的方案请另提CQ咨询；

没有特别的文件说明，CQ答复即为官方答复。

以上请知悉。
谢谢。

==== State: Opened by: waterworld on 10 May 2023 11:03:54 ====

SC2721G芯片R1（100ohm）两端存在压差，这个压差正常是多少的？麻烦释放下？还有有没有办法通过软件配置引脚来减少这个压差？需要怎么改才行有没有相关文档对这块的说明

==== State: Opened by: cmadmin on 09 May 2023 21:17:21 ====

  == Wanxing.Hou@unisoc.com On 20230509T13:17:08 (xml) ==
Dear Cus：

如沟通，该压差为正常现象。

(1)VCHG为SC2721G内充电模块的电源输入。插入充电器/USB线后，R1（100ohm）两端存在压差，所以芯片内部采集的VBUS电压与实际电压有压差，这里要特别注意。

具体电路上，PMU内部存在钳位电路，使得该脚存在一定的电流， 从而使得 R1上有一个压差。钳位电路是PMU芯片内部集成电路，不会对外释放。

以上请知悉。

谢谢。

==== State: Opened by: cmadmin on 09 May 2023 17:34:38 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167367|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][遵义6部][HMD]怎么通过 Log 工具去看当前驻网的频段信息
步骤：
怎么通过 Log 工具去看当前驻网的频段信息,
请帮忙解释下,谢谢

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 10:18:53 ====

  == Ruby.Xu@unisoc.com On 2023-05-10T02:18:02Z (json) ==

客户您好，

搜索trace我可以搜到如下：

0	50683-1	09:56:30.041	--	Time: 2332 LRRC:PAL:In SIB1 config msg, configure band=3, DL_earfcn=0x672, earfcn_bandControl=2,TAC = 0xf682, servingCellID = 0xa09b308,isWideBandMeas = 0,
1	153255-1	09:56:55.980	--	LRRC:PAL:In SIB1 config msg, configure band=3, DL_earfcn=0x672, earfcn_bandControl=2,TAC = 0xf682, servingCellID = 0xa09b308,isWideBandMeas = 0,
2	216164-1	09:57:18.120	--	LRRC:PAL:In SIB1 config msg, configure band=3, DL_earfcn=0x672, earfcn_bandControl=2,TAC = 0xf682, servingCellID = 0xa09b308,isWideBandMeas = 0,
(2023-05-10T02:05:09Z)

==== State: Opened by: waterworld on 10 May 2023 10:01:56 ====

按照你的描述我这边又抓取了开机加开关飞行模式的Log,但依旧无法搜索到前面描述的内容,请帮忙看下,抓取的Log如下:
开机加开关飞行模式Log.7z

==== State: NeedInfo by: cmadmin on 10 May 2023 09:42:43 ====

  == Ruby.Xu@unisoc.com On 2023-05-10T01:42:08Z (json) ==
客户您好，

要看驻网信息前提是log中需要包含驻网过程。您的log可能不包含，另外路径中未见上传log。
你可以开始抓取log后进出几次飞行，确保抓到开机驻网过程log。
(2023-05-09T09:59:11Z)

==== State: Opened by: waterworld on 09 May 2023 17:56:05 ====

有什么特殊要求或工具限制吗?我这边找了个log,搜索"configure band"信息为空,我打开的是arm log,文件名称:armlog_2023_ 5_ 8_12_38_ 0.log

==== State: NeedInfo by: cmadmin on 09 May 2023 17:34:23 ====

  == Tara.Wang@unisoc.com On 20230509T09:33:56 (xml) ==
通过modem log里的trace查看

搜索trace：“configure band”，搜索结果类似于下面这种形式：
LRRC:PAL:In SIB1 config msg, configure band=3, DL_earfcn=0x5b8, earfcn_bandControl=2,TAC = 0x1bbc, servingCellID = 0x4a006,isWideBandMeas = 0,isAllSymbolMeas 	LRRC
(20230509T09:30:48)

==== State: Opened by: cmadmin on 09 May 2023 17:07:13 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167360|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][9704]通话25分钟后出现死机现象
步骤：
1. Power ON the device and wait till it latches on network.

2. Connect device to LOGEL TOOL.

3. Initiate the Voice call from DUT.

4. Received at MT end.

5. After Approx. 25 minutes observe that device completely hang and crashed during ongoing call.
现象：
异常死机
分析：
|
==== State: Opened by: cmadmin on 10 May 2023 17:35:12 ====

  == May.Mei@unisoc.com On 2023-05-10T09:33:39Z (json) ==
客户modem版本：fm_base_20a_thin_modem_w22.50.4+DC临时修改

==== State: Opened by: cmadmin on 10 May 2023 17:07:58 ====

  == Bo.Zhou@unisoc.com On 20230510T09:07:33 (xml) ==
|SCI_DeleteThreadEx(
    |  ?)
    |  thread_block = 0x81761904  

task 销毁的时候做stack空间释放时发现 Static Byte Heap 链表已经被破坏。
81761904 | 268036.| 940032.|   56.   |    0.   |Static Byte Heap 

magic____|avail___|size____|fragments|suspended|name_|
81761904 | 268036.| 940032.|   56.   |    0.   |Static Byte Heap

   byte pool contents
   address           status     size
   82762114   in use     4148.
   82763148   in use     4148.
   8276417C   in use     4148.
   827651B0   in use     4544.
   82766370   in use     4544.
   82767530   in use     2224.
   82767DE0   in use  2106163.  /这块内存的链表结构已经被破坏
   00000009   in use       -1.
  

从task 对内存的使用情况来看， 这段内存是CHGMNG task 使用的。 
            T_P_CHNG_FREQ|82767554 82767D53|82767C40  13%|82767554 000000
                CHGMNG_SRV|82767E04 82768603|827683E8     |82767E04 000000

但是这段栈内存的 数据是乱的，都不是charge managment相关的内容。  而是协议栈 nas部分相关的 执行轨迹。  参考如下栈空间 执行片段的分析。，请NAS和协议同事看看为什么栈执行轨迹会跑到其他task 的栈空间。 
________address|________0________4________8________C_0123456789ABCDEF
   NSD:827683E0| 81F7D76C 810D0A01 00000002 00000000 l...............
   NSD:827683F0| 81F7D7BA 00000000 00000002 810D0A35 ............5...
   NSD:82768400| 00055C98 81F26C24 00000050 00061A80 .\..$l..P.......
   NSD:82768410| 81F26C24 80A3A0B3 00000000 00000000 $l..............
   NSD:82768420| 82767E04 00000000 00000196 80DD6E63 .~v.........cn..
   NSD:82768430| 00000000 80DFA971 82768470 0000004C ....q...p.v.L...
   NSD:82768440| 81F26C24 0000004A 00000098 8276859C $l..J.........v.
   NSD:82768450| 00000046 FFFFFFFF 81706840 82768488 F.......@hp...v.
   NSD:82768460| 00000000 82767E04 81F7D770 8111B5B3 .....~v.p.......
   NSD:82768470| 8276859C 82768488 00001024 818A8C1C ..v...v.$.......
   NSD:82768480| 00000000 810D9D29 00469104 4D474843 ....).....F.CHG



-000|MNPHONE_AGPS_SendOtdoaLocateEx(
    |    dual_sys = -2114981832,
    |    mn_otdoa_locate_req = (operation = 56, report_number = 240, measure_internal = 63, additional_info = 536870
    |
-001|tx_byte_pool_search_ex(
    |    pool_ptr = 0x81761904,
    |    memory_size = 85240)
    |  interrupt_save = 2180148260
    |  current_ptr = 0x1
    |  examine_blocks = 50
    |  alloc_ptr = 0x0
    |  min_size = 4294967295
    |  section_limit_space_addr = 0x50
    |  section_limit_space_size = 400000
    |  section_high_space_addr = 0x00055C98
    |  section_high_space_size = 2180148260
    |  search_cnt = 7
    |
 277|
-002|plm_plmn_sys_info_ind_hdlr(
    |    user_data_ptr = 0x5F746547)
    |  rr_ph_plmn_sys_info_ind_ptr = 0x80A3A0B3
    |  ph_mm_sys_info_ind_ptr = 0x0
    |  plmn_node = (plmn_id = (mcc2 = 8, mcc1 = 8, mnc3 = 4, mcc3 = 8, mnc2 = 6, mnc1 = 7), availability = 0, supp_a
    |  lai_value = (la_code = (255, 255), plmn_id = (mcc2 = 0, mcc1 = 4, mnc3 = 8, mcc3 = 6, mnc2 = 0, mnc1 = 7))
    |  temp_ptr = 0x4D474843
    |  is_need_sending_sys_info_to_mm = 136
    |  lte_no_voice_srv_plmn_ptr = 0x1024
    |  is_no_plmn_ind = 78
    |  no_need_to_send_sys_info_to_mm = 77
    |  previous_search_another_utran_flag = 95
    |  tmp_plmn = (plmn_id = (mcc2 = 0, mcc1 = 0, mnc3 = 0, mcc3 = 0, mnc2 = 0, mnc1 = 0), availability = 406, supp_
    |  tmp_period = 2188805532
    |
4719|
-003|NST:0x202C3034(asm)
    |
 ---|end of frame

==== State: Opened by: cmadmin on 10 May 2023 13:42:16 ====

  == zhongping.shi@unisoc.com On 20230510T05:40:51 (xml) ==
-000|__tx_abort_handler(asm)
    |
-001|SCI_DeleteThreadEx(
    |  ?)
    |  thread_block = 0x81761904
    |  task_ptr = 0x81761904
    |  err_str = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    |
2247|
 ---|end of frame

==== State: Opened by: waterworld on 09 May 2023 17:46:14 ====

你好：
对应的axf和map已经提供
谢谢

==== State: NeedInfo by: cmadmin on 09 May 2023 17:06:46 ====

  == zhongping.shi@unisoc.com On 2023-05-09T09:05:23Z (json) ==
尊敬的客户您好，
    死机问题请提供测试版本对应的axf及map文件用于分析，谢谢。
(2023-05-09T08:58:21Z)

==== State: Opened by: cmadmin on 09 May 2023 17:06:45 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 09 May 2023 17:03:54 ====

你好：
log和视频现象见附件
谢谢
|
# SPCSS01167353|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]平台是否支持SPC code|客户对SPC Code的描述如下：
SPC Code is the Service Programming code. It should be different for each device. SPC of a device is used as security code for backing up QCN, NVRAM access etc.
JIO has specific logic defined for SPC code. 
The logic what you can use for randomisation of SPC code is to make it as last 6 digit of IMEI x 2.. and consider only the units digit of the product
Ex :: if IMEI is xxxxx123456 then SPC will be 246802

SPC Code详情参考附件：C.S0016-0with3Gcover.pdf

请问平台是否支持SPC code功能，谢谢
|
==== State: NeedInfo by: cmadmin on 10 May 2023 18:02:27 ====

  == Joy.Shen@unisoc.com On 20230510T10:00:14 (xml) ==
客户您好

当前modem侧不支持SPC code。

谢谢~
(20230510T06:34:40)

==== State: Opened by: cmadmin on 09 May 2023 18:23:40 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167290|[SC9863A1][Waterworld][A567-SC9863A1-A13-][14008][CEBU-智能手机]TP配置问题|Dear sprd
   请问下，现在A13是否还可以在  bsp/kernel5.4/kernel5.4/drivers/input/touchscreen/ 路径下配置TP ？
   如果可以，麻烦帮忙看下附件里面的patch，是否正确
谢谢！|
==== State: Closed by: waterworld on 10 May 2023 16:19:05 ====

驱动是FAE给的，现在用平台自带的驱动，能够正常使用了，此CQ先关闭

==== State: NeedInfo by: cmadmin on 09 May 2023 17:34:01 ====

  == Bin.Sun1@unisoc.com On 20230509T09:32:45 (xml) ==
请问驱动是从哪里移植过来的
(20230509T08:20:03)
|
# SPCSS01167245|[UMS9230][Waterworld][A660][13828][CEBU-智能手机]OTP AWB 应用失败|Hi,
  目前FAE 在调试前摄GC32E1 效果,发现otp random 写入没有生效,查看otp random值 都是0
  正常情况下这个otp random值是不随效果参数里写的值改变的，每个模组的random值不一样,
  只要otp应用成功就可以分析图片看到random值的
  附件是问题的截图,麻烦帮忙分析下
  谢谢~|
==== State: Opened by: cmadmin on 10 May 2023 20:13:51 ====

  == Shiyi.Xie@unisoc.com On 2023-05-10T12:11:37Z (json) ==
Dear Customer:
    lsc适配层根据Shading version区分1.1还是1.2的map，可以注释掉以下代码试下

vendor/sprd/modules/libcamera_ext/ispalg/lsc/sprd/alsc3_0/lsc_sprd_adapt_v1.c


static cmr_int lsc_parser_otp(struct lsc_adv_init_param *lsc_param, struct lsc_sprd_ctrl_context *cxt)
{

if (otp_data_ptr != NULL && otp_data_len != 0) {
	if(otp_data_ptr[0] == 0x00){
	//lsc_otp_addr = otp_data_ptr + 1 + 16 + 5;
	//lsc_otp_len = otp_data_len - 1 - 16 - 5;
	//				}
      //else if(otp_data_ptr[0] == 0x01){
	lsc_otp_addr = otp_data_ptr + 1 + 16 + 8;
 	lsc_otp_len = otp_data_len - 1 - 16 - 8;
 					}


if(otp_data_ptr[0] == 0x00){
	//lsc_otp_gridx = (cmr_u32)otp_data_ptr[21];
	//lsc_otp_gridy = lsc_otp_gridx;
	//		}
 //else if(otp_data_ptr[0] == 0x01){
	lsc_otp_gridx = (cmr_u32)((otp_data_ptr[22] << 8) | otp_data_ptr[21]);
	lsc_otp_gridy = (cmr_u32)((otp_data_ptr[24] << 8) | otp_data_ptr[23]);
				}

==== State: Opened by: waterworld on 10 May 2023 17:57:24 ====

Hi,
  otp map里Shading version烧录的是00，lsc解析的时候还是按1.1的map去解析 导致读取lsc table错位了, -- 每太明白,
  是说按 V1. 0 方式解析导致的错位?

==== State: Opened by: cmadmin on 10 May 2023 17:38:59 ====

  == Shiyi.Xie@unisoc.com On 20230510T09:38:23 (xml) ==
Dear Customer：
    otp map里Shading version烧录的是00，lsc解析的时候还是按1.1的map去解析，导致读取lsc table错位了，最好还是按1.1的map重新烧录。1.1版本的otp map已上传。

==== State: Opened by: waterworld on 10 May 2023 16:22:04 ====

Hi,
  参考修改方案修改后的成像画面有问题,otp random 有数值 ,麻烦帮忙看看会是什么原因?附件为log和图片
  thanks~

==== State: Opened by: waterworld on 10 May 2023 15:55:00 ====

Hi,
  附件上传了V1.2 版本的map  OTP_V1.2.7z
  thanks~~

==== State: Opened by: waterworld on 10 May 2023 15:49:25 ====

Hi,
  目前按照实例修改,麻烦帮忙同步提供下V1.1版本 OTP map~

==== State: NeedInfo by: cmadmin on 10 May 2023 14:53:34 ====

  == Shiyi.Xie@unisoc.com On 2023-05-10T06:51:43Z (json) ==
Dear Customer：
    重新按1.1的map烧录，或者在驱动把map版本改为1.1再传给算法，或者尝试在AF、AWB、LSC、PDAF各个算法适配层兼容，以AF4.0适配层为例

    /vendor/sprd/modules/libcamera/ispalg/af/sprd/af4.x/af_sprd_adpt_v2.c

cmr_s32 af_sprd_otp_info_parser(struct afctrl_init_in * init_param)
{


 else if (module_info[4] == 1
           -  && (module_info[5] == 0 || module_info[5] == 1)
  	   +  && (module_info[5] == 0 || module_info[5] == 1|| module_info[5] == 2)
 	                   && module_info[0] == 0x53
  	                   && module_info[1] == 0x50
 	                   && module_info[2] == 0x52
                        && module_info[3] == 0x44)
             {
                - ISP_LOGV("af otp map v1.0 or v1.1");
                + ISP_LOGV("af otp map v1.0 or v1.1 or 1.2");
(2023-05-10T06:31:55Z)

==== State: Opened by: waterworld on 10 May 2023 11:16:38 ====

Hi,
  按照申请的map 烧录的,看otp 版本是 v1.2 ,在导通时有提CQ SPCSS01164908 请问下现在需要怎么解决呀~
  

==== State: Opened by: cmadmin on 10 May 2023 11:04:19 ====

  == Shiyi.Xie@unisoc.com On 20230510T03:03:20 (xml) ==
Dear Customer：
    烧录的otp map版本是1.2，otp解析失败了
M00D01D  05-10 01:59:04.057   633  3581 D general_otp_drv: 142, _general_otp_parse_map_version: otp first six bytes: 53 50 52 44 01 02


M012F0E  05-10 01:59:07.852   633  3843 E awb_adpt: 1116, _awb_parser_otp_info: awb otp map version error
M012F13  05-10 01:59:07.852   633  3843 E awb_adpt: 1137, _awb_parser_otp_info: awb_rdm_otp_data = 0x0, awb_rdm_otp_len = 0. Parser fail
M012F15  05-10 01:59:07.852   633  3843 E awb_adpt: 1154, _awb_parser_otp_info: awb_golden_otp_data = 0x0, awb_golden_otp_len = 0. Parser fail

==== State: Opened by: waterworld on 10 May 2023 10:30:35 ====

Hi,
  相关文件见附件0510_GC32E1.7z
  thanks~

==== State: NeedInfo by: cmadmin on 10 May 2023 09:42:55 ====

  == Shiyi.Xie@unisoc.com On 2023-05-10T01:42:00Z (json) ==
Dear Customer：
    请使用以下命令打开log等级，提供开机log，图片、效果参数
    adb shell setprop persist.vendor.cam.mlog.loglevel xx5xxx
(2023-05-10T01:29:14Z)

==== State: Opened by: waterworld on 10 May 2023 09:26:45 ====

Hi,
  有什么进展吗,需要提供什么文件分析吗?
  thanks~~

==== State: Opened by: waterworld on 09 May 2023 20:01:15 ====

Hi,
  OTP 是平台端的,已经导通了

==== State: Opened by: cmadmin on 09 May 2023 16:52:13 ====

  == Jacky.Huang@unisoc.com On 20230509T08:51:22 (xml) ==
otp是sensor端还是平台端，otp有打通了吗
|
# SPCSS01167222|[SC9863A][Waterworld][A507V3.0E_SC9863A][12611][手机][A1]使用谷歌应用YT Music播放设备文件时，时间进度条显示不对
步骤：

现象：

分析：
Dear sprd:
      使用谷歌应用YT Music播放设备文件时，时间进度条显示不对.
      时间进度条到21S左右的时候，就又回到0S，然后重复这种显示。。。0S到21S，然后又跳到0S，接着慢慢走到21S，，，
    音频还是能正常播放的，只是时间进度条显示异常。

    我这边尝试在谷歌商店里面把所有的谷歌应用都更新了，包括YT Music，依然有问题。

    麻烦帮忙看看，谢谢。

    Ylog和对应视频见附件，谢谢。 |
==== State: NeedInfo by: cmadmin on 10 May 2023 21:16:44 ====

  == Peilong.Zhou@unisoc.com On 20230510T13:15:14 (xml) ==
dear customer,
请帮忙同步验证如下修改，是否ok，本地验证testSetNextMediaPlayer 可以pass，播放时间不对问题也修复了。
:~/A13/vendor/sprd/modules/audio/vendor$ git diff
diff --git a/normal/compress_simu/compress_simu.c b/normal/compress_simu/compress_simu.c
index 8dca9e8..1895e6d 100755
--- a/normal/compress_simu/compress_simu.c
+++ b/normal/compress_simu/compress_simu.c
@@ -2710,7 +2710,7 @@ int compress_get_tstamp(struct compress *compress,
     }
     //ALOGI(" compress_get_tstamp in :%l, %d",*samples,*sampling_rate);
     pthread_mutex_lock(&compress->lock);
-    if (!is_compress_ready(compress) || compress->songs_pcm_decoded_bytes == 0){
+    if (!is_compress_ready(compress)){
         pthread_mutex_unlock(&compress->lock);
         return -1;
     }
@@ -2732,7 +2732,9 @@ int compress_get_tstamp(struct compress *compress,

         pthread_mutex_lock(&compress->gapless_state_mutex);
         if(compress->gapless_state.gapless_transition && (!compress->gapless_state.gapless_transition_delaying)) {
-            if(compress->samplerate == compress->pcm_cfg.rate) {
+            if (compress->songs_pcm_decoded_bytes == 0){
+                *samples = 0;
+            } else if(compress->samplerate == compress->pcm_cfg.rate) {
                 if((total - avail) > compress->gapless_state.next_song_pcm_bytes){
                     *samples = pcm_bytes_to_frames(compress->pcm,compress->songs_pcm_decoded_bytes- ((total - avail)-compress->gapless_state.next_song_pcm_bytes));
                 }
(20230510T08:20:00)

==== State: Opened by: waterworld on 10 May 2023 16:16:17 ====

Dear sprd:
      你好，如刚刚电话所说，麻烦尽快帮忙看看，谢谢。

==== State: Opened by: waterworld on 10 May 2023 10:14:14 ====

Dear sprd:
      我这边通过回退版本，最后定位到是合入了这个patch导致。
    麻烦继续帮忙看看，谢谢。

    [patch]PATCH20005106_SPRDROID13_MAIN_22C_W23.07.1_P1_p1_20230324174732       Android13 CTS R3工具引入问题       CtsMediaPlayerTestCases--android.media.player.cts.MediaPlayerTest#testSetNextMediaPlayer fail

diff --git a/vendor/sprd/modules/audio/vendor/normal/compress_simu/compress_simu.c b/vendor/sprd/modules/audio/vendor/normal/compress_simu/compress_simu.c
index 73ea90fd8b3..8dca9e80edf 100755
--- a/vendor/sprd/modules/audio/vendor/normal/compress_simu/compress_simu.c
+++ b/vendor/sprd/modules/audio/vendor/normal/compress_simu/compress_simu.c
@@ -2710,7 +2710,7 @@ int compress_get_tstamp(struct compress *compress,
     }
     //ALOGI(" compress_get_tstamp in :%l, %d",*samples,*sampling_rate);
     pthread_mutex_lock(&compress->lock);
-    if (!is_compress_ready(compress)){
+    if (!is_compress_ready(compress) || compress->songs_pcm_decoded_bytes == 0){
         pthread_mutex_unlock(&compress->lock);
         return -1;
     }





==== State: NeedInfo by: cmadmin on 09 May 2023 18:32:38 ====

  == Seth.Lu@unisoc.com On 2023-05-09T10:31:44Z (json) ==
ok, 有问题再反馈. thanks.
(2023-05-09T10:25:14Z)

==== State: Opened by: waterworld on 09 May 2023 18:22:49 ====

Dear sprd:
      我这边刚刷了很早的一个版本是正常的。
    可能是哪个补丁造成了，我这边会通过回退版本来定位。
    谢谢。

==== State: NeedInfo by: cmadmin on 09 May 2023 18:21:45 ====

  == Seth.Lu@unisoc.com On 20230509T10:21:17 (xml) ==
frameworks/av/media/ 下方.
或是使用我司当初提供的基线版本或是 driver only 版本测试一下是否现象相同.

Thanks.
(20230509T09:28:12)

==== State: Opened by: waterworld on 09 May 2023 17:27:36 ====

Dear sprd:
      目前从客户反馈的以及我们自己测试的来看，用系统自带的播放器来播放音乐是没有问题的。
    分别用播放器和TYMUSIC播放视频见附件：自带播放器和TYMUSIC.zip
     自带播放器那个时间进度条仔细看，有点点异常，进度有点回退，我不确定这是不是正常的。

    MediaPlayer 或 MediaPlayerService 等相关代码，比较怀疑的，大概都在哪些路径下？
    我这边同步查下提交进度，谢谢。

==== State: NeedInfo by: cmadmin on 09 May 2023 17:06:43 ====

  == Seth.Lu@unisoc.com On 2023-05-09T09:05:25Z (json) ==
Dear Customer

理论上 YT Music Seekbar 代码逻辑有问题的机率不高, 可以确认一下同版本 YT Music 在其他对比机上是否有类似情形.

因为app 内 Seekbar 代码会搭配 mediaPlayer.getCurrentPosition 等, 所以可以确认一下是否有修改 MediaPlayer 或 MediaPlayerService 等相关代码. 如果底层有问题, 理论上其他第三方播放音乐app 也会有问题, 也可以下载来测试一下.

Thanks.
(2023-05-09T08:20:13Z)

==== State: Opened by: cmadmin on 09 May 2023 15:40:11 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167189|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][253826]Intermittently Random behaviors (i.e freeze, MT video unavailable, self preview availability) observed during VT conference call.
步骤：
1. Power on device.
2. Let the device successfully latch to the network.
3. Now make a VT call from A to B and A to C.
4. Merge the call and make a conference call.
5. Observe whether any abnormalities during VT call such as freeze, MT side video not available etc..
现象：
Intermittently Random behaviors (i.e freeze, MT video unavailable, self preview availability) observed during VT Conference call.
Reproducibility: Intermittently.
期望：
VT conference call should be seamless.

您好，
海外反馈视频会议，视频画面卡顿或画面不动；
海外提供的log和视频已上传附件，还请帮忙看下，谢谢

从log中有看到这类log，请问这是指当前视频画面的帧率吗
S1022EE  05-08 15:15:05.239   866  1202 D SSense.VideoRecognizer: highFps mCurrentFPS:9.666667


|
==== State: Opened by: cmadmin on 10 May 2023 10:56:57 ====

  == Majun.Xie@unisoc.com On 2023-05-10T02:56:37Z (json) ==
hi VTVCE：

结合log 和视频看在 15:15:02 合并视频电话的时候，有设置远端surface，刚开始有2通电话时有远端画面的，但是过了一会没有远端画面了，请帮忙看下远端的底层数据，thanks

\vt conf\ylog\ap\000-0508_151241--0508_151832\0-android.log

S0FDF85  05-08 15:15:02.106   866  5473 I Telecom : CallsManager: setCallState NEW -> ACTIVE, call: [Call id=com.android.services.telephony.TelephonyConnectionService@4, state=NEW, tpac=ComponentInfo{com.android.phone/com.android.services.telephony.TelephonyConnectionService}, ***, UserHandle{0}, cmgr=null, handle=tel:***********35, vidst=ATR, childs(0), has_parent(true), cap=[], prop=[ HD]]: CSW.sA(cap)@JYI
S0FDFAD  05-08 15:15:02.112   866  5473 I Telecom : CallsManager: setCallState NEW -> ACTIVE, call: [Call id=com.android.services.telephony.TelephonyConnectionService@5, state=NEW, tpac=ComponentInfo{com.android.phone/com.android.services.telephony.TelephonyConnectionService}, ***, UserHandle{0}, cmgr=null, handle=tel:***********31, vidst=ATR, childs(0), has_parent(true), cap=[], prop=[ HD]]: CSW.sA(cap)@JYQ

M0FEF54  05-08 15:15:02.735  1064  1064 D ImsVideoCallEngine: setImsRemoteSurface() Surface:Surface(name=android.graphics.SurfaceTexture@363352a)/@0x20dde0b
M0FEF55  05-08 15:15:02.735  1064  1064 I VideoCallEngine-JNI: setRemoteSurface
M0FEF56  05-08 15:15:02.736  1064  1064 I VideoCallEngine-JNI: RemoteSurface Prepared

S133762  05-08 15:15:43.599   866  2429 I Telecom : CallsManager: setCallState ACTIVE -> DISCONNECTED, call: [Call id=com.android.services.telephony.TelephonyConnectionService@5, state=ACTIVE, tpac=ComponentInfo{com.android.phone/com.android.services.telephony.TelephonyConnectionService}, ***, UserHandle{0}, cmgr=null, handle=tel:***********31, vidst=ATR, childs(0), has_parent(true), cap=[], prop=[ HD]]: (...->CS.d->H.CS.d)->CSW.sDc(cgad/cast)@E-E-JfY
S133D13  05-08 15:15:43.849   866  1124 I Telecom : CallsManager: setCallState ACTIVE -> DISCONNECTED, call: [Call id=com.android.services.telephony.TelephonyConnectionService@4, state=ACTIVE, tpac=ComponentInfo{com.android.phone/com.android.services.telephony.TelephonyConnectionService}, ***, UserHandle{0}, cmgr=null, handle=tel:***********35, vidst=ATR, childs(0), has_parent(true), cap=[], prop=[ HD]]: (...->CS.d->H.CS.d)->CSW.sDc(cgad/cast)@E-E-JfY

==== State: Opened by: cmadmin on 09 May 2023 16:22:02 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167169|[UMS9117-L][Waterworld][FF615-Reliance][14098][CEBU-功能手机][XM]请提供一下G3 BBAT工具的源码|印度工厂需要接入他们的MES，需要提供G3 BBAT工具的源码，请安排提供一下，谢谢！！|
==== State: NeedInfo by: cmadmin on 09 May 2023 19:59:53 ====

  == Lin.Leng@unisoc.com On 20230509T11:59:36 (xml) ==
是的
(20230509T07:41:21)

==== State: Opened by: waterworld on 09 May 2023 15:38:35 ====

您好！
\BBAT_G3_R3.22.5051\BBAT_Mes这个目录下的就是源码是吗？谢谢

==== State: NeedInfo by: cmadmin on 09 May 2023 15:15:31 ====

  == Lin.Leng@unisoc.com On 20230509T07:12:39 (xml) ==
hi cus：
MES相关源码在工具里面有，另外上传了一份”BBAT MES函数说明“到cq，请参考一下
(20230509T06:53:52)

==== State: Opened by: cmadmin on 09 May 2023 14:54:37 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167153|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]Google CDD#351补丁申请|Dear sprd:
   客户发现我们平台存在Google CDD#351 问题，申请android 8.1相关补丁。感谢。|
==== State: Closed by: waterworld on 10 May 2023 10:12:01 ====

Dear sprd:
  问题关闭

==== State: Resolved by: cmadmin on 10 May 2023 09:46:26 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
申请google cdd patch
Solution:
8.1项目暂不需要

==== State: Opened by: waterworld on 09 May 2023 17:51:50 ====

Dear sprd:
  问题可以关闭了，感谢支持~

==== State: Opened by: cmadmin on 09 May 2023 15:48:49 ====

  == Xiaorong.Xu@unisoc.com On 2023-05-09T07:45:53Z (json) ==
目前没有8.1的patch，贵司可以看下unisupport上的文档
 UniSoC 应用限制方案修改介绍 V3.0.pdf
文件号：102784

在第一章背景介绍 章节中有说明，cdd在Android 8.1以及之前的版本是没有限制的

谢谢~~

==== State: Opened by: waterworld on 09 May 2023 14:56:18 ====

Dear sprd:
  客户是发现我们的log有打印如下信息，他们说不应该有doLmkForceStop 信息才对。所以想让贵司确认下，感谢。

04-08 05:15:12.952 512 835 D LmKillerTracker: doLmkForceStop pid=15059
04-08 05:15:12.952 512 3803 I force_gc: Binder
04-08 05:15:12.953 512 835 I LmKillerTracker: Skipped process

==== State: Opened by: cmadmin on 09 May 2023 14:46:54 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167129|[UMS9230][Waterworld][FM626][12929][平板][XM][A12][HMD]camera压测过程中出现dump
步骤：
camera压测过程中出现dump

[exception_reboot_reason]: kernel_crash
[exception_panic_reason]: balance_dirty_pages
[exception_time]: 2023-04-28_20-16-35
[exception_file_info]: not-bugon

log见/FTPDATA/2023-3/SPCSS01143781/0508-A12/
|
==== State: NeedInfo by: cmadmin on 10 May 2023 17:09:26 ====

  == Carson.Wu@unisoc.com On 20230510T09:08:05 (xml) ==
dump之前，IO压力不大，但是还是发生了IO阻塞，IO处理速度非常慢。
请确认下面信息：
1、合入提供的io patch优化方案，看是否有改善
2、找厂商确认下当前状态是否正常

[23026.166870] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
[23026.166887] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
[23036.385232] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
[23036.385249] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
[23046.427191] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   16
[23046.427208] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   16
[23058.020099] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
[23058.020116] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
[23068.642721] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   15
[23068.642738] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   15
[23079.538417] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   10
[23079.538433] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   10
(20230510T00:49:40)

==== State: Opened by: cmadmin on 10 May 2023 08:40:09 ====

  == Yu.Li@unisoc.com On 20230510T00:40:04 (xml) ==
Log路径：\\shnas02\CustomerData\产品工程管理部\ZYT\FTPDATA\2023-3\SPCSS01143781\0508-A12

sysdump  extend_log_buf中：
\LastLog\last_kmsg.log (172 hits)
	Line 147: [22829.017740] C7 L6 ID2147483655  |_i2i   mmcblk0:    4    1    1    0    0    1    0    0    0    0    0    0
	Line 149: [22829.017756] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 436: [22839.995586] C7 L6 ID2147483655  |_i2i   mmcblk0:    3    1    2    0    0    1    0    0    0    0    0    0
	Line 438: [22839.995622] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 821: [22850.835119] C7 L6 ID2147483655  |_i2i   mmcblk0:    1    0    1    0    0    1    0    2    0    1    0    0
	Line 823: [22850.835135] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 940: [22856.269066] C6 L6 ID14006  iowait:13108ms [kworker/u16:0   ] kworker/u16:0   
	Line 941: [22856.269076] C6 L6 ID14006  iowait:    1    0    0    0    0    0    0    0    0    1    0    0
	Line 1190: [22861.596387] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    1    5
	Line 1192: [22861.596423] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 1427: [22872.541401] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 1429: [22872.541439] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 1446: [22873.128934] C4 L6 ID821  iowait:53432ms [charged         ] charged         
	Line 1447: [22873.128956] C4 L6 ID821  iowait:    0    0    0    0    0    0    0    0    0    0    0    1
	Line 1449: [22873.130115] C7 L6 ID14006  iowait:11828ms [kworker/u16:0   ] kworker/u16:0   
	Line 1847: [22884.042423] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    9
	Line 1849: [22884.042439] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    9
	Line 1887: [22885.133820] C7 L6 ID14006  iowait:    0    0    0    0    0    0    0    0    0    2    0    0
	Line 2241: [22895.871206] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 2243: [22895.871243] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 2276: [22897.663180] C6 L6 ID14006  iowait:12516ms [kworker/u16:0   ] kworker/u16:0   
	Line 2277: [22897.663197] C6 L6 ID14006  iowait:    0    0    0    0    0    0    0    0    0    1    0    0
	Line 2278: [22897.663463] C3 L6 ID636  iowait:11740ms [ylog.writer     ] ylog.writer     
	Line 2279: [22897.664284] C3 L6 ID25600  iowait:55576ms [date            ] date            
	Line 2727: [22907.101940] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   12
	Line 2729: [22907.101977] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   12
	Line 2812: [22910.796522] C2 L6 ID21471  iowait:    2    0    0    0    0    0    0    0    0    2    1    1
	Line 2954: [22917.657300] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 2956: [22917.657316] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 3226: [22923.961991] C5 L6 ID25350  iowait:26276ms [kworker/u16:3   ] kworker/u16:3   
	Line 3227: [22923.962016] C5 L6 ID25350  iowait:    0    0    0    0    0    0    0    0    0    0    1    0
	Line 3344: [22929.406183] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 3346: [22929.406200] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 3527: [22937.373816] C1 L6 ID25602  iowait:39688ms [date            ] date            
	Line 3528: [22937.373831] C1 L6 ID25602  iowait:    0    0    0    0    0    0    0    0    0    0    0    1
	Line 3611: [22940.983280] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 3613: [22940.983288] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 3776: [22948.625649] C3 L6 ID25600  iowait:50940ms [date            ] date            
	Line 3777: [22948.625668] C3 L6 ID25600  iowait:    0    0    0    0    0    0    0    0    0    0    0    1
	Line 3905: [22949.004621] C4 L6 ID773  iowait:131588ms [collect_apr     ] collect_apr     
	Line 3967: [22951.344056] C1 L6 ID2147483649  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   13
	Line 3969: [22951.344085] C1 L6 ID2147483649  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   13
	Line 4192: [22961.550792] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 4194: [22961.550808] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 4226: [22963.247605] C2 L6 ID324  iowait:    2    0    0    0    0    0    0    0    0    0    0    5
	Line 4266: [22965.091079] C6 L6 ID25604  iowait:59196ms [dumpstate       ] dumpstate       
	Line 4593: [22972.043865] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   17
	Line 4595: [22972.043882] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   17
	Line 4729: [22978.339313] C7 L6 ID14006  iowait:    2    0    0    0    0    0    1    0    0    2    4    1
	Line 4954: [22982.046203] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 4956: [22982.046220] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    6
	Line 5136: [22990.702022] C7 L6 ID1186  iowait:25564ms [watchdog        ] system_server   
	Line 5137: [22990.702040] C7 L6 ID1186  iowait:    0    0    0    0    0    0    0    0    0    0    1    0
	Line 5138: [22990.702418] C2 L6 ID25602  iowait:25612ms [date            ] date            
	Line 5190: [22992.499792] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
	Line 5192: [22992.499808] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
	Line 5372: [23001.052136] C2 L6 ID839  iowait:    6   22    1    0    0    0    0    0    0    0    3    0
	Line 5422: [23003.079792] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 5424: [23003.079828] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 5449: [23004.396181] C5 L6 ID25457  iowait:  204ms [MPEG4Writer     ] mediaserver     
	Line 5706: [23010.326577] C7 L6 ID14006  iowait:12944ms [kworker/u16:0   ] kworker/u16:0   
	Line 5723: [23011.144108] C1 L6 ID636  iowait:    0    1   65    0   72    0    0    0    0    1    0    0
	Line 5724: [23011.156070] C5 L6 ID25457  iowait:  204ms [MPEG4Writer     ] mediaserver     
	Line 5809: [23014.487256] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 5811: [23014.487277] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 5822: [23014.962330] C6 L6 ID25604  iowait:49860ms [dumpstate       ] dumpstate       
	Line 5958: [23020.832095] C0 L6 ID835  slogmodem        balance_dirty_pages had last 3 seconds
	Line 5968: [23021.164858] C0 L6 ID839  iowait:    1    0    0    0  159    0    0    0    2    0    0    1
	Line 5969: [23021.169464] C4 L6 ID25457  iowait:  204ms [MPEG4Writer     ] mediaserver     
	Line 6092: [23026.166870] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
	Line 6094: [23026.166887] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   11
	Line 6100: [23026.348130] C0 L6 ID835  slogmodem        balance_dirty_pages had last 3 seconds
	Line 6153: [23028.258777] C7 L6 ID14006  iowait:11576ms [kworker/u16:0   ] kworker/u16:0   
	Line 6176: [23029.408090] C0 L6 ID835  slogmodem        balance_dirty_pages had last 6 seconds
	Line 6223: [23031.168099] C3 L6 ID839  iowait:    0    0    0    0  235    0    0    0    0    1    0    0
	Line 6224: [23031.168106] C5 L6 ID25457  iowait:  204ms [MPEG4Writer     ] mediaserver     
	Line 6250: [23032.468082] C0 L6 ID835  slogmodem        balance_dirty_pages had last 9 seconds
	Line 6326: [23035.324078] C0 L6 ID835  slogmodem        balance_dirty_pages had last 12 seconds
	Line 6353: [23036.385232] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 6355: [23036.385249] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    8
	Line 6410: [23038.229127] C7 L6 ID14006  iowait: 9960ms [kworker/u16:0   ] kworker/u16:0   
	Line 6411: [23038.229222] C2 L6 ID1186  iowait:47528ms [watchdog        ] system_server   
	Line 6415: [23038.388729] C2 L6 ID835  slogmodem        balance_dirty_pages had last 15 seconds
	Line 6613: [23041.176105] C5 L6 ID25457  iowait:    1    0    0    0  260    0    0    0    0    1    0    1
	Line 6617: [23041.244227] C2 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 6617: [23041.244227] C2 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 6622: [23041.448087] C2 L6 ID835  slogmodem        balance_dirty_pages had last 18 seconds
	Line 6699: [23044.308128] C2 L6 ID835  slogmodem        balance_dirty_pages had last 21 seconds
	Line 6752: [23046.427191] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   16
	Line 6754: [23046.427208] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   16
	Line 6776: [23047.368075] C2 L6 ID835  slogmodem        balance_dirty_pages had last 24 seconds
	Line 6848: [23050.150678] C6 L6 ID14006  iowait:11896ms [kworker/u16:0   ] kworker/u16:0   
	Line 6859: [23050.428139] C2 L6 ID835  slogmodem        balance_dirty_pages had last 27 seconds
	Line 6876: [23051.176083] C5 L6 ID25457  iowait:    0    0    0    0  294    0    0    0    0    1    0    0
	Line 6878: [23051.248066] C2 L6 ID835  iowait:  208ms [slogmodem       ] slogmodem       
	Line 6878: [23051.248066] C2 L6 ID835  iowait:  208ms [slogmodem       ] slogmodem       
	Line 6921: [23053.288104] C2 L6 ID835  slogmodem        balance_dirty_pages had last 30 seconds
	Line 7009: [23056.348085] C3 L6 ID835  slogmodem        balance_dirty_pages had last 33 seconds
	Line 7051: [23058.020099] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 7053: [23058.020116] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0    7
	Line 7167: [23059.412076] C2 L6 ID835  slogmodem        balance_dirty_pages had last 36 seconds
	Line 7322: [23061.184222] C5 L6 ID25457  iowait:    0    0    0    0  294    0    0    0    0    0    0    0
	Line 7326: [23061.248077] C2 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 7326: [23061.248077] C2 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 7340: [23061.789306] C6 L6 ID14006  iowait:11628ms [kworker/u16:0   ] kworker/u16:0   
	Line 7341: [23061.789698] C4 L6 ID821  iowait:188660ms [charged         ] charged         
	Line 7359: [23062.476188] C2 L6 ID835  slogmodem        balance_dirty_pages had last 39 seconds
	Line 7435: [23065.332067] C2 L6 ID835  slogmodem        balance_dirty_pages had last 42 seconds
	Line 7506: [23068.396072] C0 L6 ID835  slogmodem        balance_dirty_pages had last 45 seconds
	Line 7515: [23068.642721] C7 L6 ID2147483655  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   15
	Line 7517: [23068.642738] C7 L6 ID2147483655  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   15
	Line 7591: [23071.188086] C5 L6 ID25457  iowait:    2    0    0    0  384    0    0    0    1    1    0    6
	Line 7595: [23071.256079] C0 L6 ID835  iowait:  208ms [slogmodem       ] slogmodem       
	Line 7595: [23071.256079] C0 L6 ID835  iowait:  208ms [slogmodem       ] slogmodem       
	Line 7600: [23071.460258] C0 L6 ID835  slogmodem        balance_dirty_pages had last 48 seconds
	Line 7804: [23074.316233] C0 L6 ID835  slogmodem        balance_dirty_pages had last 51 seconds
	Line 7867: [23077.044899] C0 L6 ID667  iowait:38812ms [inotifywait     ] inotifywait     
	Line 7878: [23077.376077] C2 L6 ID835  slogmodem        balance_dirty_pages had last 54 seconds
	Line 7941: [23079.538417] C6 L6 ID2147483654  |_i2i   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   10
	Line 7943: [23079.538433] C6 L6 ID2147483654  |_i2c   mmcblk0:    0    0    0    0    0    0    0    0    0    0    0   10
	Line 7965: [23080.436079] C0 L6 ID835  slogmodem        balance_dirty_pages had last 57 seconds
	Line 7985: [23081.192083] C5 L6 ID25457  iowait:    2    0    0    0  392    0    0    0    0    0    0    1
	Line 7987: [23081.252078] C0 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 7987: [23081.252078] C0 L6 ID835  iowait:  204ms [slogmodem       ] slogmodem       
	Line 8041: [23083.292204] C1 L0 ID835  Kernel panic - not syncing: balance_dirty_pages
	Line 8042: [23083.292227] C1 L4 ID835  CPU: 1 PID: 835 Comm: slogmodem Tainted: G S      WC O      5.4.210-ab17511 #1
	Line 8043: [23083.292234] C1 L4 ID835  Hardware name: Spreadtrum UMS9230 1H10 SoC (DT)
	Line 8044: [23083.292241] C1 L4 ID835  Call trace:
	Line 8045: [23083.292253] C1 L4 ID835   __typeid__ZTSFiP11task_structPK11user_regsetjjPKvS5_E_global_addr+0x3c/0x40
	Line 8046: [23083.292262] C1 L4 ID835   dump_stack+0xd8/0x158
	Line 8047: [23083.292269] C1 L4 ID835   panic+0x198/0x464
	Line 8048: [23083.292276] C1 L4 ID835   balance_dirty_pages+0xa68/0xb6c
	Line 8049: [23083.292284] C1 L4 ID835   balance_dirty_pages_ratelimited+0x370/0x3b0
	Line 8050: [23083.292290] C1 L4 ID835   generic_perform_write+0x2f4/0x41c
	Line 8051: [23083.292297] C1 L4 ID835   __generic_file_write_iter+0xd0/0x1ec
	Line 8052: [23083.292304] C1 L4 ID835   f2fs_file_write_iter+0x7f4/0xa04
	Line 8053: [23083.292311] C1 L4 ID835   do_iter_readv_writev+0x164/0x1d0
	Line 8054: [23083.292317] C1 L4 ID835   do_iter_write+0x8c/0x1f0
	Line 8055: [23083.292323] C1 L4 ID835   do_writev+0x140/0x274
	Line 8056: [23083.292330] C1 L4 ID835   __arm64_sys_writev+0x28/0x38
	Line 8057: [23083.292336] C1 L4 ID835   el0_svc_common+0xd0/0x23c
	Line 8058: [23083.292343] C1 L4 ID835   el0_svc_handler+0x2c/0x3c
	Line 8059: [23083.292349] C1 L4 ID835   el0_svc+0x8/0x100
	Line 8060: [23083.292363] C1 L2 ID835  SMP: stopping secondary CPUs
	Line 8068: [23083.315285] C1 L0 ID835  sprd-sysdump: (sysdump_panic_event) ------ in (0)
	Line 8069: [23084.315425] C1 L0 ID835  sprd-sysdump: 
	Line 8070: [23084.315445] C1 L0 ID835  sprd-sysdump: *****************************************************
	Line 8071: [23084.315452] C1 L0 ID835  sprd-sysdump: *                                                   *
	Line 8072: [23084.315459] C1 L0 ID835  sprd-sysdump: *  Sysdump enter, preparing debug info to dump ...  *
	Line 8073: [23084.315466] C1 L0 ID835  sprd-sysdump: *                                                   *
	Line 8074: [23084.315471] C1 L0 ID835  sprd-sysdump: *****************************************************
	Line 8075: [23084.315477] C1 L0 ID835  sprd-sysdump: 
	Line 8076: [23084.315486] C1 L6 ID835  sprd-sysdump: reason: balance_dirty_pages, sprd_sysdump_info->crash_key: 0
	Line 8077: [23084.315744] C1 L0 ID835  sprd-sysdump: KTXT VERIFY...
	Line 8078: [23084.624500] C1 L0 ID835  sprd-sysdump: KTXT [0xffffffc010081000--0xffffffc011650000]
	Line 8079: [23084.624514] C1 L0 ID835  sprd-sysdump: SHA1:
	Line 8080: [23084.624523] C1 L0 ID835  sprd-sysdump: b4516c87 c22f814 fb17c921 9ba62da7 a5478a11
	Line 8081: [23084.624529] C1 L0 ID835  sprd-sysdump: 
	Line 8082: [23084.624535] C1 L0 ID835  sprd-sysdump: *****************************************************
	Line 8083: [23084.624542] C1 L0 ID835  sprd-sysdump: *                                                   *
	Line 8084: [23084.624548] C1 L0 ID835  sprd-sysdump: *  Try to reboot system ...                         *
	Line 8085: [23084.624554] C1 L0 ID835  sprd-sysdump: *                                                   *
	Line 8086: [23084.624560] C1 L0 ID835  sprd-sysdump: *****************************************************
	Line 8087: [23084.624565] C1 L0 ID835  sprd-sysdump: 
	Line 8088: [23085.624688] C1 L0 ID835  Kernel Offset: disabled
	Line 8089: [23085.624703] C1 L0 ID835  CPU features: 0x00030006,2a00a238
	Line 8090: [23085.624712] C1 L0 ID835  Memory Limit: none
	Line 8262: [22804.694885] C4 L6 ID821  iowait:    4    0    1    0    0    0    0    0    0    0    0    0
	Line 8492: [22807.057762] C1 L6 ID2147483649  |_i2i   mmcblk0:   13    4    5    3    6    2    0    0    0    0    0    0
	Line 8494: [22807.057779] C1 L6 ID2147483649  |_i2c   mmcblk0:    1    0    0    1    0    0    1    1    1    4    7   17  
	Line 8725: [22817.884797] C7 L6 ID2147483655  |_i2i   mmcblk0:    8    3    2    0    7    1    0    0    0    0    0    0
	Line 8727: [22817.884814] C7 L6 ID2147483655  |_i2c   mmcblk0:    1    0    0    0    0    0    2    1    3    3    3    8
请bsp_io的同事协助分析下

==== State: Opened by: cmadmin on 09 May 2023 16:19:00 ====

  == Jennifer.Zhang1@unisoc.com On 2023-05-09T08:16:21Z (json) ==
上层喂狗先出现异常，io wait较高，请上层稳定性协助分析

[23009.468096] [c4] [Native Hang Detect] 
[23009.468105] [c4] hang_detect_counter:-1 ...
[23081.680090] [c2] slogmodem        balance_dirty_pages had last 57 seconds
......
[23083.196093] [c0] [Native Hang Detect] 
[23083.196100] [c0] hang_detect_counter:-1 ...
[23083.292204] [c1] Kernel panic - not syncing: balance_dirty_pages
[23083.292227] [c1] CPU: 1 PID: 835 Comm: slogmodem Tainted: G S      WC O      5.4.210-ab17511 #1
[23083.292234] [c1] Hardware name: Spreadtrum UMS9230 1H10 SoC (DT)
[23083.292241] [c1] Call trace:
[23083.292253] [c1]  __typeid__ZTSFiP11task_structPK11user_regsetjjPKvS5_E_global_addr+0x3c/0x40
[23083.292262] [c1]  dump_stack+0xd8/0x158
[23083.292269] [c1]  panic+0x198/0x464
[23083.292276] [c1]  balance_dirty_pages+0xa68/0xb6c
[23083.292284] [c1]  balance_dirty_pages_ratelimited+0x370/0x3b0
[23083.292290] [c1]  generic_perform_write+0x2f4/0x41c
[23083.292297] [c1]  __generic_file_write_iter+0xd0/0x1ec
[23083.292304] [c1]  f2fs_file_write_iter+0x7f4/0xa04
[23083.292311] [c1]  do_iter_readv_writev+0x164/0x1d0
[23083.292317] [c1]  do_iter_write+0x8c/0x1f0
[23083.292323] [c1]  do_writev+0x140/0x274
[23083.292330] [c1]  __arm64_sys_writev+0x28/0x38
[23083.292336] [c1]  el0_svc_common+0xd0/0x23c
[23083.292343] [c1]  el0_svc_handler+0x2c/0x

****************all requests in flight********************
  __data_len tag internal_tag rq_flags        start_time_ns            fifo_time     io_start_time_ns state             deadline                  now           nowjiffies          start2issue            issue2now
      520192  58            1    23082       22953126790966           4300631829       23061914754196     1           4300672775       23083313913758           4300663120         108787963230          21399159562
      524288  59            2    23082       22978339336487           4300638131       23077044217070     1           4300676558       23083313913758           4300663120          98704880583           6269696688
      524288  50            3    23082       22978339467910           4300638132       23077044525531     1           4300676558       23083313913758           4300663120          98705057621           6269388227
      524288  55            4    23082       22978340991102           4300638132       23077044752608     1           4300676558       23083313913758           4300663120          98703761506           6269161150
      520192   2            5    23082       22978341044102           4300638132       23078610513761     1           4300676949       23083313913758           4300663120         100269469659           4703399997
      524288  11           10    23082       22965091124534           4300634821       23081391307028     1           4300677644       23083313913758           4300663120         116300182494           1922606730
      524288  49           17    23082       22953131947658           4300631830       23070496387767     1           4300674921       23083313913758           4300663120         117364440109          12817525991

==== State: Opened by: cmadmin on 09 May 2023 15:33:37 ====

Dear Customer:
 The Issue is ReOpen and continue to process now.
Thank you

N2AInBug


==== State: NeedInfo by: cmadmin on 09 May 2023 15:33:37 ====

Dear Customer:
  We need more information with this Issue, please renew and reopen it.(20230509T06:31:06)
Thank you.
(20230509T06:31:06)

==== State: Opened by: cmadmin on 09 May 2023 14:31:44 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167106|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]目前电池功耗过高【CDBUG-9856】|请问有在原版测试中处于各种模式下，平均电流等数据吗？
目前的在插入白卡情况下，插白卡、无sd卡、不开飞行模式，在待机熄灭屏幕之后，测试时长20分钟。平均电流24mA 最小电流1.1mA。同时会出现在待机时候会每隔44S跑一次持续时间14S耗电高于平均电流的程序。请问怎降低这个功耗和尽量减少，或者抹平这个耗电突出的流程。
附件是抓取的log和测试的电流图|
==== State: NeedInfo by: cmadmin on 10 May 2023 20:34:45 ====

  == Emma.Ma@unisoc.com On 20230510T12:33:23 (xml) ==
SDK版本1分钟log

插正常卡待机10分钟
最新版本待机灭屏后的log


（1）请说明每份log 对应的现象，平均功耗


（2）平均电流49.6mA 最小电流1.1mA。会出一个固定45S间隔持续15S后台应用程序在运行期间瞬时电流高达80-100mA左右。---对应的那份log，请明示？
(20230510T12:03:06)

==== State: Opened by: waterworld on 10 May 2023 20:01:11 ====

插入移动卡待机，平均电流49.6mA，参考数据为3.6mA。请优化
测试场景：实网、插入移动卡、不开启飞行模式
测试步骤：1、关机后插入移动卡。
              2、开机。
              3、锁屏之后熄灭屏幕。
              4、等待电流回归于最小稳定，且处于周期变化的时候，开始测量.
现象：平均电流49.6mA 最小电流1.1mA。会出一个固定45S间隔持续15S后台应用程序在运行期间瞬时电流高达80-100mA左右。
附件是抓取的log。

==== State: NeedInfo by: cmadmin on 10 May 2023 14:51:14 ====

  == Emma.Ma@unisoc.com On 2023-05-10T06:50:09Z (json) ==
Modem Log 抓取 不区分功能机 和智能机，抓取方法建议联系CPM
(2023-05-10T06:40:45Z)

==== State: Opened by: waterworld on 10 May 2023 14:35:20 ====

请问Modem Log 怎么抓取？我搜索到的文档是智能机的抓取方法。请问功能机的抓取方法有没有对应的文档

==== State: NeedInfo by: cmadmin on 10 May 2023 13:14:51 ====

  == Emma.Ma@unisoc.com On 2023-05-10T05:13:34Z (json) ==
1、《UMS9117 Power Test Report.pdf》 文档ID 32299
获取链接：https://isupport.unisoc.com/isu-dcc
获取权限 请联系CPM




2、客户那边开飞行模式电流正常，插入普通sim卡功耗也是正常的，但是插入白卡后，待机20分支左右，功耗会上升到五六十毫安并且维持15s左右

>>>>白卡 未成功驻留。周期性找网？？若是的话是正常流程


可参考一下文档的章节--
“03常见Modem行为对功耗的影响”【包含常见业务的电流图规律，可先自查】


为了高效处理功耗问题，减少在问题单流转过程中沟通耗时，请依据本篇指导提供相应功耗问题信息。
modem功耗问题单提交/Modem功耗问题基本答疑，建议可参考以下指南
获取链接：
https://isupport.unisoc.com/isu-dcc 或者
https://unisupport.unisoc.com/index
《Modem功耗问题处理指南V1.3》，文档编号 32673
参考章节
“01功耗测试前提条件”
“02功耗问题单提交要求和提交规范” 
“03常见Modem行为对功耗的影响”【包含常见业务的电流图规律，可先自查】
“04功耗问题处理流程”
“05Modem 功耗常见问题--Modem Log大小不对，Modem Log大小如何自查”
“05Modem 功耗常见问题--Modem Log抓取的时候，电流图会整体抬高？Modem相关功耗问题一般需要提供什么信息“
“05Modem 功耗常见问题--现网NR连接态功耗比WIFI功耗大，是否有可比性？“
“05Modem 功耗常见问题--连接态功耗标准是什么？“
“05Modem 功耗常见问题—实网待机功耗标准是什么？“
>>>若是无权限查看，可联系我们的CPM获取权限

==== State: NeedInfo by: cmadmin on 10 May 2023 11:10:25 ====

  == Tianyu.Yang@unisoc.com On 20230510T03:09:12 (xml) ==
再uni-support中搜索32299。
(20230509T09:28:31)

==== State: Opened by: waterworld on 09 May 2023 17:24:35 ====

 == Description Changed from == 
请问有在原版测试中处于各种模式下，平均电流等数据吗？
To
请问有在原版测试中处于各种模式下，平均电流等数据吗？
目前的在插入白卡情况下，插白卡、无sd卡、不开飞行模式，在待机熄灭屏幕之后，测试时长20分钟。平均电流24mA 最小电流1.1mA。同时会出现在待机时候会每隔44S跑一次持续时间14S耗电高于平均电流的程序。请问怎降低这个功耗和尽量减少，或者抹平这个耗电突出的流程。
附件是抓取的log和测试的电流图
 == Description Changed from == 
请问有在原版测试中处于各种模式下，平均电流等数据吗？
To
请问有在原版测试中处于各种模式下，平均电流等数据吗？
目前的
 == Headline Changed from == 
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]请问有在原版测试中处于各种模式下，平均电流的数据吗？【CDBUG-9856】
To
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]目前电池功耗过高【CDBUG-9856】


==== State: Opened by: waterworld on 09 May 2023 16:11:11 ====

目前待机熄屏之后的一个小时的平均电流偏大。
回退版本到只有修改驱动部分代码。插入白卡、无sd卡、不开飞行模式。在待机熄灭屏幕之后：
测试时间1小时。发现后台会每隔45S跑一次持续时间15S的程序。
目前的SDK版本平均电流25mA 最小电流1.6mA。
附件是抓取的log和测试图

==== State: Opened by: cmadmin on 09 May 2023 16:09:36 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167083|[UMS9117][Waterworld][FF601_Telstra][12741][手机][6部遵义][alm id:11729095][德电][关联 SPCSS01016180]reINVITE for same payload type: Early media Playback-2 tone 2 was not heard on the UE
步骤：
附件的"96467.zip"为客户基于合入SPCSS01016180 修改方案的临时软件验证OK 的pass log。如果没有问题的话，需要帮忙合入最新的modem patch.

释放临时软件的modem 版本信息:
AP: MOCOR_20A_MP_W20.46.4
CP: FM_BASE_20A_THIN_MODEM_W22.24.3

当前最新的版本信息:
AP: MOCOR_20A_MP_W20.46.4	
CP: FM_BASE_20A_THIN_MODEM_W22.46.2_P1

工程文件名：
(1) project_ums9117_240X320BAR_48MB_CAT1
(2) project_ums9117_240X320BAR_64MB_SEC

分析：
由于是德电运营商，确认信息以及抓取log周期较慢.
麻烦贵司帮忙确认下具体需要提供什么信息，请一并提出来，给客户去确认。谢谢！|
==== State: NeedInfo by: cmadmin on 10 May 2023 15:44:43 ====

  == zhuochao.huang@unisoc.com On 20230510T07:43:03 (xml) ==
请联系CPM获取我司测试同事的协助
(20230510T07:40:53)

==== State: Opened by: waterworld on 10 May 2023 15:40:21 ====

请帮忙确认Modem log该如何抓取, 功能机平台, 没有Modem log的说明文档

==== State: NeedInfo by: cmadmin on 10 May 2023 15:33:11 ====

  == zhuochao.huang@unisoc.com On 2023-05-10T07:32:58Z (json) ==
客户你好，

附件没有modem log，请确认是否抓全
(2023-05-09T09:20:17Z)

==== State: Opened by: cmadmin on 09 May 2023 14:46:47 ====

  == Melody.Yang@unisoc.com On 2023-05-09T06:46:00Z (json) ==
客户申请SPCSS01016180相关patch，麻烦支持。
|
# SPCSS01167074|[SC9832E][Waterworld][A507-KS108][13211][手机]在cts里面sensor moudle有android.hardware.cts.SensorBatchingTests#testAccelerometer_fastest_batching	
两项测不过。android.hardware.cts.SensorTest#testSensorTimeStamps|步骤：
Suite / Plan	CTS / cts
Suite / Build	11_r11 / 9555124
现象：
junit.framework.AssertionFailedError: VerifySensorOperation | sensor='ST MC34XX 3-axis Accelerometer', samplingPeriod=0us, maxReportLatency=0us | 147 events gaps: position=106, delta_time=14.97ms; position=158, delta_time=9.95ms; position=189, delta_time=9.96ms; 144 more; (expected &lt;9.00ms)

分析：上传了跑测报告与ylog，请帮忙看下。
|
==== State: NeedInfo by: cmadmin on 10 May 2023 20:35:01 ====

  == Weiqun.Lai@unisoc.com On 20230510T12:32:28 (xml) ==
Dear customer
M0174EE  05-10 10:42:19.138 12225 12279 I TestRunner: started: testSensorTimeStamps(android.hardware.cts.SensorTest)
M0174F7  05-10 10:42:19.162 12225 12279 I SensorTest: Running timestamp test on: ST MC34XX 3-axis Accelerometer
M01846A  05-10 10:42:39.404 12225 12279 E SensorTest: VerifySensorOperation | sensor='ST MC34XX 3-axis Accelerometer', samplingPeriod=0us, maxReportLatency=0us | 94 events gaps: position=8, delta_time=9.94ms; position=18, delta_time=9.80ms; position=23, delta_time=9.92ms; 91 more; (expected <9.00ms)

M01750D  05-10 10:42:19.217   389   389 D sensor  : fzhReport：-0.143652 0.038307 9.739613
M01750E  05-10 10:42:19.227   389   389 D sensor  : fzhReport：-0.143652 0.009577 9.739613

//kernel Log系统时间跟Android Log有所区别，目前从Log看kernel Log数据生成没有问题，但这些值跟Android Log的值对不上，麻烦在kernel驱动数据上报接口中也添加Log（数据Log，方便跟Android Log对比）
01311 <4> [  567.561636][05-10 10:42:18.561] fzh mc34xx_work_func: -405, -119, 603
01312 <4> [  567.566658][05-10 10:42:18.566] fzh mc34xx_work_func: -177, -51, 841
01313 <4> [  567.571643][05-10 10:42:18.571] fzh mc34xx_work_func: -36, -20, 1005
01314 <4> [  567.576645][05-10 10:42:18.576] fzh mc34xx_work_func: 18, -10, 1042
01315 <4> [  567.581656][05-10 10:42:18.581] fzh mc34xx_work_func: 18, -11, 1038
Thanks
(20230510T09:13:46)

==== State: Opened by: waterworld on 10 May 2023 17:10:37 ====

请看一下加了kernel log之后的log，我看kernel里面确实是每5ms生成一次。

==== State: NeedInfo by: cmadmin on 10 May 2023 15:17:41 ====

  == Weiqun.Lai@unisoc.com On 2023-05-10T07:15:31Z (json) ==
Dear customer
//如电话沟通，测试报点率异常，
M03589F  05-10 04:42:29.549 20011 20078 I TestRunner: started: testSensorTimeStamps(android.hardware.cts.SensorTest)
M0358AF  05-10 04:42:29.582 20011 20078 I SensorTest: Running timestamp test on: ST MC34XX 3-axis Accelerometer
M03692E  05-10 04:42:49.820 20011 20078 E SensorTest: VerifySensorOperation | sensor='ST MC34XX 3-axis Accelerometer', samplingPeriod=0us, maxReportLatency=0us | 115 events gaps: position=26, delta_time=10.03ms; position=113, delta_time=9.88ms; position=241, delta_time=9.83ms; 112 more; (expected <9.00ms)

//大部分的数据上报间隔都是5ms
M0358BD  05-10 04:42:29.605   386   386 D sensor  : Report：-0.162806 0.000000 9.911995
M0358BE  05-10 04:42:29.610   386   546 D sensor  : Report：-0.143652 0.000000 9.873688
M0358C4  05-10 04:42:29.615   386   546 D sensor  : Report：-0.143652 -0.009577 9.816227
M0358C7  05-10 04:42:29.620   386   546 D sensor  : Report：-0.172383 -0.028730 9.797073
M0358CE  05-10 04:42:29.625   386   386 D sensor  : Report：-0.172383 -0.028730 9.777920

//但有几笔数据间隔为10ms，如下所示，导致测试fail
M0358E2  05-10 04:42:29.725   386   386 D sensor  : Report：-0.143652 0.000000 9.758766
M0358E3  05-10 04:42:29.730   386   386 D sensor  : Report：-0.143652 -0.028730 9.825804

M035955  05-10 04:42:30.170   386   386 D sensor  : Report：-0.143652 -0.019154 9.749189
M035957  05-10 04:42:30.180   386   386 D sensor  : Report：-0.162806 -0.028730 9.768343

M0359F9  05-10 04:42:30.815   386   546 D sensor  : Report：-0.143652 0.009577 9.797073
M0359FB  05-10 04:42:30.825   386   546 D sensor  : Report：-0.134075 0.000000 9.777920

//请咨询厂商在ACC kernel驱动的 数据生成跟上报接口添加Log，看下是否数据生成有问题
Thanks
(2023-05-10T03:10:37Z)

==== State: Opened by: waterworld on 10 May 2023 11:06:47 ====

Dear unisoc：
  我重新加了log，请帮忙再看下log与报告。

==== State: NeedInfo by: cmadmin on 09 May 2023 18:53:45 ====

  == Weiqun.Lai@unisoc.com On 20230509T10:52:31 (xml) ==
Dear customer
贵司可在ACC驱动数据上报接口及采样率设置接口中添加Log，具体请咨询厂商
Thanks
(20230509T07:09:26)

==== State: Opened by: waterworld on 09 May 2023 15:07:19 ====

Dear unisoc：
  请帮忙提供一下检查的方法。

==== State: NeedInfo by: cmadmin on 09 May 2023 15:01:59 ====

  == Weiqun.Lai@unisoc.com On 20230509T07:00:54 (xml) ==
Dear customer
M018280  05-09 03:50:52.222 12613 12657 I TestRunner: started: testAccelerometer_fastest_batching(android.hardware.cts.SensorBatchingTests)
M01837A  05-09 03:50:55.283   390   390 D sensor  : poll__batch handle=0 sampling_period_ns=5ms, max_report_latency_ns=10000ms
M01837B  05-09 03:50:55.283   390   390 E sensor  : AccSensor: mDelay(-1) delay_ns(5000000)
M01837C  05-09 03:50:55.283   390   390 E sensor  : AccSensor: ms(5) 
M01837D  05-09 03:50:55.286   390   390 D sensor  : activate handle=0; drv=0
M01837E  05-09 03:50:55.286   390   390 D sensor  : AccSensor: handle=0,enabled=1
M01837F  05-09 03:50:55.286   390   390 D sensor  : AccSensor: set EVIOCSCLOCKID = 7
M018380  05-09 03:50:55.286   390   390 E sensor  : open x_axis_offset file failed!(No such file or directory)
M018381  05-09 03:50:55.286   390   390 E sensor  : open y_axis_offset file failed!(No such file or directory)
M018382  05-09 03:50:55.286   390   390 E sensor  : open z_axis_offset file failed!(No such file or directory)
M018383  05-09 03:50:55.286   390   390 D sensor  : AccSensor:getoffset from prodnv x_offset=0.000000, y_offset=0.000000, z_offset=0.000000
M018384  05-09 03:50:55.287   390   390 D sensor  : AccSensor: mEnabled = 1
M018385  05-09 03:50:55.287   390   509 E sensor  : reading from wake pipe
M0183E8  05-09 03:51:08.292   390   390 D sensor  : activate handle=0; drv=0
M0183E9  05-09 03:51:08.292   390   390 D sensor  : AccSensor: handle=0,enabled=0
M0183EA  05-09 03:51:08.293   390   390 D sensor  : AccSensor: mEnabled = 0
M01840C  05-09 03:51:08.574 12613 12657 E TestRunner: failed: testAccelerometer_fastest_batching(android.hardware.cts.SensorBatchingTests)
M01840E  05-09 03:51:08.574 12613 12657 E TestRunner: junit.framework.AssertionFailedError: VerifySensorOperation | sensor='ST MC34XX 3-axis Accelerometer', samplingPeriod=0us, maxReportLatency=10000000us | 102 events gaps: position=8, delta_time=9.84ms; position=120, delta_time=9.96ms; position=141, delta_time=9.57ms; 99 more; (expected <9.00ms)
//数据报点率不足导致测试fail，从测试看，下发5ms采样率，但多个数据实际采样率接近10ms，这边未在kernel log中看到数据上报Log，请检查下ACC kernel驱动是否采样率设置有问题或者数据上报问题
Thanks
(20230509T06:42:48)

==== State: Opened by: cmadmin on 09 May 2023 14:13:38 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167062|[UWS6130E][Waterworld][HK706][13303][Other]关于通过AT发送到modem，异常的问题|关于通过AT发送到modem，异常的问题，该cq继承于SPCSS01150483，具体见详细描述
W307 有个功能需求，需要通过设备根据需要切换SIM服务商，目前如果设备连接电脑，利用电脑端的工具可以给modem发指令，进行切换操作的；请问如果如何在平台实现at命令发给modem进行操作的？|
==== State: Submitted by: waterworld on 09 May 2023 19:17:06 ====

梅经理：
附件是需求文档，请帮忙尽快评估开发，多谢！
|
# SPCSS01167039|[SC9832E][Waterworld][FS170-SC9832E][13244][手机][XM]进入设置-网络-internet多次重置网络刷新按钮出现system info dumping|进入设置-网络-internet多次重置网络刷新按钮出现system info dumping
备注：附上Log，合入SPCSS01160041patch，专项测试出现的问题，新提这个CQ跟踪
|
==== State: Opened by: cmadmin on 09 May 2023 13:26:57 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167021|[SC9863A1][Waterworld][A567-SC9863A1][13043][手机]A567-61H WIFI OTA测试需求|dear 展锐：
           国处客户反馈wcn信号不好，请帮忙安排测试两台WIFI和GPS OTA测试数据（WIFI需求亮屏测试TRP和TIS），并提供报告.
          谢谢!|
==== State: Opened by: cmadmin on 09 May 2023 11:25:41 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01167012|[UMS312][Waterworld][FS310-UMS312-A13][13838][CEBU-智能手机][A6][QZ]使用连续拍照时发现卡顿现象严重，且声音不连续，会出现声音被吞现象|使用连续拍照时发现卡顿现象严重，且声音不连续，会出现声音被吞现象。
有时出现第一张无拍照声现象，会出现声音被吞且不连续问题。
YLOG和视频已上传
|
==== State: NeedInfo by: cmadmin on 10 May 2023 16:57:34 ====

  == Bing.Zhou@unisoc.com On 20230510T08:55:38 (xml) ==
(In reply to 周兵 (Bing Zhou) 消费电子事业部/消费电子事业部-产品工程部/Camera应用部 from comment #8)
(20230510T08:47:55)

==== State: Opened by: cmadmin on 10 May 2023 16:51:00 ====

  == Bing.Zhou@unisoc.com On 20230510T08:47:55 (xml) ==
Dear cus:

 400%cpu 104%user  56%nice 211%sys  11%idle   0%iow  11%irq   7%sirq   0%host.

cpu 的idle 只有 11% / 400% ，只有2.75%

优化余量不多。

用下面方案，可以试着将一些后台关闭。


请将下处的180改大一些，例如700等，然后复测看看
UniFeature.xml
20     <feature name="AppStartScene">
21         <classname>com.unipnp.feature.AppStartScene</classname>
22         <dexpath>/system/framework/unipnp-features.jar</dexpath>
23         <switch>1</switch>
24         <version>1</version>
25         <id>1</id>
26         <unievent>
27             <event>unievent_activity_start</event>
28             <event>unievent_activity_launchdone</event>
29         </unievent>
30         <policy>
31             <item id="activity_start">
32                 <action name="POWER_BOOST">
33                     <string>com.tencent.mm,POWER_HINT_VENDOR_INTERACTION_LAUNCH,12000</string>
34                     <string>com.facebook.katana,POWER_HINT_VENDOR_INTERACTION_LAUNCH,20000</string>
35                     <string>com.facebook.orca,POWER_HINT_VENDOR_INTERACTION_LAUNCH,15000</string>
36                     <string>com.imangi.templerun2,POWER_HINT_VENDOR_INTERACTION_LAUNCH,30000</string>
37                     <string>com.kiloo.subwaysurf,POWER_HINT_VENDOR_INTERACTION_LAUNCH,15000</string>
38                 </action>
39                 <action name="FAST_KILL">
>40                     <string>com.android.camera2,180</string>  /////////////////////camera FAST_KILL 请将此处的180改为700复测看看
41                 </action>

==== State: Opened by: waterworld on 10 May 2023 16:01:35 ====

Hi：
已将top.txt上传到附件中。
谢谢！

==== State: NeedInfo by: cmadmin on 10 May 2023 15:30:20 ====

  == Bing.Zhou@unisoc.com On 2023-05-10T07:27:21Z (json) ==
(In reply to 周兵 (Bing Zhou) 消费电子事业部/消费电子事业部-产品工程部/Camera应用部 from comment #5)
(2023-05-10T07:06:04Z)

==== State: Opened by: cmadmin on 10 May 2023 15:30:19 ====

  == Bing.Zhou@unisoc.com On 2023-05-10T07:26:59Z (json) ==
Dear cus:
  连拍的时候。
  请用\\shnas02\CustomerData\产品工程管理部\ZYT\FTPDATA\2023-5\SPCSS01167012\SampleCodeForCUS\catchlog.bat
获取top.txt
@echo off
adb shell top > top.txt
pause
，
 或者直接
 adb shell top 查看

 

上传top.txt

==== State: Opened by: cmadmin on 10 May 2023 15:08:33 ====

  == Bing.Zhou@unisoc.com On 20230510T07:06:04 (xml) ==
Dear cus:
   312 芯片使用13M size 去连拍，肯定是卡顿的。

==== State: Opened by: cmadmin on 10 May 2023 15:08:31 ====

  == Bing.Zhou@unisoc.com On 20230510T07:06:01 (xml) ==
Dear cus:
   312 芯片使用13M size 去连拍，肯定是卡顿的。

==== State: Opened by: cmadmin on 10 May 2023 14:50:22 ====

  == Bing.Zhou@unisoc.com On 20230510T06:49:26 (xml) ==
Dear cus:
  cpu 占用100% 。主线程卡顿是一定的。playShutterSound 是在主线程的，主线程卡顿导致。
 5-9 11:9:4.163<  470.677889>	93	0	0	0	0	0	98	0	1820000	0	0	0	95	0	1820000	0	0	0	96	0	1820000	0	0	0	82	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7411	21	0	3897360	1739436	1497484	0	0	1	0	0	0	0.85	0.86	0.8	7804072	0.49	0.19	0.11	2134099	0.62	0.99	1.16	9063907	0	0.12	0.26	2679157	39.83	44.46	34.81	218173819
5-9 11:9:5.167<  471.681381>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7444	15475	7419	38	0	3897360	1711768	1501684	0	1	1	0	0	0	0.69	0.83	0.79	7816737	0.4	0.19	0.11	2134497	0.87	1.03	1.17	9088259	0	0.12	0.26	2681491	44.57	45.17	35.02	219129963
5-9 11:9:6.171<  472.685489>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7427	43	0	3897360	1703408	1478124	0	1	1	0	0	0	0.69	0.83	0.79	7821075	0.4	0.19	0.11	2134566	0.87	1.03	1.17	9158627	0	0.12	0.26	2687684	44.57	45.17	35.02	220100972
5-9 11:9:7.183<  473.697892>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7867	19833	7435	19	0	3897360	1702204	1484436	1	1	1	0	0	0	0.57	0.8	0.79	7827504	0.33	0.18	0.11	2135200	1.44	1.12	1.19	9182100	0	0.12	0.26	2687694	53.7	46.8	35.43	221065040
5-9 11:9:8.186<  474.700529>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	98	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7448	22	0	3897360	1711480	1468056	1	1	1	0	0	0	0.57	0.8	0.79	7855506	0.33	0.18	0.11	2135373	1.44	1.12	1.19	9294335	0	0.12	0.26	2695933	53.7	46.8	35.43	222008950
5-9 11:9:9.190<  475.704384>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	98	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7745	16422	7456	26	0	3897360	1721496	1454200	2	1	1	0	0	0	0.64	0.81	0.79	7861381	0.27	0.17	0.1	2135899	2.08	1.25	1.22	9344071	0	0.11	0.26	2702005	61.18	48.37	35.84	222955678
5-9 11:9:10.198<  476.712417>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	98	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7464	22	0	3897360	1717964	1460472	2	1	1	0	0	0	0.64	0.81	0.79	7873685	0.27	0.17	0.1	2136529	2.08	1.25	1.22	9344678	0	0.11	0.26	2702016	61.18	48.37	35.84	223901244
5-9 11:9:11.202<  477.716313>	100	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7310	16597	7479	31	0	3897360	1715092	1478836	2	1	1	0	0	0	0.53	0.78	0.78	7887666	0.22	0.17	0.1	2136557	2.06	1.28	1.22	9347341	0	0.11	0.25	2702049	67.13	49.87	36.24	224862977
5-9 11:9:12.205<  478.719549>	100	0	0	0	0	0	99	0	1820000	0	0	0	100	0	1820000	0	0	0	99	0	1820000	0	0	0	99	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7484	25	0	3897360	1717288	1458540	2	1	1	0	0	0	0.53	0.78	0.78	7894440	0.22	0.17	0.1	2136766	2.06	1.28	1.22	9422524	0	0.11	0.25	2707699	67.13	49.87	36.24	225814574
5-9 11:9:13.209<  479.723030>	99	0	0	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	100	0	1820000	0	0	0	97	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7534	18155	7489	24	0	3897360	1722232	1478660	2	1	1	0	0	0	0.43	0.76	0.78	7899939	0.18	0.16	0.1	2137575	2.23	1.33	1.23	9422949	0	0.1	0.25	2707699	71.99	51.31	36.63	226735704
5-9 11:9:14.214<  480.728067>	99	0	0	0	0	0	100	0	1820000	0	0	0	99	0	1820000	0	0	0	100	0	1820000	0	0	0	96	0	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	7491	18	0	3897360	1779324	1500520	2	1	1	0	0	0	0.43	0.76	0.78	7913854	0.18	0.16	0.1	2139287	2.23	1.33	1.23	9423691	0	0.1	0.25	2707699	71.99	51.31	36.63	227626790
5-9 11:9:15.216<  481.730074>	88	0	0	0	0	0	97	0	1820000	0	0	0	97	1	1820000	0	0	0	90	1	1820000	0	0	0	68	1	2002000	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	6973	16727	7498	8	0	3897360	1758240	1501568	1	1	1	0	0	0	0.35	0.73	0.77	7925968	0.14	0.16	0.1	2143842	1.83	1.29	1.23	9423774	0	0.1	0.25	2707699	75.26	52.58	37	228288206

==== State: Opened by: waterworld on 10 May 2023 11:16:23 ====

Hi：
请问是否有进展？
谢谢！

==== State: Opened by: cmadmin on 09 May 2023 15:18:01 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166960|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]如何在关机充电过程中根据电池当前电量刷新充电动画？[CD_BUG 8305]|

目前的关机充电动画是一个显示一个GIF图片，从0格到满格显示。
客户要求要根据当前的电量实时刷新不同的动画。请问要如何修改

举例：
当前动画：无论当前电量多少，都是显示0-4格的动画
客户需求：当前电量小于25%--显示0-4格的动画
               ....
              当前电量大于75%小于100%--显示3-4格动画

对应的代码在\MS_MMI_Main\source\mmi_app\app\phone\c\mmiphone_charge.c中的 HandleChargeStartupWindow

我司尝试过在刷新时判断电量，更换IMAGE_id,结果都不行。请问在关机充电时要如何根据电量进行充电动画的实时的刷新？
|
==== State: NeedInfo by: cmadmin on 10 May 2023 17:29:29 ====

  == Wenhui.Li@unisoc.com On 2023-05-10T09:27:19Z (json) ==
(In reply to waterworld from comment #5)
1 
  在文件mmiphone_charge.c内添加如下：
  MMI_WIN_ID_T       win_id_charge_test;
	
LOCAL void charging_test (uint8 timer_id, uint32 param)
{
	static int display_flag = 0;
	    GUIANIM_INIT_DATA_T                 anim_init = {0};
    MMI_CONTROL_CREATE_T                anim_ctrl = {0};
    GUIANIM_CTRL_INFO_T                 ctrl_info = {0};
    GUIANIM_DATA_INFO_T                 data_info = {0};
	GUIANIM_DISPLAY_INFO_T              display_info = {0};
	            GUI_BOTH_RECT_T anim_rect = MMITHEME_GetFullScreenBothRect();
            uint16 timeimgheight=0;     
			
------ #ifndef MMI_GUI_STYLE_MINISCREEN
            GUIRES_GetImgWidthHeight(PNULL,&timeimgheight,IMAGE_CHARGE_TIME_BG,PHONE_STARTUP_CHARGE_WIN_ID);
            anim_rect.v_rect.top = anim_rect.v_rect.top + MMI_STATUSBAR_HEIGHT+timeimgheight;
------ #else
            GUIRES_GetImgWidthHeight(PNULL,&timeimgheight,IMAGE_IDLE_KEYLOCK_TIME_BG,PHONE_STARTUP_CHARGE_WIN_ID);
            anim_rect.v_rect.top = anim_rect.v_rect.top + timeimgheight;
------ #ifdef MAINLCD_DEV_SIZE_160X128
			anim_rect.h_rect.top =  anim_rect.h_rect.top + timeimgheight;
------ #endif
------ #endif
------ #ifdef MAINLCD_DEV_SIZE_320X240
            anim_rect.h_rect.top =  anim_rect.h_rect.top + timeimgheight;
------ #endif
            ctrl_info.is_ctrl_id = TRUE;
            ctrl_info.ctrl_id = MMI_CHARGE_ANIM_CTRL_ID;
            data_info.img_id = IMAGE_CHARGING;  //IMAGE_PC_CONNECTTING
            display_info.align_style = GUIANIM_ALIGN_HVMIDDLE;
            anim_init.both_rect = anim_rect;

			
	if(display_flag)
	{
		data_info.img_id = IMAGE_CHARGING;  //IMAGE_PC_CONNECTTING
		display_flag = 0;
	}else
	{
		data_info.img_id = IMAGE_PC_CONNECTTING;
		display_flag = 1;
	}

	
            //creat anim
            anim_ctrl.ctrl_id           = ctrl_info.ctrl_id;
            anim_ctrl.guid              = SPRD_GUI_ANIM_ID;
            anim_ctrl.init_data_ptr     = &anim_init;
            anim_ctrl.parent_win_handle = win_id_charge_test;
            MMK_CreateControl(&anim_ctrl);
            GUIANIM_SetParam(&ctrl_info,&data_info,PNULL,&display_info);
}

                                        


2. 修改函数HandleChargeStartupWindow
  1）
        GUI_COLOR_T bg_color=0x0861;
    
++++	win_id_charge_test = win_id;
    switch (msg_id)
    .....
  2) MSG_OPEN_WINDOW case内：
    ......
    GUIANIM_SetParam(&ctrl_info,&data_info,PNULL,&display_info);
   ++++ MMK_CreateTimerCallback (5000,charging_test,PNULL,TRUE);
(2023-05-10T09:19:13Z)

==== State: Opened by: waterworld on 10 May 2023 17:18:16 ====

dear unisoc
        能否将贵司本地测试的代码贴上来参考一下？
谢谢

==== State: NeedInfo by: cmadmin on 10 May 2023 17:14:00 ====

  == Wenhui.Li@unisoc.com On 20230510T09:13:15 (xml) ==
Hi customer:
  本地测试是没有问题的。本地测试创建了一个5秒的timer来不停的切换显示图片，开始显示IMAGE_CHARGING，然后显示IMAGE_PC_CONNECTTING，不停的切换显示。
  
  请检查贵司代码
(20230510T08:00:52)

==== State: Opened by: waterworld on 10 May 2023 15:57:05 ====

dear unisoc
按照贵司的方案可以显示图片，但是GIF无法播放，只能卡在第一帧，附件为修改后的mmiphone_charge.c 

==== State: NeedInfo by: cmadmin on 10 May 2023 10:42:58 ====

  == Wenhui.Li@unisoc.com On 2023-05-10T02:42:13Z (json) ==
Hi customer:
  大致思路是根据当前电量去显示不同的gif图片

  1. 请自行制作一个gif图片（该gif图片只显示电量3-4格动画）
  2. 在文件mmiphone_charge.c HandleChargeStartupWindow

    case MSG_CTL_ANIM_DISPLAY_IND:
    case MSG_CTL_ANIM_GIF_UPDATE:     
      //如果需要更新动画（电量变化离开25%的阈值）则按照MSG_OPEN_WINDOW的代码重新设置动画
      break；
(2023-05-10T02:33:00Z)

==== State: Opened by: cmadmin on 09 May 2023 16:03:38 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166940|[SC9863A1][Waterworld][FS301-A13][13411][智能手机][A6][QZ]在使用有声拍照后进入图库点击播放时会先获取权限，在获取权限前出现了白屏的现象|在使用有声拍照后进入图库点击播放时会先获取权限，在获取权限前出现了白屏的现象
使用查看的是谷歌图库，申请应该也是谷歌图库去进行申请，推测是谷歌图库问题，
请问此问题是否有方法规避？附件视频和log已上传。
|
==== State: Closed by: waterworld on 10 May 2023 15:41:15 ====

关闭id

==== State: Resolved by: cmadmin on 09 May 2023 14:22:56 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
当在google相册里点击小喇叭图标时， 就会拉起 GalleryActivity2 ，由于平台图库第一次打开，所以需要申请查看图片的权限， 中间就是界面跳转产生的一个白屏现象。
Solution:
目前没有什么方法规避， 正常使用时，仅会在第一次跳转申请权限的时候会遇到，影响范围较小， 建议维持现状。

==== State: Opened by: cmadmin on 09 May 2023 14:22:43 ====

  == Baolin.Li@unisoc.com On 2023-05-09T06:22:06Z (json) ==
Dear Customer:

有声照片这种属于特殊照片，查看时，是使用的平台的自研图库查看的， google相册就是提供了一个查看的入口。

当在google相册里点击小喇叭图标时， 就会拉起 GalleryActivity2 ，由于平台图库第一次打开，所以需要申请查看图片的权限， 中间就是界面跳转产生的一个白屏现象。

目前没有什么方法规避， 正常使用时，仅会在第一次跳转申请权限的时候会遇到，影响范围较小， 建议维持现状。

多谢！~

==== State: Opened by: cmadmin on 09 May 2023 10:42:52 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166930|[SC7731E][Waterworld][FS293-SC7731E-A13][13976][CEBU-智能手机][遵义][六部]CTS相机模块android.hardware.camera2.cts.ExtendedCameraCharacteristicsTest#testStaticBurstCharacteristics[1]单项fail|项目后摄是5M摄像头（s5k5e2），插值到8M，插值后有失败项，之前已经通过贵司这个CQ（SPCSS01138681）解决掉了。最近测试CTS报了testStaticBurstCharacteristics[1]这一失败项，目前排查发现应该是方案里修改SprdCamera3Setting.cpp这个文件引起的，上传了测试的log和单项报告，请贵司帮忙分析解决下，谢谢！|
==== State: NeedInfo by: cmadmin on 10 May 2023 14:02:56 ====

  == Yang.Hou@unisoc.com On 2023-05-10T06:01:58Z (json) ==
dear cus 

做如下修改验证，thanks
const uint8_t kavailable_capabilities[] = {
    ANDROID_REQUEST_AVAILABLE_CAPABILITIES_BACKWARD_COMPATIBLE,
    // ANDROID_REQUEST_AVAILABLE_CAPABILITIES_MANUAL_SENSOR,
    // ANDROID_REQUEST_AVAILABLE_CAPABILITIES_MANUAL_POST_PROCESSING,
    // ANDROID_REQUEST_AVAILABLE_CAPABILITIES_RAW,
-      ANDROID_REQUEST_AVAILABLE_CAPABILITIES_BURST_CAPTURE,
+   // ANDROID_REQUEST_AVAILABLE_CAPABILITIES_BURST_CAPTURE,


    for (size_t j = 0; j < scaler_formats_count; j++) {
        for (size_t i = 0; i < stream_sizes_tbl_cnt; i++) {
            if ((p_stream_info[i].stream_sizes_tbl.width <= largest_sensor_w &&
                 p_stream_info[i].stream_sizes_tbl.height <=
                     largest_sensor_h) ||
                (p_stream_info[i].stream_sizes_tbl.width == 480 &&
                 p_stream_info[i].stream_sizes_tbl.height == 640)) {


+              if (cameraId == 0&&scaler_formats[j] == HAL_PIXEL_FORMAT_YCbCr_420_888 &&
+            (p_stream_info[i].stream_sizes_tbl.width == 2592 &&     //改成插值后的最大值
+            p_stream_info[i].stream_sizes_tbl.height == 1944)){     //改成插值后的最大值
+            continue;
+              }

                  available_stream_configs.add(scaler_formats[j]);
                  available_stream_configs.add(
                      stream_info[i].stream_sizes_tbl.width);
                  available_stream_configs.add(
                      stream_info[i].stream_sizes_tbl.height);


	Line 13318: M00315B  04-24 18:27:41.903 13557 13579 E TestRunner: failed: testStaticBurstCharacteristics[1](android.hardware.camera2.cts.ExtendedCameraCharacteristicsTest)
	Line 13319: M00315C  04-24 18:27:41.904 13557 13579 E TestRunner: ----- begin exception -----
	Line 13320: M00315D  04-24 18:27:41.906 13557 13579 E TestRunner: junit.framework.AssertionFailedError: BURST-capable camera device 0 does not have maximum YUV size that is at least max JPEG size
	Line 13321: M00315D  04-24 18:27:41.906 13557 13579 E TestRunner: 	at junit.framework.Assert.fail(Assert.java:50)
	Line 13322: M00315D  04-24 18:27:41.906 13557 13579 E TestRunner: 	at junit.framework.Assert.assertTrue(Assert.java:20)
(2023-05-09T08:22:13Z)

==== State: Opened by: cmadmin on 09 May 2023 10:58:46 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166923|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][测试部反馈][3gp] 3gp版本播放视频，出现play error后，点击ok键，出现dump|
3gp版本播放视频，出现play error后，点击ok键，出现dump。
log和复现视频如ftp所示|
==== State: NeedInfo by: cmadmin on 10 May 2023 16:59:15 ====

  == Shengzhan.He@unisoc.com On 2023-05-10T08:58:36Z (json) ==
ok，如果验证没有问题，我这边同步合入基线中，下个版本会带入这笔提交

Thanks
(2023-05-10T03:13:15Z)

==== State: Opened by: waterworld on 10 May 2023 16:55:35 ====

Dear unisoc，
  我这边本地验证不会，已经让测试部同步验证中，后续会信息会及时回复

==== State: NeedInfo by: cmadmin on 10 May 2023 11:15:58 ====

  == Shengzhan.He@unisoc.com On 2023-05-10T03:13:15Z (json) ==
Hi

麻烦合入附件中的dv.a，测试一下是否还会死机

Thanks
(2023-05-09T13:04:12Z)

==== State: Opened by: waterworld on 09 May 2023 15:33:08 ====

Dear UNISOC，
   已经提供，在ftp中，请查收

==== State: NeedInfo by: cmadmin on 09 May 2023 11:10:43 ====

  == Tao.Zhong@unisoc.com On 2023-05-09T03:08:09Z (json) ==
Dear Customer:

    麻烦再提供一下对应的axf文件，谢谢！
(2023-05-09T02:50:01Z)

==== State: Opened by: cmadmin on 09 May 2023 10:46:05 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166877|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]Memory map details问题咨询|您好，
使用sgdisk --print dev/block/mmcblk0查看到的各分区开始地址和结束地址是扇区的形式；
请问怎么查看各分区的十六进制格式的开始地址和结束地址；
还请帮忙看下，谢谢|
==== State: NeedInfo by: cmadmin on 10 May 2023 13:15:03 ====

  == Jianhua.Jiao@unisoc.com On 2023-05-10T05:12:37Z (json) ==
是的
(2023-05-10T02:33:25Z)

==== State: Opened by: waterworld on 10 May 2023 10:32:11 ====

您好，
请问是直接乘以512后进行换算吗？
谢谢

比如userdata分区的是
Start (sector)    End (sector)
6944768        61067263
换算后就是
Start              End
0xD3F00000   0x7479FFE00



==== State: NeedInfo by: cmadmin on 10 May 2023 10:21:55 ====

  == Jianhua.Jiao@unisoc.com On 20230510T02:21:32 (xml) ==
这个单位是block（512B），乘以512就是字节大小
(20230509T05:51:15)

==== State: Opened by: cmadmin on 09 May 2023 13:49:27 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166855|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][遵义6部][HMD]把settings下security中的PIN和Phone locked功能打开然后重启机器并把Phone locked在重启后出现绿屏
步骤：
menu->settings->security->PIN(开启功能并输入密码)->Phone locked(开启功能)
->执行关机后开机->输入开机密码->输入PIN码->进入settings关闭Phone locked然后在开关机

现象：
绿屏

分析：
提供了一份log和死机图片
|
==== State: Opened by: cmadmin on 10 May 2023 09:48:41 ====

  == Ruby.Xu@unisoc.com On 2023-05-10T01:48:11Z (json) ==
Wait for PAL_CphyIdleConfigCnf  timeout
等待回复cnf超时assert,请LDSP看下。

==== State: Opened by: cmadmin on 09 May 2023 18:38:46 ====

  == Bo.Zhou@unisoc.com On 2023-05-09T10:37:56Z (json) ==
\\*\"D:\jenkins\workspace\s3_2_146740\CD\MS_Code\PS\stack\las\common\other\sds_logger\src\new_logger.c"\*

-000|TXAS_SaveMainReg(
    |  ?,
    |    cur_lr = 0x402E2000,
    |    cur_pc = 0x3F)
    |
-001|TXAS_SystemAssert(
    |  ?,
    |    file = 0x80C8C858,
    |    line = 1582,
    |    assert_info_ptr = 0x8265CEAC)
    |  assert_mode = 1
    |  cur_sp = 2187710056
    |  cur_lr = 2165156851
    |  cur_pc = 2169420248
    |
3499|
-002|Logger_assert(
    |  ?,
    |  ?,
    |  ?,
    |  ?,
    |    a_format_Ptr = 0x80C8C8F0)
    |  abyTraceBuff = "Wait for PAL_CphyIdleConfigCnf  timeout"
    |
 318|
-003|PAL_CphyIdleConfigReq(
    |  ?,
    |    cardId = 0)
    |  pMultiVar = 0x81D11868
    |
1582|
-004|PAL_CMD_UE_ModeChanged_Handler(
    |    a_msg_Ptr = 0x8265CFF8,
    |    cleanBackupConfig = 0)
    |
3996|
-005|RLM_Idle_switchFromConnectionSetupToCampedState(
    |  ?,
    |  ?)
    |  icm_msg = (status = CHANGE_STATUS_IDLE, cardId = 0)
    |
4097|
-006|lcontrol_main(
    |  ?,
    |    ilm_ptr = 0x8265D05C)
    |  message_Ptr = 0x821236F8
    |
  98|
-007|stack_multi_module_task(
    |  ?)
    |  current_ilm = (src_entity_id = 5, dest_entity_id = 5, src_mod_id = 41, dest_mod_id = 247, sap_id = 252, msg_id = 640, user_data_ptr = 0x821236F8, pdu_data_ptr
    |  my_indx = 176
    |
 233|
 ---|end of frame

==== State: Opened by: cmadmin on 09 May 2023 15:48:03 ====

  == zhongping.shi@unisoc.com On 2023-05-09T07:47:49Z (json) ==
请帮忙看下死机原因，谢谢。
-000|TXAS_SaveMainReg(
    |  ?,
    |    cur_lr = 0x402E2000,
    |    cur_pc = 0x3F)
    |
-001|TXAS_SystemAssert(
    |  ?,
    |    file = 0x80C8C858,
    |    line = 1582,
    |    assert_info_ptr = 0x8265CEAC)
    |  assert_mode = 1
    |  cur_sp = 2187710056
    |  cur_lr = 2165156851
    |  cur_pc = 2169420248
    |
3499|
-002|Logger_assert(
    |  ?,
    |  ?,
    |  ?,
    |  ?,
    |    a_format_Ptr = 0x80C8C8F0)
    |  abyTraceBuff = (87, 97, 105, 116, 32, 102, 111, 114, 32, 80, 65, 76, 95, 67, 112, 104, 121, 73, 100, 108, 101, 67, 111, 110, 102, 105, 103, 67, 110, 102, 32, 32, 116, 105, 109, 101, 111, 117, 116, 0, 76, 140, 222, 130, 209, 7, 0, 0, 236, 147, 209, 129, 104, 56, 209
    |
 318|
-003|PAL_CphyIdleConfigReq(
    |  ?,
    |    cardId = 0)
    |  pMultiVar = 0x81D11868
    |
1582|
-004|PAL_CMD_UE_ModeChanged_Handler(
    |    a_msg_Ptr = 0x8265CFF8,
    |    cleanBackupConfig = 0)
    |
3996|
-005|RLM_Idle_switchFromConnectionSetupToCampedState(
    |  ?,
    |  ?)
    |  icm_msg = (status = CHANGE_STATUS_IDLE, cardId = 0)
    |
4097|
-006|lcontrol_main(
    |  ?,
    |    ilm_ptr = 0x8265D05C)
    |  message_Ptr = 0x821236F8
    |
  98|
-007|stack_multi_module_task(
    |  ?)
    |  current_ilm = (src_entity_id = 5, dest_entity_id = 5, src_mod_id = 41, dest_mod_id = 247, sap_id = 252, msg_id = 640, user_data_ptr = 0x821236F8, pdu_data_ptr = 0x0)
    |  my_indx = 176
    |
 233|
 ---|end of frame

==== State: Opened by: cmadmin on 09 May 2023 10:20:07 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166844|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]FOTA相关问题咨询和确认【CDTASK-5837】|1. Q:Confirm if the recovery FOTA image are been signed
   A: no，fota bin not signed

2. Q:During build generation, which files undergo signing?
   A: fdl1,fdl2,boot0,boot1,user_image,kernel_image

3. Q:Can you explain the order of authentication for signed images?
   A: download: rom ->fdl1->fdl2, start phone: rom->boot0->boot1->kernel bin->user image.

4. Q:Could you elaborate on the structure of the efuse flag?
   A:

5. Q: If someone uses the research download tool to replace signed files with altered ones, can they break secure boot?
   A: no,  if not signed,  not allow download

6. Q: Kindly share the procedure to generate Unsigned Builds
   A:

7. Q: How can we check if the files in a binary/Pac file are signed or not?
   A: sign is auto on build process|
==== State: Closed by: waterworld on 09 May 2023 15:53:53 ====

好的 谢谢

==== State: NeedInfo by: cmadmin on 09 May 2023 15:51:47 ====

  == Lingjun.Han1@unisoc.com On 20230509T07:49:26 (xml) ==
其他几点是我上次回复的。没有问题。
(20230509T06:08:29)

==== State: Opened by: waterworld on 09 May 2023 14:08:03 ====

其他点呐，确认没问题是吗

==== State: NeedInfo by: cmadmin on 09 May 2023 14:00:50 ====

  == Lingjun.Han1@unisoc.com On 2023-05-09T05:58:27Z (json) ==
第4点邮件给过了图片了， 开启了secureboot功能后不存在第六点的情况。
(2023-05-09T02:16:42Z)

==== State: Submitted by: waterworld on 09 May 2023 10:13:38 ====

 == Headline Changed from == 
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]FOTA相关问题咨询和确认
To
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]FOTA相关问题咨询和确认【CDTASK-5837】

|
# SPCSS01166836|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][6部遵义][HMD][TRALNA-2184]设置双卡的呼叫转移设置失败，视频log见附件,之前提过cq:SPCSS01160013,客户还是复现了，麻烦帮忙看看
步骤：
（1）重新再复测一次，通过菜单进入业务界面，与之前测试步骤一致
（2）通过在拨号盘输入暗码：*62*84327523440*11# 是否可以正确执行，以上两个步骤请抓取log查看
现象：
设置双卡呼叫转移还是失败，会弹出提示
分析：
|
==== State: Opened by: waterworld on 10 May 2023 15:40:28 ====

请帮忙确认Modem log该如何抓取, 功能机平台, 没有Modem log的说明文档

==== State: NeedInfo by: cmadmin on 10 May 2023 14:32:23 ====

  == Jie.Jiang@unisoc.com On 20230510T06:31:07 (xml) ==
客户，您好：

和上层同事沟通，log中搜索不到任何的参数，暂时未见异常，还请复测看看呢，谢谢
(20230510T06:28:00)

==== State: Opened by: waterworld on 10 May 2023 14:24:37 ====

你好，
如电话沟通，还请在帮忙确认下log是否可用

==== State: NeedInfo by: cmadmin on 10 May 2023 10:00:40 ====

  == Jie.Jiang@unisoc.com On 2023-05-10T02:00:20Z (json) ==
客户，您好：

1、Modem log中未见任何的测试流程，然后log丢失较多，丢失了24%左右，麻烦您按照测试步骤，重新抓一份log看看呢
2、若对抓log有疑问的话，麻烦您联系cpm看看是否有抓log手册或者文档

谢谢


D:\BUG\2243793\TRALNA-2184-Retest-Fail\logs
(2023-05-09T06:15:56Z)

==== State: Opened by: cmadmin on 09 May 2023 14:16:35 ====

  == Huimin.Zhou@unisoc.com On 2023-05-09T06:15:27Z (json) ==
APN配置与安卓版本相同，请帮忙check下返回error原因，谢谢！

10393577-1 	20:51:31.936 	SIM1  	  	-> PDN_CONNECTIVITY_REQUEST                         	                                             	1:39:09.640  	
[PEER]
0000: 02 09 D0 21 28 05 04 78 63 61 70 27 23 80 80 21 10 01 01 00 10 81 06 00 00 00
00 83 06 00 00 00 00 00 03 00 00 0D 00 00 07 00 00 08 00 00 09 00  ...!(..xcap'#..!.
	PDN_Type = PDN_TYPE_IP_V_6
10396205-1 	20:51:32.232 	SIM1  	  	<- ACTIVATE_DEFAULT_EPS_BEARER_CONTEXT_REQUEST      	                                             	1:39:09.936  	
		PDN_Type = PDN_TYPE_IP_V_6
xcap.mn
0030: 63 30 30 31 06 6D 63 63 34 35 32 04 67 70 72 73 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  c001.mcc452.gprs
20	10396725-1	20:51:32.259	--		Time: 594558 IMS: MN->CSM[0] CSM_EVENT_TYPE_RADIO CSM_RADIO_REASON_IP_CHANGE_SS		
21	10397040-1	20:51:32.300	--		Time: 594558 ATC: BuildResultCodeRsp, link_id:33, sim:0, string: +CME ERROR: 176	ATC	
22	10433420-1	20:51:40.574	--		mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_RADIO[3],CSM_RADIO_REASON_IP_CHANGE_SS[3]		
23	10433423-1	20:51:40.575	--		IMS: MN->CSM[0] CSM_EVENT_TYPE_RADIO CSM_RADIO_REASON_IP_CHANGE_SS		
24	10433742-1	20:51:40.592	--		ATC: BuildResultCodeRsp, link_id:33, sim:0, string: +CME ERROR: 176	ATC	
25	10477017-1	20:51:50.703	--		mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_RADIO[3],CSM_RADIO_REASON_IP_CHANGE_SS[3]		
26	10477020-1	20:51:50.704	--		IMS: MN->CSM[0] CSM_EVENT_TYPE_RADIO CSM_RADIO_REASON_IP_CHANGE_SS		
27	10477217-1	20:51:50.723	--		ATC: BuildResultCodeRsp, link_id:33, sim:0, string: +CME ERROR: 176	ATC

==== State: Opened by: cmadmin on 09 May 2023 10:46:20 ====

  == zhongping.shi@unisoc.com On 2023-05-09T02:45:37Z (json) ==
请帮忙看一下附加业务失败原因，如有问题请与我联系，谢谢。

log：D:\LOG\TRALNA-2184-Retest-Fail\logs
22	10397060-1	20:51:32.303	--	Time: 594558 HandleOperateSsCnf: result_type is 1,list num is = 0
53	10433758-1	20:51:40.596	--	HandleOperateSsCnf: result_type is 1,list num is = 0
84	10477233-1	20:51:50.726	--	HandleOperateSsCnf: result_type is 1,list num is = 0

==== State: Opened by: cmadmin on 09 May 2023 09:41:45 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166824|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][客户提问]fota升级支持哪些分区，展锐这边是否有fota升级哪些分区的建议|boot0.bin boot1.bin EXEC_KERNEL_IMAGE.bin EXEC_USER_IMAGE.bin fdl1.bin fdl2.bin 
FF615V23_QQVGA_48MB_CF13_KARBONN_BASE_deltanv.bin FF615V23_QQVGA_48MB_CF13_KARBONN_BASE_nvitem.bin
mmi_res_128x160.bin NEMOL_CAT1_EVS_DM_DSP.bin PM_nemol_cm4.bin PM_nemol_cm4_AB.bin T117_CAT1_LTEA_DSP.bin
以上分区是否可以加入fota分区中？
展锐这边是否有fota升级哪些分区的建议
|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:43:52 ====

  == Lingjun.Han1@unisoc.com On 2023-05-10T11:41:29Z (json) ==
4. NV - This contains the non-volatile memory, which stores important system settings and configuration data.

NV的升级有限制，不能修改NV分区的位置。


具体升级哪一个，由客户的实现方案确定的。   原理上这个5个bin都可以升级。
(2023-05-10T04:07:10Z)

==== State: Opened by: waterworld on 10 May 2023 12:02:35 ====

Dear unisoc，
  客户那边，fota想要使用以下几个，是否可行
1. UserImg - This contains the user image, which is usually the operating system and application files.

2. KernelImg - This contains the kernel image, which is the core component of the operating system.

3. MMIRes - This contains the Man-Machine Interface resources, which are used to display the user interface.

4. NV - This contains the non-volatile memory, which stores important system settings and configuration data.

5. Preload_Hidden - This contains preloaded applications and other data that are hidden from the user.

6. PreloadUdisk - This contains preloaded applications and other data that are visible to the user.

==== State: NeedInfo by: cmadmin on 10 May 2023 11:09:03 ====

  == Lingjun.Han1@unisoc.com On 2023-05-10T03:08:43Z (json) ==
EXEC_KERNEL_IMAGE.bin   ---- kernel bin

EXEC_USER_IMAGE.bin ------ mmi bin
(2023-05-09T08:35:26Z)

==== State: Opened by: waterworld on 09 May 2023 16:29:12 ====

Dear Unisoc，
  如电话沟通，请补充一下，关于kernel和mmi 对应的是哪个bin文件

==== State: NeedInfo by: cmadmin on 09 May 2023 14:00:09 ====

  == Lingjun.Han1@unisoc.com On 2023-05-09T05:59:52Z (json) ==
要看客户自己的实现，fota升级方案是客户自己开发的。
(2023-05-09T02:16:49Z)

==== State: Opened by: waterworld on 09 May 2023 10:16:04 ====

Dear Unisoc，
   能否告知，具体对应的bin是哪几个

==== State: NeedInfo by: cmadmin on 09 May 2023 09:22:54 ====

  == Lingjun.Han1@unisoc.com On 20230509T01:19:23 (xml) ==
一般升级kernel 和 mmi 两部分， 根据客户自己试下fota方案，可以自己实现升级的单元。
(20230509T01:11:53)

==== State: Opened by: cmadmin on 09 May 2023 09:22:53 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166650|[SC9863A1][Waterworld][A567-SC9863A1-A13-][14008][CEBU-智能手机]客户验证BAND71灵敏度异常|此问题关联CQSPCSS01163479，我司项目配置BAND71频段，送样在海外验证BAND71弱场下掉线。1，OTA测试机器不良机器跟OK的机器，灵敏度差异在2dB以上，主板测试传导灵敏度基本一致，差异小于0.5dB;2,对调主板后发现问题跟着主板走，不良的机器做环境处理基本不生效；3，对比正常主板和不良主板，光板和贴片物料都是一致的，不良机器跟OK的机器对比数量差不多，由于只抽验了数台机器，所以没有准确不良率；4，对不良的机器更新软件，锁定DDR频率在800M情况下复测，发现问题依旧；由于机器在OTA场景下是灭屏，未开启其他应用，所以不认为屏和摄像头这些外部器件干扰。目前需要贵司帮忙对不良的机器做下干扰源的扫描，以帮助定位问题。谢谢！附件上传了一份对比测试报告。|
==== State: NeedInfo by: cmadmin on 10 May 2023 14:15:00 ====

  == Hui.Tian@unisoc.com On 2023-05-10T06:13:56Z (json) ==
待客户确认。
(2023-05-09T09:46:22Z)

==== State: Opened by: cmadmin on 09 May 2023 17:48:54 ====

  == Hui.Tian@unisoc.com On 2023-05-09T09:46:22Z (json) ==
秦工，经过分析B71接收有异常跟屏蔽罩没有密封好相关，请先把屏蔽罩屏蔽后再测试，谢谢！

==== State: Opened by: waterworld on 08 May 2023 19:20:25 ====

Dear SPRD:已经上传资料，见附件。

==== State: Opened by: cmadmin on 08 May 2023 18:59:41 ====

  == Hui.Tian@unisoc.com On 20230508T10:59:07 (xml) ==
秦工，请上传nv工程,SCH&PCB,联系方式：深圳弘毅大厦18楼，田辉，13528723226，谢谢！

==== State: Opened by: cmadmin on 08 May 2023 17:50:50 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166628|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]共享wifi热点问题|Dear sprd:
  客户反馈分享无密码wifi热点，其他机器一直都搜索不到该wifi。我们测试结果是每次要等5 -6分钟才能搜索到wifi，复现视频和log稍候上传到附件。麻烦贵司帮忙看一下，感谢。|
==== State: NeedInfo by: cmadmin on 10 May 2023 15:56:44 ====

  == Junbin.Wang@unisoc.com On 20230510T07:55:15 (xml) ==
(In reply to waterworld from comment #7)
Dear customer，
这个bin是我从版本库上抓下来的。
正式版本，你可以咨询一下CPM。
(20230510T02:47:23)

==== State: Opened by: waterworld on 10 May 2023 10:40:55 ====

Dear sprd:
  贵司给的cp bin可以用于量产版本吗

==== State: NeedInfo by: cmadmin on 09 May 2023 11:05:27 ====

  == Junbin.Wang@unisoc.com On 2023-05-09T03:05:12Z (json) ==
(In reply to waterworld from comment #5)
Dear customer，
可以测试机，地址：四川省成都市高新区天府软件园C区5号楼紫光展锐 王君斌 1898208975.
所寄机子，请让你们的硬件先检测一下wifi硬件性能是否ok（OTA/传导测试）
(2023-05-09T02:47:45Z)

==== State: Opened by: waterworld on 09 May 2023 10:58:44 ====

Dear sprd：
  可以直接寄复现问题机给贵司抓下log吗，我们这边没环境不好搞。

==== State: Opened by: waterworld on 09 May 2023 10:46:23 ====

Dear sprd:
   可以让硬件先确认测试机的wifi硬件性能是否ok哈。 -- 这个机器应该是好的，复现机器恢复出厂开启热点后其他机器立马就能搜索到了。

==== State: NeedInfo by: cmadmin on 09 May 2023 10:41:45 ====

  == Junbin.Wang@unisoc.com On 2023-05-09T02:37:06Z (json) ==
Dear customer，
空口抓包，请参考附件文档“空口抓包说明文档”。
可以让硬件先确认测试机的wifi硬件性能是否ok哈，谢谢。
(2023-05-09T00:16:35Z)

==== State: Opened by: waterworld on 09 May 2023 08:13:21 ====

Dear sprd:
   wifi空口数据要怎么抓呢

==== State: NeedInfo by: cmadmin on 08 May 2023 20:28:14 ====

  == Junbin.Wang@unisoc.com On 2023-05-08T12:26:45Z (json) ==
Dear customer，
分析了提供的两份log，热点都是正常打开了的，没有出现异常的log信息。

该问题如果可以自测试复现的话，最好把测试机作为热点的空口抓取一下，看看空口中是否有测试机发出的beacon或者probe rsp。

另外，看测试机的softap一直是建立在11信道上的，可以找一个稍微干净点的环境（如屏蔽房或者地下车库），wifi空口干扰比较少的环境，做一下测试，看看是否有改善（排除干扰造成的发包异常）

测试机当前使用的cp bin版本太老旧了，在附件路径上放了一个较新的，可以替换旧bin测试。
(2023-05-08T10:38:50Z)

==== State: Opened by: cmadmin on 08 May 2023 18:40:13 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166601|[SC9832E][Waterworld][FS293-SC9832E-A13][13934][CEBU-智能手机]开机向导链接WIFI,登录Google账号后，待DTI推送完后，出现相机进不去的现象，已上传log，麻烦帮忙看看是什么问题，谢谢
步骤：开机向导链接WIFI,登录Google账号后，待DTI推送完

现象：相机进不去

分析：|
==== State: Opened by: cmadmin on 09 May 2023 10:57:49 ====

  == Sunny.Hu@unisoc.com On 2023-05-09T02:57:06Z (json) ==
和客户沟通launch 的问题，点击提示Camera APP未安装。进MAIN MENU又可以点击进入

==== State: Opened by: waterworld on 09 May 2023 10:57:11 ====

dear sprd,
          如电话沟通，dti推送完成后，桌面的相机及其他推送的谷歌应用点击应用图标进入对应应用的时候提示应用未安装，但是在上滑应用列表中可以正常进入应用，推测是Launcher的问题，请帮忙尽快看下，谢谢。

==== State: Opened by: cmadmin on 08 May 2023 17:25:23 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166486|[SC9832E][Waterworld][A507-SC9832E-A13][14037][Other]照相机前摄像头录像出现取景界面的画面卡住
步骤：1.打开照相机，切换到前摄像头录像模式，录制个视频后将设备放在桌面保持前摄像头实景的画面不动
        2. 过了一会后查看取景界面
现象：取景界面显示实景卡住，拿起设备后仍是之前的画面，录像时仍是之前的画面

视频和ylog已上传附件，请帮忙分析一下，谢谢~
|
==== State: NeedInfo by: cmadmin on 10 May 2023 09:43:01 ====

  == Jie.Yang1@unisoc.com On 2023-05-10T01:41:53Z (json) ==
dear customer

如沟通，请先回退前摄的插值后测试，或者减小前摄的插值，比如插值到1280 720，
(2023-05-09T09:22:25Z)

==== State: Opened by: waterworld on 09 May 2023 17:17:36 ====

hi sprd:
    最新log-KA已上传附件，看log初步怀疑是这两个错误引起的，帮忙看下是否还有其他的错误
    行 255394: 3E5A1 < 6> [19405.510454] [05-09 02:32:57.510] DCAM_CORE: 0 1415 sprd_img_tx_error : tx error
	行 255395: 3E5A2 < 6> [19405.510532] [05-09 02:32:57.510] DCAM_CORE: 26186 4233 sprd_img_read : DCAM_CORE: error evt 2
	行 255395: 3E5A2 < 6> [19405.510532] [05-09 02:32:57.510] DCAM_CORE: 26186 4233 sprd_img_read : DCAM_CORE: error evt 2
	行 255594: 3E669 < 3> [19407.155266] [05-09 02:32:59.155] DCAM_CORE: 1632 2026 sprd_timer_callback : fail to work DCAM timeout.
	行 255653: 3E6A4 < 6> [19407.155967] [05-09 02:32:59.155] DCAM_CORE: 26186 4233 sprd_img_read : DCAM_CORE: error evt 16
	行 255653: 3E6A4 < 6> [19407.155967] [05-09 02:32:59.155] DCAM_CORE: 26186 4233 sprd_img_read : DCAM_CORE: error evt 16

==== State: NeedInfo by: cmadmin on 09 May 2023 15:48:55 ====

  == Jie.Yang1@unisoc.com On 2023-05-09T07:45:52Z (json) ==

dear customer

刚刚上传的新的log中没有看到camera相关的log，请再确认一下
(2023-05-09T07:26:59Z)

==== State: Opened by: waterworld on 09 May 2023 15:20:52 ====

hi sprd:
    debug版本的测试log5和视频已上传附件，请帮忙尽快分析一下，感谢~

==== State: NeedInfo by: cmadmin on 08 May 2023 20:01:19 ====

  == Jie.Yang1@unisoc.com On 20230508T11:58:58 (xml) ==

dear customer

请上传一份debug版本的log，抓log之前先清空log，谢谢。
(20230508T11:54:17)

==== State: Opened by: cmadmin on 08 May 2023 19:51:54 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 08 May 2023 19:02:16 ====

hi sprd:
    这个项目比较着急，请尽快帮忙处理一下，谢谢~
|
# SPCSS01166459|[SC9820E][Waterworld][A356-R3][7781][手机][遵义六部][kaios]客户需要我们提供PIC Table测试IPV6用|PICS/PIXT TABLE
需要提供PIC Table测试IPV6用

附件“PICS table template.xlsx”是客户提供的模板，请问贵司是否有现成的表格吗?或者基于客户模板帮忙确认下支持情况，谢谢|
==== State: Closed by: waterworld on 10 May 2023 16:00:43 ====

提错项目，和CPM沟通关闭后重新提一个

==== State: NeedInfo by: cmadmin on 08 May 2023 17:26:20 ====

  == yinhua.tu@unisoc.com On 2023-05-08T09:25:46Z (json) ==
dear waterworld,
请将附件过滤出跟hal以下跟展锐平台相关的内容上传附件确认，hal以上请联系kaios处理。感谢
(2023-05-08T08:39:01Z)

==== State: Opened by: cmadmin on 08 May 2023 15:53:21 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166446|[SC9820E][Waterworld][FS862][12595][手机]请问这个平台现在支持B71吗|hi；
   请问SPRDROID6.0_KAIOS2.5_R3_W20.49.1现在需要做B71频段，要打patch吗，帮忙确认一下，谢谢|
==== State: Resolved by: cmadmin on 08 May 2023 19:04:14 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
[1.Root Cause        ]:请问这个平台现在支持B71吗

[2.Resolution        ]:不支持



==== State: Opened by: cmadmin on 08 May 2023 19:02:44 ====

  == Dandan.Yuan@unisoc.com On 2023-05-08T11:01:48Z (json) ==
问题已解答，本CQ关闭

==== State: Opened by: cmadmin on 08 May 2023 16:57:09 ====

  == Dandan.Yuan@unisoc.com On 2023-05-08T08:54:44Z (json) ==
刘工，该平台不支持B71，谢谢！

==== State: Opened by: cmadmin on 08 May 2023 16:14:15 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166429|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][CD 769]重启和monkey测试出现一台dump
步骤：
用DVT C机器，下载未升到kernel 5.4.210的软件(kernel 5.4.161)跑重启和monkey，一共11台
(四供：4.H-1401-E032GB-004  (P)(N)IC(MEMORY),32GB EMMC5.1(TLC 256Gbx1),BGA153,11.5x13x0.9(±0.1)mmH,E32GCYNB1ABE00,SCY，
二供：4.H-1401-4D016G-023  (P)(T)IC(MEMORY),16Gb LPDDR4X,3733Mbps,200ball FBGA,10.0x14.5x1.0(Max)mmH,CXDB4ABAM-MK,CXMT)
现象：
1台机器出现dump
分析：
[exception_reboot_reason]: kernel_crash
[exception_panic_reason]: Native hang monitor trigger
[exception_time]: 2023-05-06_20-57-25
[exception_file_info]: not-bugon
[exception_task_id]: 586
[exception_task_family]: [native_hang_det, 586][kthreadd, 2]
[exception_pc_symbol]: [<6daeefb8>] sysdump_panic_event+0xf0/0x664
[exception_stack_info]: [<1ee653cf>] prepare_exception_info+0x190/0x194

dump log已上传附件，还请贵司帮忙看下是什么问题，非常感谢

cat sysdump.core.* > vmcore
./crash_arm -m phys_base=0x80000000 vmlinux vmcore
另外想请教下，请问上面这个命令是哪写错了还是少了什么参数，这边想试着解析，提示
crash_arm: invalid kernel virtual address: 0  type: "fill_thread_info"
please wait... (determining panic task)    
crash_arm: invalid kernel virtual address: 0  type: "32-bit KVADDR"

|
==== State: Opened by: waterworld on 10 May 2023 11:26:57 ====

您好，
昨天又出现了一台dump，dump log和ylog已上传附件，谢谢
[exception_reboot_reason]: kernel_crash
[exception_panic_reason]: Native hang monitor trigger
[exception_time]: 2023-05-09_08-42-40

==== State: Opened by: cmadmin on 08 May 2023 16:55:16 ====

  == Wuhong.Tian@unisoc.com On 20230508T08:53:20 (xml) ==
native hang, 前面看到zygot有重启，上层同事看看ylog有没有有用信息

-time is 2023-05-06_20-57-25

ylog是这份

\bug\2243149\ID769-FS308-C#-1#_ylog-20230508101125\data\ylog\ylog\ap\001-0506_183044

native hang时间
[826415.523170]
ylog最后时间 kernel log
CAE6E <6> [826490.215500] c6[05-06 20:57:17.215] process reclaim scan 1210 reclaim 161 efficiency 13


[826265.003881] systemserver cmd2 , get para: ( 50)
[826295.014726] systemserver cmd2 , get para: ( 50)
...
[826311.086067] init: Service 'zygote' (pid 438) received signal 9
[826311.088507] init: Sending signal 9 to service 'zygote' (pid 438) process group...
[826311.104568] libprocessgroup: Successfully killed process cgroup uid 0 pid 438 in 15ms
[826311.108316] init: starting service 'exec 18 (/system/bin/vdc volume abort_fuse)'...
...
[826311.379939] init: processing action (init.svc.media=*) from (/system/etc/init/mediaserver.rc:1)
[826311.381917] init: starting service 'zygote'...
[826311.384076] init: Created socket '/dev/socket/zygote', mode 660, user 0, group 1000
[826311.385234] init: Created socket '/dev/socket/usap_pool_primary', mode 660, user 0, group 1000
...
[826415.464732] WCN BASE: wcn_suspend enter
[826415.467283] WCN BASE: wcn_suspend enter
[826415.467979] [drm] sprd_drm_pm_suspend()
[826415.469017] [drm] sprd_dsi_encoder_disable()
[826415.469021] [drm] udc_sprd_panel_disable()
[826415.523170] 05a8f000-05b03000 r--p    surfaceflinger
[826415.523174] 05b03000-05e96000 r-xp    surfaceflinger
[826415.523180] 05e96000-05eae000 r--p    surfaceflinger
[826415.523183] 05eae000-05eb8000 rw-p    surfaceflinger
[826415.523891] ad458000-ad520000 rw-s    renderD128
[826415.523895] ad520000-ad840000 rw-s    renderD128
[826415.523898] ad840000-ad908000 rw-s    renderD128
...
[826415.667472] Free swap  = 1463500kB
[826415.667475] Total swap = 1755032kB
[826415.667477] [Native Hang Detect] hang_detect_counter:-1, 
[826415.667479] hang detect save data finish ......
[826415.667481] [Native Hang Detect] hang_detect_counter:-1, 
[826415.667483] we should trigger panic...

==== State: Opened by: cmadmin on 08 May 2023 16:47:16 ====

  == Wuhong.Tian@unisoc.com On 20230508T08:46:34 (xml) ==
Dear customer

sysdump文件我也解析出错，加参数  --minimal 可以看log, 但bt ps等命令不能使用


wuhong.tian@shand120:~/work/bug/2243149/ID769-FS308-C#-1#_Dumplog-2023_05_08_10_05_48_110_armlog/ap_sys_dump$ ~/bin/800/crash_arm -m vabits_actual=39 -m phys_offset=0x80000000 -m kimage_voffset=0xffffffbf90000000 vmlinux sysdump.core     


crash_arm: invalid kernel virtual address: 0  type: "fill_thread_info"

crash_arm: invalid kernel virtual address: 0  type: "fill_thread_info"
please wait... (determining panic task)    
crash_arm: invalid kernel virtual address: 0  type: "32-bit KVADDR"
wuhong.tian@shand120:~/work/bug/2243149/ID769-FS308-C#-1#_Dumplog-2023_05_08_10_05_48_110_armlog/ap_sys_dump$ ~/bin/800/crash_arm -m vabits_actual=39 -m phys_offset=0x80000000 -m kimage_voffset=0xffffffbf90000000 vmlinux sysdump.core  --minimal


NOTE: minimal mode commands: log, dis, rd, sym, eval, set, extend and exit

crash_arm> log

==== State: Opened by: cmadmin on 08 May 2023 15:44:15 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166425|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]通话HD图标问题|Dear sprd:
  之前我们提过一个CQ(SPCSS01163386),然后我们再显示HD图标的地方加上了primaryCallState.isHdAudioCall判断，但是客户说不管是AMR-WB 还是 AMR-NB都不显示HD图标了。我们查看log发现是因为isHdAudioCall一直返回的false。 通话log稍候上传到附件，麻烦贵司再帮忙看一下，感谢。|
==== State: Closed by: waterworld on 09 May 2023 17:45:00 ====

Dear sprd:
  问题可以关闭了，感谢支持。

==== State: NeedInfo by: cmadmin on 09 May 2023 16:27:46 ====

  == Majun.Xie@unisoc.com On 20230509T08:25:45 (xml) ==
Dear Customer：

安卓 8.1 没有实现 Cs 下hd 图标的显示，原生framework ，主要是 GsmCdmaConnection 也没有实现。

>> 1. 上报的没有 audioQuality 属性。

/frameworks/opt/telephony/src/java/com/android/internal/telephony/DriverCall.java

105      public String
106      toString() {
107          return "id=" + index + ","
108                  + state + ","
109                  + "toa=" + TOA + ","
110                  + (isMpty ? "conf" : "norm") + ","
111                  + (isMT ? "mt" : "mo") + ","
112                  + als + ","
113                  + (isVoice ? "voc" : "nonvoc") + ","
114                  + (isVoicePrivacy ? "evp" : "noevp") + ","
115                  /*+ "number=" + number */ + ",cli=" + numberPresentation + ","
116                  /*+ "name="+ name */ + "," + namePresentation;
117      }

>> 2. 平台有实现监听 AT+SPCAPABILITY 看是否是 HD，但是此实现较为复杂，需要修改很多代码

综上，建议维持原有修改，thanks
(20230509T07:27:49)

==== State: Opened by: cmadmin on 09 May 2023 15:31:08 ====

  == Qiqing.Pan@unisoc.com On 2023-05-09T07:27:49Z (json) ==
	
(In reply to 谢马军 (Majun Xie) 消费电子事业部/消费电子事业部-产品工程部/应用软件部/(585)-2014 from comment #1)

modem的编码方式是AMR WB，客户是改了AP代码导致的问题，麻烦AP同事再确认下是否修改导致，如果确定是modem问题，麻烦贴下modem上报了什么导致问题，谢谢！

2	4317077-9	02:11:59.466	--	Time: 40524 WMAC:IMP:AMR:TX: CheckRate - Find out the TrCH for AMR WB, TBsize=72.	WPS_WL2

==== State: Opened by: cmadmin on 09 May 2023 09:51:06 ====

  == Andy_yu.Zhang@unisoc.com On 2023-05-09T01:47:51Z (json) ==
WL2这边检测到的语音编码方式是AMR_WB，但是不清楚是不是丢trace了， 没看到 有“ Notify mn layer to show HD Icon! ”这个trace打印，但是推测应该是有的，而且modem log中也只有1通电话可以去匹配AP log，请MN模块看看是否有上报AMR_WB。如果MN无问题，可以继续转给我需要客户重抓完整log。

762	4316752-6	02:11:59.443	Time: 40522 UU :(T_DL_DCCH_MessageType_radioBearerSetup)dd 73 85 5b a3 a7 00 00 81 30 59 e8 10 0a 88 56 44 0c 01 60 02 33 22 06 01 30 02 1d 91 03 00 d8 01 82 c4 bc 3d 4a 	
763	4317077-9	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX: CheckRate - Find out the TrCH for AMR WB, TBsize=72.	WPS_WL2
764	4317077-10	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX:WB: TrCh Id for classB is 3, and Maximum TF index is 3.	WPS_WL2
765	4317077-11	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX: CheckRate -Find out the TrCH for class B data of AMR WB, AMR_Rate=2, g_CS_AMR_WB_LastRate=255.	WPS_WL2
766	4317077-12	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX: WMAC_AMR_WB_SetRate: AMR_Rate changed from 255 to 2!	WPS_WL2

==== State: Opened by: cmadmin on 08 May 2023 17:37:24 ====

  == Andy_yu.Zhang@unisoc.com On 20230508T09:36:02 (xml) ==
20343	4317077-9	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX: CheckRate - Find out the TrCH for AMR WB, TBsize=72.	WPS_WL2
20344	4317077-11	02:11:59.466	Time: 40524 WMAC:IMP:AMR:TX: CheckRate -Find out the TrCH for class B data of AMR WB, AMR_Rate=2, g_CS_AMR_WB_LastRate=255.	WPS_WL2

==== State: Opened by: cmadmin on 08 May 2023 16:35:37 ====

  == Majun.Xie@unisoc.com On 20230508T08:34:51 (xml) ==
hi Modem：

从ap log 看，此通电话不是AMR-WB 格式电话，请帮忙看下底层是否有上报？

\ylog\ap\current\00-0101_020508\android\0000.log 

S020E79 05-08 15:37:16.380   570  2412 I Telecom : CallsManager: setCallState DIALING -> ACTIVE, call: [TC@1, DIALING, com.android.phone/com.android.services.telephony.TelephonyConnectionService, tel:***********, A, childs(0), has_parent(false), [Capabilities: CAPABILITY_SUPPORT_HOLD CAPABILITY_MUTE CAPABILITY_CANNOT_DOWNGRADE_VIDEO_TO_AUDIO], [Properties:]]: CSW.sA@AWk

==== State: Opened by: cmadmin on 08 May 2023 15:44:07 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166397|[SC7731E][Waterworld][A507-SC7731E-A12][13448][智能手机][SC7731E][Waterworld][A507-SC7731E]monkey出现很多的无响应问题 如相机、fm、systemui等 请问是否能优化
步骤：
monkey出现很多的无响应问题 如相机、fm、systemui等 请问是否能优化 log已上传到ftp请帮忙分析下，谢谢。
现象：

分析：|
==== State: NeedInfo by: cmadmin on 09 May 2023 15:08:12 ====

  == Lucas.Li@unisoc.com On 20230509T07:06:22 (xml) ==
目前看发生大量anr，cpu负载较高，请合入以下发生anr会自动抓取atrace的代码复测，提供trace和Ylog，谢谢。
提供ylog及atrace。

获取atrace
adb pull /data/local/tmp/



diff --git a/cmds/atrace/atrace.cpp b/cmds/atrace/atrace.cpp
index 7f95fab536..2cf13d1239 100755
--- a/cmds/atrace/atrace.cpp
+++ b/cmds/atrace/atrace.cpp
@@ -1375,8 +1375,11 @@ int main(int argc, char **argv)
             printf(" done\n");
             fflush(stdout);
             int outFd = STDOUT_FILENO;
+            char file_name_buffer[256];
             if (g_outputFile) {
-                outFd = open(g_outputFile, O_WRONLY | O_CREAT | O_TRUNC, 0644);
+                int64_t realtime_in_ms = systemTime(CLOCK_REALTIME) / 1000000;
+                snprintf(file_name_buffer, 256, "%s_%" PRId64, g_outputFile, realtime_in_ms);
+                outFd = open(file_name_buffer, O_WRONLY | O_CREAT | O_TRUNC, 0644);
             }
             if (outFd == -1) {
                 printf("Failed to open '%s', err=%d", g_outputFile, errno);
diff --git a/cmds/atrace/atrace.rc b/cmds/atrace/atrace.rc
old mode 100644
new mode 100755
index 5b3e03ce83..c67e3feada
--- a/cmds/atrace/atrace.rc
+++ b/cmds/atrace/atrace.rc
@@ -399,3 +399,11 @@ on property:persist.debug.atrace.boottrace=1
 service boottrace /system/bin/atrace --async_start -f /data/misc/boottrace/categories
     disabled
     oneshot
+
+service asyncstartatrace /system/bin/atrace --async_start sched freq idle am wm gfx view sync binder_driver hal dalvik input res disk ss sync memreclaim -c -b 16384
+    class core
+    oneshot
+
+service asyncdumpatrace /system/bin/atrace --async_dump -o /data/local/tmp/atrace
+    disabled
+    oneshot


diff --git a/services/core/java/com/android/server/am/ActivityManagerService.java b/services/core/java/com/android/server/am/ActivityManagerService.java
index e5151f2ecdf0..08e32ac6f02c 100755
--- a/services/core/java/com/android/server/am/ActivityManagerService.java
+++ b/services/core/java/com/android/server/am/ActivityManagerService.java
@@ -17925,7 +17925,7 @@ public class ActivityManagerService extends IActivityManager.Stub
         } else {
             annotation = "Input dispatching timed out (" + reason + ")";
         }
-
+        SystemProperties.set("ctl.start", "asyncdumpatrace");
         if (proc != null) {
             synchronized (this) {
                 if (proc.isDebugging()) {


需要关闭Selinux权
user版本Selinux权限关闭方法：

在/system/core/init/selinux.cpp原码中修改
 bool IsEnforcing() {

 {

   int fd(open("/mboot/selinux", O_RDONLY | O_CLOEXEC | O_BINARY));

   if (fd != -1) {

     char v = 0xff;

     if (read(fd, &v, 1) < 0)

       PLOG(ERROR) << "Failed to read /mboot/selinux";

     close(fd);

     LOG(WARNING) << "/mboot/selinux is " << v;

     return v == '1';

     }

   }

   if (ALLOW_PERMISSIVE_SELINUX) {

     return StatusFromProperty() == SELINUX_ENFORCING;

   }

-   return true; //将其修改为 false

+ return false;

 }
(20230509T03:37:53)

==== State: Opened by: waterworld on 09 May 2023 11:33:37 ====

Dear sprd，
   如电话沟通，该项目是go版本2+32的项目，请帮忙尽快分析下，谢谢。

==== State: Opened by: cmadmin on 08 May 2023 15:16:56 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166329|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]请问一下，是否存在一个函数，能够返回当前选择的语言信息|例如：当功能机显示的语言是中文，函数返回 Chinese；
或者是印度语，函数返回 India；等|
==== State: NeedInfo by: cmadmin on 10 May 2023 15:24:01 ====

  == Xinyu.Zou3@unisoc.com On 2023-05-10T07:22:17Z (json) ==
Dear Customer，

若没其他问题，问题将关闭
(2023-05-10T02:53:14Z)

==== State: Opened by: waterworld on 10 May 2023 10:48:11 ====

好的，谢谢，我参考下试试

==== State: NeedInfo by: cmadmin on 09 May 2023 14:42:34 ====

  == Xinyu.Zou3@unisoc.com On 2023-05-09T06:41:57Z (json) ==
Dear Customer，

返回当前语言的英文字符信息的接口，可以参考下MMIMENU_DyGetItemString()
(2023-05-09T02:50:59Z)

==== State: Opened by: waterworld on 09 May 2023 10:44:34 ====

Dear Unisoc，
    是否存在返回数据为当前语言的英文字符信息的接口，MMIAPISET_GetLanguageType 此接口的数据为枚举类型

==== State: NeedInfo by: cmadmin on 08 May 2023 17:19:45 ====

  == Xinyu.Zou3@unisoc.com On 20230508T09:17:06 (xml) ==
Dear Customer，

获取当前语言的接口为MMIAPISET_GetLanguageType()
(20230508T07:12:27)

==== State: Opened by: cmadmin on 08 May 2023 15:08:50 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166323|[SC7731E][Waterworld][A507-SC7731E][13273][手机]财富九部海信项目KS118预约音频实验室，第二轮送测版本客观自测|Dear SPRD：

   我司海信项目KS118已根据第一轮验收问题调试完毕，需对第二轮送测版本客观音频部分进行自测。
请安排人员帮忙测试并输出结果。

十分感谢！|
==== State: Opened by: cmadmin on 09 May 2023 09:29:16 ====

  == Haonan.Zhang@unisoc.com On 20230509T01:28:51 (xml) ==
Dear cus:

  整机报告和只有响度，回声，TMOS的报告均已上传。具体结果见附件。

==== State: Opened by: cmadmin on 08 May 2023 15:02:43 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166322|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]AGPS定位时间过久问题|Dear sprd:
   终端客户反馈机器AGPS定位时间要30多秒，要求不能超过18秒。复现log稍候上传到附件，麻烦贵司帮忙看能否优化一下，感谢！|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:35:15 ====

  == Andy_yu.Zhang@unisoc.com On 2023-05-10T11:34:42Z (json) ==
Dear，

如果问题比较随机的话，那说明还是和链路质量有关，如果找个信号质量很好的点来测试，应该每次都会比较快，可以试试哈。信号质量很好还有问题的话，再抓log分析吧，谢谢。
(2023-05-10T11:23:16Z)

==== State: Opened by: cmadmin on 10 May 2023 19:22:34 ====

  == Zehai.Chang@unisoc.com On 20230510T11:21:00 (xml) ==
fengsheng
请看一下最后一份Log，为什么第一次定位会花90秒呢

==== State: Opened by: waterworld on 10 May 2023 13:46:53 ====

Dear sprd:
  客户在问为啥有的时候定位会很快呢，最后一份log第一次定位是90秒 后面两次都是满足合格的呢。

==== State: NeedInfo by: cmadmin on 10 May 2023 11:09:50 ====

  == Andy_yu.Zhang@unisoc.com On 2023-05-10T03:07:15Z (json) ==
Dear Customer，

根据TCP层同事描述的时间点附近，上下行传输质量是很差的，HARQ重传达到最大次数，那段时间在频点10763小区附近，ECNO等信号质量指标都很差，这种也没有进一步优化的可能，希望客户理解哈，谢谢哈。


2516	2855582-1	17:13:04.511	Time: 32492 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2518	2856272-1	17:13:04.551	Time: 32496 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2520	2857245-1	17:13:04.600	Time: 32501 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2522	2857596-1	17:13:04.621	Time: 32503 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2552	2861248-1	17:13:04.801	Time: 32521 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2554	2861629-1	17:13:04.820	Time: 32523 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2560	2863265-1	17:13:04.900	Time: 32531 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2561	2863628-1	17:13:04.921	Time: 32533 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2566	2865442-1	17:13:05.021	Time: 32543 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2569	2866853-1	17:13:05.101	Time: 32551 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
2571	2867524-1	17:13:05.140	Time: 32555 WL2:EDCH:WL2_EDCH_HARQ_PROCESS_ExceedMaxTransNum:Exceed MaxTransNum!	WPS_WL2
(2023-05-09T12:09:44Z)

==== State: Opened by: cmadmin on 09 May 2023 20:05:55 ====

  == Zack.Zhang@unisoc.com On 20230509T12:05:35 (xml) ==
请modem数据面同事帮看一下如下时间点问题，tcp连接存在延迟收包，重传和丢包，帮忙看一下上下行是否异常？

//重置手机定位第一次90秒后面2次时间合格_ylog\ylog\ap\history\00-0509_171237--0509_171546\00-0509_171237--0509_171546\tcpdump\ytag\00000.tcpdump.2023-05-09_17.12.40.cap

>>>服务端39.105.240.30(supl.qxwz.com)，一直请求144报文，客户端也一直在发144，但就是没有收到，大约9秒后才收到144报文。
2348	2023-05-09 17:13:06.397553	39.105.240.30	10.170.34.40	TCP	1423	oma-ulp(7275) → 33164 [PSH, ACK] Seq=1 Ack=144 Win=30080 Len=1355 TSval=1847521600 TSecr=3145 [TCP segment of a reassembled PDU]
2410	2023-05-09 17:13:08.246647	39.105.240.30	10.170.34.40	TCP	1423	[TCP Spurious Retransmission] oma-ulp(7275) → 33164 [PSH, ACK] Seq=1 Ack=144 Win=30080 Len=1355 TSval=1847523084 TSecr=3145
2484	2023-05-09 17:13:13.192904	39.105.240.30	10.170.34.40	TCP	1423	[TCP Spurious Retransmission] oma-ulp(7275) → 33164 [PSH, ACK] Seq=1 Ack=144 Win=30080 Len=1355 TSval=1847525312 TSecr=3145
2515	2023-05-09 17:13:13.217540	39.105.240.30	10.170.34.40	TCP	80	[TCP Dup ACK 2346#1] oma-ulp(7275) → 33164 [ACK] Seq=1356 Ack=144 Win=30080 Len=0 TSval=1847528139 TSecr=3266 SLE=1 SRE=144

>>>客户端也一直在发144
2349	2023-05-09 17:13:06.397726	10.170.34.40	39.105.240.30	TCP	68	33164 → oma-ulp(7275) [ACK] Seq=144 Ack=1356 Win=90624 Len=0 TSval=3266 TSecr=1847521600
2350	2023-05-09 17:13:06.413732	10.170.34.40	39.105.240.30	TCP	206	33164 → oma-ulp(7275) [PSH, ACK] Seq=144 Ack=1356 Win=90624 Len=138 TSval=3268 TSecr=1847521600 [TCP segment of a reassembled PDU]
2467	2023-05-09 17:13:11.852663	10.170.34.40	39.105.240.30	TCP	206	[TCP Retransmission] 33164 → oma-ulp(7275) [PSH, ACK] Seq=144 Ack=1356 Win=90624 Len=138 TSval=3812 TSecr=1847523084


>>>服务端39.105.240.30(supl.qxwz.com)，一直请求382报文，客户端也一直在发，但服务端就是没有收到
3321	2023-05-09 17:13:23.936012	39.105.240.30	10.170.34.40	TCP	68	oma-ulp(7275) → 33164 [ACK] Seq=1598 Ack=382 Win=31104 Len=0 TSval=1847539148 TSecr=4198
3322	2023-05-09 17:13:23.946973	39.105.240.30	10.170.34.40	TCP	130	oma-ulp(7275) → 33164 [PSH, ACK] Seq=1598 Ack=382 Win=31104 Len=62 TSval=1847539158 TSecr=4198 [TCP segment of a reassembled PDU]
3640	2023-05-09 17:13:37.106886	39.105.240.30	10.170.34.40	TCP	80	[TCP Dup ACK 3321#1] oma-ulp(7275) → 33164 [ACK] Seq=1660 Ack=382 Win=31104 Len=0 TSval=1847544778 TSecr=5021 SLE=282 SRE=382

>>>客户端也一直在发382
3323	2023-05-09 17:13:23.947189	10.170.34.40	39.105.240.30	TCP	68	33164 → oma-ulp(7275) [ACK] Seq=382 Ack=1660 Win=93440 Len=0 TSval=5021 TSecr=1847539158
3343	2023-05-09 17:13:24.179070	10.170.34.40	39.105.240.30	TCP	197	33164 → oma-ulp(7275) [PSH, ACK] Seq=382 Ack=1660 Win=93440 Len=129 TSval=5044 TSecr=1847539158 [TCP segment of a reassembled PDU]
3592	2023-05-09 17:13:31.172661	10.170.34.40	39.105.240.30	TCP	197	[TCP Retransmission] 33164 → oma-ulp(7275) [PSH, ACK] Seq=382 Ack=1660 Win=93440 Len=129 TSval=5744 TSecr=1847539158

==== State: Opened by: cmadmin on 09 May 2023 18:59:52 ====

  == Zack.Zhang@unisoc.com On 20230509T10:58:20 (xml) ==
定位同事先帮看一下客户新上传的log问题时间点。

重置手机定位第一次90秒后面2次时间合格_ylog.rar

==== State: Opened by: waterworld on 09 May 2023 18:03:59 ====

Dear sprd:
  复测log已上传--  重置手机定位第一次90秒后面2次时间合格_ylog.rar

==== State: NeedInfo by: cmadmin on 09 May 2023 14:42:19 ====

  == Zack.Zhang@unisoc.com On 2023-05-09T06:42:05Z (json) ==
客户您好！

如电话沟通，"118GPS.zip" log缺乏ap log，帮忙确认一下？
(2023-05-09T06:29:10Z)

==== State: Opened by: waterworld on 09 May 2023 14:25:28 ====

Dear sprd:
  复测log已上传 --- 118GPS.zip

==== State: NeedInfo by: cmadmin on 09 May 2023 13:45:06 ====

  == Zack.Zhang@unisoc.com On 20230509T05:44:45 (xml) ==
客户您好！

问题时间点的modem log丢失，对不上，帮忙重新复测一下，提供对应时间点的ylog，谢谢。
(20230509T05:25:45)

==== State: Opened by: cmadmin on 09 May 2023 11:25:39 ====

  == Zack.Zhang@unisoc.com On 20230509T03:25:04 (xml) ==
请mdoem数据面同事帮看一下Comment 4，测试机和服务端supl.qxwz.com交互数据异常，帮看一下该时间点上下行是否异常？

==== State: Opened by: cmadmin on 09 May 2023 11:16:29 ====

  == Zack.Zhang@unisoc.com On 2023-05-09T03:16:09Z (json) ==
Qinglun

tcudump中没有看到SSL相关异常报文，但是和服务端supl.qxwz.com交互数据有异常，出现大量延时、重传和丢包。请问该异常是否会引起AGPS定位时间过长，是否需要分析。

\KS118 AGPS 搜星35秒ylog\ap\current\00-0508_115452\tcpdump\ytag\00000.tcpdump.2023-05-08_11.54.55.cap

>>>测试机端，一直向服务端supl.qxwz.com，重传报文，未收到回复
307	2023-05-08 11:55:42.194068	10.134.211.20	supl.qxwz.com	TCP	211	56120 → oma-ulp(7275) [PSH, ACK] Seq=1 Ack=1 Win=87808 Len=143 TSval=4294961676 TSecr=1721197528 [TCP segment of a reassembled PDU]
321	2023-05-08 11:55:43.607318	10.134.211.20	supl.qxwz.com	TCP	211	[TCP Retransmission] 56120 → oma-ulp(7275) [PSH, ACK] Seq=1 Ack=1 Win=87808 Len=143 TSval=4294961818 TSecr=1721197528
335	2023-05-08 11:55:45.737412	10.134.211.20	supl.qxwz.com	TCP	211	[TCP Retransmission] 56120 → oma-ulp(7275) [PSH, ACK] Seq=1 Ack=1 Win=87808 Len=143 TSval=4294962031 TSecr=1721197528
351	2023-05-08 11:55:50.007447	10.134.211.20	supl.qxwz.com	TCP	211	[TCP Retransmission] 56120 → oma-ulp(7275) [PSH, ACK] Seq=1 Ack=1 Win=87808 Len=143 TSval=4294962458 TSecr=1721197528

>>>13秒后，服务端supl.qxwz.com才回复确认信息，并请求144报文
378	2023-05-08 11:55:55.699274	supl.qxwz.com	10.134.211.20	TCP	1356	oma-ulp(7275) → 56120 [ACK] Seq=1 Ack=144 Win=27136 Len=1288 TSval=1721210685 TSecr=4294961676 [TCP segment of a reassembled PDU]

>>>测试机端反复重传144报文
379	2023-05-08 11:55:55.699522	10.134.211.20	supl.qxwz.com	TCP	68	56120 → oma-ulp(7275) [ACK] Seq=144 Ack=1289 Win=90624 Len=0 TSval=4294963027 TSecr=1721210685
382	2023-05-08 11:55:55.738310	10.134.211.20	supl.qxwz.com	TCP	68	56120 → oma-ulp(7275) [ACK] Seq=144 Ack=1356 Win=90624 Len=0 TSval=4294963031 TSecr=1721210685
383	2023-05-08 11:55:55.752962	10.134.211.20	supl.qxwz.com	TCP	206	56120 → oma-ulp(7275) [PSH, ACK] Seq=144 Ack=1356 Win=90624 Len=138 TSval=4294963032 TSecr=1721210685 [TCP segment of a reassembled PDU]

>>>服务端supl.qxwz.com依然没有收到144报文，反复请求144报文
392	2023-05-08 11:55:57.068999	supl.qxwz.com	10.134.211.20	TCP	80	[TCP Dup ACK 377#1] oma-ulp(7275) → 56120 [ACK] Seq=1356 Ack=144 Win=27136 Len=0 TSval=1721212442 TSecr=4294963031 SLE=1 SRE=144
399	2023-05-08 11:55:58.638542	supl.qxwz.com	10.134.211.20	TCP	80	[TCP Dup ACK 377#2] oma-ulp(7275) → 56120 [ACK] Seq=1356 Ack=144 Win=27136 Len=0 TSval=1721214022 TSecr=4294963031 SLE=1 SRE=144

==== State: Opened by: cmadmin on 08 May 2023 16:38:29 ====

  == Zehai.Chang@unisoc.com On 2023-05-08T08:36:34Z (json) ==
Hi andy
从下面的Log看出，是SSL握手失败，请帮忙流转一下，找SSL相关的负责人分析一下，谢谢。

LCS_UP  : supltls_sslInfoCb: SSL_connect:SSLv3 write client hello A
LCS_UP  : supltls_sslInfoCb: SSL_connect:SSLv3 flush data
LCS_UP  : supltls_sslInfoCb: SSL_connect:SSLv3 read server hello A
LCS_UP  : supltls_sslInfoCb: SSL_connect: try: SSLv3 read server hello A
LCS_UP  : supltls_sslHandshake: rv = -1
LCS_UP  : supltls_sslHandshake: ssl connection is in progress.

==== State: Opened by: cmadmin on 08 May 2023 14:40:46 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166298|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]DUT fails to forward the incoming call when “if busy” call forwarding option is enabled.【CDBUG-10004】|Pre-Conditions:

1. Make sure device is on build “Karbonn_KW201_D000_01_06_180423.”

2. Insert a valid Jio SIM card.

3. call waiting should be OFF

Steps to reproduce:

1. Power ON the device with valid Jio sim card and wait till it latches successfully.

2. Now go to Menu >> Settings >> Call settings >> Call forwarding >> if busy>>ON

3. Now make a MO/MT from DUT>> Once call is going on>>try to receive any incoming call on the device and observe the behaviour.

3. Observed that DUT fails to forward the incoming call when “if busy” call forwarding option is enabled.

Actual Result: Observed DUT fails to forward the incoming call when “if busy” call forwarding option is enabled.

Expected Result: DUT should forward the incoming call when “if busy” call forwarding option is enabled.|
==== State: NeedInfo by: cmadmin on 09 May 2023 15:08:08 ====

  == Huimin.Zhou@unisoc.com On 20230509T07:06:27 (xml) ==
客户您好

1.“if busy” call forwarding CFB功能为有条件呼叫转移，生效的现象为：测试机CFB功能为on,当辅助机拨打测试机时，测试机先会收到辅助机的来电，在‘when busy‘也就是测试机未接听或占线情况下再发生转移到第三方，如果测试机在默认时间内接听了辅助机的来电，那么电话是不会再发生转移的


2.请在测试机收到辅助机来电时选择不接听，创造when busy的条件，这样电话才会发生转移到第三方，请重新测试，谢谢！

380531-1   	10:44:33.045 	SIM1  	IMS	<- [0]INVITE                                        	                                             	0:05:43.170  	
		To: <tel:15160314087;phone-context=ims.mnc002.mcc460.3gppnetwork.org>
		From: "8615260341293"<tel:15260341293;phone-context=+86;noa=subscriber;srvattri=national>;tag=1ngrvskl
18	386530-1	10:44:34.072	--		Time: 33905 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_CALL[0],CSM_OUTPUT_REASON_CALL_VOICE_HD_INFO[41]	MN_AL	
19	386726-1	10:44:34.076	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 1,1,4,1,0,15260341293,129.	ATC	
20	386743-1	10:44:34.081	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 1,1,4,1,0,15260341293,129.	ATC	


427104-1   	10:44:41.472 	SIM1  	IMS	<- [0]INVITE                                        	                                             	0:05:51.597  	
		To: <tel:15160314087;phone-context=ims.mnc002.mcc460.3gppnetwork.org>
		From: <tel:15260917932;phone-context=+86;noa=subscriber;srvattri=national>;tag=o1ggpngu

32	398865-1	10:44:36.685	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 1,1,4,1,0,15260341293,129.	ATC	

//接听第一通电话
55	435812-1	10:44:42.561	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 1,1,0,1,0,15260341293,129.	ATC	

//第二通电话来电，未接通，因为呼叫等待功能是关闭的，
56	435858-1	10:44:42.571	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 2,1,5,1,0,15260917932,129.	ATC	
57	435874-1	10:44:42.571	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 2,1,5,1,0,15260917932,129.	ATC	
57	435874-1	10:44:42.571	--		Time: 33905 ATC: filter state, not report unsolicited code: ^DSCI: 2,1,5,1,0,15260917932,129.	ATC	
58	512955-1	10:44:55.339	--		IMS: CSM->MN[0] CSM_EVENT_TYPE_CALL CSM_OUTPUT_REASON_DISCONNECT_EVENT		
59	512960-1	10:44:55.340	--		mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_CALL[0],CSM_OUTPUT_REASON_DISCONNECT_EVENT[3]	MN_AL	

64	513270-1	10:44:55.343	--		ATC: filter state, not report unsolicited code: ^DSCI: 1,1,0,1,0,15260341293,129.	ATC	
65	513305-1	10:44:55.353	--		ATC: filter state, not report unsolicited code: ^DSCI: 2,1,6,1,0,15260917932,129,,999.	ATC	
//挂断第一通
77	532659-1	10:44:58.242	--		Time: 36423 ATC: filter state, not report unsolicited code: ^DSCI: 1,1,6,1,0,15260341293,129,,0.	ATC	

//查询呼叫等待为off状态
562591-1   	Time: 36423 *#43#                                                                                                                                                	           	0:06:16.934  	
562600-1   	Time: 36423 MNSS_JudgeSSDomain[0]:volte_feature=0x3, is_ps_domain_forbidden=0, ss_code=65, is_cs_retry=0, cfg_domain=0,curr_rat 16, is cs call eixst 0, ims status 1, 	MN_AL      	0:06:16.934  	
562608-1   	Time: 36423 em: get ims parameter[0],[55,1]                                                                                                                      	MN_AL      	0:06:16.934  	
562613-1   	Time: 36423 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SUPSRV[4],CSM_EVENT_SUPSRV_REASON_AT_CMD_CW[5]                                                                   	           	0:06:16.934  	
562616-1   	Time: 36423 IMS: MN->CSM[0] CSM_EVENT_TYPE_SUPSRV CSM_EVENT_SUPSRV_REASON_AT_CMD_CW                                                                              	           	0:06:16.934  	
562626-1   	Time: 36423 IMS: CSM->MN[0] CSM_EVENT_TYPE_SUPSRV CSM_OUTPUT_REASON_SUPSRV_QUERY_RESULT                                                                          	           	0:06:16.934  	
562629-1   	Time: 36423 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SUPSRV[4],CSM_OUTPUT_REASON_SUPSRV_QUERY_RESULT[20]                                                              	MN_AL      	0:06:16.934  	
562631-1   	Time: 36423 mnss_volte: interrogate_cnf, ss_code:65, timeRangeOfTheDay ?                                                                                         	MN_AL      	0:06:16.934  	
562632-1   	Time: 36423 mn: cw_strategy = 1                                                                                                                                  	MN_AL      	0:06:16.934  	
562633-1   	Time: 36423 mnss_volte: i = 0,CB genResStatus=1,mediaType=?                                                                                                      	MN_AL      	0:06:16.934  	
562652-1   	Time: 36423 ATC: ATC_CheckInterrogateCnf result=0,list_num=1,ss_status_present=1,ss_status=7,service_type=0,service_code=0                                       	ATC        	0:06:16.935  	



//cfb功能为on
583964-1   	10:45:14.383 	--	0x2019	MSG_ID_MN_SS_INTERROGATE_REQ                        	MOD_MMI->MOD_MN_AL_1                         	0:06:24.508  	
[LOCAL] APP_MN_INTERROGATE_SS_REQ_T
	ref_count = 0x1
	header
		req_id = 0xa
		app_id = 0x2f00
		msg_id = 0x2019
	ss_code = MN_SS_CFB
587989-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SUPSRV[4],CSM_OUTPUT_REASON_SUPSRV_QUERY_RESULT[20]                                                              	MN_AL      	0:06:25.137  	
587990-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 mnss_volte: is_nsiot = 0                                                                                                                             	MN_AL      	0:06:25.137  	
587991-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 mnss_volte: interrogate_cnf, ss_code:41, timeRangeOfTheDay ?                                                                                         	MN_AL      	0:06:25.137  	
587992-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 debug: genResStatus is 1                                                                                                                             	MN_AL      	0:06:25.137  	
587993-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 debug: numberType is 2                                                                                                                               	MN_AL      	0:06:25.137  	
587994-1   	10:45:15.012 	IMS   	IMS   	Time: 38038 debug: number is 15905038138                                                                                                                         	MN_AL      	0:06:25.137
(20230509T06:07:13)

==== State: Opened by: cmadmin on 09 May 2023 14:10:44 ====

  == zhongping.shi@unisoc.com On 20230509T06:07:13 (xml) ==
当前查询结果显示cfb是开的，请帮忙看一下未生效原因，谢谢。
log:D:\LOG\if busy
42	583800-1	10:45:14.365	--	Time: 38002 HandleSSServerPdpMsg, dual_sys=0, ss_oper=14, ss_code=41, service_type=0, service_code=16, no_reply_time=0.
48	588361-1	10:45:15.019	--	Time: 38101 GenInterrogateStatusReport:list_num = 1,service_code=0
49	588362-1	10:45:15.019	--	Time: 38101 GenInterrogateDetailReport:ss_code is 0x0429, ss_status is 0x047
50	588365-1	10:45:15.019	--	Time: 38101 enter GenInterrogateTelenumSSCodeReport::ss_number_type=2, number_type=0
51	588366-1	10:45:15.019	--	Time: 38101 enter GenInterrogateTelenumSSCodeReport::tele_num=15905038138

==== State: Opened by: waterworld on 09 May 2023 11:10:26 ====

 == CustomerPhone Changed from == 
18359199264
To
18750620682
 == Contacter Changed from == 
李为
To
邓旻枫


==== State: NeedInfo by: cmadmin on 08 May 2023 15:14:15 ====

  == zhongping.shi@unisoc.com On 2023-05-08T07:12:40Z (json) ==
尊敬的客户您好，
    请提供一份包含问题操作及现象的log及视频用于分析，谢谢。
(2023-05-08T07:05:13Z)

==== State: Opened by: cmadmin on 08 May 2023 15:09:14 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166257|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Device does not support Public Warning system alerts like CMAS or ETWS 【CDBUG-9742】|Preconditions:
1.Device must be flashed on the latest build, Karbonn_KW201_D000_01_02_22_0323
2.Insert JIO SIM.
3.Latch the Network

Steps to reproduce:
Requst for CMAS/ ETWS test message
Observe if Device is able to receive paging and necessary SIB message is read by device
Device should be able to display warning message after reading SIB message

|
==== State: Closed by: waterworld on 09 May 2023 13:25:47 ====

好的 谢谢

==== State: Resolved by: cmadmin on 09 May 2023 11:03:58 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
支持
Solution:
支持

==== State: Opened by: waterworld on 09 May 2023 10:51:00 ====

你好:
   好的，谢谢。 本问题可以先关闭.

==== State: NeedInfo by: cmadmin on 09 May 2023 09:31:19 ====

  == Roy.Tsai@unisoc.com On 20230509T01:29:47 (xml) ==
T117平台支持CMAS和ETWS功能的，代码位置在mmismscb_wintab.c和mmismscb_control.c，模拟器可模拟收到讯息的UI行为，实机验证的话需要透过仪器发送讯息
(20230508T10:02:02)

==== State: Opened by: waterworld on 08 May 2023 17:58:07 ====

你好:
    1.是否支持CMAS和ETWS的功能？
    2.我们该如何正确操作验证？

==== State: NeedInfo by: cmadmin on 08 May 2023 13:54:28 ====

  == Roy.Tsai@unisoc.com On 2023-05-08T05:53:25Z (json) ==
Dear customer,

请问是询问平台是否支持CMAS和ETWS吗？还是询问是否支持SIB?
(2023-05-08T05:47:31Z)

==== State: Opened by: cmadmin on 08 May 2023 13:37:34 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 08 May 2023 11:51:29 ====

CMAS和ETWS都是用于向移动设备发送紧急警报信息的系统。

CMAS（Commercial Mobile Alert System）是美国联邦通信委员会（FCC）开发的一种系统，用于向美国全国范围内的支持该系统的移动设备发送三种类型的警报：灾难警报、危险气象警报和儿童失踪警报。这些警报是由当局发布的，并在必要时通过无线电技术发送到移动设备。

ETWS（Earthquake and Tsunami Warning System）是由3GPP标准制定的一种系统，旨在向支持该系统的移动设备发送地震和海啸等自然灾害的警报。ETWS是为了解决2004年印度洋海啸事件中缺乏有效警报系统的问题而制定的。

CMAS/ETWS测试消息是指为了确保移动设备能够正确接收和显示紧急警报信息，而向移动设备发送的测试消息。这些测试消息是由当局或移动网络运营商发送的模拟警报消息，以验证移动设备是否可以正确识别并显示不同类型的警报

==== State: Submitted by: waterworld on 08 May 2023 11:51:15 ====

SIB是LTE（Long-Term Evolution）无线通信系统中的一个重要概念，全称为System Information Block（系统信息块）。SIB message指的是包含在SIB中的信息。

SIB是无线电信号传输的一部分，用于向用户设备广播网络的参数和配置信息，包括小区ID、频段、带宽、功率控制、调度等。这些信息对于移动设备的接入、漫游和切换非常重要。

SIB message可以根据不同的功能和目的进行分类，例如：

SIB1：包含了小区ID、PLMN ID（公共陆地移动网络识别码）、频带、频段和覆盖范围等关键信息。
SIB2：包含了小区的物理层和调度信息，如小区内支持的MIMO模式、PRACH配置等。
SIB3：包含了小区的邻区信息，可用于邻区搜索和测量。
SIB4：包含了小区的定位相关信息，如参考信号接收功率（RSRP）等。
SIB5：包含了小区的传输相关信息，如PDSCH（物理下行共享信道）配置等。
SIB message的内容和格式可能会因运营商、地区、设备类型等而有所不同，但它们通常都遵循3GPP（第三代合作伙伴计划）规范。
|
# SPCSS01166240|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Device IMS Register with expiry '0' is missing in detach logs【CDBUG-8738】|
Precondition:

1.Device must be flashed on latest build Karbonn_KW201_D000_01_02_22_0323.

2. JIO sim card should be inserted in the device.

Steps to reproduce:

1.Power ON the device

2. Domultiple APM toggle

3. observe device sending Detach request with IMS Register (Expiry '0')


Additionally : We have observed 200_OK for IMS Register but no print in log observed

Hence mentioned as missing packet in logs|
==== State: NeedInfo by: cmadmin on 09 May 2023 16:19:19 ====

  == Chencheng.Huang@unisoc.com On 2023-05-09T08:15:56Z (json) ==
等待客户反馈，谢谢！
(2023-05-09T07:43:18Z)

==== State: Opened by: waterworld on 09 May 2023 15:40:38 ====

你好，正在等客户回复。

==== State: NeedInfo by: cmadmin on 08 May 2023 19:40:17 ====

  == Chencheng.Huang@unisoc.com On 2023-05-08T11:38:12Z (json) ==
尊敬的客户您好，

当前测试机log中有丢log现象，因此log中15:26:05空口无去注册REGISTER消息打印。但从测试机流程看，终端已发送去注册REGISTER消息并收到网络回复的200成功响应。

该log信息显示缺失不影响终端业务流程，如无其他问题，请帮忙关闭CQ，谢谢！

Log：IMS注册\267865\ATTACH_DETACH
2327778-1  	15:26:05.412 	mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_IMS_DISABLE[19] 	
2328242-1	15:26:05.415	IMS: msg -> [0]REGISTER	SIP
--	        15:26:05.415	Lost 756 PS packets in channel, SN range:(2328243,2328998)	----->----
2329354-1	15:26:05.662	IMS: msg <- [0]200	SIP
(2023-05-08T05:38:58Z)

==== State: Opened by: cmadmin on 08 May 2023 13:39:10 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 08 May 2023 13:01:44 ====

相关CQ SPCSS01161127
|
# SPCSS01166226|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]Device gets Attach Reject when User Turn APM off-->with Cause as : Request rejected by Serving GW or PDN GW(30) 请帮忙分析一下是什么原因！谢谢！|将有效的Jio SIM卡插入DUT。
复制步骤：
1. 打开设备电源。
2. 设置->连接->飞行模式-->开
3. 现在，关闭APM，方法是：设置->连接->飞行模式-->关闭
4. 检查设备是否锁存到LTE/VoLTE
实际结果:
当用户关闭APM时，设备被拒绝连接，原因为:服务GW或PDN GW拒绝了请求(30 )
预期结果:
如果APM关闭，设备应始终成功锁定到网络。
再现性：-3/5|
==== State: Opened by: waterworld on 10 May 2023 20:28:14 ====

Dear Unisoc，
1. 能否将客户的APN提供给您这边，便于测试？
2. 我将同步让客户提供从开机到设置飞行模式的log。

==== State: NeedInfo by: cmadmin on 10 May 2023 16:50:04 ====

  == ping.xing@unisoc.com On 20230510T08:49:22 (xml) ==
客户您好

    提供的log里面没有attach成功的log，都是失败的，所以没有办法确认apn配置是否正确，或者当前卡是正常的。

    请使用相同卡相同环境进行对比机测试，并抓取包含开机的log，可以使用展锐平台或者其他平台。谢谢

517813-1	15:57:23.697 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:04:37.173  	
521548-1	15:57:24.239 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:04:37.715  	
544934-1	15:57:34.238 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:04:47.714  	
547904-1	15:57:34.674 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:04:48.150  	
561104-1	15:57:44.674 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:04:58.150  	
564119-1	15:57:45.169 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:04:58.645  	
568064-1	15:57:55.169 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:05:08.645  	
571166-1	15:57:55.707 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:05:09.183  	
575120-1	15:58:05.707 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:05:19.183  	
578621-1	15:58:06.264 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:05:19.740
(20230510T07:49:48)

==== State: Opened by: waterworld on 10 May 2023 15:46:30 ====

Dear UNISOC，
   我们查看log中的apn相关log，apn并没有改变，所以请确认下，是否真的为apn问题

==== State: Opened by: waterworld on 10 May 2023 15:44:23 ====

Dear Unisoc,
    我司不认为是apn的问题，如果是的话应该一直都无法驻网，而不是5次里面有3次，
请您核对一下log确认会否APN的问题，谢谢！

==== State: NeedInfo by: cmadmin on 09 May 2023 16:19:24 ====

  == ping.xing@unisoc.com On 2023-05-09T08:15:44Z (json) ==
needinfo 等待log反馈。

==== State: NeedInfo by: cmadmin on 09 May 2023 16:19:24 ====

  == ping.xing@unisoc.com On 2023-05-09T08:15:44Z (json) ==
needinfo 等待log反馈。
(2023-05-09T07:51:44Z)

==== State: Opened by: waterworld on 09 May 2023 15:49:45 ====

Dear Unisoc,
    已将问题解答反馈给Jio，谢谢！

==== State: NeedInfo by: cmadmin on 08 May 2023 18:25:22 ====

  == ping.xing@unisoc.com On 20230508T10:23:24 (xml) ==
客户您好

     default apn信息配置为apn=jionet、pdptype= v4、authtype=pap，发起attach，但是被网络拒绝，拒绝原因是REQ_REJ_BY_S_GW_OR_PDN_GW，可能是apn信息配置不对，请检查下APN配置，或者相同配置在对比机上测试下，谢谢！

517813-1	15:57:23.697 	SIM1	      	--	-> PDN_CONNECTIVITY_REQUEST                  	                                             	0:04:37.173  	
520705-1	15:57:24.048 	SIM1	      	--	-> ESM_INFORMATION_RESPONSE                  	                                             	0:04:37.524  	
apn=jionet
pdptype= v4
authtype=pap
521548-1	15:57:24.239 	SIM1	      	--	<- PDN_CONNECTIVITY_REJECT                   	                                             	0:04:37.715  	
	ESM_Cause = REQ_REJ_BY_S_GW_OR_PDN_GW
(20230508T05:42:00)

==== State: Opened by: cmadmin on 08 May 2023 11:24:42 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166184|[UMS9230][Waterworld][FS301-Hisense][13052][Other][A6][QZ]想咨询一下如何关闭整个设备的视频呼叫转移功能，或者如何不在google dialer显示视频呼叫转移菜单项|只找到了类似\sprd.mocor13.androidT\packages\apps\CarrierConfig\assets\carrier_config_carrierid_1436_China-Unicom.xml
的<boolean name="supports_video_callforward_bool" value="true"/>的单个运营商的视频呼叫转移开关，
想咨询下整个设备的视频呼叫转移开关在什么地方。
感谢
|
==== State: Resolved by: cmadmin on 10 May 2023 17:10:51 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
所有运营商都去掉视屏呼叫转移功能
Solution:
请在以下路径添加配置项，vendor.xml配置文件的优先级比以carrId和mccmnc命名的运营商配置文档优先级更高

/packages/apps/CarrierConfig/res/xml/vendor.xml
         <boolean name="hide_lte_plus_data_icon_bool" value="false"/>

==== State: Opened by: cmadmin on 10 May 2023 17:08:18 ====

  == Zhujun.Song@unisoc.com On 20230510T09:07:06 (xml) ==
Dear customer:

    如沟通，请在以下路径添加配置项，vendor.xml配置文件的优先级比以carrId和mccmnc命名的运营商配置文档优先级更高

/packages/apps/CarrierConfig/res/xml/vendor.xml
         <boolean name="hide_lte_plus_data_icon_bool" value="false"/>
+++      <boolean name="supports_video_callforward_bool" value="false"/>

==== State: Opened by: waterworld on 10 May 2023 15:36:04 ====

那手机上不显示视频呼叫转移菜单，只能把系统里几千个运营商配置都改了么？

==== State: NeedInfo by: cmadmin on 08 May 2023 12:33:00 ====

  == Zhujun.Song@unisoc.com On 20230508T04:32:18 (xml) ==
Dear customer:


     "supports_video_callforward_bool"默认值就是false,即不支持视屏呼叫转移。如果想显示视屏呼叫转移，就在对应运营商配置文档中配为true.不配置默认就是false
(20230508T03:15:38)

==== State: Opened by: cmadmin on 08 May 2023 11:06:05 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166110|[UMS9117-L][Waterworld][FF603][11886][手机][遵义6部]手机信号弱，有时存在接听不到电话和拨打电话时间较长 ，无信号到恢复信号时间较长，请帮忙看下是否可以优化
步骤：
1.版本信息：
AP: MOCOR_20A_MP_W20.46.4    
CP: FM_BASE_20A_THIN_MODEM_W23.08.1

2.视频及log，请见附件

现象：
There are Signal Problem that we don't see all the Time://我们并不总是看到信号问题：
1. Sometimes we miss calls.//有时我们会错过电话
2. when we are in a Place without Signal, when we are moving out it's take long time to get back signal.
//当我们在一个没有信号的地方时，当我们搬出去时，需要很长时间才能得到信号
3. Sometimes take long time to make a Phone call.//有时打电话需要很长时间

分析：

如果模块选择错误，请帮忙流转下，谢谢！
|
==== State: NeedInfo by: cmadmin on 10 May 2023 19:40:48 ====

  == Qiqing.Pan@unisoc.com On 20230510T11:38:26 (xml) ==
客户您好，
   需要提供MO/MT log才能进一步分析，等待客户提供log中。
   这个CQ只跟踪电话问题，如果还要看信号问题，麻烦另提CQ跟踪，谢谢！
(20230510T05:34:36)

==== State: Opened by: waterworld on 10 May 2023 11:37:12 ====

您好，
    从客户提供视频来看，客户网络类型切回了4G/3G/2G auto，即第三次后，主叫端呼出提示busy，被叫端（测试机）未收到来电提醒，存在问题点1. Sometimes we miss calls.//有时我们会错过电话。见/FTPDATA/2023-5/SPCSS01166110/0508/Point 7.mp4  00:30开始

    请帮忙继续分析下

    已联系客户提供MO/MT log，不知是否有利于分析？如果需要的话，待客户反馈后将更新至附件
    如果有其他需要确认的问题，请告知，谢谢！
    
    

==== State: NeedInfo by: cmadmin on 09 May 2023 18:24:37 ====

  == Zheng.Chen@unisoc.com On 2023-05-09T10:24:13Z (json) ==
客户您好：
  之前看到的网络异常的时间点是因为：
第一次power off ps是因为锁码界面不知道当前卡的状态，为保证紧急通话开了ps1，输入后界面消失关闭ps1
50	35295-1	17:59:32.393	--	Time: 3464 MMIPHONE: sim1_test_mode=6, sim2_test_mode=6, testmode[6, 6, 254, 254]!
224	200611-1	18:01:51.770	--	MMIAPISET_SetTestMode network_type0=6  network_type1=14,dual_sys=1  
225	200613-1	18:01:51.770	--	MNPHONE_SetTestMode sim1_testmode=6,sim2_testmode =14,dual_sys=1,both_gsm_only_flag=0
226	200616-1	18:01:51.770	--	MNPHONE_SetTestMode:PS1 need reboot
227	205236-1	18:01:52.834	--	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ
第二次客户切换了网络类型到3G/2G auto
261	216978-1	18:01:54.565	--	Time: 17800 MMIIDLE_SetSimStatusBarInfo dual_sys:1 ,network_status_rat:1,data_service_type:4,s_pdp_event:3, cc_dual_sys: 2
609	1071154-1	18:05:56.256	--	Time: 41971 MMIAPISET_SetTestMode network_type0=6  network_type1=6,dual_sys=1  
610	1071156-1	18:05:56.256	--	Time: 41971 MNPHONE_SetTestMode sim1_testmode=6,sim2_testmode =6,dual_sys=1,both_gsm_only_flag=0
611	1071159-1	18:05:56.256	--	Time: 41971 MNPHONE_SetTestMode:PS1 need reboot
612	1071160-1	18:05:57.298	--	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ
第三次客户网络类型切回了4G/3G/2G auto。
645	1093985-1	18:06:00.668	--	Time: 42409 MMIIDLE_SetSimStatusBarInfo dual_sys:1 ,network_status_rat:16,data_service_type:1,s_pdp_event:2, cc_dual_sys: 2
您具体指的是那个时间点？
感谢~
(2023-05-09T09:56:47Z)

==== State: Opened by: cmadmin on 09 May 2023 17:57:42 ====

  == zhongping.shi@unisoc.com On 20230509T09:56:47 (xml) ==
请帮忙继续分析，如有问题请与我联系，谢谢。

log：D:\LOG\Miss calls logs
31	29962-1	17:59:27.760	--	Time: 3121 MMIAPIPHONE_PowerOffPs, dual_sys=0,s_ps_ready=2
34	29982-1	17:59:31.148	--	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ
第一次power off ps是因为锁码界面不知道当前卡的状态，为保证紧急通话开了ps1，输入后界面消失关闭ps1
50	35295-1	17:59:32.393	--	Time: 3464 MMIPHONE: sim1_test_mode=6, sim2_test_mode=6, testmode[6, 6, 254, 254]!
224	200611-1	18:01:51.770	--	MMIAPISET_SetTestMode network_type0=6  network_type1=14,dual_sys=1  
225	200613-1	18:01:51.770	--	MNPHONE_SetTestMode sim1_testmode=6,sim2_testmode =14,dual_sys=1,both_gsm_only_flag=0
226	200616-1	18:01:51.770	--	MNPHONE_SetTestMode:PS1 need reboot
227	205236-1	18:01:52.834	--	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ
第二次客户切换了网络类型到3G/2G auto
261	216978-1	18:01:54.565	--	Time: 17800 MMIIDLE_SetSimStatusBarInfo dual_sys:1 ,network_status_rat:1,data_service_type:4,s_pdp_event:3, cc_dual_sys: 2
609	1071154-1	18:05:56.256	--	Time: 41971 MMIAPISET_SetTestMode network_type0=6  network_type1=6,dual_sys=1  
610	1071156-1	18:05:56.256	--	Time: 41971 MNPHONE_SetTestMode sim1_testmode=6,sim2_testmode =6,dual_sys=1,both_gsm_only_flag=0
611	1071159-1	18:05:56.256	--	Time: 41971 MNPHONE_SetTestMode:PS1 need reboot
612	1071160-1	18:05:57.298	--	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ
第三次客户网络类型切回了4G/3G/2G auto。
645	1093985-1	18:06:00.668	--	Time: 42409 MMIIDLE_SetSimStatusBarInfo dual_sys:1 ,network_status_rat:16,data_service_type:1,s_pdp_event:2, cc_dual_sys: 2

==== State: Opened by: cmadmin on 08 May 2023 13:37:43 ====

  == Zheng.Chen@unisoc.com On 2023-05-08T05:37:21Z (json) ==
205236-1   	18:01:52.834 	--	0x2050	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ                    	MOD_DUMMY_MMI->MOD_MN_AL_2                   	0:03:00.662  	
1071160-1  	18:05:57.298 	--	0x2050	MSG_ID_MN_PHONE_PS_POWER_OFF_REQ                    	MOD_DUMMY_MMI->MOD_MN_AL_2                   	0:07:05.126  	
麻烦上层同事帮忙看下，这两次关闭协议栈是否有异常，感谢~

==== State: Opened by: waterworld on 08 May 2023 10:55:38 ====

您好，
  附件已上传，见/FTPDATA/2023-5/SPCSS01166110/0508/

==== State: Opened by: cmadmin on 08 May 2023 10:54:40 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166090|[UMS9117-L][Waterworld][FF603][11886][手机][遵义6部]你好，MCC/MNC:425/26 运营商需求，麻烦帮忙看下是否支持和已配置，如果支持且需要配置，还请麻烦帮忙配置
步骤：
1.版本信息：
AP: MOCOR_20A_MP_W20.46.4	
CP: FM_BASE_20A_THIN_MODEM_W23.08.1

2.具体需求见附件“K-SIM GSMA IMS CONFIG.xlsx”标黄项


现象：

分析：


如果模块选择错误，请帮忙流转下，谢谢！

|
==== State: NeedInfo by: cmadmin on 09 May 2023 09:23:00 ====

  == bingrui.li@unisoc.com On 20230509T01:17:23 (xml) ==
尊敬的客户，您好

根据附件文档

PLMN=42526
新增IL_Annatel_P.nv和IL_Annatel_S.nv并添加如下L4配置

IL_Annatel_S.nv
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\mn_sim_nvinfo\sms_using_ims=0x0


请在实网下验证短信业务，并反馈测试的pass log，经我司确认后方可合入正式版本，谢谢。
(20230508T07:47:01)

==== State: Opened by: cmadmin on 08 May 2023 15:50:54 ====

  == Xuan.Zang@unisoc.com On 2023-05-08T07:47:01Z (json) ==
尊敬的客户，您好

根据附件文档

PLMN=42526
新增IL_Annatel_P.nv和IL_Annatel_S.nv并添加如下配置

IL_Annatel_P.nv中添加
PS_NV_PARAMS\NV_PARAM_TYPE_PLMN_DELTA_NV\ims_plmn_nvinfo\sip_preconditionEnabled=1


IL_Annatel_S.nv中添加


Index.xml中添加
    <Operator carrier="IL_Annatel">
        <Item mcc="425" mnc="26"/>
    </Operator>

具体操作可参考iSuuport文档《运营商NV配置指南V1.5》：
https://unisupport.unisoc.com/file/index?fileid=29168


请在实网下验证volte电话业务，并反馈测试的pass log，经我司确认后方可合入正式版本，谢谢。

还请L4模块确认配置，谢谢。

==== State: Opened by: cmadmin on 08 May 2023 10:36:08 ====

  == zhongping.shi@unisoc.com On 2023-05-08T02:34:50Z (json) ==
MMI侧预置APN及VoLTE白名单由客户方面客制化配置，请modem侧帮忙继续确认，谢谢。

相关信息：
[FAQ202072062] VoLTE白名单配置方法
[FAQ202173319] android与mocor的apn信息转换

预置APN配置方法参考如下文档：
Mocor平台预置APN列表更新指南V1.2.pdf
https://unisupport.unisoc.com/file/index?fileid=31001

==== State: Opened by: cmadmin on 08 May 2023 10:36:07 ====

  == zhongping.shi@unisoc.com On 2023-05-08T02:34:50Z (json) ==
MMI侧预置APN及VoLTE白名单由客户方面客制化配置，请modem侧帮忙继续确认，谢谢。

相关信息：
[FAQ202072062] VoLTE白名单配置方法
[FAQ202173319] android与mocor的apn信息转换

预置APN配置方法参考如下文档：
Mocor平台预置APN列表更新指南V1.2.pdf
https://unisupport.unisoc.com/file/index?fileid=31001

==== State: Opened by: cmadmin on 08 May 2023 10:24:39 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166046|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][遵义6部][HMD][TRALNA-139]切换APN选择后,注册不上4g网络,帮忙看下什么原因
步骤：
设置中新建一个APN连接,选中该APN,网络一直在3G网络上,无法跳转至4g网络,请帮忙看下是什么原因,应该怎么解决,谢谢
附件有客户提供的视频及Log信息,帮忙查看下,谢谢

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 08 May 2023 10:36:01 ====

  == zhongping.shi@unisoc.com On 20230508T02:31:50 (xml) ==
尊敬的客户您好，
    当前PDP激活请求被拒绝，请检查您的APN配置是否有误，谢谢。

相关FAQ及文档如下：
[FAQ202173319] android与mocor的apn信息转换

预置APN配置方法参考如下文档：紧急sos类型APN如需配置请将对应的Account type配置为9
Mocor平台预置APN列表更新指南V1.2.pdf
https://unisupport.unisoc.com/file/index?fileid=31001


下面是我司Android平台预置APN，仅供参考：
    <!-- Mexico Telcel -->
    <apn carrier="Telcel Internet"
        mcc="334"
        mnc="020"
        apn="internet.itelcel.com"
        user="webgprs"
        password="webgprs2002"
        server="http://www.telcel.com"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="default,xcap,supl"
        mtu_v4="1410"
    />
    <apn carrier="Telcel MMS"
        mcc="334"
        mnc="020"
        apn="mms.itelcel.com"
        mmsproxy="148.233.151.240"
        mmsport="8080"
        user="mmsgprs"
        password="mmsgprs2003"
        mmsc="http://mms.itelcel.com/servlets/mms"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="mms"
    />
    <apn carrier="ims"
        mcc="334"
        mnc="020"
        apn="ims"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="ims"
    />
    <apn carrier="SOS"
        mcc="334"
        mnc="020"
        apn="sos"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="emergency"
        user_visible="0"
    />

==== State: NeedInfo by: cmadmin on 08 May 2023 10:36:00 ====

  == zhongping.shi@unisoc.com On 20230508T02:31:50 (xml) ==
尊敬的客户您好，
    当前PDP激活请求被拒绝，请检查您的APN配置是否有误，谢谢。

相关FAQ及文档如下：
[FAQ202173319] android与mocor的apn信息转换

预置APN配置方法参考如下文档：紧急sos类型APN如需配置请将对应的Account type配置为9
Mocor平台预置APN列表更新指南V1.2.pdf
https://unisupport.unisoc.com/file/index?fileid=31001


下面是我司Android平台预置APN，仅供参考：
    <!-- Mexico Telcel -->
    <apn carrier="Telcel Internet"
        mcc="334"
        mnc="020"
        apn="internet.itelcel.com"
        user="webgprs"
        password="webgprs2002"
        server="http://www.telcel.com"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="default,xcap,supl"
        mtu_v4="1410"
    />
    <apn carrier="Telcel MMS"
        mcc="334"
        mnc="020"
        apn="mms.itelcel.com"
        mmsproxy="148.233.151.240"
        mmsport="8080"
        user="mmsgprs"
        password="mmsgprs2003"
        mmsc="http://mms.itelcel.com/servlets/mms"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="mms"
    />
    <apn carrier="ims"
        mcc="334"
        mnc="020"
        apn="ims"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="ims"
    />
    <apn carrier="SOS"
        mcc="334"
        mnc="020"
        apn="sos"
        protocol="IPV4V6"
        roaming_protocol="IPV4V6"
        type="emergency"
        user_visible="0"
    />
(20230508T02:28:48)

==== State: Opened by: waterworld on 08 May 2023 09:32:43 ====

测试机Log:
TRALNA_data_TEMP139_0419_T2_FAIL.rar
对比机Log:
NVA_CC332955_1220_OK.rar

==== State: Opened by: cmadmin on 08 May 2023 09:29:45 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166045|[UMS312][Waterworld][FS170-UMS312-A13][13837][CEBU-智能手机]【1部】fae用 ISPTOOL_R2.23.0202 isp工具调试摄像头效果，选择T310平台，没有xml选项，无法生成xml的效果参数|【1部】fae用 ISPTOOL_R2.23.0202 isp工具调试摄像头效果，选择T310平台，没有xml选项，无法生成xml的效果参数|
==== State: Resolved by: cmadmin on 08 May 2023 10:24:08 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
选择T310平台，没有xml选项
Solution:
进入到AE界面选择AE3.0后才可以选择

==== State: Opened by: cmadmin on 08 May 2023 10:21:01 ====

  == Vincent.Long@unisoc.com On 20230508T02:20:29 (xml) ==
Dear cus,

如附件截图1所示，展锐较低平台的xml格式参数，需要进入到AE界面选择AE3.0后才可以选择。

---------------------------------------
补充说明，若还不行的话，请使用展锐uni-support中的ISPTOOL_R2.23.0905工具，该版本为目前可下载的最新工具。

BR.

==== State: Opened by: cmadmin on 08 May 2023 09:35:23 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01166042|[UIS8910FF-S][Waterworld][FF636][14095][CEBU-功能手机][遵义6部]请帮忙评估此平台是否有内存空间支持Fota
步骤：
1. 需要支持Fota功能

现象：

分析：
可以是平台自带Fota, 也可以是第三方Fota, 请帮忙评估内存空间是否足够|
==== State: Resolved by: cmadmin on 10 May 2023 19:46:28 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
咨询类问题，已经解决。
Solution:
咨询类问题，已经解决。

==== State: Opened by: waterworld on 10 May 2023 17:48:25 ====

Hi 令军:

此问题可关闭,

谢谢!

==== State: NeedInfo by: cmadmin on 09 May 2023 09:25:32 ====

  == Lingjun.Han1@unisoc.com On 20230509T01:21:10 (xml) ==
fota升级的 delta bin或者升级包是存储在flash里面的，然后再分块升级，内存使用是可以满足的。
(20230508T01:37:07)
|
# SPCSS01166012|[UMS9230][Waterworld][A678][13932][CEBU-智能手机]开机定屏|开机定屏，附件是抓取的串口log，麻烦帮忙看下是什么原因导致的，谢谢|
==== State: Closed by: cmadmin on 10 May 2023 10:03:16 ====

  == yining.xu@unisoc.com On 2023-05-10T02:00:38Z (json) ==
问题关闭

==== State: Closed by: waterworld on 10 May 2023 09:05:02 ====

hi sprd
合入修改可以开机的了，谢谢

==== State: NeedInfo by: cmadmin on 08 May 2023 14:55:43 ====

  == yining.xu@unisoc.com On 2023-05-08T06:55:15Z (json) ==
{REG_PIN_ANA_DCDC_GPU_EN,       BITS_ANA_PIN_AF(0)|BITS_ANA_PIN_DS(1)|BIT_ANA_PIN_WPD|BIT_ANA_PIN_SLP_WPD|BIT_ANA_PIN_SLP_IE}

请修改以上Pinmap调试。
(2023-05-08T06:13:58Z)

==== State: Opened by: waterworld on 08 May 2023 14:11:26 ====

原理图和pinmap已上传，请知悉

==== State: NeedInfo by: cmadmin on 08 May 2023 13:52:34 ====

  == yining.xu@unisoc.com On 2023-05-08T05:49:01Z (json) ==
请上传原理图和Pinmap
(2023-05-08T05:43:16Z)

==== State: Opened by: cmadmin on 08 May 2023 10:00:06 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165987|[UWS6130E][Waterworld][HK701][12796][儿童手表]功耗大，飞行模式，底电流1.3毫安左右，持续500ms，会起来一下大概20毫安，附件是我抓的串口log和拍的测试电流的视频，请帮忙看看是怎么回事？
步骤：

现象：

分析：
|
==== State: Opened by: waterworld on 10 May 2023 16:26:24 ====

附件是我抓的一个log，请帮忙看看是否ok

==== State: NeedInfo by: cmadmin on 09 May 2023 17:03:50 ====

  == Tianyu.Yang@unisoc.com On 20230509T09:01:51 (xml) ==
您好，需要您这边帮忙给个dump，看一下是什么因素被唤醒。
1. 什么也不插，尤其是USB不要插静止10分钟。
2. 快速插入USB，打开log工具手动下发assert命令（这个动作一定要快，可以多练习几次，避免打点信息被覆盖），dump mem文件。
3. 提供mem，AXF，MAP文件，谢谢。
4.uart log再工模中关闭。
(20230507T05:28:43)

==== State: Opened by: cmadmin on 07 May 2023 13:28:07 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165986|[UMS9117-L][Waterworld][FF603][11886][手机]S17插卡电流异常过大问题，附件是详细log和描述
步骤：

现象：

分析：
|
==== State: Opened by: waterworld on 11 May 2023 09:19:37 ====

杨工：
帮忙处理一下，着急出货，谢谢！

==== State: Opened by: cmadmin on 08 May 2023 09:47:37 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165946|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]预约通话音频客观指标测试|FS308项目客户寄了2台更换喇叭的机器（快递单号SF1503921238974），收到后请帮忙安排测试通话喇叭下行相关的音频指标，谢谢！！
handsfree：
Receiving Loudness Rating (RLR) nom
Receiving Loudness Rating (RLR) max
Sensitivity/frequency characteristics - UE receiving
Receiving Distortion
TMOS|
==== State: Opened by: cmadmin on 09 May 2023 15:03:37 ====

  == Haonan.Zhang@unisoc.com On 20230509T07:03:07 (xml) ==
Dear cus:

  测试完毕，HHWB 下行TMOS 测不出来。具体结果见附件。

==== State: Opened by: cmadmin on 08 May 2023 16:42:00 ====

  == Haonan.Zhang@unisoc.com On 20230508T08:39:12 (xml) ==
Dear cus:

  样机已收到，预计明天测。

==== State: Opened by: cmadmin on 08 May 2023 16:42:00 ====

  == Haonan.Zhang@unisoc.com On 20230508T08:39:12 (xml) ==
Dear cus:

  样机已收到，预计明天测。

==== State: Opened by: cmadmin on 08 May 2023 08:53:31 ====

  == Zuyun.Zhou@unisoc.com On 2023-05-08T00:53:01Z (json) ==
Dear Customer,
寄件的收件人是？

==== State: Opened by: cmadmin on 08 May 2023 08:53:29 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165940|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机][客户反馈]video stream V05版本，客户验证反馈的问题|Dear unisoc，
   video stream 客户验证V05 版本，反馈的问题如下：
Sometimes object moved so fast and two times getting played, it indicates that buffer fine tuning required for previous seek position.
—— 请看FTP上的视频 55-56s，卡住后，视频突然加速播放了
cricket commentary heard two times, meaning previous data played two times.
——请看FTP上的视频21 27s，1:09s 1:17s，画面重复了
Randomly streaming stops after 6 min, after 14 ~ min. need to resume back manually
——请看FTP上的log，播放20min后，显示 data timeout
概率性出现暂停后，再次点击播放，一直没反应
——情况FTP上的log。|
==== State: NeedInfo by: cmadmin on 10 May 2023 18:08:07 ====

  == Tao.Zhong@unisoc.com On 20230510T10:07:05 (xml) ==
Dear Customer:

     这两个库文件是分别验证不同的问题，待你们这两个问题验证都pass后，明天一起上库后，我这边再统一提供一个dv库文件给您们，请知悉，谢谢！
(20230510T09:41:56)

==== State: Opened by: cmadmin on 10 May 2023 17:40:56 ====

  == Tao.Zhong@unisoc.com On 2023-05-10T09:40:27Z (json) ==
Dear Customer:

    在验证问题1之前，除了替换附件中给出的库文件以外，还得修改一下上层，具体修改的地方如下：

在mmivp_fsm.c文件中的HLS_HandleSecondIndexCnf接口中进行修改，大概6973行的位置。
  cfg.audio_cfg.sample_rate=44100;
++cfg.media_length = (uint32)bandwidth_cnf_ptr->total_time;
  fsm_ptr->total_time = (uint32)bandwidth_cnf_ptr->total_time;

==== State: Opened by: waterworld on 10 May 2023 17:39:23 ====

Dear Unisoc，
   SPCSS01166923 这个CQ也提供了一个dv.a和你这边提供的dv.a大小不一致，请确定一下用哪个

==== State: NeedInfo by: cmadmin on 10 May 2023 17:01:55 ====

  == Tao.Zhong@unisoc.com On 20230510T09:01:27 (xml) ==
Dear Customer:

    针对问题1，即视频突然加速播放的问题，是由于在恢复之前， 底层没有清除buffer的数据，导致将暂停前解析的数据送到了解码器导致的，由于暂停前的数据的pts和恢复后数据的pts相差太大，所以会出现加速播放的现象。麻烦替换附件中的dv.a和h264_codec.a库文件，再验证一下问题1，本地自测验证了几十次，没有出现问题1的现象，请知悉，谢谢！

311	1641870-1	18:38:07.760	--		h264_dec, send(), i_pos=13933, i_depth=0, bs len:696, need sync: 0		
312	1642118-1	18:38:07.760	--		h264_dec, send(), i_pos=14000, i_depth=0, bs len:643, need sync: 0		
313	1681438-1	18:38:20.668	--		[DV]/D DPLAYER_Resume@player_main.c: player_handle = 0x2b6f3005		
314	1681793-1	18:38:20.697	--		[DV]/D DPLAYER_Resume@player_main.c: return successfully		
315	1699284-1	18:38:23.087	--		h264_dec, send(), i_pos=14067, i_depth=0, bs len:789, need sync: 0		
316	1699293-1	18:38:23.087	--		h264_dec, send(), i_pos=32467, i_depth=1, bs len:3283, need sync: 0
(20230510T06:49:21)

==== State: Opened by: cmadmin on 10 May 2023 14:50:26 ====

  == Xiameng.Yang@unisoc.com On 20230510T06:49:21 (xml) ==
问题4晚点会给一个修改patch，但是当前测试发现MMI也存在一些异常，需要等MMI 完善后再重新测试 出patch。

==== State: Opened by: cmadmin on 09 May 2023 18:36:16 ====

  == Xiameng.Yang@unisoc.com On 20230509T10:33:39 (xml) ==
问题3 提到的data timeout ，是因为 client发了 SYN 服务器没回应，属于已知问题：
14968	5592492-1	18:50:47.685	--	[ TCPIP ] MtSend, pkt(0):83d85728, netif(81b27e68), IPID(232b), S:1f4fe, A:0, W:65535, l:0, 1337 -> 443, TCP_SYN(60)
14969	5594611-1	18:50:48.031	--	[ TCPIP ] MtSend, pkt(0):83d85ea8, netif(81b27e68), IPID(232c), S:0, A:0, W:65535, l:0, 1336 -> 443, TCP_SYN(60)
14970	5598013-1	18:50:48.596	--	[ TCPIP ] MtSend, pkt(0):83d85d28, netif(81b27e68), IPID(232d), S:1f4fe, A:0, W:65535, l:0, 1337 -> 443, TCP_SYN(60)
14971	5600190-1	18:50:48.970	--	[ TCPIP ] MtSend, pkt(0):83d863e8, netif(81b27e68), IPID(232e), S:0, A:0, W:65535, l:0, 1336 -> 443, TCP_SYN(60)
14972	5603853-1	18:50:49.529	--	[ TCPIP ] MtSend, pkt(0):83d86028, netif(81b27e68), IPID(232f), S:1f4fe, A:0, W:65535, l:0, 1337 -> 443, TCP_SYN(60)
14973	5606210-1	18:50:49.908	--	[ TCPIP ] MtSend, pkt(0):83d869e8, netif(81b27e68), IPID(2330), S:0, A:0, W:65535, l:0, 1336 -> 443, TCP_SYN(60)
14974	5610225-1	18:50:50.464	--	[ TCPIP ] MtSend, pkt(0):83d876a8, netif(81b27e68), IPID(2331), S:1f4fe, A:0, W:65535, l:0, 1337 -> 443, TCP_SYN(60)
14975	5612457-1	18:50:50.842	--	[ TCPIP ] MtSend, pkt(0):83d85f68, netif(81b27e68), IPID(2332), S:0, A:0, W:65535, l:0, 1336 -> 443, TCP_SYN(60)
14976	5615135-1	18:50:51.245	--	#STRM HLS_UpdatePlaylistThreadEntry HTTP_SIG_ERROR_IND!
14977	5615623-1	18:50:51.408	--	[ TCPIP ] MtSend, pkt(0):83d86ce8, netif(81b27e68), IPID(2333), S:1f4fe, A:0, W:65535, l:0, 1337 -> 443, TCP_SYN(60)
14978	5617781-1	18:50:51.581	--	#STRM HLS_StrmPlayHttpPending HTTP_SIG_ERROR_IND, retry_time:1
14979	5618136-1	18:50:51.729	--	[ TCPIP ] MtSend, pkt(0):83d870a8, netif(81b27e68), IPID(2334), S:9c8f6, A:0, W:65535, l:0, 1338 -> 443, TCP_SYN(60)
14980	5621464-1	18:50:52.256	--	[ TCPIP ] MtSend, pkt(0):83d87768, netif(81b27e68), IPID(2335), S:bbdf4, A:0, W:65535, l:0, 1339 -> 443, TCP_SYN(60)
14981	5623273-1	18:50:52.518	--	[ TCPIP ] MtSend, pkt(0):83d83568, netif(81b27e68), IPID(2336), S:9c8f6, A:0, W:65535, l:0, 1338 -> 443, TCP_SYN(60)
14982	5626850-1	18:50:53.077	--	[ TCPIP ] MtSend, pkt(0):83d86aa8, netif(81b27e68), IPID(2337), S:bbdf4, A:0, W:65535, l:0, 1339 -> 443, TCP_SYN(60)
14983	5629155-1	18:50:53.451	--	[ TCPIP ] MtSend, pkt(0):83d878e8, netif(81b27e68), IPID(2338), S:9c8f6, A:0, W:65535, l:0, 1338 -> 443, TCP_SYN(60)
14984	5632461-1	18:50:54.013	--	[ TCPIP ] MtSend, pkt(0):83d87ca8, netif(81b27e68), IPID(2339), S:bbdf4, A:0, W:65535, l:0, 1339 -> 443, TCP_SYN(60)
14985	5634878-1	18:50:54.392	--	[ TCPIP ] MtSend, pkt(0):83d87a68, netif(81b27e68), IPID(233a), S:9c8f6, A:0, W:65535, l:0, 1338 -> 443, TCP_SYN(60)
14986	5637543-1	18:50:54.949	--	[ TCPIP ] MtSend, pkt(0):83d86fe8, netif(81b27e68), IPID(233b), S:bbdf4, A:0, W:65535, l:0, 1339 -> 443, TCP_SYN(60)
14987	5638902-1	18:50:55.323	--	[ TCPIP ] MtSend, pkt(0):83d87d68, netif(81b27e68), IPID(233c), S:9c8f6, A:0, W:65535, l:0, 1338 -> 443, TCP_SYN(60)
14988	5640647-1	18:50:55.561	--	#STRM HLS_StrmPlayHttpPending HTTP_SIG_ERROR_IND, retry_time:2
14989	5640648-1	18:50:55.561	--	#STRM HLS_StrmPlayHttpPending HTTP_SIG_ERROR_IND, have retry once
14990	5640851-1	18:50:55.869	--	[ TCPIP ] MtSend, pkt(0):83d87ee8, netif(81b27e68), IPID(233d), S:bbdf4, A:0, W:65535, l:0, 1339 -> 443, TCP_SYN(60)

==== State: Opened by: cmadmin on 09 May 2023 17:34:42 ====

  == Xiameng.Yang@unisoc.com On 20230509T09:31:39 (xml) ==
(In reply to 钟涛 (Tao Zhong) 消费电子事业部/消费电子事业部-产品工程部/系统软件部/(590)-4271 from comment #1)
针对问题2，怀疑是服务器的原因，解释如下：
重复 播放的ts数据是 65824736 ，和 65824737，不是 36重复播放，是 65824737对应的TS数据和65824736 对应的TS数据内容一样，所以按顺序播放时36播了到 37，但是37对应的URL和36的一样，导致下载下来解析后的内容和36的一样，画面上就呈现 重播的样子。
至于为什么 37和36的资源路径一样，是因为 ，首次下载二级index文件中，36对应的资源是39，log如下：
185	1460486-1	18:37:44.250	--	Time: 41412  [ HLS DEBUG]  ms->url : IPL_Eng_JPLite-avc1_80000=10000-mp4a_21200_eng=20000-begin=2632989521333333-dur=66666667-seq=65824739.ts [media_playlist_get_links 
186	1460487-1	18:37:44.250	--	Time: 41412  [ HLS DEBUG]  ms->sequence_number : 65824736 [media_playlist_get_links 564]

随后 过了一段时间，服务器的二级index文件更新了，此时二级index中的内容，36对应的资源变成了38，但是上一次是39，这里变成38是不合理的。log如下：
1074	1524803-1	18:37:52.923	--	 [ HLS DEBUG]  ms->url : IPL_Eng_JPLite-avc1_80000=10000-mp4a_21200_eng=20000-begin=2632989484000000-dur=37333333-seq=65824738.ts [media_playlist_get_links 
1075	1524804-1	18:37:52.923	--	 [ HLS DEBUG]  ms->sequence_number : 65824736 [media_playlist_get_links 564]

而恰好37的资源路径是 39（和第一次36的资源路径一样）：
log如下：
1080	1524808-1	18:37:52.923	--	 [ HLS DEBUG]  ms->url : IPL_Eng_JPLite-avc1_80000=10000-mp4a_21200_eng=20000-begin=2632989521333333-dur=66666667-seq=65824739.ts [media_playlist_get_links 
1081	1524809-1	18:37:52.923	--	 [ HLS DEBUG]  ms->sequence_number : 65824737 [media_playlist_get_links 564]

但是正常来说，同一个sequence 的资源路径不应变化，所以第二次更新index时，不会对36的资源路径进行更新，所以现在 36和37的资源路径都是 39，导致出现内容一样的重播现象。

正常来说 资源路径不应该变化，后面有正常log，如下：
上一次更新：44对应的资源路径是46
3432	1690579-1	18:38:22.178	--	 [ HLS DEBUG]  ms->url : IPL_Eng_JPLite-avc1_80000=10000-mp4a_21200_eng=20000-begin=2632989821333333-dur=66666667-seq=65824746.ts [media_playlist_get_links 
3433	1690580-1	18:38:22.178	--	 [ HLS DEBUG]  ms->sequence_number : 65824744 [media_playlist_get_links 564]

下一次更新: 44对应的资源路径还是46，没发生变化，属于正常流程。
4232	1738873-1	18:38:27.407	--	 [ HLS DEBUG]  ms->url : IPL_Eng_JPLite-avc1_80000=10000-mp4a_21200_eng=20000-begin=2632989821333333-dur=66666667-seq=65824746.ts [media_playlist_get_links 
4233	1738874-1	18:38:27.407	--	 [ HLS DEBUG]  ms->sequence_number : 65824744 [media_playlist_get_links 564]

总结：问题2产生的原因是服务器端偶现的问题。两次更新二级index文件，同一个sequence 的ts数据对应的资源路径发生了改变。

==== State: Opened by: cmadmin on 09 May 2023 10:55:29 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: cmadmin on 09 May 2023 09:42:23 ====

  == Tao.Zhong@unisoc.com On 20230509T01:38:43 (xml) ==
Hi Xiameng:

    针对客户反馈的问题4，即概率性点击暂停，然后恢复，长时间没反应的问题，我对比了正常时和最后一次异常时的log，发现你们daps的处理流程上有点差异，麻烦你先确认一下是否正常，若分析后是其它模块造成的，我们再继续分析，谢谢！

正常的恢复log信息：
1681793-1  	18:38:20.697 	18:38:20.697 	[DV]/D DPLAYER_Resume@player_main.c: return successfully                                                                                                         	           	0:07:39.289  	
1681799-1  	18:38:20.697 	18:38:20.697 	HLS_StrmPlaying HLS_STRM_RESUME_REQ                                                                                                                              	           	0:07:39.289  	
1681800-1  	18:38:20.697 	18:38:20.697 	  [ HLS ] input target sequence_number is  -1,   [hls_get_specialied_media_segment_by_sequence  715]                                                             	           	0:07:39.289  	
1681801-1  	18:38:20.697 	18:38:20.697 	  [ HLS ]  selectd  media segment  is 0x83eb5498 ,sequence is : 65824743 [hls_get_specialied_media_segment_by_sequence  752]                                     	           	0:07:39.289  	


最后一次异常恢复log信息：
2175085-1  	18:39:37.728 	18:39:37.728 	[DV]/D DPLAYER_Resume@player_main.c: return successfully                                                                                                         	           	0:08:56.320  	
2175090-1  	18:39:37.728 	18:39:37.728 	STRM HLS_STRM_Resume strm_handle=0x83eb8c0c!                                                                                                                     	           	0:08:56.320  	
2175091-1  	18:39:37.728 	18:39:37.728 	#STRMHLS_StrmPlayHttpPending HLS_STRM_RESUME_REQ                                                                                                                 	           	0:08:56.320  	
2175092-1  	18:39:37.728 	18:39:37.728 	STRM HLS_STRM_SendResumeCnf strm_handle=0x83eb8c0c!                                                                                                              	           	0:08:56.320

==== State: Submitted by: cmadmin on 08 May 2023 20:43:28 ====

  == Tao.Zhong@unisoc.com On 20230508T12:43:08 (xml) ==
Hi Xiameng:

    针对客户反馈的问题2，在缓冲后，画面重复播放的问题，从底层的Log来看，PTS为5800的video数据被解析了两次，麻烦你确认一下是否是在直播网络不好时，为了解决长时间卡在缓冲界面这个问题时而进行的修改导致的，另外客户反馈的问题3，即显示 data time的问题也麻烦看一下，谢谢！

备注：问题2的log在“V05版本出现问题”里，问题3的log在“播放20min后_界面显示data timeout”里。
    
第一次解析并发送PTS为5800的video数据到解码器：
1530603-1  	18:37:53.667 	18:37:53.667 	rui.zhang Readblock VIDEO_PORT cur_desc->pes_info.PTS =5800                                                                                                      	           	0:07:12.259  	
1530604-1  	18:37:53.667 	18:37:53.667 	rui.zhang frame_data_len 1=5530                                                                                                                                  	           	0:07:12.259  	
1530605-1  	18:37:53.667 	18:37:53.667 	rui.zhang demux_debug                                                                                                                                            	           	0:07:12.259  	
1530606-1  	18:37:53.667 	18:37:53.667 	rui.zhang p_frame->i_pos=5800 p_sys->i_length=0                                                                                                                  	           	0:07:12.259  	
1530607-1  	18:37:53.667 	18:37:53.667 	h264_dec, send(), i_pos=5800, i_depth=1, bs len:5530, need sync: 0                                                                                               	           	0:07:12.259  	

第二次解析并发送PTS为5800的video数据到解码器：
1579329-1  	18:37:59.915 	18:37:59.915 	rui.zhang Readblock video cur_desc=0x82b3ef60                                                                                                                    	           	0:07:18.507  	
1579330-1  	18:37:59.915 	18:37:59.915 	rui.zhang Readblock video enter 1                                                                                                                                	           	0:07:18.507  	
1579331-1  	18:37:59.915 	18:37:59.915 	rui.zhang Readblock video enter 2                                                                                                                                	           	0:07:18.507  	
1579332-1  	18:37:59.915 	18:37:59.915 	rui.zhang Readblock VIDEO_PORT cur_desc->pes_info.PTS =5800                                                                                                      	           	0:07:18.507  	
1579333-1  	18:37:59.915 	18:37:59.915 	rui.zhang frame_data_len 1=5530                                                                                                                                  	           	0:07:18.507  	
1579334-1  	18:37:59.915 	18:37:59.915 	rui.zhang demux_debug                                                                                                                                            	           	0:07:18.507  	
1579335-1  	18:37:59.915 	18:37:59.915 	rui.zhang p_frame->i_pos=5800 p_sys->i_length=0                                                                                                                  	           	0:07:18.507  	
1579336-1  	18:37:59.915 	18:37:59.915 	h264_dec, send(), i_pos=5800, i_depth=4, bs len:5530, need sync: 0                                                                                               	           	0:07:18.507
|
# SPCSS01165834|[SC9863A1][Waterworld][FS311-SC9863A1-A13][13889][CEBU-智能手机][A6][ZY]A12和A13谷歌商店下载passmark APK(PerformanceTest)程序测试性能，其中CPU Tests - Extended Instructions项相差7倍
步骤：同一台机器，烧录A12 A13版本分别测试谷歌商店下载passmark APK(PerformanceTest)程序测试性能

现象：CPU Tests - Extended Instructions (Million Matrices/sec)------测试项跑分相差7倍，其余测试项总体上A12优于A13

分析：详情请查看附件“性能-A12-A13-20230506.zip”,里面有数据表和测试YLOG，
A13:CPU Tests - Extended Instructions (Million Matrices/sec)
        486 491 494
A12:CPU Tests - Extended Instructions (Million Matrices/sec)
         2986  2978 3024


,|
==== State: Opened by: waterworld on 09 May 2023 11:51:36 ====

hi 尊敬的展讯工程师：
     请查看附件“性能对比-debug-trace-20230509”，我是通过开发者模式下的开关抓取的trace,请知悉
谢谢

==== State: NeedInfo by: cmadmin on 08 May 2023 10:51:40 ====

  == Ethan.Lin@unisoc.com On 20230508T02:48:27 (xml) ==
Dear Customer,

请A12/A13分别抓取passmark CPU测试期间的systrace，具体命令如下：

请使用userdebug版本抓取

python systrace.py sched freq idle sync irq disk workq datebase -b 20480 -t xx -o xx.html

>>注意：xx为case的运行时间
(20230508T01:12:57)

==== State: Opened by: cmadmin on 06 May 2023 17:32:56 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165794|[SC9863A1][Waterworld][A567-SC9863A1][13043][手机][1部] 充电 后摄录像时 进入了camera_lowpower scene ，不充电 后摄录像没有进入，请问下，进入camera_lowpower scene的条件是什么？附件是充电和不充电时的log|附件是log， 时间点10:07-10:37充电模式，11:06-11:36不充电模式|
==== State: Resolved by: cmadmin on 10 May 2023 09:44:10 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
充电 后摄录像时 进入了camera_lowpower scene ，不充电 后摄录像没有进入，请问下，进入camera_lowpower scene的条件是什么
Solution:
解答客户相关疑问

==== State: Opened by: cmadmin on 10 May 2023 09:39:45 ====

  == Jie.Yang1@unisoc.com On 20230510T01:38:33 (xml) ==

dear customer

如沟通，camera模块的功耗配置在充电和不充电场景是一样的。此问题关闭
N2AInBug


==== State: NeedInfo by: cmadmin on 06 May 2023 19:48:23 ====

  == Jie.Yang1@unisoc.com On 20230506T11:47:10 (xml) ==

dear customer
Enter camera_lowpower_video代表进入这个场景，后面的bgn和end代表配置这个场景的开始和结束。Exit camera_lowpower_video代表退出这个场景，

一般设置进入相机预览的功耗level在SprdCamera3OEMIf.cpp中的getScenePerfLevel() 中

每个CAM_PERFORMANCE_LEVE的具体配置在以下文件中
/libcamera/ppm/camera_power_perf/SprdCameraPowerPerformance.cpp

105  void SprdCameraSystemPerformance::setCamPerformanceScene(
106      sys_performance_camera_scene camera_scene) {
107      char ppm_debug[PROPERTY_VALUE_MAX];
108      char version[PROPERTY_VALUE_MAX];
109      Mutex::Autolock l(&mLock);
110  #ifndef CONFIG_CAMERA_DFS_FIXED_MAXLEVEL
111      switch (camera_scene) {
112      case CAM_PERFORMANCE_LEVEL_11:
113  #ifdef CONFIG_CAMERA_VIDEO_GRADING_POWERHINT_OPTIMIZE
114          setPowerHint(CAM_POWER_VIDEO_1080P, mSceneVideo1080P);
115  #else
116          setPowerHint(CAM_POWER_LOWPOWER_ON, mSceneLowPower);
117  #endif
118          changeDfsPolicy(CAM_LOW);
119          break;

一般关注setPowerHint，每个powerhint对应如下

269  void SprdCameraSystemPerformance::initPowerHint() {
270  
271      if (!mPowermanageInited) {
272  #if (CONFIG_HAS_CAMERA_HINTS_VERSION == ANDROID_VERSION_P)
273          mPowerManager = new ::android::PowerHALManager();
274          if (mPowerManager) {
275              mPowerManager->init();
276              mSceneLowPower = mPowerManager->createPowerHintScene(
277                  "camera", 0, "camera_lowpower");
278              mScenePerformance =
279                  mPowerManager->createPowerHintScene("camera", 0, "camera_perf");
280              mSceneSlightPerformance =
281                  mPowerManager->createPowerHintScene("camera", 0, "camera_lowpower_1");
282              mSceneHighPerformance =
283                  mPowerManager->createPowerHintScene("camera", 0, "camera_high_perf");
284              mSceneSpecialApp =
285                  mPowerManager->createPowerHintScene("camera", 0, "camera_SpecialApp");
286              mSceneSpecialVideo =
287                  mPowerManager->createPowerHintScene("camera", 0, "camera_lowpower_video");
288              mSceneVideo720P =
289                  mPowerManager->createPowerHintScene("camera", 0, "camera_video_720p");
290              mSceneVideo1080P =
291                  mPowerManager->createPowerHintScene("camera", 0, "camera_video_1080p");
292              mPowermanageInited = true;

camera_video_1080p就是对应power_scene_config.xml中的scene name
(20230506T11:25:05)

==== State: Opened by: waterworld on 06 May 2023 19:23:03 ====

Dear Sprd :
   请问下，camera_lowpower_video scene end是 退出camera_lowpower 的标志吗？还有具体判断进入camera_lowpower的条件是什么？

==== State: NeedInfo by: cmadmin on 06 May 2023 19:05:23 ====

  == Jie.Yang1@unisoc.com On 20230506T11:04:14 (xml) ==

dear customer

从log上录像场景都是进入的相同的camera_lowpower_video，是log穿错了吗？本地测试样机看是没有区分的

充电：
05-06 10:06:55.247   579   758 I Cam3HWI : 1534, configureStreams: :hal3: camId=0, prev: w=1280, h=720, video: w=1920, h=1080, callback: w=0, h=0, yuv2: w=0, h=0, cap: w=1920, h=1080 yuv3: w=0, h=0, raw: w=0, h=0, debuginfo: w=0, h=0
05-06 10:06:55.280   579   758 I Cam3OEMIf: 1248, configure: E mSprdAppmodeId 17 mMultiCameraMode 0

05-06 10:06:56.701   615   615 D PowerHAL: ###Enter camera_lowpower_video scene bgn###
05-06 10:06:56.701   615   615 D PowerHAL: Enter common_set: enable:1, duration: 0, /sys/devices/system/cpu/cpufreq/policy4/schedutil/freq_margin: -25
05-06 10:06:56.701   615   615 D PowerHAL: Enter set_cluster_freqs_max_min: 
05-06 10:06:56.701   615   615 D PowerHAL: Enter common_set: enable:1, duration: 0, /sys/devices/system/cpu/cpufreq/policy0/schedutil/freq_margin: -25
05-06 10:06:56.701   615   615 D PowerHAL: Enter set_cluster_freqs_max_min: 
05-06 10:06:56.702   615   615 D PowerHAL: ###Enter camera_lowpower_video scene end###

不充电

05-06 11:05:32.570   579   758 I Cam3HWI : 1534, configureStreams: :hal3: camId=0, prev: w=1280, h=720, video: w=1920, h=1080, callback: w=0, h=0, yuv2: w=0, h=0, cap: w=1920, h=1080 yuv3: w=0, h=0, raw: w=0, h=0, debuginfo: w=0, h=0
05-06 11:05:32.606   579   758 I Cam3OEMIf: 1248, configure: E mSprdAppmodeId 17 mMultiCameraMode 0

05-06 11:05:34.022   615   615 D PowerHAL: ###Enter camera_lowpower_video scene bgn###
05-06 11:05:34.022   615   615 D PowerHAL: Enter common_set: enable:1, duration: 0, /sys/devices/system/cpu/cpufreq/policy4/schedutil/freq_margin: -25
05-06 11:05:34.022   615   615 D PowerHAL: Enter set_cluster_freqs_max_min: 
05-06 11:05:34.023   615   615 D PowerHAL: Enter common_set: enable:1, duration: 0, /sys/devices/system/cpu/cpufreq/policy0/schedutil/freq_margin: -25
05-06 11:05:34.023   615   615 D PowerHAL: Enter set_cluster_freqs_max_min: 
05-06 11:05:34.024   615   615 D PowerHAL: ###Enter camera_lowpower_video scene end###
(20230506T08:56:16)

==== State: Opened by: cmadmin on 06 May 2023 16:53:41 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 06 May 2023 16:52:35 ====

附件是对camera_lowpower 做的修改
|
# SPCSS01165716|[UMS9230T][Waterworld][FS311-UMS9230T-A13][13935][CEBU-智能手机][A13][XM]A13如何在QS添加vowifi开关菜单
步骤：
A12贵司提供过在状态栏（QS）添加Vowifi开关菜单（VoWifiTile.java）

A13是否也有对应的方案可以提供|
==== State: Closed by: waterworld on 08 May 2023 09:56:05 ====

知悉  关闭此问题

==== State: NeedInfo by: cmadmin on 08 May 2023 09:55:06 ====

  == Shuangyi.Xiao@unisoc.com On 2023-05-08T01:50:34Z (json) ==
1、A13 Settings中有vowifi开关

2、下拉状态栏中没有了，A13原生就没有，A13框架也有所改变，所以未porting之前版本的该开关需求。实际上A12开始就没有了，A11有，贵司A12如果也有该开关应该是贵司自行添加的。
(2023-05-06T08:54:50Z)

==== State: Opened by: waterworld on 06 May 2023 16:54:35 ====

A13 Settings里面是否还有vowifi这个开关，贵司A13是已经全部去除还是合入到其他路径了

==== State: NeedInfo by: cmadmin on 06 May 2023 16:38:18 ====

  == Shuangyi.Xiao@unisoc.com On 2023-05-06T08:36:18Z (json) ==
A13没有了，贵司可参考之前的方案自行修改，请知悉
(2023-05-06T08:31:58Z)

==== State: Opened by: cmadmin on 06 May 2023 15:47:18 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165713|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]Reliance Jio 双卡锁卡需求是否已开发实现|之前SPCSS01054040确认如果使用Subsidy Lock，平台已支持实现Reliance Jio 双卡的锁卡需求

印度Reliance JIO 双卡锁卡详细需求见附件：PLMN Lock_L+L_DSDS_Devices_v1.9.pdf

Reliance JIO反馈会提供一个MDM apk，软件端预置 MDM apk后，会自动满足PLMN & Subsidy Lock 需求
正在跟Reliance JIO询问MDM apk功能是怎样的。

请问展锐平台是否支持实现该Reliance JIO 双卡锁卡详细需求，谢谢|
==== State: NeedInfo by: cmadmin on 10 May 2023 11:18:56 ====

  == cuifang.deng@unisoc.com On 20230510T03:16:26 (xml) ==
您好：
请和运营商再确认一下此需求，你说的这个功能和之前的需求有冲突。
之前在international roaming scenarios下，由于MCC=222,MNC=01判断不准，所以要额外判断ICCID。
而普通场景只需要按照3GPP协议，判断mcc和mnc就可以了。
(20230509T12:18:25)

==== State: Opened by: waterworld on 09 May 2023 20:16:45 ====

Dear unisoc,
插mcc=405 ,mnc=8xx的卡 ,也要判断ICCID start是否符合要求；
插Telecom Italia(MCC=222,MNC=01)卡不需要判断ICCID start

==== State: NeedInfo by: cmadmin on 09 May 2023 19:20:40 ====

  == cuifang.deng@unisoc.com On 2023-05-09T11:20:21Z (json) ==
您好：
之前comment第2点是否说的是international roaming scenarios下，Telecom Italia(MCC=222,MNC=01)卡，需要判断ICCID start，如果ICCID start符合要求，也可以正常使用，不会进入lock状态。  
如果插入的mcc=405 ,mnc=8xx的卡，只用判断mcc,mnc不用判断ICCID start。
(2023-05-09T07:28:08Z)

==== State: Opened by: waterworld on 09 May 2023 10:58:46 ====

Dear unisoc,
1.当前锁卡需求使用simlock网络锁实现。
请问当前simlock网络锁 有包含 ICCID start 吗，比如MCC:405, MNC:854, ICCID start:8991854

谢谢




==== State: NeedInfo by: cmadmin on 08 May 2023 10:30:10 ====

  == Yanfen.Yao@unisoc.com On 2023-05-08T02:27:33Z (json) ==
dear customer：

如前comment，Reliance JIO 回复反馈不使用subsidy lock，若当前锁卡需求通过simlock网络锁实现，有几点问题
1. 双卡插Active JIO SIM不支持弹框选择默认数据卡
2. 锁卡方案不区分漫游

请反馈是否使用simlock网络锁实现，以及是否需要走rat流程实现当前需求，谢谢
(2023-05-06T09:29:44Z)

==== State: Opened by: waterworld on 06 May 2023 17:27:49 ====

Dear unisoc,
Reliance JIO 回复反馈不使用subsidy lock，
请帮忙重新评估Reliance JIO 双卡锁卡详细需求：PLMN Lock_L+L_DSDS_Devices_v1.9.pdf

谢谢

==== State: Opened by: cmadmin on 06 May 2023 15:47:24 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165706|[SC9863A][Waterworld][A507V3.0][11998][手机][SC9863A][Waterworld][A507V3.0] 客户应用推送下载的apk在桌面清空之后应用名称会变成unknown，请帮忙分析
步骤：
客户应用推送下载的apk在桌面清空之后应用名称会变成unknown，请帮忙分析，ylog已上传到附件中，谢谢。
现象：

分析：
|
==== State: Opened by: waterworld on 09 May 2023 11:00:27 ====

Dear sprd，
        该问题客户催的比较急，请尽快帮忙处理下，谢谢，刚刚通话无人接听

==== State: Opened by: waterworld on 08 May 2023 10:43:07 ====

Dear sprd，
      log与视频已上传到附件

==== State: Opened by: cmadmin on 06 May 2023 15:29:05 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165678|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][253716]视频通话，左下角预览画面有拉伸
步骤：
1.Play Store，将Google Dialer升到最新；
2.拨打视频通话
现象：
左下角预览画面拉伸变形
分析：
从log看预览尺寸是w=640, h=480
M005F50  05-04 13:17:15.265   474  3210 I Cam3HWI : 1127, configureStreams: :hal3: camId=1, prev: w=640, h=480, video: w=0, h=0, callback: w=0, h=0, yuv2: w=0, h=0, cap: w=0, h=0 yuv3: w=0, h=0,
M006550  05-04 13:17:15.675  2652  2652 I DialerVideoCallCallback: com.android.dialer.incall.core.video.impl.VideoCallCallback.onCameraCapabilitiesChanged:140 Local camera changed, width: 640, height: 480

log和视频已上传附件，还请贵司帮忙看下；
谢谢
|
==== State: NeedInfo by: cmadmin on 09 May 2023 15:24:32 ====

  == Sam.Chiu@unisoc.com On 2023-05-09T07:23:55Z (json) ==
此问题本司之前有反应给google，现只能待google修改. 

google dialer 会拉起了全屏显示，而我司最高分辨率为720P即1280x720。Google dialer最终协商结果也为720p。
M02D2FD  10-14 12:57:05.232 18722 18722 I DialerVideoCallPresenter: com.android.incallui.VideoCallPresenter.changeToOptimalCameraPreviewSize:1099 optimalSize: 1280x720

对比机协商结果为2160x1080，也可以称为1080P+，我司不支持。
10-14 14:34:42.637  7873  7873 I DialerVideoCallPresenter: com.android.incallui.VideoCallPresenter.changeToOptimalCameraPreviewSize:1099 optimalSize: 2160x1080

此问题只能Google dialer解决。
(2023-05-08T01:12:52Z)

==== State: Opened by: cmadmin on 06 May 2023 15:17:18 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165670|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]这是SPCSS01128622的后续CQ，基于T107平台提供DC(Data Collector)功能 -- jdc_client_getMuteRelatedParameters|请问这个接口如何正确的测试，我测试的结果永远是{0，0，0，0}，怎么可以出现其他数值？|
==== State: Opened by: waterworld on 09 May 2023 15:50:51 ====

Dear Unisoc，
    好的，我们正在按照您的建议抓取log

==== State: NeedInfo by: cmadmin on 09 May 2023 13:25:08 ====

  == Cindy.Xie@unisoc.com On 20230509T05:24:58 (xml) ==
Dear Customer,
[建议]
如电话沟通，
测试环境：寻找电梯环境等信号较差的场景，通话中可明显有断续或卡断，再检查此项数据，是否符合贵司对本需求的要求。
其他：如不符合贵司需求，请继续提供相应的log，以供我司继续分析。

[当前进展]
log文件：MuteRelated.rar
初步分析：如下log可以看到，此时通话质量好，确实未出现丢包现象等。比如，seqn连续无中断...
10	102967-1	13:52:17.353	--	Time: 2276 JB_getPkt:*****:index=0 seqn=55609 
11	103149-1	13:52:17.358	--	Time: 2276 JB_getPkt:*****:index=1 seqn=55610 
12	103203-1	13:52:17.358	--	Time: 2276 JB_getPkt:*****:index=2 seqn=55611 
13	103281-1	13:52:17.403	--	Time: 2276 JB_getPkt:*****:index=3 seqn=55612 
14	103749-1	13:52:17.458	--	Time: 2276 JB_getPkt:*****:index=4 seqn=55613 
15	104564-1	13:52:17.618	--	Time: 2276 JB_getPkt:*****:index=5 seqn=55614 
16	105421-1	13:52:17.758	--	Time: 2276 JB_getPkt:*****:index=6 seqn=55615 
17	106302-1	13:52:17.918	--	Time: 2276 JB_getPkt:*****:index=7 seqn=55616 
18	107264-1	13:52:18.058	--	Time: 2276 JB_getPkt:*****:index=8 seqn=55617 
19	108248-1	13:52:18.258	--	Time: 2276 JB_getPkt:*****:index=9 seqn=55618 
20	109106-1	13:52:18.418	--	Time: 2276 JB_getPkt:*****:index=10 seqn=55619
......
99	742397-1	13:53:58.509	--	Time: 10678 [IMS]:[IMS]mc: _MC_reportCallEvent,stream:1 lossRate:0 muteExtraSmall:0 muteSmall:0 muteMedium:0 muteLarge:0 jitterLoss:0
102	742408-1	13:53:58.509	--	Time: 10678 [IMS]:[DC] trigger evt:0X00000008, end_code:16, packet_loss:0,es_loss:0,s_loss:0,m_loss:0,l_loss:0,jitter_loss:0,

以上，请知悉！
谢谢。

==== State: NeedInfo by: cmadmin on 08 May 2023 18:04:02 ====

  == zhongping.shi@unisoc.com On 2023-05-08T10:03:26Z (json) ==
尊敬的客户您好，
    请帮忙替换mmiphone_dc.c中的如下接口后按照之前提供的方法重新复测并提供一份从开机到问题现象出现的log信息用于分析，谢谢。


PUBLIC char *MMIAPIPHONE_GetMuteRelateParameters(MN_DUAL_SYS_E dual_sys)
{
    MN_DATA_COLL_L4_INFO_T l4_info_output_ptr = {0};
    MN_DATA_COLL_NAS_INFO_T nas_info_output_ptr = {0};
    MN_DATA_COLL_IMS_INFO_T ims_info_output_ptr = {0};
    MN_DATA_COLL_LAS_INFO_T las_info_output_ptr = {0};
    
    memset(g_mute_str_ptr[dual_sys], 0, sizeof(RSP_RESULT_STR));
    MNPHON_GetStackDataInfoEx(dual_sys, &l4_info_output_ptr, &nas_info_output_ptr, &ims_info_output_ptr, &las_info_output_ptr);
    sprintf((char *)(g_mute_str_ptr[dual_sys] + strlen((char *)g_mute_str_ptr[dual_sys])), "{%d,%d,%d,%d}", 
            ims_info_output_ptr.es_loss, ims_info_output_ptr.s_loss, ims_info_output_ptr.m_loss, ims_info_output_ptr.l_loss);
    SCI_TRACE_LOW("[MMI_DC] MMIAPIPHONE_GetMuteRelateParameters e:%d, s:%d, m:%d, l:%d. g_mute_str_ptr[%d]:%s", 
                  ims_info_output_ptr.es_loss,
                  ims_info_output_ptr.s_loss,
                  ims_info_output_ptr.m_loss,
                  ims_info_output_ptr.l_loss,
                  dual_sys,
                  g_mute_str_ptr[dual_sys]);
    
    return &g_mute_str_ptr[dual_sys];
}
(2023-05-08T09:07:02Z)

==== State: Opened by: waterworld on 08 May 2023 14:00:43 ====

Dear Unisoc,
    我尝试使用您提供的方式测试，多次测试的结果均为{0，0，0，0}，请问是否正常？
详情log请看附件，查询jdc_client_getMuteRelatedParameters函数的返回值请使用关键字 jdc_client_getMuteRelatedParameters 查询，谢谢，

==== State: NeedInfo by: cmadmin on 06 May 2023 15:50:19 ====

  == Doris.Wang@unisoc.com On 2023-05-06T07:47:22Z (json) ==
尊敬的客户，您好

测试方法：
1. 首先需要配置下述NV，打开data collector功能
NV_PARAM_TYPE_MN_CFG/feature_switch   的bit23（ 1xxx xxxx xxxx xxxx xxxx xxxx）为1

2. 开机，拨打一个volte电话，电话过程中查询。

3. 挂断电话，查询。

请按照上述方法操作，如果还是有问题，请提供modem log供展锐分析，谢谢。
(2023-05-06T07:08:35Z)

==== State: Opened by: cmadmin on 06 May 2023 15:10:53 ====

  == zhongping.shi@unisoc.com On 20230506T07:08:35 (xml) ==
请帮忙流转确认客户要如何测试这个场景，谢谢。
|
# SPCSS01165664|[UMS9230][Waterworld][FS302][13404][智能手机][遵义六部]：Airtel运营商在移动过程中通话有噪声和无声
步骤
1.打开设备电源。
2.插入Airtel SIM卡
2.让注册到IMS网络
3.拨打MO电话并在MT端接受
[实际结果]
测试机观察到Airtel运营商在移动过程中通话有噪声和无声
[预期结果]
测试机应在移动过程中能正常通话

log已上传附件：Noise mute ,breaking issue observed.rar|
==== State: Opened by: waterworld on 09 May 2023 17:51:59 ====

Dear Sprd:
        LOG中问题发生时间点 : 15 :21 , 15 :29 and 15:38

==== State: NeedInfo by: cmadmin on 09 May 2023 15:27:38 ====

  == Emily.Wang@unisoc.com On 20230509T07:24:53 (xml) ==
dear customer,
   贵司提供的电话信息比较多，不好定位，还请标注一下“通话有噪声和无声”现象对应的时间点以及是哪一通电话，还请确认一下是不是下行无声，谢谢。
(20230509T01:51:16)

==== State: Opened by: waterworld on 08 May 2023 15:25:46 ====

Dear Sprd：
        请问此问有什么进展吗，是属于网络问题还是音频问题，麻烦告知一下，谢谢！

==== State: Opened by: cmadmin on 06 May 2023 15:07:06 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165658|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][9768]第一次进入联系人应用加载速度缓慢会一直停留空白界面，第二次可正常进入|前提条件:1、低存储内存低运行内存下;
2、系人应用为当前最新版本：4.7.26.526092538
3、插入SIM卡SD卡，登录谷歌账号，联系人所有账号为21位联系人
步骤：
手机使用过程中第一次进入联系人应用加载速度缓慢会一直停留空白界面，第二次可正常进入。
目前出现3次，如附件log，时间点是10：57，附件的视频和log不是匹配的，因为问题出现的时候没有录制视频。

现象：

分析：
|
==== State: Closed by: waterworld on 10 May 2023 14:20:00 ====

谢谢支持

==== State: NeedInfo by: cmadmin on 08 May 2023 16:14:18 ====

  == Seth.Lu@unisoc.com On 2023-05-08T08:13:02Z (json) ==
S017E17  04-28 10:57:03.295   984  1496 I ActivityTaskManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.google.android.contacts/com.android.contacts.activities.PeopleActivity bnds=[526,639][693,900]} from uid 10141, pid 1505
S017E4E  04-28 10:57:03.365   984  1496 I WindowManager: Input focus has changed to null from 17a4121 com.android.launcher3/com.android.launcher3.Launcher3QuickStepGo mDisplayId 0 updateInputWindows true
E017EB5  04-28 10:57:04.134  4456  4456 I wm_on_create_called: [223073786,com.android.contacts.activities.PeopleActivity,performCreate]
E017EB8  04-28 10:57:04.174  4456  4456 I wm_on_start_called: [223073786,com.android.contacts.activities.PeopleActivity,handleStartActivity]
E017F22  04-28 10:57:05.065  4456  4456 I wm_on_resume_called: [223073786,com.android.contacts.activities.PeopleActivity,RESUME_ACTIVITY]
S017F2F  04-28 10:57:05.244   984  3971 I WindowManager: Input focus has changed to Window{5010140 u0 com.google.android.contacts/com.android.contacts.activities.PeopleActivity} from 17a4121 com.android.launcher3/com.android.launcher3.Launcher3QuickStepGo mDisplayId 0 updateInputWindows true
M017F80  04-28 10:57:05.595   984  1045 I ActivityTaskManager: Displayed com.google.android.contacts/com.android.contacts.activities.PeopleActivity: +2s235ms


看google contacts 启动流程未发现异常, cold start 从 startActivity 一直到 Displayed 两秒, 大概白屏一秒多, 因为没有视频所以不确定是进入 google contacts 后仍然白屏还是只是白屏一秒多, 如果只有一秒多应为 google contacts 本身代码行为正常现象.

第二次正常进入应该是因为是 warm start 的关系.

Thanks.
(2023-05-08T06:29:43Z)

==== State: Opened by: waterworld on 08 May 2023 10:14:37 ====

你好，若分析结果是cpu占用率高的问题，都是无法优化的吗？

==== State: NeedInfo by: cmadmin on 06 May 2023 16:53:43 ====

  == Lin.Tang1@unisoc.com On 20230506T08:52:54 (xml) ==
您好：

开机后，SynSimAccountsReceiver类的onReceive方法接收到卡loaded加载完成，会通过FSA类进行SIM账户及SIM联系人的加载工作。

从log看卡加载完成后很长时间SynSimAccountsReceiver才接收到广播，其中包含系统广播，google服务广播等，分析是性能原因导致系统整体缓慢，所以先是空白显示，后续才加载联系人显示；请客户知悉。


\联系人加载速度较慢\001-0428_105331_poweron\0-android.log 
//sim卡ready
R0062AD  04-28 10:53:55.848  1192  1192 D SubscriptionInfoUpdater: Broadcasting intent ACTION_SIM_STATE_CHANGED READY reason null for phone: 0
R006396  04-28 10:53:55.987  1192  1192 D SubscriptionInfoUpdater: Broadcasting intent ACTION_SIM_STATE_CHANGED READY reason null for phone: 1

//卡2loaded加载完成发出广播
R008C85  04-28 10:54:03.063  1192  1192 D SubscriptionInfoUpdater: Broadcasting intent ACTION_SIM_STATE_CHANGED LOADED reason null for phone: 1
M008C86  04-28 10:54:03.063  1192  1192 D IntentBroadcaster: Broadcasting and adding intent for rebroadcast: android.intent.action.SIM_STATE_CHANGED LOADED for phoneId 1
S008C87  04-28 10:54:03.064   984  1042 D BroadcastQueue: Add broadcast <BroadcastRecord{92412e2 u-1 android.intent.action.SIM_STATE_CHANGED}> into [parallel | background], pending size 0
S008C88  04-28 10:54:03.065   984  1042 D BroadcastQueue: Add broadcast <BroadcastRecord{ee91673 u-1 android.intent.action.SIM_STATE_CHANGED}> into [ordered | background], pending size 34

//卡1loaded加载完成发出广播	
R009B88  04-28 10:54:06.570  1192  1192 D SubscriptionInfoUpdater: Broadcasting intent ACTION_SIM_STATE_CHANGED LOADED reason null for phone: 0
S009B8B  04-28 10:54:06.572   984  1527 D BroadcastQueue: Add broadcast <BroadcastRecord{8f4d565 u-1 android.intent.action.SIM_STATE_CHANGED}> into [parallel | background], pending size 0
S009B8C  04-28 10:54:06.573   984  1527 D BroadcastQueue: Add broadcast <BroadcastRecord{a61d23a u-1 android.intent.action.SIM_STATE_CHANGED}> into [ordered | background], pending size 38

//pending
S013206  04-28 10:54:54.419   984  1107 D BroadcastQueue: Add broadcast <BroadcastRecord{f329181 u0 com.google.android.location.ALARM_WAKEUP_LOCATOR}> into [ordered | background], pending size 53
S0138F9  04-28 10:54:59.416   984  2959 D BroadcastQueue: Add broadcast <BroadcastRecord{b418895 u0 com.google.android.gms.gcm.ACTION_SCHEDULE}> into [ordered | background], pending size 72
S013BE5  04-28 10:55:01.398   984  1043 D BroadcastQueue: Add broadcast <BroadcastRecord{672bb9e u-1 android.intent.action.SIG_STR}> into [ordered | background], pending size 79

//收到卡加载广播才会去加载联系人
M0136A9  04-28 10:54:57.592  2975  2975 E SyncSimAccountsReceiver: SIM_STATE_CHANGED: state: LOADED phoneId: 0 subId: 1
M013D86  04-28 10:55:02.500  2975  2975 E SyncSimAccountsReceiver: SIM_STATE_CHANGED: state: LOADED phoneId: 1 subId: 2

//系统整体运行缓慢
M00C4D1  04-28 10:54:12.376  1785  1785 W CheckTime: App running slow: Executing com.google.android.gms.chimera.GmsIntentOperationService$PersistentInternalReceiver scheduleReceive took 277ms
M00CFA0  04-28 10:54:14.186  1785  1785 W CheckTime: App running slow: Executing com.google.android.gms.chimera.GmsIntentOperationService$PersistentInternalReceiver scheduleReceive took 256ms
M01118B  04-28 10:54:35.467  2531  2531 W CheckTime: App running slow: Executing ContentProviderInfo{name=media className=com.android.providers.media.MediaProvider} onCreate took 547ms
M0111B4  04-28 10:54:35.504  2531  2531 W CheckTime: App running slow: Executing handleBindApplication : installContentProviders took 781ms

//cpu占用率高
4-28 10:54:35.110<   71.487241>	84	1	0	0	0	0	97	1	1200000	0	0	0	97	1	1200000	0	0	0	96	3	1200000	0	0	0	98	1	1200000	0	0	0	95	1	1600000	0	0	0	97	0	1600000	0	0	0	44	2	1600000	0	0	0	48	1	1600000	0	0	0	0	0	2678	12	1	1950036	1196076	1083648	0	0	0	0	0	0
4-28 10:54:36.113<   72.490087>	91	1	0	0	0	0	98	1	1200000	0	0	0	99	1	1200000	0	0	0	99	1	1200000	0	0	0	99	2	1200000	0	0	0	98	0	1600000	0	0	0	99	2	1600000	0	0	0	75	1	1600000	0	0	0	64	0	1600000	0	0	0	14025	22393	2808	18	12	1950036	1178780	1118340	0	0	0	0	0	0
4-28 10:54:37.116<   73.493594>	95	6	0	0	0	0	98	8	1200000	0	0	0	100	8	1200000	0	0	0	100	11	1200000	0	0	0	96	6	1200000	0	0	0	100	4	1600000	0	0	0	100	4	1600000	0	0	0	75	4	1600000	0	0	0	86	9	1600000	0	0	0	0	0	2904	7	18	1950036	1149132	1091328	0	0	0	0	0	0
4-28 10:54:38.121<   74.498276>	94	7	0	0	0	0	100	8	1200000	0	0	0	100	8	1200000	0	0	0	98	5	1200000	0	0	0	100	7	1200000	0	0	0	100	3	1600000	0	0	0	100	3	1600000	0	0	0	68	15	1600000	0	0	0	84	10	1600000	0	0	0	18630	29993	2967	22	5	1950036	1134956	1076748	1	0	0	1	0	0
4-28 10:54:39.124<   75.501576>	83	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	1	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	24	1	1600000	0	0	0	32	0	1600000	0	0	0	0	0	3092	35	0	1950036	1161020	1097492	1	0	0	1	0	0
4-28 10:54:40.128<   76.504890>	89	1	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	1	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	53	5	1600000	0	0	0	59	2	1600000	0	0	0	18356	31711	3298	43	1	1950036	1138188	1076316	1	0	0	1	0	0
4-28 10:54:41.132<   77.509168>	97	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	99	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	93	2	1600000	0	0	0	80	1	1600000	0	0	0	0	0	3397	49	0	1950036	1101604	1053900	1	0	0	1	0	0
4-28 10:54:42.137<   78.514445>	97	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	99	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	86	1	1600000	0	0	0	86	1	1600000	0	0	0	12793	23660	3495	37	0	1950036	1076536	1014144	4	0	0	2	0	0
4-28 10:54:43.147<   79.524131>	94	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	68	0	1600000	0	0	0	74	0	1600000	0	0	0	0	0	3592	51	1	1950036	1074224	1013256	4	0	0	2	0	0
4-28 10:54:44.161<   80.537948>	92	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	64	1	1600000	0	0	0	71	1	1600000	0	0	0	14463	25351	3747	38	0	1950036	1073600	1012544	4	1	0	2	0	0
4-28 10:54:45.165<   81.541824>	86	0	0	0	0	0	100	1	1200000	0	0	0	100	1	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	37	1	1600000	0	0	0	47	0	1600000	0	0	0	0	0	3820	37	0	1950036	1074948	1012380	4	1	0	2	0	0
4-28 10:54:46.171<   82.548553>	84	0	0	0	0	0	100	0	1200000	0	0	0	99	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	39	1	1600000	0	0	0	29	3	1600000	0	0	0	13417	22254	3918	31	1	1950036	1064644	1004936	4	1	0	1	0	0
4-28 10:54:47.175<   83.551957>	83	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	25	0	1600000	0	0	0	30	0	1600000	0	0	0	0	0	4003	28	0	1950036	1066944	1006580	4	1	0	1	0	0
4-28 10:54:48.189<   84.565754>	80	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	17	0	1600000	0	0	0	18	2	1600000	0	0	0	10093	19080	4066	35	0	1950036	1085220	1013956	4	1	0	1	0	0
4-28 10:54:49.192<   85.569484>	79	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	7	0	1600000	0	0	0	12	2	1600000	0	0	0	0	0	4118	24	0	1950036	1069016	1008512	4	1	0	1	0	0
4-28 10:54:50.194<   86.571600>	86	0	0	0	0	0	100	1	1200000	0	0	0	99	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	37	1	1600000	0	0	0	44	0	1600000	0	0	0	12179	25008	4190	16	2	1950036	1068568	1007832	3	1	0	1	0	0
4-28 10:54:51.199<   87.576300>	91	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1600000	0	0	0	100	0	1600000	0	0	0	63	3	1600000	0	0	0	62	2	1600000	0	0	0	0	0	4239	22	1	1950036	1057020	997192	3	1	0	1	0	0
4-28 10:54:52.203<   88.580345>	84	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	98	1	1600000	0	0	0	100	0	1600000	0	0	0	32	1	1600000	0	0	0	38	0	1600000	0	0	0	9230	15537	4280	11	1	1950036	1071904	1007412	4	1	0	1	0	0
4-28 10:54:53.207<   89.583973>	86	0	0	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	100	0	1200000	0	0	0	99	0	1600000	0	0	0	100	2	1600000	0	0	0	39	2	1600000	0	0	0	45	1	1600000	0	0	0	0	0	4334	17	0	1950036	1041624	974200	4	1	0	1	0	0
4-28 10:54:54.210<   90.587369>	84	0	0	0	0	0	98	0	1200000	0	0	0	99	1	1200000	0	0	0	98	0	1200000	0	0	0	100	0	1200000	0	0	0	96	1	1600000	0	0	0	98	0	1600000	0	0	0	39	0	1600000	0	0	0	37	1	1600000	0	0	0	10793	17091	4379	7	0	1950036	1029580	968584	4	1	0	1	0	0
(20230506T07:19:44)

==== State: Opened by: cmadmin on 06 May 2023 15:07:08 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165610|[UMS9230][Waterworld][FS302][13404][智能手机][遵义六部]:信号强度与信号格不匹配|CellSignalStrengthGsm.java设置如下：
    private static final int GSM_RSSI_MAX = -51;
    private static final int GSM_RSSI_GREAT = -88;
    private static final int GSM_RSSI_GOOD = -94;
    private static final int GSM_RSSI_MODERATE = -102;
    private static final int GSM_RSSI_POOR = -108;
    private static final int GSM_RSSI_MIN = -113;
步骤：进入EngineerMode->TELEPHONY->NetInfo->SIM0->nw cap ->服务小区 ->信号强度
现象：信号强度为-88dBm时信号格显示3格，-94dBm显示2格，-102dBm显示1格
期望：信号强度为-88dBm时信号格显示4格，-94dBm显示3格，-102dBm显示2格
分析：在，设置->关于手机->SIM卡状态->信号强度，里面查看到信号强度都为单数显示，与信号格能正确匹配。
   请问两个地方的逻辑和调用的接口是否不一样，如果要改为设置下面获取的信号强度，请问该如何修改？
|
==== State: NeedInfo by: cmadmin on 10 May 2023 14:47:31 ====

  == yameng.li@unisoc.com On 2023-05-10T06:45:56Z (json) ==
Dear Customer:
如沟通，工模这边是分析AT指令传回的值进行显示信号强度的，没有做其他处理。modem同事那边反馈该AT指令返回的信号强度数值正常。我司平台代码设计如此，没有看到有与telen那边同步。如果贵司想修改，可以尝试修改一下轮询时间，看是否好一些。目前是200ms执行一次，贵司可试着改小一些进行尝试，但不确定是否会引起其他问题，建议谨慎修改。
修改代码如下：
diff --git a/modules/telephony/src/main/java/com/unisoc/engineermode/modules/telephony/netinfo/core/GsmShowActivity.java b/modules/telephony/src/main/java/com/unisoc/engineermode/modules/telephony/netinfo/core/GsmShowActivity.java
index 99753201..9b8bb51c 100755
--- a/modules/telephony/src/main/java/com/unisoc/engineermode/modules/telephony/netinfo/core/GsmShowActivity.java
+++ b/modules/telephony/src/main/java/com/unisoc/engineermode/modules/telephony/netinfo/core/GsmShowActivity.java
@@ -365,7 +365,7 @@ public class GsmShowActivity extends Activity {
                     break;
                 }
             }
-        }, 0, 200);
+        }, 0, 100);
     }

     public void registerReceiver() {
(2023-05-10T05:36:20Z)

==== State: Opened by: waterworld on 09 May 2023 14:32:27 ====

Dear Sprd:
        ylog_0509.zip已上传附件，里面包含视频，请分析，谢谢！

==== State: Opened by: waterworld on 08 May 2023 10:38:42 ====

Dear Sprd：
       我们这边T606平台的样机都有这种现象，请查看一下贵司的机器是否也是如此，信号格能否与信号强度匹配，谢谢！

==== State: NeedInfo by: cmadmin on 06 May 2023 18:42:08 ====

  == Lin.Tang1@unisoc.com On 20230506T10:41:08 (xml) ==
您好：

以下先列举CellSignalStrengthGsm内对应信号格数参考：

同时附件为空，如需继续分析，请上传 【现象视频及ylog】 到附件，谢谢！

/frameworks/base/telephony/java/android/telephony/CellSignalStrengthGsm.java
106      public void updateLevel(PersistableBundle cc, ServiceState ss) {
107          int[] rssiThresholds;
108          if (cc == null) {
109              rssiThresholds = sRssiThresholds;
110          } else {
111              rssiThresholds = cc.getIntArray(CarrierConfigManager.KEY_GSM_RSSI_THRESHOLDS_INT_ARRAY);


/frameworks/base/telephony/java/android/telephony/CarrierConfigManager.java
9146          sDefaults.putIntArray(KEY_GSM_RSSI_THRESHOLDS_INT_ARRAY,
9147                  new int[] {
9148                          -107, /* SIGNAL_STRENGTH_POOR */
9149                          -103, /* SIGNAL_STRENGTH_MODERATE */
9150                          -97, /* SIGNAL_STRENGTH_GOOD */
9151                          -89,  /* SIGNAL_STRENGTH_GREAT */
9152                  });
(20230506T07:13:37)

==== State: Opened by: cmadmin on 06 May 2023 14:33:54 ====

  == Dawei.Wang@unisoc.com On 20230506T06:32:37 (xml) ==
请AP侧先帮忙看一下该问题
|
# SPCSS01165555|[UMS312][Waterworld][YK683-UMS312][12737][手机]相机-调节焦距，放大四倍点击拍照-出现定屏-提示无法连接到相机
步骤：

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 13:11:36 ====

  == Tao.Jiang1@unisoc.com On 20230510T05:10:48 (xml) ==
Dear cus:

  获取到的size是要上报APP的，APP根据上报的尺寸下发相关配流尺寸，DCAM isp根据下发的配流尺寸做处理。请勿在此函数做客制化改动，影响相关参数下发，如贵司需要插值功能，则zoom功能就会出现该问题。具体原因电话已沟通解释。
(20230510T02:58:36)

==== State: Opened by: waterworld on 10 May 2023 10:53:43 ====

Dear sprd：
插值放大和客户之前的需求有关，回退设置影响较大。如果仅为isp相关数据读取异常引起的问题，请问能否提供isp相关配置接口，我们将真实数据保存提供isp相关函数，是否能有效解决该问题
Thanks

==== State: NeedInfo by: cmadmin on 09 May 2023 19:08:46 ====

  == Tao.Jiang1@unisoc.com On 2023-05-09T11:07:37Z (json) ==
Dear cus:

  是的 更改了获取的sensor size 导致配流下发尺寸也是不正确的，后面isp处理就按照获取的处理的。如需解决此问题 请回退
(2023-05-09T09:44:09Z)

==== State: Opened by: waterworld on 09 May 2023 17:41:02 ====

Dear sprd :
您好！ libcamera\hal3_2v6\SprdCamera3Setting.cpp中的修改
是为了 “造假数据通路”，做的修改，请问确定这个修改是导致此问题的原因吗？

==== State: NeedInfo by: cmadmin on 09 May 2023 11:23:04 ====

  == Tao.Jiang1@unisoc.com On 2023-05-09T03:19:16Z (json) ==
Dear cus:

   请确认贵司添加的为什么添加如下这部分代码,因为贵司添加如下部分代码导致

libcamera\hal3_2v6\SprdCamera3Setting.cpp


int SprdCamera3Setting::setLargestSensorSize(int32_t cameraId, cmr_u16 width,
                                             cmr_u16 height) {
// light start
------ #if defined(WW_DATA_FRAUD)
    getLargestFraudSize(cameraId, &width, &height);
------ #endif
// light end

int SprdCamera3Setting::getLargestSensorSize(int32_t cameraId, cmr_u16 *width,
                                             cmr_u16 *height) {
    *width = sensor_max_width[cameraId];
    *height = sensor_max_height[cameraId];

.....

// light start
------ #if defined(WW_DATA_FRAUD)
    getLargestFraudSize(cameraId, width, height);
------ #endif
// light end




int SprdCamera3Setting::getLargestPictureSize(int32_t cameraId, cmr_u16 *width,
                                              cmr_u16 *height) {
    *width = largest_picture_size[cameraId].width;
    *height = largest_picture_size[cameraId].height;
// light start
------ #if defined(WW_DATA_FRAUD)
    getLargestFraudSize(cameraId, width, height);
------ #endif
// light end
    HAL_LOGD("camId=%d, max_width=%d, max_height=%d", cameraId, *width,
             *height);
    return 0;
}



int SprdCamera3Setting::initStaticParametersforScalerInfo(int32_t cameraId) {

    SprdCamera3DefaultInfo *default_info = &camera3_default_info;
    cmr_u16 largest_sensor_w = 0;
    cmr_u16 largest_sensor_h = 0;

------ #ifdef CONFIG_CAMERA_AUTO_DETECT_SENSOR
    largest_sensor_w = sensor_max_width[cameraId];
    largest_sensor_h = sensor_max_height[cameraId];
------ #else
    largest_sensor_w = default_sensor_max_sizes[cameraId].width;
    largest_sensor_h = default_sensor_max_sizes[cameraId].height;
------ #endif
// light start
------ #if defined(WW_DATA_FRAUD)
    getLargestFraudSize(cameraId, &largest_sensor_w, &largest_sensor_h);
------ #endif




// light start
------ #if defined(WW_DATA_FRAUD)
int SprdCamera3Setting::readEnvPartition(const char *name) {
    int fd;
    int n;
    int result = 0;
    struct env_ioctl en_ctl;
    unsigned char *field = NULL;
    unsigned char *word = NULL;
    int val=0; //kai add new line 

    fd= open("/proc/lk_env",O_RDONLY);
    if (name == NULL) {
        goto end;
    }

    if(fd<= 0){
        HAL_LOGE("chenbill------>ERROR open fail %d\n",fd);
        goto end;
    }

    field = (unsigned char*)malloc(BUF_MAX_LEN);
    word = (unsigned char*)malloc(BUF_MAX_LEN);
    memset(field,0x00, BUF_MAX_LEN);
    memset(word,0x00, BUF_MAX_LEN);
    memcpy(field, name, strlen(name)+1);	
    memcpy(word,"0",strlen("0")+1);
    // arr_WhichLogo[0] = '0' + whichLogo;
    // memcpy(value,arr_WhichLogo,strlen((char const*)arr_WhichLogo)+1);

    en_ctl.name = field;
    en_ctl.value = word;
    en_ctl.name_len = strlen((char const*)field)+1;
    en_ctl.value_len = strlen((char const*)word)+1;
    memset(word,0x00,BUF_MAX_LEN);
    en_ctl.value_len = BUF_MAX_LEN; 

    n=ioctl(fd,ENV_READ,&en_ctl);
    if(n<0){
        HAL_LOGE("chenbill------>ERROR read fail %d\n",n);
        goto end;
    }
	
    if ((word[0] - '0') >= 0) {
        result = word[0] - '0';
    }
    //kai add start
    for (int i = 0; i < 20; i++) {
        int digit=word[i] - '0';
        if (digit>= 0) {
            val=val*10+digit;
        } else {
            break;
        }
    }
    result = val;
    //kai add end
end:
    free(field);
    free(word);
    close(fd);

    return result;	
}

int SprdCamera3Setting::getLargestFraudSize(int32_t cameraId, cmr_u16 *width, cmr_u16 *height) {
    int size = 0;
    char value[PROPERTY_VALUE_MAX];
    switch(cameraId) {
        case 0:
            property_get(PROP_BACK_CAM_SIZE, value, "0");
            size = atoi(value);
            //size = readEnvPartition("BACK_CAM_SIZE");
            break;
        case 1:
            property_get(PROP_FRONT_CAM_SIZE, value, "0");
            size = atoi(value);
            //size = readEnvPartition("FRONT_CAM_SIZE");
            break;
    }
    switch (size) {
        case 2:
            *width = 1920;
            *height = 1080;
            break;
        case 5:
            *width = 2592;
            *height = 1944;
            break;
        case 8:
            *width = 3264;
            *height = 2448;
            break;
        case 13:
            *width = 4160;
            *height = 3120;
            break;
        case 16:
            *width = 4608;
            *height = 3456;
            break;
        case 21:
            *width = 5312;
            *height = 3984;
            break;
        case 48:
            *width = 8000;
            *height = 6000;
            break;

    }
    HAL_LOGI("camId=%d, max_width=%d, max_height=%d, size=%d", cameraId, *width, *height, size);
    return 0;
}
------ #endif
// light end




libcamera\hal3_2v6\SprdCamera3Setting.h

// light start
------ #if defined(WW_DATA_FRAUD)
    static int readEnvPartition(const char *name);
    static int getLargestFraudSize(int32_t cameraId, cmr_u16 *width, cmr_u16 *height);
------ #endif
// light end



Camera.mk

------ # light start
ifeq ($(strip $(WW_DATA_FRAUD)), yes)
LOCAL_CFLAGS += -DWW_DATA_FRAUD
endif
------ # light end
(2023-05-09T03:04:47Z)

==== State: Opened by: waterworld on 09 May 2023 11:02:08 ====

Dear sprd ；
您好！ 怎么检查呢？
将TARGET_BOARD_CAMERA_AUTO_DETECT_SENSOR设置为false然后抓log?

==== State: NeedInfo by: cmadmin on 09 May 2023 10:55:06 ====

  == Tao.Jiang1@unisoc.com On 20230509T02:53:48 (xml) ==
(In reply to 姜涛 (Tao Jiang/62898) 消费电子业务管理部/消费电子业务管理部-产品工程部/Camera图像部 from comment #16)
Dear cus:

    贵司可以先自行检查下是否将插值相关配置打开。

BoardConfig.mk文件中如下部分
TARGET_BOARD_CAMERA_AUTO_DETECT_SENSOR := true // 设置为false时以下宏生效
------ #select camera 2M,3M,5M,8M,13M,16M,21M
CAMERA_SUPPORT_SIZE := 12M  // 确认这里是否有配置21M
FRONT_CAMERA_SUPPORT_SIZE := 8M  //确认这里是否有配置13M
BACK_EXT_CAMERA_SUPPORT_SIZE := 5M
(20230509T01:29:24)

==== State: Opened by: waterworld on 09 May 2023 09:26:19 ====

Dear sprd :
您好，请查看前后摄像素大小

==== State: Opened by: waterworld on 09 May 2023 09:25:34 ====

Dear sprd ：
E:\adb\adb\adb3>adb shell getprop persist.vendor.cam.back.size
21

E:\adb\adb\adb3>adb shell getprop persist.vendor.cam.front.size
13

E:\adb\adb\adb3>adb shell getprop persist.vendor.cam.auto.detect.sensor


E:\adb\adb\adb3>adb shell getprop persist.vendor.cam.auto.detect.sensor


E:\adb\adb\adb3>





==== State: NeedInfo by: cmadmin on 08 May 2023 19:31:21 ====

  == Tao.Jiang1@unisoc.com On 20230508T11:28:54 (xml) ==
Dear cus:

  如沟通，目前来看应该是配置插值导致的，且插值倍数过大导致的放大之后拍照卡死。贵司可以先自行检查下是否将插值相关配置打开。

BoardConfig.mk文件中如下部分
TARGET_BOARD_CAMERA_AUTO_DETECT_SENSOR := true // 设置为false时以下宏生效
------ #select camera 2M,3M,5M,8M,13M,16M,21M
CAMERA_SUPPORT_SIZE := 12M  // 确认这里是否有配置21M
FRONT_CAMERA_SUPPORT_SIZE := 8M  //确认这里是否有配置13M
BACK_EXT_CAMERA_SUPPORT_SIZE := 5M

另也可以输入命令确认下
adb shell getprop persist.vendor.cam.back.size
adb shell getprop persist.vendor.cam.front.size 
adb shell getprop persist.vendor.cam.auto.detect.sensor

==== State: NeedInfo by: cmadmin on 08 May 2023 19:31:19 ====

  == Tao.Jiang1@unisoc.com On 20230508T11:28:54 (xml) ==
Dear cus:

  如沟通，目前来看应该是配置插值导致的，且插值倍数过大导致的放大之后拍照卡死。贵司可以先自行检查下是否将插值相关配置打开。

BoardConfig.mk文件中如下部分
TARGET_BOARD_CAMERA_AUTO_DETECT_SENSOR := true // 设置为false时以下宏生效
------ #select camera 2M,3M,5M,8M,13M,16M,21M
CAMERA_SUPPORT_SIZE := 12M  // 确认这里是否有配置21M
FRONT_CAMERA_SUPPORT_SIZE := 8M  //确认这里是否有配置13M
BACK_EXT_CAMERA_SUPPORT_SIZE := 5M

另也可以输入命令确认下
adb shell getprop persist.vendor.cam.back.size
adb shell getprop persist.vendor.cam.front.size 
adb shell getprop persist.vendor.cam.auto.detect.sensor
(20230508T09:46:23)

==== State: Opened by: waterworld on 08 May 2023 17:44:41 ====

Dear sprd ；
您好，libcamera已经上传至附件（2023_05_08-2）,请您查收，thanks~

==== State: Opened by: waterworld on 08 May 2023 17:43:54 ====

Dear sprd ；
您好，libcamera文件已经上传，谢谢。

==== State: NeedInfo by: cmadmin on 08 May 2023 17:21:56 ====

  == Tao.Jiang1@unisoc.com On 2023-05-08T09:21:23Z (json) ==
Dear cus:

  如沟通，贵司后摄5M 前摄2M ,但是识别到的尺寸过大所以导致zoom后会拍照卡死。请提供下libcamera目录代码，我这面check下

//后摄 max_width=5312, max_height=3984
	Line 25330: M005FC2  05-08 11:53:56.099   309   693 D Cam3HWI : 271, openCamera: camera3->open E
	Line 25331: M005FC3  05-08 11:53:56.099   309   693 I Cam3HWI : 305, openCamera: :hal3: E camId=0
	Line 25359: M005FDF  05-08 11:53:56.107   309   693 I Cam3OEMIf: 5541, openCamera: :hal3: E camId=0
	Line 25363: M005FE3  05-08 11:53:56.107   309   693 D Cam3Setting: 1127, getLargestSensorSize: camId=0, max_width=5312, max_height=3984

//前摄max_width=4160, max_height=3120
	Line 31266: M0076A9  05-08 11:54:01.591   309  1947 D Cam3HWI : 271, openCamera: camera3->open E
	Line 31267: M0076AA  05-08 11:54:01.591   309  1947 I Cam3HWI : 305, openCamera: :hal3: E camId=1
	Line 31305: M0076D0  05-08 11:54:01.608   309  1947 I Cam3OEMIf: 5541, openCamera: :hal3: E camId=1
	Line 31309: M0076D4  05-08 11:54:01.608   309  1947 D Cam3Setting: 1127, getLargestSensorSize: camId=1, max_width=4160, max_height=3120
(2023-05-08T08:22:13Z)

==== State: Opened by: waterworld on 08 May 2023 16:21:58 ====

Dear sprd :
已上传，请查收，谢谢。

==== State: NeedInfo by: cmadmin on 08 May 2023 16:14:45 ====

  == Tao.Jiang1@unisoc.com On 2023-05-08T08:12:04Z (json) ==
BoardConfig.mk麻烦上传下

==== State: NeedInfo by: cmadmin on 08 May 2023 16:14:44 ====

  == Tao.Jiang1@unisoc.com On 2023-05-08T08:12:04Z (json) ==
BoardConfig.mk麻烦上传下
(2023-05-08T07:54:27Z)

==== State: Opened by: waterworld on 08 May 2023 15:52:07 ====

Dear sprd :
您好，我们项目使用的是310 ，device/sprd/所用的平台/  下没有module这个文件。
ww8srv@Server72:~/source/MOCORDROID9.0_Trunk_19A_W20.03.2/sprd/device/sprd/sharkl5$ ls
common              ums312_20c10        ums312_3h10_4pro  yk691_ums3122h10  yk801_ums3122h10
ums312_1h10         ums312_2h10         ums312_haps       yk692_ums3122h10
ums312_1h10_go_32b  ums312_2h10_go_32b  yk683_ums3122h10  yk693_ums3122h10

ww8srv@Server72:~/source/MOCORDROID9.0_Trunk_19A_W20.03.2/sprd/device/sprd/sharkl5/yk692_ums3122h10$ ls
AndroidBoard.mk     enhance           overlay       vendorsetup.sh                  yk692_ums3122h10_native.mk
Android.mk          features          overlay_cmcc  yk692_ums3122h10_base.mk        yk692_ums3122h10_oversea.mk
AndroidProducts.mk  fstab.enableswap  recovery      yk692_ums3122h10_cmcc.mk        yk692_ums3122h10.xml
awinic              gcore_tp_fw.bin   rootdir       yk692_ums3122h10_cmcc_nosec.mk
BoardConfig.mk      ICNL9911.bin      system.prop   yk692_ums3122h10_ctcc.mk
CleanSpec.mk        log_conf          temp_img      yk692_ums3122h10_ctcc_nosec.mk


==== State: NeedInfo by: cmadmin on 08 May 2023 15:29:02 ====

  == Tao.Jiang1@unisoc.com On 20230508T07:28:16 (xml) ==
device/sprd/所用的平台/module/camera/md.mk
(20230508T06:41:31)

==== State: Opened by: waterworld on 08 May 2023 14:41:19 ====

Dear sprd :
您好，md.mk的文件路径是？

==== State: NeedInfo by: cmadmin on 08 May 2023 14:37:58 ====

  == Tao.Jiang1@unisoc.com On 2023-05-08T06:36:34Z (json) ==
Dear cus:

  请上传下md.mk文件，我检查下
(2023-05-08T06:28:32Z)

==== State: Opened by: waterworld on 08 May 2023 14:24:05 ====

Dear sprd ：
您好，相应debug版本的ylog已经上传至附录（2023_05_08），请注意查收！
另外“此项目是否有做插值”，插值是指什么呢？
我们相机这一块改动很少，没动过自带的相机应用的功能。
谢谢。

==== State: NeedInfo by: cmadmin on 06 May 2023 19:05:32 ====

  == Tao.Jiang1@unisoc.com On 20230506T11:05:11 (xml) ==
另请问此项目是否有做插值

==== State: NeedInfo by: cmadmin on 06 May 2023 19:05:28 ====

  == Tao.Jiang1@unisoc.com On 20230506T11:03:16 (xml) ==
Dear cus:

  请提供debug版本Ylog，user版本信息太少
(20230506T09:50:09)

==== State: Opened by: waterworld on 06 May 2023 17:43:14 ====

Dear sprd :
您好！ 相关ylog、现象视频、驱动都已经上传至附件（2023_05_06），请您查收！
前后摄都有这个问题。
抓取log步骤为：打开log-重启-复现问题-关闭log-取出log。

还请帮忙分析此问题，谢谢！

==== State: NeedInfo by: cmadmin on 06 May 2023 16:32:13 ====

  == Tao.Jiang1@unisoc.com On 2023-05-06T08:30:04Z (json) ==
Dear cus:

  请提供下debug版本Ylog以及对应驱动
(2023-05-06T06:08:45Z)

==== State: Opened by: waterworld on 06 May 2023 14:05:09 ====

Dear sprd:
您好，相关log和现象视频已经上传，请注意查收，谢谢!

==== State: Opened by: cmadmin on 06 May 2023 13:51:05 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165541|[UMS9117-L][Waterworld][FF615][11545][手机]六部 FF615M31-C91 MM718项目音频调试，
步骤：

现象：客户反馈录音声音小，我这边Audio Record参数值已调到最大，但声音还是小，还请贵司帮忙安排音频工程师到时去贵司现场一起看下，谢谢！

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 10:42:52 ====

  == Yabin.Mu@unisoc.com On 20230510T02:41:26 (xml) ==
查一下硬件电路设计，再排查下是否MIC本体问题。音频参数已经没什么可调得了。
(20230509T06:03:46)

==== State: Opened by: waterworld on 09 May 2023 14:00:40 ====

有试过，相关的模块是生效果的，MIC拉出壳体外录制也是偏小的，

==== State: NeedInfo by: cmadmin on 08 May 2023 16:05:44 ====

  == Yabin.Mu@unisoc.com On 20230508T08:02:27 (xml) ==
把MIC拉出壳体外录制呢？
把增益一个个调大再调到最小，看看是否哪个增益根本没有生效？

==== State: NeedInfo by: cmadmin on 08 May 2023 16:05:43 ====

  == Yabin.Mu@unisoc.com On 20230508T08:02:27 (xml) ==
把MIC拉出壳体外录制呢？
把增益一个个调大再调到最小，看看是否哪个增益根本没有生效？
(20230508T07:47:33)

==== State: Opened by: waterworld on 08 May 2023 15:43:49 ====

穆工： 模拟增益 VBC gain 数字增益已经是加到最大了，VBC Gain:18.06，    Analog Gain:36 ，  EQ LCF ALC这些模块都是关掉的， 声音有提升一点，还是偏小  


==== State: NeedInfo by: cmadmin on 08 May 2023 13:46:56 ====

  == Yabin.Mu@unisoc.com On 20230508T05:45:44 (xml) ==
首先 试试模拟增益 VBC gain 数字增益有没有没生效的清空，EQ LCF ALC这些模块都给关掉增益调到最大再验证以下。
(20230507T02:33:24)

==== State: Opened by: waterworld on 07 May 2023 10:31:58 ====

录音文件在电脑上听也是偏小， 降噪模块有关掉，影响不大

==== State: NeedInfo by: cmadmin on 06 May 2023 14:12:43 ====

  == Yabin.Mu@unisoc.com On 2023-05-06T06:11:45Z (json) ==
录音文件在电脑上听声音大小如何？上行降噪模块关掉试试声音大小。
(2023-05-06T05:36:04Z)

==== State: Opened by: cmadmin on 06 May 2023 13:29:50 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165510|[UMS9230][Waterworld][FS302][13404][智能手机][遵义][六部]：客户希望添加开关，当设备横屏且全屏时退出需要滑动两次生效
步骤：当您的手机处于横向模式时，全屏使用某些应用程序（例如游戏应用程序）。你需要滑动两次手势才能生效。这样可以防止意外接触。

现象：

分析：客户希望在setting有个类似的开关，控制所有应用的滑动事件，当设备横屏且全屏时退出需要滑动两次生效，能否帮忙看是否有实现的可能性，以及解决思路|
==== State: NeedInfo by: cmadmin on 06 May 2023 16:44:45 ====

  == enger.li@unisoc.com On 2023-05-06T08:42:09Z (json) ==
此功能涉及Settings、systemui、wms，非单一模块可评估完成，若贵司有需求，请走rat需求评估，谢谢
(2023-05-06T05:27:43Z)

==== State: Opened by: cmadmin on 06 May 2023 11:35:24 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165507|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]【CDBUG_10012】Opera mini  UserAgent问题|需求：
Opera Mini Browser User Agent - Opera mini native v4.4.34891_oem_nokia

客户希望能厂商名字修改为JIO|
==== State: Opened by: cmadmin on 06 May 2023 11:29:22 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165495|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]重启开机变慢问题|Dear sprd:
  复制一些文件到手机，使机器存储占用到70%左右后，关机-再开机此时开机时间会由原来30秒左右变成1分30秒左右。 同样操作放到同平台7731对比机开机时间不会有变化，复现log稍候上传到附件，麻烦贵司帮忙看下log，感谢。|
==== State: Closed by: waterworld on 08 May 2023 15:27:59 ====

Dear sprd:
  问题可以关闭了，感谢。

==== State: NeedInfo by: cmadmin on 08 May 2023 15:26:07 ====

  == Yang.Zhao@unisoc.com On 2023-05-08T07:24:45Z (json) ==
Dear Customer，
   从贵司目前提供的log中看不出用的是哪个参数，如果是要问题两个参数的差别，可以用fsck.f2fs -h查看：
-a check/fix potential corruption,reported by f2fs
-f check/fix entire partition

从上面解释也能看出来，-a是检查修复可能的corruption，但-f是entire 分区，二者范围不同。其他回复可参考贵司提到SPCSS00589131中的信息。
(2023-05-08T06:49:53Z)

==== State: Opened by: waterworld on 08 May 2023 14:48:28 ====

Dear sprd:
  对比机串口抓不了，fsck 参数修改为-a后对用户使用会不会有影响呢，我们好跟客户说明下。谢谢

==== State: NeedInfo by: cmadmin on 08 May 2023 14:37:37 ====

  == Yang.Zhao@unisoc.com On 2023-05-08T06:37:20Z (json) ==
Dear Customer，
   提供的log中未看到有打印是fsck.f2fs -a还是-f，可提供下问题机和对比机的loglevel为7的串口log看是否可抓到那个过程的log。谢谢。
(2023-05-08T06:29:44Z)

==== State: Opened by: waterworld on 06 May 2023 16:32:54 ====

Dear sprd:
  参考SPCSS00589131将fsck 参数由-f 修改为-a 后， 复制存储文件70%后开机时间跟对比机是一样的了。 麻烦贵司帮忙看下对比机的log是不是也修改过参数呢？ 我们好跟客户解释下，感谢~

==== State: Opened by: waterworld on 06 May 2023 15:52:27 ====

Dear sprd: 
  看以往记录有类似CQ SPCSS00589131也是填充数据后开机变慢的

==== State: Opened by: waterworld on 06 May 2023 15:19:08 ====

Dear sprd：
   包含开机过程的ylog--- 这个要怎么设置，我是直接打开ylog然后关机 -  开机 - 停止ylog 

==== State: NeedInfo by: cmadmin on 06 May 2023 15:13:33 ====

  == Long.Chen@unisoc.com On 2023-05-06T07:12:45Z (json) ==
在 测试机开机变慢-ylog 中没有找到包含开机过程的log，请提供包含开机过程的ylog，就是kenrel时间戳从0开始的ylog
(2023-05-06T03:35:44Z)

==== State: Opened by: waterworld on 06 May 2023 11:34:46 ====

Dear  sprd:
E003E4D 05-06 05:06:00.734   295   425 I sf_stop_bootanim: 21977
E003E4E 05-06 05:06:00.734   523   648 I wm_boot_animation_done: 21977
  对比机 boot耗时22秒不到

E0041B5 01-01 12:36:10.401   300   444 I sf_stop_bootanim: 82250
E0041B6 01-01 12:36:10.402   542   642 I wm_boot_animation_done: 82251
  我们的机器用了82秒

==== State: Opened by: waterworld on 06 May 2023 11:28:50 ====

Dear sprd:
  ylog已上传附件。

==== State: NeedInfo by: cmadmin on 06 May 2023 11:23:31 ====

  == Long.Chen@unisoc.com On 2023-05-06T03:22:13Z (json) ==
请提供包含问题过程的ylog
(2023-05-06T03:13:14Z)

==== State: Opened by: cmadmin on 06 May 2023 11:23:29 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165472|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]【CDBUG_8310】客户反馈打开1GB+大小的MP4视频，播放不了|复制步骤：
1. 打开设备电源。
2. 打开文件管理器-> SD卡->打开任何1GB+大小的MP4视频。
3. 检查视频播放是否正常。
实际结果:
大多数视频文件(MP4、3 gp等)不在设备中播放。

分析：平台最大支持的视频大小是多少？|
==== State: NeedInfo by: cmadmin on 09 May 2023 17:16:21 ====

  == Tao.Zhong@unisoc.com On 20230509T09:13:02 (xml) ==
Dear Customer:

    从Log来看，播放失败有几种情况，分别如下：

第一种：视频文件的分辨率太大，导致不支持。目前平台支持的最大分辨率为width x height = 1024 x 768
对应的log错误提示：
1158593-1  	12:53:11.113 	12:53:11.113 	[VP] CheckSupportedTypeFromMedia video_support = 0, audio_support = 1 , video_type = 3, audio_type = 1, height = 800, width = 1920                               	           	0:22:38.322  	
1275793-1  	12:53:37.993 	12:53:37.993 	[VP] CheckSupportedTypeFromMedia video_support = 0, audio_support = 1 , video_type = 3, audio_type = 1, height = 720, width = 1280                               	           	0:23:05.202  	

第二种：应该是视频源的问题，我们平台这边暂不支持这种视频源。
对应的log错误提示：
1178505-1  	12:53:25.066 	12:53:25.066 	stco, not support                                                                                                                                                	           	0:22:52.275  	
1178506-1  	12:53:25.066 	12:53:25.066 	[DV]/E _CheckAndUpdateMovieInf@player_main.c: neigther video nor audio is supported                                                                              	           	0:22:52.275  	
1178507-1  	12:53:25.066 	12:53:25.066 	[DV]/E DPLAYER_Open@player_main.c: failed to call _CheckAndUpdateMovieInf                                                                                        	           	0:22:52.275  	

第三种：怀疑是在主make中没有打开H264_DEC_SUPPORT这个宏，导致不支持H264解码，从而报错。从下面的log提示可以看出，这种视频源的分辨率并不大，且音频的编码方式平台也是支持解码的，但是video_support = 0，表示视频不支持，从video_type为3可以看出，视频的编码方式为H264，平台这边是支持解码的，所以怀疑是没打开H264_DEC_SUPPORT这个宏导致的，麻烦确认一下是否打开，如果确认打开了这个宏，那就应该是视频源的profile比较高，平台这边提示不支持，目前对于H264解码，平台这边暂时只支持profile为baseline的视频源，请知悉，谢谢！

对应的log错误提示：
1171470-1  	12:53:23.542 	12:53:23.542 	[DV]/D DPLAYER_GetMovieInfo@player_main.c: return successfully                                                                                                   	           	0:22:50.751  	
1171471-1  	12:53:23.542 	12:53:23.542 	[VP] CheckSupportedTypeFromMedia video_support = 0, audio_support = 1 , video_type = 3, audio_type = 1, height = 180, width = 320                                	           	0:22:50.751  	
1171472-1  	12:53:23.542 	12:53:23.542 	[VP]:Thumbnail_OpenDplayer CheckSupportedTypeFromMediaInfo fail !                                                                                                	           	0:22:50.751
(20230509T02:44:38)

==== State: Opened by: waterworld on 09 May 2023 10:38:02 ====

目前客户只提供了log，请先分析下原因，谢谢

==== State: NeedInfo by: cmadmin on 08 May 2023 17:04:12 ====

  == Tao.Zhong@unisoc.com On 2023-05-08T09:02:05Z (json) ==
Dear Customer:

    麻烦上传一下播放不了的对应的log，另外请上传一下播放不了的视频文件，即1GB+大小的MP4文件和3GP文件，谢谢！
(2023-05-08T07:50:35Z)

==== State: Opened by: cmadmin on 08 May 2023 15:50:23 ====

  == Bo.Zhou@unisoc.com On 2023-05-08T07:47:54Z (json) ==
tao看下

==== State: Submitted by: waterworld on 08 May 2023 11:24:21 ====

你好，请问原因是什么呢？
|
# SPCSS01165454|[SC9863A1][Waterworld][FS301-A13][13411][智能手机][A6][QZ]在关机时发现关机铃声出现卡顿现象|在关机时发现关机铃声出现卡顿现象，概率较高。
开机则无此现象，开关机铃声一样动画一样。|
==== State: NeedInfo by: cmadmin on 10 May 2023 16:14:50 ====

  == Liming.Fan@unisoc.com On 20230510T08:13:41 (xml) ==
Hi customer:

建议使用方案二，没什么风险。
方案一的话，影响比较大，比如单纯播放音乐、播放视频等等很多播放场景都会被波及，可能会出问题。
(20230510T02:46:56)

==== State: Opened by: waterworld on 10 May 2023 10:42:51 ====

Hi：
使用方案1在10次实验中无出现关机铃声卡顿现象。
使用方案2在10此实验中出现一次关机铃声卡顿现象。
请问可以直接使用方案1到正式版本中吗？
谢谢！

==== State: NeedInfo by: cmadmin on 09 May 2023 15:40:08 ====

  == Liming.Fan@unisoc.com On 20230509T07:37:59 (xml) ==
Hi customer：

请分别测试以下两个方案：
1、修改A13 audio_pcm.xml
<rootnode>
	<playback>
		<mm_normal channels="2" rate="48000" period_size="960" period_count="4" format="0" card="sprdphone-sc2730"  device="3" FE_device="FE_ST_FAST"/>
将上面的960改成1280，编译user版本，复测

2、添加下面修改，编译user版本，复测
framework/av/media/libaudioclient/AudioTrack.cpp
@@ -2004,12 +2006,13 @@ ssize_t AudioTrack::write(const void* buffer, size_t userSize, bool blocking)
         ALOGD("wirte set SP_FOREGROUND");
         set_sched_policy(0, SP_FOREGROUND);
     }
-
+    androidSetThreadPriority(0, ANDROID_PRIORITY_AUDIO);
     while (userSize >= mFrameSize) {
         audioBuffer.frameCount = userSize / mFrameSize;
(20230509T05:57:11)

==== State: Opened by: waterworld on 09 May 2023 13:53:50 ====

Hi：
已上传audio_pcm.xml到附件中
谢谢！

==== State: NeedInfo by: cmadmin on 09 May 2023 13:34:30 ====

  == Liming.Fan@unisoc.com On 2023-05-09T05:33:18Z (json) ==
Hi customer：

请提供测试机和A12对比机的audio_pcm.xml
A13：odm/etc/audio_pcm.xml
A12：vendor/etc/audio_pcm.xml
(2023-05-09T02:48:07Z)

==== State: Opened by: waterworld on 09 May 2023 10:41:20 ====

Hi：
目前我们使用A12的同ums312项目机器，将开机动画和铃声使用push到手机中
发现你开机动画正常，无关机铃声。ylog已上传。
谢谢！

==== State: Opened by: waterworld on 08 May 2023 11:57:34 ====

Hi：
此项目使用的是ums312。
附件log已上传。
谢谢！

==== State: NeedInfo by: cmadmin on 08 May 2023 10:48:42 ====

  == Liming.Fan@unisoc.com On 2023-05-08T02:46:28Z (json) ==
从log看关机铃声卡顿的时候cpu占用率已经达到100%，是性能跟不上导致的卡顿。

	Line 3512: M00C03D  05-06 06:18:54.920  3704  3704 D BootAnimation: ShutdownAnimation start MediaPlayer,play sound time: 64459ms
	Line 3540: M00C06B  05-06 06:18:54.986  3704  3704 D BootAnimation: ShutdownAnimationPreloadStopTiming start time: 64525ms
	Line 3638: M00C0E9  05-06 06:18:55.046   826  3752 I AudioTrack: set(): streamType 1, sampleRate 48000, format 0x1, channelMask 0x3, frameCount 24000, flags #0, notificationFrames 0, sessionId 105, transferType 0, uid 1003, pid 3704
	Line 3657: M00C0FF  05-06 06:18:55.059   826  3752 I AudioTrack: start(23): prior state:STATE_STOPPED
	Line 4083: M00C2E8  05-06 06:18:55.217  3704  3756 D BootAnimation: folder0 pictures count is 167
	Line 4084: M00C2E9  05-06 06:18:55.217  3704  3756 D BootAnimation: Playing files = /product/media/shutdownanimation.zip/part0, Requested repeat = 1, playUntilComplete = false
	Line 4970: M00CAE0  05-06 06:18:57.390   543  1089 E audio_hw_primary: normal_out_write ret:0xffffffe0 pcm:0x0xe7902650
	Line 4971: M00CAE1  05-06 06:18:57.390   543  1089 W audio_hw_primary: normal_out_write warning:-32, (wait error: hw 0x17868 app 0x15900 avail 0x78
	Line 4973: M00CAE2  05-06 06:18:57.390   543  1089 W audio_hw_primary: out_write failed 0xe6f00910 app_scene:0
	Line 5022: M00CB15  05-06 06:18:57.459   543  1089 I audio_hw_primary: out app_scene:0 current point:0
	Line 5027: M00CB1A  05-06 06:18:57.459   543  1089 E audio_hw_primary: out_write error
	Line 5037: M00CB37  05-06 06:18:57.533   826  3752 D AudioTrack: getTimestamp_l(23): device stall time corrected using current time 67072250028
	Line 5039: M00CB39  05-06 06:18:57.536   543  1089 I audio_hw_primary: out_write() out_write start up bytes:3840
	Line 5521: M00CE0D  05-06 06:18:58.339   543  1089 E audio_hw_primary: normal_out_write ret:0xffffffe0 pcm:0x0xe7902650
	Line 5522: M00CE0E  05-06 06:18:58.339   543  1089 W audio_hw_primary: normal_out_write warning:-32, (wait error: hw 0x6b58 app 0x4b00 avail 0x348
	Line 5524: M00CE0F  05-06 06:18:58.339   543  1089 W audio_hw_primary: out_write failed 0xe6f00910 app_scene:0
	Line 5611: M00CE6D  05-06 06:18:58.397   543  1089 E audio_hw_primary: out_write error
	Line 5617: M00CE77  05-06 06:18:58.423   543  1089 I audio_hw_primary: out_write() out_write start up bytes:3840

5-6 6:18:55.193<   64.733184>	100
5-6 6:18:56.196<   65.735576>	100
5-6 6:18:57.199<   66.738442>	100
5-6 6:18:58.202<   67.741661>	100
5-6 6:18:59.205<   68.745225>	100

请客户抓一下复现问题时的trace，进一步确认此问题。同时提供对应的ylog，谢谢。
另外从log看，不是9863A1的芯片，请更新正确的product，谢谢。

抓取trace方法：
设置->开发者选项->系统跟踪->类别->勾选?audio:Audio
设置->开发者选项->系统跟踪->开启?录制跟踪记录，开始录制trace
复现问题
设置->开发者选项->系统跟踪->关闭?录制跟踪记录，停止录制trace
提供data/local/traces/下最新录制的trace，如trace-ums512_1h10-SP1A.210812.016-2022-03-09-00-08-58.perfetto-trace
(2023-05-08T01:44:15Z)

==== State: Opened by: waterworld on 06 May 2023 17:23:40 ====

Hi：
我们重新抓取了log和视频已上传到附件。
谢谢！

==== State: NeedInfo by: cmadmin on 06 May 2023 16:29:29 ====

  == Baolin.Li@unisoc.com On 20230506T08:29:09 (xml) ==
Dear Customer:

麻烦帮忙再抓个卡顿的log， 同时用另一台手机拍摄视频现象， 听下卡顿现象。

多谢！~
(20230506T06:53:20)

==== State: Opened by: waterworld on 06 May 2023 14:52:45 ====

Hi：
已将动画资源和铃声资源上传到附件。
谢谢！

==== State: NeedInfo by: cmadmin on 06 May 2023 14:34:02 ====

  == Baolin.Li@unisoc.com On 20230506T06:32:07 (xml) ==
Dear Customer:

请把动画资源和铃声资源提供下看看， 多谢！~
(20230506T05:24:27)

==== State: Opened by: cmadmin on 06 May 2023 10:53:39 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165449|[UMS9117-L][Waterworld][FF616][11555][手机]开启摄像头的瞬间会花屏，帮忙支持一下，谢谢|hi；
    开启摄像头的瞬间会花屏，附件有上传VDDCAMA、VDDCAMIO测试截图，谢谢|
==== State: Opened by: waterworld on 10 May 2023 16:12:56 ====

 Hi；
    今天整了两台机器，明天一早我们直接送过去。

==== State: NeedInfo by: cmadmin on 10 May 2023 15:51:36 ====

  == Bin.Zheng1@unisoc.com On 2023-05-10T07:50:14Z (json) ==
HI
   请问今天是否已经寄来机器？

==== State: NeedInfo by: cmadmin on 09 May 2023 20:56:33 ====

  == Bin.Zheng1@unisoc.com On 2023-05-09T12:54:08Z (json) ==
(In reply to waterworld from comment #12)
Hi

  上电时序抓的看不清楚；目前花屏复现多少台机器？
  麻烦寄两台机器到我司分析，我这边对比下平台机。
  地址：深圳市南山区南山街道前海深港合作区桂湾社区金融街1号弘毅大厦19层
  郑斌 18362973261
(2023-05-09T10:33:42Z)

==== State: Opened by: waterworld on 09 May 2023 18:30:13 ====

一、上电时序如附件。
二、修改电源描述如下：
1. 原始电压状态不稳定（摄像头花屏）前摄和后摄的VDDCAMIO接的不是一路
后摄：VDDCAMA----接2.8V，   VDDCAMIO----接1.8V
前摄：VDDCAMA----接2.8V，   VDDCAMIO----接2.8V（接在了camera内部AVDD2.8V）

2. 现在电压状态稳定（摄像头花屏比上面的严重）
后摄：VDDCAMA----接2.8V，   VDDCAMIO----接1.8V
前摄：VDDCAMA----接2.8V，   VDDCAMIO----接1.8V

3. 现在电压状态稳定（摄像头花屏好很多，很少出现花屏）
后摄：VDDCAMA----接2.8V，   VDDCAMIO----外接2.8V
前摄：VDDCAMA----接2.8V，   VDDCAMIO----外接2.8V


==== State: NeedInfo by: cmadmin on 09 May 2023 16:36:57 ====

  == Bin.Zheng1@unisoc.com On 2023-05-09T08:36:26Z (json) ==
Hi
   能不能将电话里沟通 “修改电源”的情况再描述一下？
   如果改了之后现象是否还是打开一瞬间出问题？-----这里可以确认下sensor的上电时序如何？请帮忙上传测试波形。
(2023-05-09T08:21:41Z)

==== State: Opened by: waterworld on 09 May 2023 16:20:46 ====

hi：
    提供一下地址吧，我们安排送过去或者寄过去也行。

1. 附件不是 sensor 的规格书呀，我说的sensor指的是camera-----规格书已上传，见附件。
2. 另外就是 1v8这个电源 花屏的时候和 不花屏时候 波形是不一样的吗？--------波形一样的
3. 如上午电话沟通，能否外灌一下这个IO 1V8电源，电压值可以稍微大一点。---------------还在确认


==== State: NeedInfo by: cmadmin on 09 May 2023 15:42:15 ====

  == Bin.Zheng1@unisoc.com On 2023-05-09T07:41:18Z (json) ==
HI
   附件不是 sensor 的规格书呀，我说的sensor指的是camera；
   还有就是comment7 和 8 麻烦回复下。
(2023-05-09T06:50:17Z)

==== State: Opened by: waterworld on 09 May 2023 14:48:11 ====

hi：
  原理图位号U5201，sensor的规格书已上传附件，谢谢

==== State: NeedInfo by: cmadmin on 09 May 2023 14:39:34 ====

  == Bin.Zheng1@unisoc.com On 20230509T06:38:59 (xml) ==
还需要看一下贵司sensor的规格书~如有请帮忙上传，谢谢~

==== State: NeedInfo by: cmadmin on 09 May 2023 14:01:39 ====

  == Bin.Zheng1@unisoc.com On 20230509T05:59:59 (xml) ==
另外就是 1v8这个电源 花屏的时候和 不花屏时候 波形是不一样的吗？

==== State: NeedInfo by: cmadmin on 09 May 2023 13:45:51 ====

  == Bin.Zheng1@unisoc.com On 20230509T05:43:09 (xml) ==
HI
   如上午电话沟通，能否外灌一下这个IO 1V8电源，电压值可以稍微大一点。
(20230509T03:24:29)

==== State: Opened by: waterworld on 09 May 2023 11:19:58 ====

hi;
   这个抓什么log？   软件的CQ还没提，需要的话我们可以同步提一个

==== State: NeedInfo by: cmadmin on 08 May 2023 14:20:02 ====

  == Bin.Zheng1@unisoc.com On 2023-05-08T06:18:26Z (json) ==
hi
   麻烦再上传下layout ，能否寄两台机器到我司看一下？
   另外是否抓过log提过相关软件cq给我司分析?
(2023-05-06T10:46:59Z)

==== State: Opened by: waterworld on 06 May 2023 18:42:31 ====

hi；
    附件上传了摄像头花屏视频，麻烦帮忙看一下，谢谢

目前只有打开camera的时候花屏而其他场景不会花屏？ ------在预览时偶尔会有。

==== State: NeedInfo by: cmadmin on 06 May 2023 16:38:43 ====

  == Bin.Zheng1@unisoc.com On 2023-05-06T08:38:01Z (json) ==
HI
   能上传一下现象到附件吗？
   目前只有打开camera的时候花屏而其他场景不会花屏？ 这个时候有办法拍照吗看看照片是不是也是花的。
(2023-05-06T03:24:13Z)

==== State: Opened by: cmadmin on 06 May 2023 11:20:25 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 06 May 2023 11:16:34 ====

附件上传了原理图，我们想带机器去你们深圳办公室一起帮忙看一下，谢谢
|
# SPCSS01165357|[SC9832E][Waterworld][FS170-SC9832E][13244][手机][遵义][六部]样机屏幕亮度调节失效，且低于84%屏幕会直接黑掉|项目反馈创启有一台FS170-60Q 6016S售后机需要分析，问题点：开机后屏灯是亮的/显示正常， 进入界面后屏灯不亮（屏正常显示）。我这边拿到问题样机后看了下，问题机调节亮度并没有任何变化，且调节亮度百分比低于84%时屏幕会直接黑掉，使用自带的录屏工具录制的视频是正常的，没有黑屏的现象。另外将正常机器的屏拆解下来，放置到了问题机上面，还是异常的。将异常机的屏放置在正常显示的机器上面，依旧是正常的，因此可以排除是LCD硬件问题。

抓取了一份ylog，一份录屏的视频以及一份用其它机器录制的视频，请贵司帮忙分析看看，谢谢！|
==== State: NeedInfo by: cmadmin on 08 May 2023 21:01:31 ====

  == Bin.Sun1@unisoc.com On 20230508T13:01:00 (xml) ==
如果是单机必现问题建议排查pwm相关电路
(20230506T09:13:45)

==== State: Opened by: waterworld on 06 May 2023 13:53:45 ====

Dear Unisoc:

上传了新的ylog和对应的视频文件（文件名称带有13点35分的字样），请贵司帮忙继续分析下，谢谢！由于软件是user软件，无法开启状态栏秒针，因此拿了别的烧录debug软件的机器用于显示具体时间，问题机器和用于显示时间的机器均连接同一个WIFI更新了时间。

==== State: NeedInfo by: cmadmin on 06 May 2023 11:17:12 ====

  == enger.li@unisoc.com On 2023-05-06T03:16:00Z (json) ==
打开display log开关（重启才会生效），打开状态栏秒针，提供完整的ylog和对应视频（用其他手机拍一个）。



//打开display log
>>A12打开方法
*#*#83781#*#*
debug&log
systeminfo
power log
display log
重启


//打开状态栏秒针
adb root
adb remount
adb shell pm enable com.android.systemui/com.android.systemui.tuner.TunerActivity
adb shell am start -n com.android.systemui/com.android.systemui.tuner.TunerActivity 

会弹出System UI Tunner-Status bar-Time，选择“show hours，minutes，and
seconds”，状态栏时间按照秒针格式显示，
(2023-05-06T02:23:39Z)

==== State: Opened by: cmadmin on 06 May 2023 10:11:32 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165339|[SC9832E][Waterworld][FS273-SC9832E-A11][12639][手机][六部遵义][海信]后摄人像模式预览时无人脸框显示|关联CQ：SPCSS01158827

之前五一节前，贵司未定位到具体原因，CQ先做关闭处理，现在新提CQ进行跟进，还望贵司继续帮忙分析处理，谢谢。
|
==== State: NeedInfo by: cmadmin on 09 May 2023 09:37:34 ====

  == Bing.Zhou@unisoc.com On 20230509T01:35:23 (xml) ==
(In reply to 周兵 (Bing Zhou) 消费电子事业部/消费电子事业部-产品工程部/Camera应用部 from comment #5)
Dear cus:
  有何更新

==== State: NeedInfo by: cmadmin on 08 May 2023 10:45:21 ====

  == Bing.Zhou@unisoc.com On 20230508T02:43:41 (xml) ==
Dear :
  请确认一下。为何你的人脸画不出来。
   人脸已经有了，画的时候不对。

   M01CDB3  05-06 11:17:39.391   398  7420 D cmr_prev: 16263, prev_fd_cb:  frame_type.timestamp:325159264000   frame_type.face_num  :1,  frame_type.frame_num:0 

M01CDE7  05-06 11:17:39.454  7136  7136 D CAM_PhotoUI: faces.length====11


M01CDF4  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mBlocked== false; mFaces=== [Landroid.hardware.Camera$Face;@867244e;needShowFace=== true
M01CDF5  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mOrientation=== 0
M01CDF6  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mFaces.length=== 11
M01CDF7  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDF8  05-06 11:17:39.463  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDF9  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CDFA  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDFB  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDFC  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CDFD  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDFE  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDFF  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE00  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE01  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE02  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE03  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE04  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE05  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE06  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE07  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE08  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE09  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE0A  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE0B  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE0C  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE0D  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE0E  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE0F  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE10  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE11  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE12  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE13  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE14  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE15  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE16  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE17  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256

==== State: NeedInfo by: cmadmin on 08 May 2023 10:45:19 ====

  == Bing.Zhou@unisoc.com On 20230508T02:43:41 (xml) ==
Dear :
  请确认一下。为何你的人脸画不出来。
   人脸已经有了，画的时候不对。

   M01CDB3  05-06 11:17:39.391   398  7420 D cmr_prev: 16263, prev_fd_cb:  frame_type.timestamp:325159264000   frame_type.face_num  :1,  frame_type.frame_num:0 

M01CDE7  05-06 11:17:39.454  7136  7136 D CAM_PhotoUI: faces.length====11


M01CDF4  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mBlocked== false; mFaces=== [Landroid.hardware.Camera$Face;@867244e;needShowFace=== true
M01CDF5  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mOrientation=== 0
M01CDF6  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mFaces.length=== 11
M01CDF7  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDF8  05-06 11:17:39.463  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDF9  05-06 11:17:39.463  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CDFA  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDFB  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDFC  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CDFD  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CDFE  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CDFF  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE00  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE01  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE02  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE03  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE04  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE05  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE06  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE07  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE08  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE09  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE0A  05-06 11:17:39.464  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE0B  05-06 11:17:39.464  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE0C  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE0D  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE0E  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE0F  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE10  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE11  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE12  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE13  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE14  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256
M01CE15  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mAttributes=== null
M01CE16  05-06 11:17:39.465  7136  7136 D CAM_FaceView: isShowAttributeOnly=== false
M01CE17  05-06 11:17:39.465  7136  7136 D CAM_FaceView: mFaceColor=== -256

==== State: NeedInfo by: cmadmin on 06 May 2023 19:29:49 ====

  == Bing.Zhou@unisoc.com On 20230506T11:27:27 (xml) ==
Dear cus:
这个方法走了么。并且在调用这个方法的地方打log .

        protected void onMonitorControlStates(CaptureResult result) {
            if (mCameraProxy == null) {//sprd fix bug1103535
                return;
            }
            monitorControlStatesAIDetect(result, mCameraProxy, mActiveArray);
            monitorSurfaceViewPreviewUpdate(mCameraProxy);
            monitorControlStatesHdrDetect(result,mCameraProxy);
            monitorControlStatesAiScene(result, mCameraProxy);
            monitorControlStatesBlurCapture(result, mCameraProxy);
            monitorControlStateAutoChasingTraceRegion(result,mCameraProxy, mActiveArray);
            monitorControlStatesAuto3DnrSceneDetect(result, mCameraProxy);
            monitorLightPortraitStatus(result,mCameraProxy);
            if (isNeedMoreLog) {
(20230506T10:15:16)

==== State: Opened by: waterworld on 06 May 2023 18:13:38 ====

Dear sprd:
    在SprdAndroidCamera2AgentImpl.java文件中添加log信息，但并没有对应的log信息打印输出，测试视频和log、以及修改文件，已上传附件(后摄人像模式无人脸框_1.zip),还请继续帮忙分析。

==== State: NeedInfo by: cmadmin on 06 May 2023 16:53:02 ====

  == Bing.Zhou@unisoc.com On 20230506T08:51:44 (xml) ==
Dear cus:
pls confirm faceState  value

423      public void monitorControlStatesAIDetect(CaptureResult result,
424              AndroidCamera2ProxyImpl cameraProxy,
425              Rect activeArray) {
426          if (result.getFrameNumber() < 4) return; // Bug 1156421  work around for face detection report 0 at frame 0 , 1 ...
427          Integer faceState = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
(20230506T08:26:36)

==== State: Opened by: cmadmin on 06 May 2023 16:29:24 ====

  == Bing.Zhou@unisoc.com On 20230506T08:26:36 (xml) ==
Dear cus：
      首先用user debug 版本看关键字： face_num  
  	Line 35321: 05-07 04:15:00.223   586 14661 D CamPortrait: 3012, updateApiParams: face_num = 1
  确认 hal 有人脸输出。

==== State: Opened by: cmadmin on 06 May 2023 09:58:37 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165213|[UMS312][Waterworld][FS310-UMS312-A13][13838][CEBU-智能手机][A6][QZ]使用组合锁,当解锁卡槽时，需要多次解锁|
当前NV 配置了，网络锁和sp锁，使用IMEI密码解锁时，会依次解网络锁、sp锁的锁卡界面。客户描述以前组合都是可以一次就解锁卡槽，
不需要多次解锁。是可以一次解锁完成。
附件里带了NV 配置。日志。视频。请帮忙分析下，看下是否有合理的解决方式。
感谢！|
==== State: Closed by: waterworld on 06 May 2023 11:15:29 ====

感谢！已验证成功 关闭问题。

==== State: NeedInfo by: cmadmin on 06 May 2023 10:38:00 ====

  == Yanfen.Yao@unisoc.com On 20230506T02:37:12 (xml) ==
dear customer：

组合锁一次性解锁，请配置PS_NV_PARAMS -> NV_SIM_LOCK_CUTMOZE_DATA_ID域下的dummy1=0x1

谢谢
(20230506T02:15:07)

==== State: Opened by: cmadmin on 05 May 2023 19:14:04 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165198|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]Monkey测试过程中出现Dump
步骤：
刷机->给予所有APK权限->开始Monkey测试
现象：
测试6小时左右发生Dump；
测试10台样机，Dump4台；

dump log较大，稍后上传ftp，待上传完后会更新comment；
到时还请贵司帮忙看下，谢谢|
==== State: NeedInfo by: cmadmin on 09 May 2023 17:48:51 ====

  == Dongfang.Qu1@unisoc.com On 2023-05-09T09:46:27Z (json) ==
参考cq SPCSS01159943
(2023-05-09T09:35:35Z)

==== State: Opened by: waterworld on 06 May 2023 17:21:11 ====

您好，
概率蛮高的，在测试22小时左右再次出现4台样机Dump；
确认了下，代码中已包含前面comment提到的修改；
谢谢

==== State: NeedInfo by: cmadmin on 06 May 2023 16:23:04 ====

  == Gongkai.Liu@unisoc.com On 20230506T08:20:46 (xml) ==
请确认上述信息，如有其他问题请及时反馈。thanks！
(20230506T08:12:58)

==== State: Opened by: cmadmin on 06 May 2023 16:14:56 ====

  == Gongkai.Liu@unisoc.com On 2023-05-06T08:12:58Z (json) ==
请问复现的概率是多少，请确认下贵司基线代码中是否包含如下修改，如果没有包含，请合入后再压测
diff --git a/core/isp2.6/src/cam_core.c b/core/isp2.6/src/cam_core.c
index 2b7a181..78fc333 100755
--- a/core/isp2.6/src/cam_core.c
+++ b/core/isp2.6/src/cam_core.c
@@ -397,6 +397,7 @@
 	struct camera_frame *mul_share_pyr_dec_buf;
 	struct camera_frame *mul_share_pyr_rec_buf;
 	struct mutex pyr_mulshare_lock;
+	struct wakeup_source *ws;
 };
 
 struct cam_ioctl_cmd {
@@ -7849,7 +7850,9 @@
 	if (atomic_read(&grp->camera_opened) == 1) {
 		/* should check all needed interface here. */
 		spin_lock_irqsave(&grp->module_lock, flag);
-
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
+		__pm_stay_awake(grp->ws);
+#endif
 		if (grp->hw_info && grp->hw_info->soc_dcam->pdev)
 			ret = cam_buf_iommudev_reg(
 				&grp->hw_info->soc_dcam->pdev->dev,
@@ -8029,6 +8032,9 @@
 		atomic_set(&group->mul_buf_alloced, 0);
 		atomic_set(&group->mul_pyr_buf_alloced, 0);
 		group->is_mul_buf_share = 0;
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
+		__pm_relax(group->ws);
+#endif
 		spin_unlock_irqrestore(&group->module_lock, flag);
 	}
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
@@ -8117,6 +8123,8 @@
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
 	pm_runtime_set_active(&pdev->dev);
 	pm_runtime_enable(&pdev->dev);
+	group->ws = wakeup_source_create("Camdrv Wakeuplock");
+	wakeup_source_add(group->ws);
 #endif
 
 	/* for get ta status
@@ -8133,6 +8141,10 @@
 	return 0;
 
 probe_pw_fail:
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
+	wakeup_source_remove(group->ws);
+	wakeup_source_destroy(group->ws);
+#endif
 	misc_deregister(&image_dev);
 	kfree(group);
 
@@ -8152,6 +8164,10 @@
 	if (group) {
 		if (group->ca_conn)
 			cam_trusty_disconnect();
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
+		wakeup_source_remove(group->ws);
+		wakeup_source_destroy(group->ws);
+#endif
 		kfree(group);
 		image_dev.this_device->platform_data = NULL;
 	}
diff --git a/cpp/cpp_lite/src/cpp_core.c b/cpp/cpp_lite/src/cpp_core.c
index 252f42a..2a02e3d 100755
--- a/cpp/cpp_lite/src/cpp_core.c
+++ b/cpp/cpp_lite/src/cpp_core.c
@@ -61,6 +61,7 @@
 	struct miscdevice md;
 	struct cpp_pipe_dev *cppif;
 	struct cpp_hw_info *hw_info;
+        struct wakeup_source *ws;
 };
 
 static int cppcore_module_enable(struct cpp_device *dev)
@@ -121,6 +122,7 @@
 	sprd_cam_pw_off();
 #else
 	pm_runtime_put_sync(&dev->pdev->dev);
+	__pm_relax(dev->ws);
 #endif
 fail:
 	mutex_unlock(&dev->lock);
@@ -217,6 +219,7 @@
 		pr_err("%s fail to power on cpp\n", __func__);
 		goto fail;
 	}
+	__pm_stay_awake(dev->ws);
 #endif
 	hw = dev->hw_info;
 	if (!hw) {
@@ -373,6 +376,8 @@
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 4, 0))
 	pm_runtime_enable(&pdev->dev);
 	pm_runtime_set_active(&pdev->dev);
+	dev->ws = wakeup_source_create("Camera cpp Wakeup Source");
+	wakeup_source_add(dev->ws);
 #endif
 	platform_set_drvdata(pdev, (void *)dev);
 	CPP_TRACE("cpp probe OK\n");
@@ -389,7 +394,8 @@
 static int cppcore_remove(struct platform_device *pdev)
 {
 	struct cpp_device *dev = platform_get_drvdata(pdev);
-
+	wakeup_source_remove(dev->ws);
+	wakeup_source_destroy(dev->ws);
 	misc_deregister(&dev->md);
 	return 0;
 }
diff --git a/sensor/sprd_sensor_core.c b/sensor/sprd_sensor_core.c
index e63382d..9b690d2 100755
--- a/sensor/sprd_sensor_core.c
+++ b/sensor/sprd_sensor_core.c
@@ -689,11 +689,10 @@
 			goto exit;
 		}
 		sprd_cam_domain_eb();
-		__pm_stay_awake(p_mod->ws);
 #else
 		ret = pm_runtime_get_sync(&p_dev->i2c_info->dev);
-//		ret = sprd_cam_pw_on(NULL);
 #endif
+		__pm_stay_awake(p_mod->ws);
 /*		wake_lock(&p_mod->wakelock);*/
 
 	}
@@ -761,11 +760,10 @@
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(5, 4, 0))
 		sprd_cam_domain_disable();
 		sprd_cam_pw_off();
-		__pm_relax(p_mod->ws);
 #else
 		pm_runtime_put_sync(&p_dev->i2c_info->dev);
-//		ret = sprd_cam_pw_off(NULL);
 #endif
+		__pm_relax(p_mod->ws);
 /*		wake_unlock(&p_mod->wakelock);*/
 
 	}
@@ -872,7 +870,7 @@
 	sprd_sensor_unregister_driver();
 	if (p_data) {
 		mutex_destroy(&p_data->sensor_id_lock);
-/*		wake_lock_destroy(&p_data->wakelock);*/
+		wakeup_source_remove(p_data->ws);
 		wakeup_source_destroy(p_data->ws);
 		kfree(p_data);
 		p_data = NULL;

Thanks.

==== State: Opened by: waterworld on 06 May 2023 16:07:52 ====

您好，
请问还需要哪些信息？
谢谢

==== State: NeedInfo by: cmadmin on 06 May 2023 15:58:55 ====

Dear Customer:
  We need more information with this Issue, please renew and reopen it.(20230506T03:04:25)
Thank you.
(20230506T03:04:25)

==== State: Opened by: cmadmin on 06 May 2023 11:02:42 ====

  == Wuhong.Tian@unisoc.com On 20230506T03:02:33 (xml) ==
bug\2240975\#9_NKJK0010002A\2023_05_05_09_22_41_587_armlog\ap_sys_dump


camcore_thread_loop 访问f302bd28 -> printk -> string -> do_DataAbort, 然后die -> console_unlock 卡在spin lock

crash_arm> rd f302bd28
rd: invalid kernel virtual address: f302bd28  type: "32-bit KVADDR"
crash_arm> vtop f302bd28
VIRTUAL   PHYSICAL
f302bd28  (not mapped)

[50019.222885] cam_buf: 808 97 cam_buf_mdbg_check : mdbg info: 0, 0, 0, 0, 0, 0, 0, 0 0 0, total_size: 0 Bytes
[50019.222952] CAM_CORE: 808 8045 camcore_release : sprd_img: cam 0 release end.
[safe_print_seq] 8<--- cut here ---
[safe_print_seq] Unable to handle kernel paging request at virtual address f302bd28
[safe_print_seq] pgd = cbf43663
[safe_print_seq] [f302bd28] *pgd=ada70811
[safe_print_seq] , *pte=00000000
[safe_print_seq] , *ppte=00000000
[safe_print_seq] 
[safe_print_seq] Internal error: Oops: 7 [#1] PREEMPT SMP ARM
[safe_print_seq] sprd-sysdump: dump_die_cb save pregs_die_g ok .
                 Modules linked in:
[safe_print_seq]  otg
[safe_print_seq]  focaltech_8006(O)
[safe_print_seq]  chsc_5xxxx(O)


[safe_print_seq]  sprd_wdt_fiq
[safe_print_seq] 
                 CPU: 0 PID: 24375 Comm: cam0_zoom Tainted: G        WC O      5.4.210 #1
                 Hardware name: Generic DT based system
                 PC is at string_nocheck+0x24/0x74
                 LR is at string+0x68/0x70
                 pc : [<c0866218>]    lr : [<c086510c>]    psr: 000c0193
                 sp : d7fa1e48  ip : c12b2bc5  fp : d7fa1f64
                 r10: 000003d0  r9 : 00000002  r8 : c12b27f5
                 r7 : bf53281b  r6 : bf532819  r5 : 00000000  r4 : ffff0a00
                 r3 : ffffff04  r2 : f302bd28  r1 : ffffffff  r0 : c12b2822
                 Flags: nzcv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment none
                 Control: 10c5383d  Table: abd1006a  DAC: 00000051
                 
                 

PID: 24375  TASK: c3796600  CPU: 0   COMMAND: "cam0_zoom"
 #0 [<c0bcd254>] (_raw_spin_lock) from [<c01b9c54>]
 #1 [<c01b9c54>] (console_unlock) from [<c099ca10>]
 #2 [<c099ca10>] (bust_spinlocks) from [<c086c330>]
 #3 [<c086c330>] (die) from [<c01576ec>]
 #4 [<c01576ec>] (__do_kernel_fault) from [<c0bcdd04>]
 #5 [<c0bcdd04>] (do_page_fault) from [<c0103698>]
 #6 [<c0103698>] (do_DataAbort) from [<c0101b38>]
 #7 [<c0101b38>] (__dabt_svc) from [<c086510c>]
 #8 [<c0866218>] (string_nocheck) from [<c086510c>]
 #9 [<c086510c>] (string) from [<c01492c0>]
------ #10 [<c01492c0>] ($a.5) from [<c08658ac>]
------ #11 [<c08658ac>] (vscnprintf) from [<c01b9a08>]
------ #12 [<c01b9a08>] (vprintk_store) from [<c0109934>]
------ #13 [<c0109934>] (vprintk_emit) from [<c01ba23c>]
------ #14 [<c01ba23c>] (vprintk_default) from [<c088d134>]
------ #15 [<c088d134>] (printk) from [<bf4c5bf4>]
------ #16 [<bf4c5bf4>] (camcore_thread_loop [sprd_camera]) from [<c0186688>]
------ #17 [<c0186688>] (kthread) from [<c01010e8>]

[H 50037.333429] c0 ---wdh enter!---
[H 50037.336646] c0 cpu_feed_mask:0-7 cpu_feed_bitmap:4-5
[H 50037.364777] c0 pc  : c0bcd254, lr : c01b9c54, cpsr : 200c0193, sp_usr : a63a6b98, sp_svc : d7fa1d10
[H 50037.409685] c0 pc :(_raw_spin_lock)
[H 50037.477530] c0 sp  : d7fa1d10, ip : c111e0f0, fp : c11af430
[H 50037.512232] c0 r10 : c1111b8c, r9 : 200c0193, r8 : 00000000
[H 50037.557924] c0 r7  : 00000001, r6 : c12b27d8, r5 : c1106410
[H 50037.603616] c0 r4  : 00000010, r3 : 00000000, r2 : 0000685d
[H 50037.649309] c0 r1  : 0000685f, r0 : c11b27bc
[H 50037.693704] c0 PC: 0xc0bcd254:


[H 50037.834994] c0 wdh_step = 2
[H 50037.851425] c0 callstack:
[H 50037.870291] c0 [<c0bcd254>] (_raw_spin_lock+0x4c/0x5c)
[H 50037.891581] c0 [<c01b9c54>] (console_unlock)
[H 50037.914253] c0 [<c099ca10>] (bust_spinlocks)
[H 50037.930004] c0 [<c086c330>] (die)
[H 50037.941081] c0 [<c01576ec>] (__do_kernel_fault)
[H 50037.957610] c0 [<c0bcdd04>] (do_page_fault)
[H 50037.972494] c0 [<c0103698>] (do_DataAbort)
[H 50037.995340] c0 [<c0101b38>] (__dabt_svc)
[H 50038.013686] c0 [<c0866218>] (string_nocheck)
[H 50038.037658] c0 [<c086510c>] (string)
[H 50038.063531] c0 [<c01492c0>] (vsnprintf)
[H 50038.094947] c0 [<c08658ac>] (vscnprintf)
[H 50038.120215] c0 [<c01b9a08>] (vprintk_store)
[H 50038.145571] c0 [<c0109934>] (vprintk_emit)
[H 50038.167551] c0 [<c01ba23c>] (vprintk_default)
[H 50038.187887] c0 [<c088d134>] (printk)
[H 50038.209435] c0 i=15, sprd_virt_addr_valid fail
[H 50038.239291] c0 wdh_step = 3

==== State: Opened by: cmadmin on 06 May 2023 11:02:41 ====

  == Wuhong.Tian@unisoc.com On 20230506T03:02:17 (xml) ==
bug\2240975\#8_NKJK00100039\2023_05_05_09_20_49_163_armlog\ap_sys_dump

crash解析有问题，从extend_sprd_log_buf1看，也是camcore_thread_loop -> printk -> string -> do_DataAbort, 然后die -> console_unlock 卡在spin lock

[H 27192.923487] c1 ---wdh enter!---
[H 27192.936376] c1 cpu_feed_mask:0-7 cpu_feed_bitmap:0,3,5-7
[H 27192.968051] c1 pc  : c0bcd254, lr : c01b9c54, cpsr : 200b0193, sp_usr : 65c8e038, sp_svc : dea37d10
[H 27193.021096] c1 pc :(_raw_spin_lock)
[H 27193.063327] c1 sp  : dea37d10, ip : c111e0f0, fp : c11af430
[H 27193.097078] c1 r10 : c1111b8c, r9 : 200b0193, r8 : 00000000
[H 27193.137057] c1 r7  : 00000001, r6 : c12b27d8, r5 : c1106410
[H 27193.177039] c1 r4  : 00000010, r3 : 00000000, r2 : 000067da
[H 27193.217019] c1 r1  : 000067dc, r0 : c11b27bc
[H 27193.251809] c1 PC: 0xc0bcd254:

[H 27193.421866] c1 callstack:
[H 27193.447828] c1 [<c0bcd254>] (_raw_spin_lock+0x4c/0x5c)
[H 27193.477339] c1 [<c01b9c54>] (console_unlock)
[H 27193.501223] c1 [<c099ca10>] (bust_spinlocks)
[H 27193.524070] c1 [<c086c330>] (die)
[H 27193.545532] c1 [<c01576ec>] (__do_kernel_fault)
[H 27193.570627] c1 [<c0bcdd04>] (do_page_fault)
[H 27193.595205] c1 [<c0103698>] (do_DataAbort)
[H 27193.618050] c1 [<c0101b38>] (__dabt_svc)
[H 27193.642194] c1 [<c0866218>] (string_nocheck)
[H 27193.668329] c1 [<c086510c>] (string)
[H 27193.694376] c1 [<c01492c0>] (vsnprintf)
[H 27193.719041] c1 [<c08658ac>] (vscnprintf)
[H 27193.743963] c1 [<c01b9a08>] (vprintk_store)
[H 27193.764214] c1 [<c0109934>] (vprintk_emit)
[H 27193.782301] c1 [<c01ba23c>] (vprintk_default)
[H 27193.797098] c1 [<c088d134>] (printk)
[H 27193.813368] c1 i=15, sprd_virt_addr_valid fail
[H 27193.825395] c1 wdh_step = 3

==== State: Opened by: cmadmin on 06 May 2023 11:02:39 ====

  == Wuhong.Tian@unisoc.com On 20230506T03:02:02 (xml) ==
bug\2240975\#1_NKJD00800036\2023_05_05_09_29_34_753_armlog\ap_sys_dump


camcore_thread_loop 访问f2b45dc8 -> printk -> string -> do_DataAbort, 然后die -> console_unlock 卡在spin lock


crash_arm> rd f2b45dc8
rd: invalid kernel virtual address: f2b45dc8  type: "32-bit KVADDR"
crash_arm> vtop f2b45dc8
VIRTUAL   PHYSICAL
f2b45dc8  (not mapped)

[27985.531397] FLASH_CORE: 22577 41 sprd_cam_flash_ctrl : 0 set flash
[27985.531406] FLASH_DRV:: 22577 253 sprd_flash_ctrl : ctrl: led_index 3 status 0x0
[27985.531408] FLASH_CORE: 22577 41 sprd_cam_flash_ctrl : 0 set flash
[27985.532383] CAM_CORE: 473 8020 camcore_release : release ecaff840
[27985.532390] cam_buf: 473 97 cam_buf_mdbg_check : mdbg info: 0, 0, 0, 0, 0, 0, 0, 0 0 0, total_size: 0 Bytes
[27985.532407] CAM_CORE: 473 8045 camcore_release : sprd_img: cam 0 release end.
[safe_print_seq] 8<--- cut here ---
[safe_print_seq] Unable to handle kernel paging request at virtual address f2b45dc8
[safe_print_seq] pgd = 529d606a
[safe_print_seq] [f2b45dc8] *pgd=ad1ad811
[safe_print_seq] , *pte=00000000
[safe_print_seq] , *ppte=00000000
[safe_print_seq] 


[safe_print_seq]  sprd_wdt_fiq
[safe_print_seq] 
                 CPU: 4 PID: 22581 Comm: cam0_offline_pr Tainted: G        WC O      5.4.210 #1
                 Hardware name: Generic DT based system
                 PC is at string_nocheck+0x24/0x74
                 LR is at string+0x68/0x70
                 pc : [<c0866218>]    lr : [<c086510c>]    psr: 00030093
                 sp : ddd07e48  ip : c12b2bc5  fp : ddd07f64
                 r10: 000003d0  r9 : 00000002  r8 : c12b27f5
                 r7 : bf53381b  r6 : bf533819  r5 : 00000000  r4 : ffff0a00
                 r3 : ffffff04  r2 : f2b45dc8  r1 : ffffffff  r0 : c12b2822
                 Flags: nzcv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment none
                 Control: 10c5383d  Table: 9765806a  DAC: 00000051
                 
                 PC: 0xc0866198:
                 
                 

PID: 22581  TASK: e0072200  CPU: 4   COMMAND: "cam0_offline_pr"
 #0 [<c0bcd254>] (_raw_spin_lock) from [<c01b9c54>]
 #1 [<c01b9c54>] (console_unlock) from [<c099ca10>]
 #2 [<c099ca10>] (bust_spinlocks) from [<c086c330>]
 #3 [<c086c330>] (die) from [<c01576ec>]
 #4 [<c01576ec>] (__do_kernel_fault) from [<c0bcdd04>]
 #5 [<c0bcdd04>] (do_page_fault) from [<c0103698>]
 #6 [<c0103698>] (do_DataAbort) from [<c0101b38>]
 #7 [<c0101b38>] (__dabt_svc) from [<c086510c>]
 #8 [<c0866218>] (string_nocheck) from [<c086510c>]
 #9 [<c086510c>] (string) from [<c01492c0>]
------ #10 [<c01492c0>] ($a.5) from [<c08658ac>]
------ #11 [<c08658ac>] (vscnprintf) from [<c01b9a08>]
------ #12 [<c01b9a08>] (vprintk_store) from [<c0109934>]
------ #13 [<c0109934>] (vprintk_emit) from [<c01ba23c>]
------ #14 [<c01ba23c>] (vprintk_default) from [<c088d134>]
------ #15 [<c088d134>] (printk) from [<bf4c6bf4>]
------ #16 [<bf4c6bf4>] (camcore_thread_loop [sprd_camera]) from [<c0186688>]
------ #17 [<c0186688>] (kthread) from [<c01010e8>]

[H 28003.390900] c4 ---wdh enter!---
[H 28003.403782] c4 cpu_feed_mask:0-7 cpu_feed_bitmap:0,3,5,7
[H 28003.435456] c4 pc  : c0bcd254, lr : c01b9c54, cpsr : 20030193, sp_usr : bee93710, sp_svc : ddd07d10
[H 28003.488503] c4 pc :(_raw_spin_lock)
[H 28003.530560] c4 sp  : ddd07d10, ip : c111e0f0, fp : c11af430
[H 28003.564484] c4 r10 : c1111b8c, r9 : 20030193, r8 : 00000000
[H 28003.604464] c4 r7  : 00000001, r6 : c12b27d8, r5 : c1106410
[H 28003.644444] c4 r4  : 00000010, r3 : 00000000, r2 : 00004e75
[H 28003.684425] c4 r1  : 00004e77, r0 : c11b27bc
[H 28003.719215] c4 PC: 0xc0bcd254:

[H 28003.967523] c4 wdh_step = 2
[H 28003.978077] c4 callstack:
[H 28003.988807] c4 [<c0bcd254>] (_raw_spin_lock+0x4c/0x5c)
[H 28004.000750] c4 [<c01b9c54>] (console_unlock)
[H 28004.014164] c4 [<c099ca10>] (bust_spinlocks)
[H 28004.027319] c4 [<c086c330>] (die)
[H 28004.039520] c4 [<c01576ec>] (__do_kernel_fault)
[H 28004.048694] c4 [<c0bcdd04>] (do_page_fault)
[H 28004.056741] c4 [<c0103698>] (do_DataAbort)
[H 28004.065482] c4 [<c0101b38>] (__dabt_svc)
[H 28004.072492] c4 [<c0866218>] (string_nocheck)
[H 28004.084262] c4 [<c086510c>] (string)
[H 28004.101480] c4 [<c01492c0>] (vsnprintf)
[H 28004.118963] c4 [<c08658ac>] (vscnprintf)
[H 28004.137307] c4 [<c01b9a08>] (vprintk_store)
[H 28004.151761] c4 [<c0109934>] (vprintk_emit)
[H 28004.170712] c4 [<c01ba23c>] (vprintk_default)
[H 28004.191222] c4 [<c088d134>] (printk)
[H 28004.207491] c4 i=15, sprd_virt_addr_valid fail
[H 28004.218741] c4 wdh_step = 3

==== State: Opened by: waterworld on 06 May 2023 08:59:30 ====

您好，
log已上传完ftp，dump_report.txt原因都是
[exception_reboot_reason]: kernel_crash
[exception_panic_reason]: wdt fiq assert
谢谢

==== State: Opened by: cmadmin on 05 May 2023 19:47:08 ====

  == Wuhong.Tian@unisoc.com On 2023-05-05T11:45:27Z (json) ==
Dear customer:

4台dump_report.txt原因一样吗？  不一样的话，帮忙分开提bug

==== State: Opened by: cmadmin on 05 May 2023 19:37:48 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165189|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]kernel debug flags问题咨询|In Perf kernel, which is used in user builds, all the the kernel debug flags are disabled to enhance the kernel performace.
eg: CONFIG_DEBUG_FS etc.

您好，
海外要求在user上关掉一些能关掉的kernel debug flags以便提高kernel 的性能；
还请帮忙看下user版本上还有哪些CONFIG_DEBUG_xxx可以关掉，以及改哪里;
平台Android12 9863A1 Go，s9863a1h10_go_32b
非常感谢
|
==== State: Closed by: waterworld on 09 May 2023 17:42:53 ====

您好，
感谢贵司的解答，CQ关闭
谢谢

==== State: NeedInfo by: cmadmin on 05 May 2023 18:31:06 ====

  == Dongfang.Qu1@unisoc.com On 20230505T10:30:24 (xml) ==
debug 相关的CONFIG 在user版本上都是关闭的，谢谢！
(20230505T10:14:23)

==== State: Opened by: cmadmin on 05 May 2023 18:31:04 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01165174|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][6部遵义][HMD][TRALNA-86]你好，DTAG 有更新新的运营商需求，麻烦看看描述中4点是否支持和已配置，如果支持且需要配置，还请麻烦帮忙配置
步骤：
具体来自文档“Telekom_ISD_V2023.1-2”可见附件
DT General Radio Settings (common for all Telekom Countries

1.GEA2 Encryption setting value changed to “Deactivate”

2.2G DTM setting value changed to “Deactivate”

3.LTE Rel. 9 SON RACH report setting value changed to “Activate”

4.LTE Rel. 11 PDCP SN 15 bit extension setting value changed to “Activate”
现象：

分析：
|
==== State: NeedInfo by: cmadmin on 09 May 2023 15:04:27 ====

  == Tara.Wang@unisoc.com On 20230509T07:01:48 (xml) ==
客户您好：
  确认如下：

0.EVS codec from disabled to enabled
【unisoc】
297/02 - Telekom Montenegro //不支持
如要配置支持EVS，需要新增运营商NV文件ME_DTAG_P.nv，并在该文件中添加如下配置：
PS_NV_PARAMS\NV_PARAM_TYPE_PLMN_DELTA_NV\ims_plmn_nvinfo\volte_audio_codec\audio_codec_type=7
//该配置涉及VoLTE电话业务，如需要申请合入正式版本，修改配置后请在实网验证VoLTE电话业务情况

226/03 and 226/06 - Telekom Romania //已支持

运营商NV修改方法请参考如下iSupport文档：
运营商NV配置指南V1.7.pdf
https://unisupport.unisoc.com/file/index?fileid=29168


>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
1.GEA2 Encryption setting value changed to “Deactivate”
【Unisoc】
297/02：ME_DTAG_S.nv
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\ims_sim_nvinfo\volte_audio_codec\audio_codec_type=7
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\nas_sim_nvinfo\gea_flag\gea_2=0

226/03 and 226/06：RO_DTAG_S.nv
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\ims_sim_nvinfo\volte_audio_codec\audio_codec_type=7      //已经配置支持EVS，无需再配置
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\nas_sim_nvinfo\gea_flag\gea_2=0

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
2.2G DTM setting value changed to “Deactivate”
【Unisoc】
DTM我司平台都不支持，符合需求，无需配置

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
3.LTE Rel. 9 SON RACH report setting value changed to “Activate”
【Unisoc】
如下plmn下是不支持该功能：
DE_DTAG  26201,26206,26278
CZ_DTAG  23001
其他plmn下默认支持，无需配置

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
4.LTE Rel. 11 PDCP SN 15 bit extension setting value changed to “Activate”
【Unisoc】
默认支持，无需配置
(20230509T02:31:50)

==== State: Opened by: cmadmin on 09 May 2023 10:34:26 ====

  == Taotao.Lv@unisoc.com On 2023-05-09T02:31:50Z (json) ==
4.LTE Rel. 11 PDCP SN 15 bit extension setting value changed to “Activate”
---
支持

==== State: Opened by: waterworld on 09 May 2023 09:07:21 ====

你好，
需要支持的plmn已放置附件，请在帮忙看看

==== State: NeedInfo by: cmadmin on 08 May 2023 14:35:15 ====

  == Tara.Wang@unisoc.com On 20230508T06:33:45 (xml) ==
客户您好：
  请提供下哪些plmn下需要支持该功能，谢谢

LTE Rel. 9 SON RACH report setting value changed to “Activate”

==== State: NeedInfo by: cmadmin on 08 May 2023 14:35:12 ====

  == Tara.Wang@unisoc.com On 20230508T06:33:45 (xml) ==
客户您好：
  请提供下哪些plmn下需要支持该功能，谢谢

LTE Rel. 9 SON RACH report setting value changed to “Activate”
(20230508T05:46:38)

==== State: Opened by: cmadmin on 08 May 2023 13:52:32 ====

  == Xianhui.Yan@unisoc.com On 2023-05-08T05:46:38Z (json) ==
0.EVS codec from disabled to enabled
1.GEA2 Encryption setting value changed to “Deactivate”
【Unisoc】
297/02：ME_DTAG_S.nv
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\ims_sim_nvinfo\volte_audio_codec\audio_codec_type=7
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\nas_sim_nvinfo\gea_flag\gea_2=0

226/03 and 226/06：RO_DTAG_S.nv
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\ims_sim_nvinfo\volte_audio_codec\audio_codec_type=7      //已经配置支持EVS，无需再配置
PS_NV_PARAMS\NV_PARAM_TYPE_SIM_DELTA_NV\nas_sim_nvinfo\gea_flag\gea_2=0

2.2G DTM setting value changed to “Deactivate”
【Unisoc】
DTM我司平台都不支持，符合需求，无需配置


请LTE看下3/4点

==== State: Opened by: cmadmin on 08 May 2023 10:56:55 ====

  == Chencheng.Huang@unisoc.com On 2023-05-08T02:55:33Z (json) ==
请帮忙继续流转确认CQ描述的剩余项目支持情况，谢谢！

==== State: Opened by: cmadmin on 08 May 2023 10:56:53 ====

  == Chencheng.Huang@unisoc.com On 2023-05-08T02:54:46Z (json) ==
尊敬的客户您好，

当前CQ描述中软件版本MOCOR_20A_MP_W22.04.6_P5，对应版本上：

EVS codec from disabled to enabled for : 
297/02 - Telekom Montenegro //不支持
如要配置支持EVS，需要新增运营商NV文件ME_DTAG_P.nv，并在该文件中添加如下配置：
PS_NV_PARAMS\NV_PARAM_TYPE_PLMN_DELTA_NV\ims_plmn_nvinfo\volte_audio_codec\audio_codec_type=7
//该配置涉及VoLTE电话业务，如需要申请合入正式版本，修改配置后请在实网验证VoLTE电话业务情况

226/03 and 226/06 - Telekom Romania //已支持

运营商NV修改方法请参考如下iSupport文档：
运营商NV配置指南V1.7.pdf
https://unisupport.unisoc.com/file/index?fileid=29168

==== State: Opened by: cmadmin on 08 May 2023 10:54:00 ====

  == Chencheng.Huang@unisoc.com On 2023-05-08T02:53:35Z (json) ==
尊敬的客户您好，

当前CQ描述中软件版本MOCOR_20A_MP_W22.04.6_P5，对应版本上：

EVS codec from disabled to enabled for : 
297/02 - Telekom Montenegro //不支持
如要配置支持EVS，需要新增运营商NV文件ME_DTAG_P.nv，并在该文件中添加如下配置：
PS_NV_PARAMS\NV_PARAM_TYPE_PLMN_DELTA_NV\ims_plmn_nvinfo\volte_audio_codec\audio_codec_type=7

226/03 and 226/06 - Telekom Romania //已支持

运营商NV修改方法请参考如下iSupport文档：
运营商NV配置指南V1.7.pdf
https://unisupport.unisoc.com/file/index?fileid=29168

==== State: Opened by: cmadmin on 06 May 2023 10:08:15 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 06 May 2023 09:12:04 ====

你好，
客户又新增了两个
EVS codec from disabled to enabled for : 

297/02 - Telekom Montenegro 

226/03 and 226/06 - Telekom Romania 
能否帮忙一起处理？
|
# SPCSS01165130|[SC7731E][Waterworld][A507-SC7731E][13273][手机][1部]通话按键音出现POP音问题|Dear sprd:
  前面客户反馈通话过程中按拨号盘数字键时，按键音播放不完整然后就对stopDtmfTone加了20毫秒延时处理(SPCSS01163308)， 现在发现添加延时后按键音有明显的POP音。 麻烦贵司帮忙看下此问题，感谢。

  复现log是直接抓ylog就行了，还是做特殊处理贵司麻烦指导下。谢谢。|
==== State: Opened by: waterworld on 10 May 2023 18:16:10 ====

Dear sprd:
  录制了两份音频，已上传附件。

==== State: NeedInfo by: cmadmin on 09 May 2023 19:36:54 ====

  == Xin.Xu1@unisoc.com On 2023-05-09T11:36:26Z (json) ==
HI CUS:
从dump的pcm数据分析，按键音输出较好，全程并未存在出现pop音的情况，请帮忙复现的过程在外部录制一份音频，并告知音频中出现pop音的位置，谢谢！
(2023-05-09T06:15:32Z)

==== State: Opened by: waterworld on 09 May 2023 14:11:16 ====

Dear sprd:
   开启arm侧dump的ylog已上传，谢谢。

==== State: NeedInfo by: cmadmin on 09 May 2023 09:09:52 ====

  == Xin.Xu1@unisoc.com On 2023-05-09T01:08:55Z (json) ==
hi cus:
在使用logel工具，tool菜单device control的AT Command Test下发。
(2023-05-06T03:47:17Z)

==== State: Opened by: waterworld on 06 May 2023 11:45:58 ====

Dear sprd: 
 请教下贵司这个at+sppcmdump 怎么发送

==== State: NeedInfo by: cmadmin on 06 May 2023 11:32:12 ====

  == Guangtao.Zhi@unisoc.com On 20230506T03:31:37 (xml) ==
Dear customer:
请帮忙提供包含modem的ylog，并在测试开始前发送AT命令开启arm侧的dump，谢谢。
开启arm dump的at命令：
at+sppcmdump=1,1,1,8388607
(20230506T03:19:04)

==== State: Opened by: waterworld on 05 May 2023 17:56:47 ====

Dear sprd:
  media目录数据已上传。

==== State: NeedInfo by: cmadmin on 05 May 2023 17:30:59 ====

  == Jen.Li@unisoc.com On 20230505T09:30:00 (xml) ==
hi customer

请使用下面命令抓取一下audio hal dump,请先输入下面命令,然后复现问题,最后将/data/local/media/ 目录下的数据pull出来上传，谢谢

adb root
adb shell
echo "set_dump_data_switch=1" > /data/local/media/mmi.audio.ctrl
echo "set_dump_data_path=/data/local/media/" > /data/local/media/mmi.audio.ctrl
echo "set_dump_data_switch=0xffff" > /data/local/media/mmi.audio.ctrl
(20230505T09:26:48)
|
# SPCSS01165099|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机]HMD FF627项目LTE SAR降功率问题，客户要求校准降功率处理，是否可以通过simba校准工具的SEQ文件修改期望功率处理(如2G-3G那样通过修改SEQ的期望功率校准来达到所需目标功率），请帮忙安排加急处理，谢谢！|现象：
1.前期工厂生产是通过加大线损的方式来实现对某个频段降功率，现生产了一段时间；从工厂反馈的情况下来，这种方式操作复杂，
并且容易搞错。并且加大线损后造成校准站位的线损不准确，校准出来的功率不稳定。
2.通过NV的方式来实现降功率，验证了几版软件，发现之前生产的订单板子再升级该软件后，功率在原来的基础上会再次降低了1DB
（如原来生产校准的主板功率在22dB,升级修改NV的软件后功率降到了21dB），前期已生产100K的主板，如通过修改软件NV降功率会
导致软件无法管控。
是否有方法可以通过simbas校准工具的SEQ文件修改期望功率处理(如2G-3G那样通过修改SEQ的期望功率校准来达到所需目标功率），请帮忙安排加急处理，谢谢！|
==== State: Opened by: waterworld on 06 May 2023 09:42:42 ====

修改问题类别为Request，请展讯帮忙修改工具，4G也能象2G\3G一样直接在工具中修改期望功率。目前已经生产100多K，如果更改NV，将导致前面生产的机子FOTA升级软件后功率都不达标。请展讯大力支持，谢谢！

==== State: NeedInfo by: cmadmin on 05 May 2023 18:40:18 ====

  == Zhongwen.Chen@unisoc.com On 2023-05-05T10:37:53Z (json) ==
如回复
simba不支持设置最大期望功率，请从NV修改
(2023-05-05T10:17:08Z)

==== State: Opened by: cmadmin on 05 May 2023 18:18:41 ====

  == Fei_f.Xie@unisoc.com On 20230505T10:17:08 (xml) ==
LTE校准期望功率是在NV中配置的，校准工具无法修改
|
# SPCSS01165092|[UMS312][Waterworld][YK683-UMS312][12737][手机]TD-LTE射频 和 FDD射频： 衰落条件下的CQI 上报 – PUSCH 3-0 无法解析该设备上报的CQI
步骤：

现象：

分析：
|
==== State: Resolved by: cmadmin on 06 May 2023 15:53:40 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:客户测试方法问题

[2.Resolution        ]:沟通关闭



==== State: Opened by: waterworld on 06 May 2023 15:21:31 ====

Dear sprd :
您好，实验室最新回复，测试方法有问题，
正常测试后无问题现象发生。

谢谢您的指导

此问题可关闭，thanks~

==== State: NeedInfo by: cmadmin on 06 May 2023 13:57:26 ====

  == Fang.Chang@unisoc.com On 20230506T05:54:41 (xml) ==
尊敬的客户：
 
抓取log方式如下，如仍有疑问，请联系cpm安排相关的测试同事进行指导，谢谢

如果可以通过PC机用Logel工具抓modem log，请优先使用Logel工具抓log。
打开dsp log的at命令：at+spdspop=2

如果不能用Logel抓Modem log，需要尝试用T卡抓log，麻烦客户插入T卡，通过如下adb命令打开modem log。

    adb shell cplogctl state 5mode
    //查询modem log的开关状态是否为on

    adb shell cplogctl enable 5mode
    //开启modem log

    adb shell getprop persist.ylog.enabled
   //查询Ylog的开关状态

    adb shell setprop persist.ylog.enabled 1
    //打开Ylog

    adb shell getprop persist.sys.engpc.disable
    //确认Modem to pc按钮的状态，0为开启的状态，1为关闭的状态；若使用SD卡抓log，需确保为1的状态。

   adb shell setprop persist.sys.engpc.disable 1     
   //关闭engpc

    adb reboot
   //重启

    adb shell getprop persist.sys.engpc.disable    
    //再次确认engpc状态，返回值0为engpc开启，1为engpc关闭

    adb shell ylog cli rootdir
    //确认ylog是否保存在SD卡里，（SD卡外部存储“/storage/sdcard0”，手机内部存储“storage/emulated/0”）
(20230506T03:27:23)

==== State: Opened by: waterworld on 06 May 2023 11:26:31 ====

Dear sprd ；
您好！ 请问log是仪表端的log还是手机端的log？ 手机端的log实验室那边不会开，若需要抓取，麻烦提供下方法，
thanks~

==== State: NeedInfo by: cmadmin on 06 May 2023 11:11:40 ====

  == Vincent.Zheng@unisoc.com On 2023-05-06T03:09:40Z (json) ==
客户，你好
    路径提供的是测试报告，麻烦客户提供modem log，谢谢！
抓取modem log时，请打开arm和dsp。

==== State: NeedInfo by: cmadmin on 06 May 2023 10:02:09 ====

  == Fang.Chang@unisoc.com On 20230506T01:58:30 (xml) ==
尊敬的客户：
    您好。请您上传测试的modem log，测试请打开Ldsp 打点，谢谢
(20230506T01:39:45)

==== State: Opened by: cmadmin on 06 May 2023 09:31:24 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 05 May 2023 17:05:19 ====

Dear sprd :
您好~ 相关文件已上传至附件 ，请注意查收，谢谢！
|
# SPCSS01165047|[UMS312][Waterworld][FS310-UMS312-A12][13725][CEBU-智能手机][XM]开机状态点击关机按钮，概率性出现关机的时候直接进入dump，提示kernel crash|操作步骤：
user版本，打开ylog里面的dump开关，手机开机状态，长按power按键弹出关机选项，这时候点击关机，概率性手机会直接进入dump界面
提示kernel crash，，

dump log解析后提示如下相关错误,
[   33.791667] pc : dma_buf_release+0xbc/0xec
[   33.791669] lr : dma_buf_release+0x84/0xec
...........
[   33.792029] Call trace:
[   33.792031]  dma_buf_release+0xbc/0xec
[   33.792036]  __dentry_kill+0x1e0/0x444
[   33.792038]  dput+0x580/0x748
[   33.792040]  __fput+0x168/0x358
[   33.792042]  ____fput+0x10/0x1c
[   33.792044]  task_work_run+0x114/0x1f8
[   33.792046]  do_exit+0x428/0xefc
[   33.792047]  do_group_exit+0xb8/0x178
[   33.792049]  get_signal+0xb08/0xcf8
[   33.792052]  do_signal+0x98/0x260
[   33.792054]  do_notify_resume+0xa4/0x158
[   33.792056]  work_pending+0x8/0x10
[   33.792057] ---[ end trace fd0c612bd11503aa ]---

相关的dump log上传到CQ的：“12#-关机Dump-20230505141711.zip”，其中vmlinux也放到对应压缩包里面的external_storage\ylog\ylog\SYSDUMP\1 路径下|
==== State: NeedInfo by: cmadmin on 06 May 2023 15:50:05 ====

  == Yunrui.Chen@unisoc.com On 2023-05-06T07:47:58Z (json) ==
Hi Cus：
   怀疑和踩内存有关，请按照SPCSS01164505的方法，进行操作，谢谢
(2023-05-05T08:45:07Z)

==== State: Opened by: cmadmin on 05 May 2023 16:45:39 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 05 May 2023 16:37:55 ====

我这边跟进dump 文件解析了一份log.txt同步上传到附件“log.txt”，里面有一些初步的问题原因，可以先看一下，比较怀疑和audio模块相关
|
# SPCSS01165025|[SC9832E][Waterworld][A507-SC9832E-A13][14037][Other]通过DTI 安装了12个APK之后，运行很慢，帮忙看一下是什么问题，谢谢，
步骤：

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 09:46:35 ====

  == Hang.Du@unisoc.com On 20230510T01:42:40 (xml) ==
Dear Customer

当前只有卡顿现场的log，没有前两天的信息

贵司可以从当前cpu负载，剩余内存，后台进程数量，running进程数量，APK编译优化等方面综合对比下
(20230506T03:28:09)

==== State: Opened by: waterworld on 06 May 2023 11:27:37 ====

谢谢，这边客户反馈说前二天前通过DTI的APK下载了APK之后，从第三天开始就卡顿了，为什么前二天正常的呢？


==== State: NeedInfo by: cmadmin on 06 May 2023 11:14:44 ====

  == Hang.Du@unisoc.com On 20230506T03:12:15 (xml) ==
Dear Customer

可以根据视频中的时间点，查看ylog中的sgm.xml文件，卡顿期间，各cpu已经跑满，后台process数量不断增加，memoryfree持续降低。

SC9832E低内存设备，性能较低，在后台开启较多应用后，达到性能瓶颈
(20230505T08:59:05)

==== State: Opened by: cmadmin on 05 May 2023 16:33:35 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164978|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM][Launcher]点击主菜单应用作用框右半部分无反应
步骤：
1、设置-开发者模式，开启指针位置、布局显示
2、主菜单，点击各个应用
现象：点击应用右半部分出现大概率无反应，如附件视频、log和图片
请帮忙确认为什么右半部分会概率无反应。
分析：
|
==== State: Opened by: waterworld on 10 May 2023 13:53:46 ====

自行解决，请关闭这个问题

==== State: Opened by: waterworld on 09 May 2023 11:42:46 ====

请帮忙关闭此问题

==== State: Opened by: cmadmin on 05 May 2023 15:50:43 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164972|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]反复切换语言后进入World clock，出现重启【CDBUG-9915】|1.进入Settings->Phone settings->Phone language，切换语言->按End键回到IDLE界面

2.进入Menu->Clock->World clock->Options->ADD->按End键回到桌面

3.反复进行步骤1&2的操作
|
==== State: Opened by: waterworld on 10 May 2023 13:17:18 ====

你好:
   在mk文件里面确实配置IM_ENGINE =NONE

==== State: NeedInfo by: cmadmin on 10 May 2023 10:54:36 ====

  == Andrew.Kao@unisoc.com On 20230510T02:51:59 (xml) ==
你好：询问一下

所以贵司目前出现问题设定是？

IM_ENGINE = NONE
(20230509T06:20:13)

==== State: Opened by: waterworld on 09 May 2023 14:18:00 ====

你好：
  非必现 但是高概率，可以看视频

==== State: NeedInfo by: cmadmin on 09 May 2023 14:14:12 ====

  == Andrew.Kao@unisoc.com On 20230509T06:12:16 (xml) ==
Dear Customer:

目前有memory溢位状态 , 还排查, 请问一下此问题必现？ 

谢谢～
(20230509T05:27:16)

==== State: Opened by: waterworld on 09 May 2023 13:25:33 ====

你好:
    请问有啥进展吗

==== State: Opened by: waterworld on 08 May 2023 14:49:32 ====

你好：
   不是很理解您说的这个，可以电话沟通吗

==== State: NeedInfo by: cmadmin on 08 May 2023 14:43:57 ====

  == Andrew.Kao@unisoc.com On 2023-05-08T06:43:39Z (json) ==
你好,
不可以直接使用str的buffer做拼接，请申请新的buffer来做，下面是错误的代码：

MMI_GetLabelTextByLang(STXT_SENT,&str);
MMIAPICOM_Wstrcat(str.wstr_ptr,time_string);

再请验证下.  谢谢
(2023-05-08T06:28:47Z)

==== State: Opened by: waterworld on 08 May 2023 14:39:42 ====

你好:
    我看了对应代码位置，发现以下函数是有对数组偏移进行判断的，如果空间不够就会从首地址从新开始。
if (s_text_cache_offset + str_ptr->wstr_len + 2 > MMI_TEXT_CACHE_BUF_SIZE)//align:4bytes
    {
        //SCI_TRACE_LOW:"[MMIRES] Text cache full. offset = %d, wstr_len=%d"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,MMI_RESOURCE_4226_112_2_18_2_0_21_242,(uint8*)"dd", s_text_cache_offset, str_ptr->wstr_len);

        s_text_cache_offset = 0;
    }

==== State: Opened by: waterworld on 08 May 2023 14:25:54 ====

你好:
   好的 谢谢 我们这边试试

==== State: NeedInfo by: cmadmin on 08 May 2023 14:14:10 ====

  == Andrew.Kao@unisoc.com On 2023-05-08T06:12:17Z (json) ==
你好,

log上有显示cache full，
12	147340-1	15:28:06.807	[MMIRES] Text cache full. offset = 5114, wstr_len=7	
s_text_cache_buf 超了20个Byte，把s_vector_cache 前面5个Long写掉了。
s_text_cache_buf  这里的大小是0x2814，感觉大了0x14导致越界


请尝试修改一下， mmi_resource.c 中 MMI_TEXT_CACHE_BUF_SIZE 改成
------ #define MMI_TEXT_CACHE_BUF_SIZE  (5*1024 + 20)
(2023-05-08T03:56:27Z)

==== State: Opened by: waterworld on 08 May 2023 11:51:07 ====

发错了 上一条忽略

==== State: Opened by: waterworld on 08 May 2023 11:50:29 ====

SIB是LTE（Long-Term Evolution）无线通信系统中的一个重要概念，全称为System Information Block（系统信息块）。SIB message指的是包含在SIB中的信息。

SIB是无线电信号传输的一部分，用于向用户设备广播网络的参数和配置信息，包括小区ID、频段、带宽、功率控制、调度等。这些信息对于移动设备的接入、漫游和切换非常重要。

SIB message可以根据不同的功能和目的进行分类，例如：

SIB1：包含了小区ID、PLMN ID（公共陆地移动网络识别码）、频带、频段和覆盖范围等关键信息。
SIB2：包含了小区的物理层和调度信息，如小区内支持的MIMO模式、PRACH配置等。
SIB3：包含了小区的邻区信息，可用于邻区搜索和测量。
SIB4：包含了小区的定位相关信息，如参考信号接收功率（RSRP）等。
SIB5：包含了小区的传输相关信息，如PDSCH（物理下行共享信道）配置等。
SIB message的内容和格式可能会因运营商、地区、设备类型等而有所不同，但它们通常都遵循3GPP（第三代合作伙伴计划）规范。

==== State: Opened by: cmadmin on 06 May 2023 10:08:44 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 05 May 2023 16:18:00 ====

你好:
    相关的文件已经上传到FTP

==== State: Submitted by: waterworld on 05 May 2023 16:17:32 ====

你好：
     经过初步分析，出现问题的地方在spml_font_map.c文件里面的SPML_SetVectorCache，该文件进行了封装，没法查看
|
# SPCSS01164908|[UMS9230][Waterworld][A660][13828][CEBU-智能手机]前摄GC32E1 otp导通失败|前面 SPCSS01140836 申请的OTP map,看版本是V1.2版本,现在使用的OTP 驱动是general ,
log中的报错显示 -> otp version error!

M00136B  01-01 00:07:18.492   606   606 D general_otp_drv: 142, _general_otp_parse_map_version: otp first six bytes: 53 50 52 44 01 02
M00136C  01-01 00:07:18.492   606   606 D general_otp_drv: 148, _general_otp_parse_map_version: otp map reserved in offset 0x000D: 0
M00136D  01-01 00:07:18.492   606   606 I general_otp_drv: 189, _general_otp_parse_map_version: otp version error! calib_version = 0x0102
M00136E  01-01 00:07:18.493   606   606 I general_otp_drv: 3153, general_otp_drv_parse: otp version error! will not start parse!
在驱动中没有看到 有1.2版本的相关内容,
log见附件 麻烦帮忙看看是不是要做什么修改,谢谢|
==== State: Closed by: waterworld on 08 May 2023 10:38:36 ====

Hi,
  close,thanks~~

==== State: Resolved by: cmadmin on 06 May 2023 17:33:02 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
opt map版本问题
Solution:
客户修改代码已兼容

==== State: Opened by: cmadmin on 06 May 2023 17:32:06 ====

  == Cyan.Cao@unisoc.com On 2023-05-06T09:31:38Z (json) ==
Dear cus:

      1.2版本相对与1.1多了LNC gridX/grid/Y分开，但目前设置的gridX/grid/Y都是96，其实和v1.1内容一样的。如果现在用v1.2可成功checksum pass，那就用1.2的map去烧录。

==== State: Opened by: cmadmin on 06 May 2023 09:42:53 ====

  == Cyan.Cao@unisoc.com On 20230506T01:42:40 (xml) ==
如无问题将关闭CQ

==== State: Opened by: cmadmin on 05 May 2023 17:28:12 ====

  == Cyan.Cao@unisoc.com On 2023-05-05T09:26:04Z (json) ==
(In reply to waterworld from comment #4)
如果你是comment 2修改了代码，使用V1.2 map可导通成功，就不用再重新按照V1.1 map烧录了

==== State: Opened by: cmadmin on 05 May 2023 17:28:09 ====

  == Cyan.Cao@unisoc.com On 2023-05-05T09:26:04Z (json) ==
(In reply to waterworld from comment #4)
如果你是comment 2修改了代码，使用V1.2 map可导通成功，就不用再重新按照V1.1 map烧录了

==== State: Opened by: waterworld on 05 May 2023 17:08:31 ====

Hi,
  OTP map 需要重新烧录吗?

==== State: Opened by: cmadmin on 05 May 2023 17:06:52 ====

  == Cyan.Cao@unisoc.com On 20230505T09:06:15 (xml) ==
(In reply to waterworld from comment #2)
好的 可以，附件也重新上传了v1.1版本的otp map.

==== State: Opened by: waterworld on 05 May 2023 16:59:39 ====

Hi,
  目前验证以下修改 OTP 可以 checksum pass

+++ b/vendor/sprd/modules/libcamera/sensor/otp_drv/driver/general/general_otp_drv.c
@@ -148,7 +148,10 @@ static cmr_int _general_otp_parse_map_version(cmr_handle otp_drv_handle) {
     OTP_LOGD("otp map reserved in offset 0x000D: %d", buffer[14]);
 
     module_info->calib_version = (buffer[4] << 8) | buffer[5];
-    if (module_info->calib_version == 0x0101) {
+    if (module_info->calib_version == 0x0101 || module_info->calib_version == 0x0102) {
+       if(module_info->calib_version == 0x0102) {
+           OTP_LOGI("willow calib_version = 0x0102, use v1.1 to parse ");
+       }
         module_info->otp_version = OTP_1_1;
         OTP_LOGI("otp version is 1.1");
     } else if (buffer[0] == 0x53 && buffer[1] == 0x50 && buffer[2] == 0x52 &&
diff --git a/vendor/sprd/modules/libcamera/sensor/otp_parser/otp_parser_common.c b/vendor/sprd/modules/libcamera/sensor/otp_parser/otp_parser_common.c
index f18c54d176a..38359444108 100755
--- a/vendor/sprd/modules/libcamera/sensor/otp_parser/otp_parser_common.c
+++ b/vendor/sprd/modules/libcamera/sensor/otp_parser/otp_parser_common.c
@@ -72,6 +72,10 @@ cmr_int _otp_get_map_version(void *raw_data, cmr_u16 *map_version) {
     case 0x0101:
         version = 0x0101;
         break;
+    case 0x0102:
+       version = 0x0101;
+       CMR_LOGI("willow byte4_byte5 is 0x%04x, use 0x0101 parser", byte4_byte5);
+       break;


==== State: Opened by: cmadmin on 05 May 2023 15:20:57 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164881|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]合入客户提供的fota patch后，开机的一瞬间会出现花屏现象|合入客户提供的fota patch后，开机的一瞬间会出现花屏现象
现象视频，以及patch如附件所示。请协助查看为何有这种现象出现
|
==== State: Closed by: cmadmin on 09 May 2023 11:04:37 ====

  == Sunwen.He@unisoc.com On 2023-05-09T03:01:57Z (json) ==
如沟通，此CQ关闭

==== State: Closed by: waterworld on 09 May 2023 10:54:41 ====

Dear Unisoc，
  感谢支持，可关闭

==== State: NeedInfo by: cmadmin on 05 May 2023 19:28:41 ====

  == Sunwen.He@unisoc.com On 2023-05-05T11:28:15Z (json) ==
(In reply to waterworld from comment #2)
TF_SetLcdBackLight (TRUE, 0x1f);此函数是控制lcd背光灯亮灭的函数，建议可以根据是否真正需要升级的条件来决定是否开启背光。
TF_SetLcdBackLight (FALSE, 0x1f);//关闭背光
TF_SetLcdBackLight (TRUE, 0x1f);//打开背光
(2023-05-05T10:51:41Z)

==== State: Opened by: waterworld on 05 May 2023 18:50:11 ====

Dear Unisoc，
  此bug已解决，我自行的解决方案是屏蔽掉
fdl_bootloader\bootloader\src\boot1_main.c
main函数中的
TF_SetLcdBackLight (TRUE, 0x1f);
  请问下，这样修改，是否会影响到fota升级界面

==== State: Opened by: cmadmin on 05 May 2023 17:42:44 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164857|[UMS9230][Waterworld][FS302][13404][智能手机]【六部遵义】机器频繁出现anr，看sgm负载也不是很高，请帮忙看看
步骤：手机在使用的过程中，频繁的出现未响应，请帮忙看看log，分析一下原因，谢谢！log已上传至ftp.

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 05 May 2023 15:57:59 ====

  == Yu.Li@unisoc.com On 20230505T07:53:50 (xml) ==
一: \QuickStep\ylog\ap\013-0426_145940--0426_151457\0-android.log 
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: ANR in com.android.systemui
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: PID: 31766
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: Reason: Input dispatching timed out (367f3fa NavigationBar0 (server) is not responding. Waited 9377ms for MotionEvent)
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: ErrorId: 742202e3-1c75-4bc2-b5c2-91eb171899b6
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: Frozen: false
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: Load: 18.72 / 15.57 / 14.65
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: ----- Output from /proc/pressure/memory -----
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: some avg10=17.41 avg60=8.50 avg300=3.57 total=516241600
S0274D3  04-26 15:05:55.956 31542  1061 E ActivityManager: full avg10=13.88 avg60=6.26 avg300=2.18 total=242483175

S0274D5  04-26 15:05:55.956 31542  1061 E ActivityManager:     0.3% 32372/binder:31744_F: 0.3% user + 0% kernel
S0274D5  04-26 15:05:55.956 31542  1061 E ActivityManager:   0.3% 31766/com.android.systemui: 0.3% user + 0% kernel / faults: 23 minor
S0274D5  04-26 15:05:55.956 31542  1061 E ActivityManager:   0.3% 32197/com.android.launcher3: 0.3% user + 0% kernel / faults: 5 minor
S0274D6  04-26 15:05:55.956 31542  1061 E ActivityManager:  +0% 1399/sleep: 0% user + 0% kernel
S0274D6  04-26 15:05:55.956 31542  1061 E ActivityManager: 64% TOTAL: 6.4% user + 15% kernel + 38% iowait + 2.1% irq + 0.8% softirq


S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: ANR in com.radio.pocketfm
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: PID: 7446
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: Reason: Broadcast of Intent { act=com.google.android.c2dm.intent.RECEIVE flg=0x11000010 pkg=com.radio.pocketfm cmp=com.radio.pocketfm/com.onesignal.FCMBroadcastReceiver (has extras) }
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: ErrorId: 74e10c6a-8539-43d0-9122-b2989984e9da
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: Frozen: false
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: Load: 0.0 / 0.0 / 0.0
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: ----- Output from /proc/pressure/memory -----
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: some avg10=9.02 avg60=10.60 avg300=9.37 total=567515955
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: full avg10=5.85 avg60=7.36 avg300=6.54 total=279651057
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: ----- End output from /proc/pressure/memory -----
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: 
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager: CPU usage from 63453ms to -2ms ago (2023-04-26 15:11:52.634 to 2023-04-26 15:12:56.089):
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager:   22% 5306/in.amazon.mShop.android.shopping: 18% user + 4.7% kernel / faults: 109458 minor 1385 major
S03C077  04-26 15:12:58.918 31542  8123 E ActivityManager:   16% 31542/system_server: 8.4% user + 8% kernel / faults: 18941 minor 7871 major

S03C079  04-26 15:12:58.919 31542  8123 E ActivityManager:  +0% 7888/com.sonyliv:pushservice: 0% user + 0% kernel
S03C079  04-26 15:12:58.919 31542  8123 E ActivityManager:  +0% 8104/com.google.process.gservices: 0% user + 0% kernel
S03C07A  04-26 15:12:58.919 31542  8123 E ActivityManager: 86% TOTAL: 14% user + 15% kernel + 54% iowait + 1.7% irq + 0.8% softirq
S03C07A  04-26 15:12:58.919 31542  8123 E ActivityManager: CPU usage from 36397419ms to 36397419ms ago (1970-01-01 05:30:00.000 to 1970-01-01 05:30:00.000) with 0% awake:

二：sgm:
IO高
4-26 15:4:52.316<35913.647506>	61	24
4-26 15:4:53.318<35914.650277>	52	29
4-26 15:4:54.320<35915.652373>	55	41
4-26 15:4:55.323<35916.654736>	76	39
4-26 15:4:56.325<35917.657065>	77	34
4-26 15:4:57.327<35918.659330>	75	54
4-26 15:4:58.330<35919.661666>	79	41
4-26 15:4:59.332<35920.664273>	75	38
4-26 15:5:0.334<35921.666240>	83	45
4-26 15:5:1.339<35922.670493>	86	60
4-26 15:5:2.343<35923.675194>	84	61
4-26 15:5:3.347<35924.679406>	93	57
4-26 15:5:4.353<35925.685146>	87	69
4-26 15:5:5.359<35926.690584>	78	51
4-26 15:5:6.363<35927.694780>	97	1
4-26 15:5:7.370<35928.701697>	78	1
4-26 15:5:8.372<35929.704304>	69	17
4-26 15:5:9.379<35930.710713>	67	43
4-26 15:5:10.380<35931.712355>	79	48
4-26 15:5:11.383<35932.714930>	75	64
4-26 15:5:12.385<35933.717370>	71	52
4-26 15:5:13.388<35934.719970>	64	39
4-26 15:5:14.390<35935.722309>	77	54
4-26 15:5:15.393<35936.724503>	74	63
4-26 15:5:16.395<35937.727239>	58	46
4-26 15:5:17.398<35938.729973>	44	35
4-26 15:5:18.401<35939.732465>	50	41
4-26 15:5:19.403<35940.734926>	46	39
4-26 15:5:20.405<35941.737408>	72	26
4-26 15:5:21.411<35942.742655>	83	35
4-26 15:5:22.413<35943.745004>	72	47
4-26 15:5:23.418<35944.749800>	66	36
4-26 15:5:24.421<35945.752509>	90	63
4-26 15:5:25.426<35946.757891>	82	56
4-26 15:5:26.431<35947.763100>	84	57
4-26 15:5:27.438<35948.769693>	94	74
4-26 15:5:28.443<35949.774754>	95	72
4-26 15:5:29.445<35950.777097>	100	75
4-26 15:5:30.450<35951.781859>	89	66
4-26 15:5:31.457<35952.788696>	90	56
4-26 15:5:32.460<35953.791718>	85	32
4-26 15:5:33.462<35954.794309>	65	44
4-26 15:5:34.468<35955.799885>	57	36
4-26 15:5:35.473<35956.805026>	52	25
4-26 15:5:36.476<35957.808323>	59	18
4-26 15:5:37.479<35958.811141>	77	33
4-26 15:5:38.482<35959.814364>	58	26
4-26 15:5:39.485<35960.816758>	69	25
4-26 15:5:40.487<35961.819358>	60	27
4-26 15:5:41.491<35962.822478>	54	29
4-26 15:5:42.496<35963.827584>	54	25
4-26 15:5:43.498<35964.829775>	74	61
4-26 15:5:44.500<35965.832044>	73	54
4-26 15:5:45.503<35966.834986>	67	38
4-26 15:5:46.506<35967.837528>	85	33
4-26 15:5:47.508<35968.839732>	78	46
4-26 15:5:48.512<35969.843839>	79	35
4-26 15:5:49.514<35970.846153>	71	41
4-26 15:5:50.517<35971.848650>	80	46
4-26 15:5:51.520<35972.851566>	80	50
4-26 15:5:52.522<35973.853669>	76	36
4-26 15:5:53.524<35974.856273>	90	40
4-26 15:5:54.527<35975.858861>	80	61
4-26 15:5:55.529<35976.861208>	77	67
4-26 15:5:56.532<35977.864251>	74	26
4-26 15:5:57.536<35978.868399>	62	45
4-26 15:5:58.539<35979.870768>	69	52
4-26 15:5:59.541<35980.873375>	66	51
4-26 15:6:0.545<35981.876506>	69	51
4-26 15:6:1.547<35982.879048>	63	46
4-26 15:6:2.549<35983.881414>	66	39
4-26 15:6:3.552<35984.883440>	71	44
4-26 15:6:4.554<35985.885899>	68	46
4-26 15:6:5.556<35986.888311>	68	50
4-26 15:6:6.559<35987.890601>	68	49
4-26 15:6:7.562<35988.893751>	83	62
4-26 15:6:8.565<35989.896525>	95	52
4-26 15:6:9.568<35990.899720>	86	75
4-26 15:6:10.571<35991.903285>	85	35
4-26 15:6:11.576<35992.908266>	91	20
4-26 15:6:12.581<35993.912764>	95	13
4-26 15:6:13.585<35994.916861>	91	9
4-26 15:6:14.591<35995.922513>	92	9
4-26 15:6:15.594<35996.925469>	87	41
4-26 15:6:16.597<35997.928575>	85	59
4-26 15:6:17.598<35998.930187>	79	46
4-26 15:6:18.602<35999.933550>	70	46
4-26 15:6:19.606<36000.938215>	81	59
4-26 15:6:20.611<36001.942972>	75	52
4-26 15:6:21.615<36002.947169>	73	54
4-26 15:6:22.620<36003.951529>	91	73
4-26 15:6:23.626<36004.958204>	96	72
4-26 15:6:24.631<36005.962836>	89	67
4-26 15:6:25.636<36006.967875>	72	26
4-26 15:6:26.638<36007.970247>	93	51
4-26 15:6:27.643<36008.974861>	96	71
4-26 15:6:28.646<36009.977716>	89	65
4-26 15:6:29.651<36010.983120>	89	54
4-26 15:6:30.654<36011.986277>	86	57
4-26 15:6:31.658<36012.990411>	81	57
4-26 15:6:32.662<36013.993896>	73	50
4-26 15:6:33.667<36014.999331>	67	45
4-26 15:6:34.672<36016.004102>	79	50
4-26 15:6:35.674<36017.006373>	81	59
4-26 15:6:36.679<36018.011166>	79	59
4-26 15:6:37.683<36019.014927>	81	51
4-26 15:6:38.686<36020.017598>	72	51
4-26 15:6:39.688<36021.020355>	70	57
4-26 15:6:40.691<36022.023130>	65	55
4-26 15:6:41.694<36023.025476>	68	56
4-26 15:6:42.696<36024.027864>	69	57
4-26 15:6:43.698<36025.030231>	59	53
4-26 15:6:44.701<36026.032686>	62	33
4-26 15:6:45.704<36027.035938>	52	25
4-26 15:6:46.707<36028.038631>	49	3
4-26 15:6:47.712<36029.043664>	30	6
4-26 15:6:48.717<36030.048851>	56	32
4-26 15:6:49.723<36031.054529>	56	37
4-26 15:6:50.725<36032.057390>	48	27
4-26 15:6:51.730<36033.062255>	58	37
4-26 15:6:52.733<36034.065168>	72	51
4-26 15:6:53.738<36035.069546>	59	39
4-26 15:6:54.742<36036.074348>	50	29
4-26 15:6:55.747<36037.079249>	66	47
4-26 15:6:56.753<36038.084606>	62	40
4-26 15:6:57.758<36039.090001>	87	28
4-26 15:6:58.761<36040.092815>	95	56
4-26 15:6:59.763<36041.094663>	96	79
4-26 15:7:0.765<36042.096692>	97	85
4-26 15:7:1.767<36043.098811>	83	64
4-26 15:7:2.769<36044.101063>	83	70
4-26 15:7:3.771<36045.103275>	80	69
4-26 15:7:4.774<36046.105680>	84	73
4-26 15:7:5.776<36047.108374>	86	77
4-26 15:7:6.779<36048.110667>	76	68
4-26 15:7:7.780<36049.112383>	60	44


三： 
 io debug sample  for Kernel 5.4: 在稳定性中测试，禁止在合入正式发布版本中，
diff --git a/block/blk-core.c b/block/blk-core.c
index 9efdd4f..d563c85d 100644
--- a/block/blk-core.c
+++ b/block/blk-core.c
@@ -1417,7 +1417,6 @@
 }
 EXPORT_SYMBOL_GPL(blk_steal_bios);
 
-#if defined(CONFIG_SPRD_DEBUG)
 static DEFINE_SPINLOCK(_io_lock);
 
 #define IO_ARRAY_SIZE 12	/* 2^(12-2) = 1024ms */
@@ -1563,14 +1562,13 @@
 	++io_debug.issue2complete[index];
 	++info->issue2complete[index];
 
-	if (complete > (io_debug.start + (1000000000ULL * io_interval))) {
+	if (complete > (io_debug.start + (1000000000ULL * 10))) {
 		_io_backup_log(complete);
 		spin_unlock_irqrestore(&_io_lock, flags);
 		_io_print_info();
 	} else
 		spin_unlock_irqrestore(&_io_lock, flags);
 }
-#endif
 
 /**
  * blk_update_request - Special helper function for request stacking drivers
@@ -1603,12 +1601,11 @@
 {
 	int total_bytes;
 
-#if defined(CONFIG_SPRD_DEBUG)
 	if (req->io_start_time_ns && req->start_time_ns && req->rq_disk) {
 		_io_update(ktime_get_ns(), req->io_start_time_ns,
 			req->start_time_ns, req->rq_disk);
 	}
-#endif
+
 	trace_block_rq_complete(req, blk_status_to_errno(error), nr_bytes);
 
 	if (!req->bio)
diff --git a/block/blk-mq.c b/block/blk-mq.c
index 2a0991d..7ec3435 100644
--- a/block/blk-mq.c
+++ b/block/blk-mq.c
@@ -689,12 +689,8 @@
 		rq->stats_sectors = blk_rq_sectors(rq);
 		rq->rq_flags |= RQF_STATS;
 		rq_qos_issue(q, rq);
-#if defined(CONFIG_SPRD_DEBUG)
 	} else
 		rq->io_start_time_ns = ktime_get_ns();
-#else
-	}
-#endif
 
 	WARN_ON_ONCE(blk_mq_rq_state(rq) != MQ_RQ_IDLE);
 
合入后请确认 kernel log中，会有此类log打出，即Smaple code生效
FF98A <6> [29910.193548] [06-24 18:02:28.193] [c1] io insert-issue:  311    0    1    0   12    0    0    0    0    0    0    0
FF98B <6> [29910.193563] [06-24 18:02:28.193] [c1] |_i2i   mmcblk0:  307    0    1    0   12    0    0    0    0    0    0    0
FF98C <6> [29910.193570] [06-24 18:02:28.193] [c1] |_i2i    others:    4    0    0    0    0    0    0    0    0    0    0    0
FF98D <6> [29910.193577] [06-24 18:02:28.193] [c1] io issue - comp:  318    3    3    0    0    0    0    0    0    0    0    0
FF98E <6> [29910.193584] [06-24 18:02:28.193] [c1] |_i2c   mmcblk0:  318    2    0    0    0    0    0    0    0    0    0    0
FF98F <6> [29910.193590] [06-24 18:02:28.193] [c1] |_i2c    others:    0    1    3    0    0    0    0    0    0    0    0    0

Thanks
(20230505T06:37:47)
|
# SPCSS01164838|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]Performance report  for the A12 9863A1 Go device|您好，
海外客户想要参考一下展锐平台数据，
请问可否帮忙提供一下展锐Android12 9863A1 Go平台，贵司所有的performance测试报告；
非常感谢|
==== State: NeedInfo by: cmadmin on 05 May 2023 19:32:24 ====

  == Long.Chen@unisoc.com On 20230505T11:29:31 (xml) ==
你以"测试报告"为关键字搜索，看看找到的报告是否有能满足你们要求的，如果都不能满足你们的要求，请联系unisoc cpm
(20230505T09:35:44)

==== State: Opened by: waterworld on 05 May 2023 17:30:50 ====

您好，
uni-support只找到101769_Performancefor客户报告_SC9863A1_V1.0.pdf，但这个是A11的，
海外客户要求帮忙提供一下A12 go的，
还请帮忙提供一下类似"101769_Performancefor客户报告_SC9863A1_V1.0.pdf"的A12.0 go的performance报告；
非常感谢


==== State: NeedInfo by: cmadmin on 05 May 2023 14:54:20 ====

  == Long.Chen@unisoc.com On 20230505T06:53:21 (xml) ==
可以在uni-support上，选择SC9863A1平台，并以"测试报告"为关键字搜索，可以看到所有提供的文档，例如 id:101769, <Performance for客户报告_SC9863A1_V1.0.pdf>
(20230505T06:27:45)

==== State: Opened by: cmadmin on 05 May 2023 14:54:17 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164793|[UWS6130E][Waterworld][HK701][12796][儿童手表]去除GOODIX_SUPPORT SENSORHUB_SUPPORT改为FASLE后，pinmap_cfg.c是否要更新，现在测试低电流会增加4毫安左右。附件是在用的pinmap_cfg.c 文件
步骤：

现象：

分析：
|
==== State: Closed by: waterworld on 06 May 2023 21:12:44 ====

close

==== State: Resolved by: cmadmin on 06 May 2023 20:41:00 ====

  == Tao.Zhong@unisoc.com On 2023-05-06T12:40:08Z (json) ==
Dear Customer:

    该问题已解决，麻烦走一下close流程，若还有其它问题，再另提CQ进行跟踪，谢谢！

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为紫光展锐提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 紫光展锐工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:客户自己的pinmap_cfg.c 文件配置有问题。

[2.Resolution        ]:告知客户如何检查，客户已经自行检查解决。



==== State: Opened by: waterworld on 06 May 2023 19:56:46 ====

好的，这个已经修改ok，先关闭吧，多谢！

==== State: NeedInfo by: cmadmin on 06 May 2023 09:15:14 ====

  == Penghao.Yin@unisoc.com On 2023-05-06T01:15:09Z (json) ==
客户您好：
pinmap_cfg.c 文件需要修改
当前使用的pinmap_cfg.c 文件移植与哪个项目？
当前项目GOODIX_SUPPORT SENSORHUB_SUPPORT改为FASLE，相对于移植的项目有哪些pin脚没有使用？这些引脚有漏电，需要排查这些引脚。
(2023-05-05T09:59:52Z)

==== State: Opened by: waterworld on 05 May 2023 17:57:48 ====

你好，sensorhub这个项目是不支持的

==== State: NeedInfo by: cmadmin on 05 May 2023 17:51:30 ====

  == Penghao.Yin@unisoc.com On 2023-05-05T09:48:58Z (json) ==
客户您好：
sensorhub使用了哪几个pin脚？看现象应该是pin脚漏电引起底电流高，需要排查漏电引脚，并修改pin脚配置
(2023-05-05T09:36:48Z)
|
# SPCSS01164771|[UMS9230][Waterworld][A660][13828][CEBU-智能手机]相机拍照图片无法生成|后摄使用的是OV50C4C ,录像可以正常使用,拍照会卡住,图片无法生成,一直显示 image processing,
附件有录屏和log,麻烦帮忙分析,谢谢!!|
==== State: Opened by: waterworld on 10 May 2023 17:32:02 ====

Hi,
  请问有什么进展吗?
  thanks~

==== State: Opened by: waterworld on 10 May 2023 10:31:59 ====

Hi,
  请问有什么进展吗?

==== State: Opened by: waterworld on 09 May 2023 14:16:12 ====

Hi,
  关闭opticszoom后测试问题还是存在 ylog见附件0509_ov50_photo_ylog.7z


==== State: NeedInfo by: cmadmin on 08 May 2023 13:58:59 ====

  == Tao.Jiang1@unisoc.com On 20230508T05:58:11 (xml) ==
dear cus,

请在md.mk文件中关闭opticszoom后测试

PRODUCT_ODM_PROPERTIES += persist.vendor.cam.opticszoom.cali.mode=0

close
(20230506T11:22:59)

==== State: Opened by: waterworld on 06 May 2023 19:19:03 ====

Hi,
  使用附件驱动还是存在同样的现象,ylog见附件0506_photo_ylog.7z

==== State: NeedInfo by: cmadmin on 06 May 2023 15:38:06 ====

  == Tao.Jiang1@unisoc.com On 2023-05-06T07:35:18Z (json) ==
Dear cus:

  请使用附件驱动进行验证
(2023-05-05T11:09:48Z)

==== State: Opened by: waterworld on 05 May 2023 19:09:28 ====

Hi,
  相关文件见附件OV50_0505.7z
  谢谢!

==== State: NeedInfo by: cmadmin on 05 May 2023 19:02:42 ====

  == Tao.Jiang1@unisoc.com On 20230505T11:00:19 (xml) ==
Dear cus:

  请提供对应驱动文件、md,mk文件、dts文件、sensor_config.xml文件

==== State: NeedInfo by: cmadmin on 05 May 2023 19:02:41 ====

  == Tao.Jiang1@unisoc.com On 20230505T11:00:19 (xml) ==
Dear cus:

  请提供对应驱动文件、md,mk文件、dts文件、sensor_config.xml文件
(20230505T09:32:43)

==== State: Opened by: waterworld on 05 May 2023 17:27:57 ====

Hi,
  请问有什么进展吗?
  thanks~

==== State: Opened by: cmadmin on 05 May 2023 14:12:38 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164767|[UMS312][Waterworld][FS310-UMS312-A12][13725][CEBU-智能手机]锁屏界面，输入图案后，手机定屏|锁屏界面，输入图案后，手机定屏
分析:目前里面发现有第三方APP的ANR,不确定之间有无联系, 附件《ylog.zip》提供log，还请帮忙分析下，谢谢！|
==== State: Opened by: waterworld on 10 May 2023 09:14:13 ====

正在测试复现中. 如复现将第一时间提供.

==== State: NeedInfo by: cmadmin on 08 May 2023 09:48:22 ====

  == Lucas.Li@unisoc.com On 2023-05-08T01:45:26Z (json) ==
NEED_INFO
(2023-05-06T01:32:10Z)

==== State: Opened by: waterworld on 06 May 2023 09:30:38 ====

正在测试复现中.

==== State: NeedInfo by: cmadmin on 05 May 2023 16:18:37 ====

  == Lucas.Li@unisoc.com On 20230505T08:18:23 (xml) ==
您好，
  请按以下步骤复现操作提供下信息，看下定屏在那个界面，谢谢！
1.	记录发生定屏的时间，并拍摄照片或视频；
2.	确定adb是否可以连接，如果adb能连接
(1)、事件上报
     1）getevent
        2）操作按键/触屏
         3）正常有如下信息
            pressed： 
            /dev/input/event5: 0001 0074 00000001 
            /dev/input/event5: 0000 0000 00000000 
            released： 
            /dev/input/event5: 0001 0074 00000000 
           /dev/input/event5: 0000 0000 00000000

(2)、key/touch framework ok?
 1）adb logcat –v time –s “InputReader” “InputDispatcher” “WindowManager” 
 是否有打印输出
 
(3)、同时请第一时间抓取现场的bugreport信息（打印bugreport的时间较长，请稍微等待下，执行完毕后命令会自动退出的．）
  adb shell bugreportz
     adb pull /bugreports ./　

(4)、提供视频、ylog及bugreport 。
(20230505T07:10:12)

==== State: Opened by: cmadmin on 05 May 2023 13:56:41 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164757|[SC9863A1][Waterworld][FS308-Reliance][13451][CEBU-智能手机][XM]该平台最大能支持多少GB的SD卡|请帮忙确认一下9863A1 最大只能支持多少GB的SD卡，如果超过128GB 的是否已经获得了第三方的授权？
客户需要将这个支持SD卡的大小写在包装盒上，如果没有得到授权，可能会造成侵权。|
==== State: NeedInfo by: cmadmin on 08 May 2023 17:28:35 ====

  == Yang.Zhao@unisoc.com On 2023-05-08T09:28:33Z (json) ==
Dear Customer，
   目前是exfat和ntfs有专利版权，需要贵司法务评估后看是否可以打开，主要是使用的相关工具。其中exfat的工具在A13上google已经默认集成进去了。不支持exfat，，超过32G的默认是FAT。还请知悉。

A12上打开exfat的方式可参考如下FAQ：
	
FAQ202275485 A12上打开exfat的方式
(2023-05-08T09:22:54Z)

==== State: Opened by: waterworld on 08 May 2023 17:14:08 ====

如刚刚电话沟通,请帮忙确认下CONFIG_EXFAT_FS关闭之后,SD卡默认用的是什么文件系统的.

客户主要是想确认,哪些文件系统需要向微软授权,哪些不需要.

==== State: NeedInfo by: cmadmin on 06 May 2023 11:05:38 ====

  == Jianhua.Jiao@unisoc.com On 2023-05-06T03:04:58Z (json) ==
是的。这个宏 CONFIG_EXFAT_FS
(2023-05-06T02:52:56Z)

==== State: Opened by: waterworld on 06 May 2023 10:45:48 ====

如果有版权要求，但是没有获取到授权，那是不是软件上得关闭exfat呢

==== State: NeedInfo by: cmadmin on 05 May 2023 18:31:11 ====

  == Jianhua.Jiao@unisoc.com On 20230505T10:29:10 (xml) ==
看出货地区有没有版权要求
(20230505T09:41:27)

==== State: Opened by: waterworld on 05 May 2023 17:38:49 ====

那如果没有取得版权是不是就要把这个支持exfat默认关闭？

==== State: NeedInfo by: cmadmin on 05 May 2023 16:28:45 ====

  == Jianhua.Jiao@unisoc.com On 2023-05-05T08:27:59Z (json) ==
exfat平台软件默认有打开支持，超过32GB就要使用。exfat是微软的版权，如果出货地区有版权要求，就向微软取得授权
(2023-05-05T06:56:19Z)

==== State: Opened by: waterworld on 05 May 2023 16:21:23 ====

请问下使用exFat文件系统，是平台的系统吗，只要超过32GB都会使用吗？
另外向微软授权，软件需要添加什么信息吗？
不是很清楚，请帮忙解释一下，谢谢！

==== State: NeedInfo by: cmadmin on 05 May 2023 14:56:31 ====

  == Jianhua.Jiao@unisoc.com On 2023-05-05T06:56:19Z (json) ==
硬件最大支持2TB，32GB以上的SD卡使用exFat文件系统，需要客户向微软申请授权
(2023-05-05T04:31:13Z)
|
# SPCSS01164736|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]在测试DC Api时，出现dump现象，请帮忙分析一下是什么导致的，谢谢！
步骤：

现象：

分析：
|
==== State: NeedInfo by: cmadmin on 10 May 2023 13:30:15 ====

Dear Customer:
  We need more information with this Issue, please renew and reopen it.(20230510T04:58:53)
Thank you.
(20230510T04:58:53)

==== State: Opened by: waterworld on 10 May 2023 11:58:03 ====

好的，我反馈给客户了

==== State: NeedInfo by: cmadmin on 10 May 2023 11:38:56 ====

  == zhongping.shi@unisoc.com On 2023-05-10T03:36:28Z (json) ==
你把队列大小搞大点试试，8太小了，改成30或者50试试
(2023-05-10T02:50:36Z)

==== State: Opened by: waterworld on 10 May 2023 10:44:35 ====

DC_APP_TASK 是由客户自行创建的


==== State: NeedInfo by: cmadmin on 10 May 2023 09:58:54 ====

  == zhongping.shi@unisoc.com On 20230510T01:54:28 (xml) ==
DC_APP_TASK是谁创建的？
(20230509T17:36:12)

==== State: Opened by: waterworld on 09 May 2023 16:13:58 ====

Dear Unisoc,
    如沟通，提供注释语句后的log。

==== State: Opened by: waterworld on 09 May 2023 15:41:25 ====

1. 此问题是必现的；
2. 注释之后同样面临死机问题；

3. 请问是否需要log？


==== State: NeedInfo by: cmadmin on 09 May 2023 11:10:52 ====

  == Ruiqi.Zhang@unisoc.com On 2023-05-09T03:07:32Z (json) ==
comment 9的死机，也是charge.c出现问题，还是先做一下实验：
1.此问题是否必现？
2.请将charge.c里把下面这句代码注释掉，来看下是否复现该问题，此测试的目的是看下是否发消息的动作仅与charge task有耦合。


SCI_SendEventToClient (DC_ALERTS_SERVICE,DC_ALERTS_MSG_VBAT_TEMPERATURE_EXCEPTION, 0);

-000|TXAS_SaveMainReg(
    |  ?,
    |    cur_lr = 0x402E2000,
    |    cur_pc = 0x3F)
    |
-001|TXAS_SystemAssert(
    |  ?,
    |    file = 0x81036F88,
    |    line = 828,
    |    assert_info_ptr = 0x0)
    |  assert_mode = 1
    |  cur_sp = 2190902472
    |  cur_lr = 2164511825
    |  cur_pc = 2168879052
    |
3499|
-002|SCI_SendSignal(
    |    signal_ptr = 0x83DE3628,
    |  ?)
    |  status = 11
    |  err_str = (65, 83, 83, 69, 82, 84, 58, 32, 69, 114, 114, 111, 114, 32, 48, 120, 98, 44, 84, 104, 1
    |
 828|
-003|SCI_SendEventToClient(
    |  ?,
    |    ui_event_type = 1,
    |    signal_ptr = 0x0)
    |  m_client = 0x83DE75A8
    |  server_ptr = 0x83DE5334
    |
 695|
-004|CHGMNG_VbatMonitorRoutine()
    |
1431|
-005|CHGMNG_SrvThread(
    |  ?,
    |  ?)
    |  signal = 0x83DD7148
    |
 560|
 ---|end of frame
(2023-05-09T02:44:13Z)

==== State: Opened by: waterworld on 09 May 2023 10:37:47 ====

Dear Unisoc,
    请看重新反馈的Dump问题log（crashWithChangesSVN22603.7z）请帮忙分析一下，是否还是charge.c文件下的SCI_SendEventToClient 问题，谢谢

==== State: NeedInfo by: cmadmin on 08 May 2023 15:04:50 ====

  == Ruiqi.Zhang@unisoc.com On 20230508T07:04:27 (xml) ==
1.此问题是否必现？
2.请将charge.c里把下面这句代码注释掉，来看下是否复现该问题，此测试的目的是看下是否发消息的动作仅与charge task有耦合。
SCI_SendEventToClient (DC_ALERTS_SERVICE,DC_ALERTS_MSG_VBAT_TEMPERATURE_EXCEPTION, 0);
(20230506T11:25:07)

==== State: Opened by: waterworld on 06 May 2023 18:42:27 ====

Dear Unisoc, 
    Jio 的说明如下，
[Jio] This Scenario of calling jdc_client_getAllCellularInfo when the sim card is not part of DC application validation.

The behaviour of the DC app will be like this:

At bootup (after starting the DC app), the app will register for radio notification and wait for the device to latch to the network ( JDC_CB_EVENT_FULLSERVICE). Once latches (received JDC_CB_EVENT_FULLSERVICE ), the App will continue to perform its functionalities and call further jdc_client API.

If the sim card is not there, then the DC app will not get this Full-service notification and DC app will be waiting indefinitely for the device to latch.

Note:  Since we didn’t have support for radio notifications on earlier DC API releases, To validate the DC app behaviour, Once the DC app started, we are waiting for 1 minute, and by that time device will be latching to the network and we are proceeding to validate the DC app behaviour and DC API validation.

  那么请问一下，SCI_SendEventToClient 此功能是否由函数 jdc_client_getAllCellularInfo 调用后产生崩溃？（函数jdc_client_getAllCellularInfo 请查看附件 jdc_client_getAllCellularInfo.txt ）
  若不是，能否告知我们此函数被什么调用后产生的崩溃，谢谢您！

==== State: Opened by: waterworld on 06 May 2023 15:02:44 ====

Dear Unisoc，
  DC Api是什么测试？
    是基于平台的Data Collector功能。
  \chip_drv\chip_module\charge\charge.c 文件中的1431行发消息的是SCI_SendEventToClient，请看附件（001.png & 002.png），此功能是由CQ：SPCSS01069284，所交付的软件

==== State: NeedInfo by: cmadmin on 06 May 2023 13:48:15 ====

  == Tianyu.Yang@unisoc.com On 2023-05-06T05:47:00Z (json) ==
D:\DINESH\KW201\05022023\JPL_UNISOC_FS_KW201\chip_drv\chip_module\charge\charge.c
文件中的1431行发消息死的
2200                movs    r2,#0x0
2101                movs    r1,#0x1
2066                movs    r0,#0x66
F17BFDEE            bl      0x80BBD0E8       ; SCI_SendEventToClient
6828                ldr     r0,[r5]

这行在发什么消息？

==== State: NeedInfo by: cmadmin on 06 May 2023 13:48:14 ====

  == Tianyu.Yang@unisoc.com On 2023-05-06T05:42:19Z (json) ==
您好，DC Api是什么测试？
(2023-05-05T09:06:26Z)

==== State: Opened by: cmadmin on 05 May 2023 17:03:40 ====

  == zhongping.shi@unisoc.com On 2023-05-05T09:03:17Z (json) ==
请帮忙看下死机原因，谢谢。
-000|TXAS_SaveMainReg(
    |  ?,
    |    cur_lr = 0x402E2000,
    |    cur_pc = 0x3F)
    |
-001|TXAS_SystemAssert(
    |  ?,
    |    file = 0x81035C3C,
    |    line = 828,
    |    assert_info_ptr = 0x0)
    |  assert_mode = 1
    |  cur_sp = 2190902472
    |  cur_lr = 2164506885
    |  cur_pc = 2168880716
    |
3499|
-002|SCI_SendSignal(
    |    signal_ptr = 0x83DD7190,
    |  ?)
    |  status = 11
    |  err_str = (65, 83, 83, 69, 82, 84, 58, 32, 69, 114, 114, 111, 114, 32, 48, 120, 98, 44, 84, 104, 1
    |
 828|
-003|SCI_SendEventToClient(
    |  ?,
    |    ui_event_type = 1,
    |    signal_ptr = 0x0)
    |  m_client = 0x83E05314
    |  server_ptr = 0x83DE5388
    |
 695|
-004|CHGMNG_VbatMonitorRoutine()
    |
1431|
-005|CHGMNG_SrvThread(
    |  ?,
    |  ?)
    |  signal = 0x83DD7148
    |
 560|
 ---|end of frame

==== State: Opened by: cmadmin on 05 May 2023 13:40:55 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164719|[6部遵义][HMD][TRALNA-2373]Unable to check voice mail spooler icon in 2G/3G scenario since call forwarding to voice mail settings when busy is not able to activate on DuT
步骤：
A.- Overview Description (technical background, concise explanation of the bug):

Unable to check voice mail spooler icon in 2G/3G scenario since call forwarding to voice mail settings when busy is not able to activate on DuT
________________________________________________________________________________
B.- Steps to Reproduce (initial conditions, required resources, step by step instructions to reproduce):

PRECONDITIONS:
1. DuT with Telefonica local SIM inserted and connected to the network ready to receive MT calls and able to configure voicemail. 
2. Ref = other Handset ready to make MO calls.
3. Enable voicemail on DuT (dial the correct number, e.g. 1750 in UK, *555 in BR, etc.).
 

DESCRIPTION:
1. Make a call (Ref->DuT) and don’t answer on DuT. Record a new voicemail. Check if a notification (this is called "spooler icon", since it is usually an icon that is different from from the "new SMS" icon, it usually looks like an audio tape and requires communication between the voicemail server and the device) is shown and if any distinctive tone is played on DuT. 
2. Make a call (Ref->DuT) and reject the call on DuT. Record a new voicemail. Check if the notification is shown or any distinctive tone is played on DuT.
3. Access the voicemail on DuT. Listen to new voicemails. Check if the notification is removed on DuT.
4. Disable voicemail on DuT (dial the correct number, e.g. 1760 in UK, etc.). 
 

ADDITIONAL INFO:
1. If no notifications are shown after a new voicemail on DuT -> Raise P1 defect.
2. If voicemail cannot be enabled or disabled -> Raise a P1 defect (check first this is not a SIM issue by enabling/disabling voicemail on a reference device).
3. If notifications can be removed by the user and are not shown again on DuT -> Raise P2 defect. 
4.If notifications are not removed automatically after calling voicemail on DuT and listening to all messages -> Raise a P3 defect.

________________________________________________________________________________
C.- Actual Result (current bad behaviour that is reported as a bug):
SW: 10.0.0.11.02

Unable to check voice mail spooler icon in 2G/3G scenario since call forwarding to voice mail settings when busy is not able to activate on DuT. So voice mail spooler icon test case is not possible. 
But call forwarding worked on the reference device and is able to see the voice mail spooler icon.
________________________________________________________________________________
D.- Expected Result (correct behaviour wished):

EXPECTED RESULT:
1. A notification is shown and a distinctive tone is played on DuT. Notification cannot be removed by user interaction without listening to the voicemail.
2. A notification is shown and a distinctive tone is played on DuT. Notification cannot be removed by user interaction without listening to the voicemail.
3. Notification should be removed automatically 10 minutes after listening to all new voicemails. 
    If not, call voicemail number, check there are no new voicemails and end the call. 
    Note on comments section if a call to voicemail number was required to clear the notification. 
现象：

分析：
|
==== State: NeedInfo by: cmadmin on 05 May 2023 15:48:16 ====

  == Melody.Yang@unisoc.com On 20230505T07:46:08 (xml) ==
客户你好

如电话沟通，麻烦提供当前问题的操作视频以及对比机pass log

# SPCSS01164708差异待确认
(20230505T05:53:00)

==== State: Opened by: cmadmin on 05 May 2023 13:35:25 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS01164710|[SC9832E][Waterworld][A507-SC9832E-A13][14037][Other]在CTS_VERIFIER 里面出现Audio Loopback Latency Test项测试不通过。其中第二项 Headset jack在其他机器测试pass，第一第三项一直fail，切显示no Results。
步骤：Suite / Plan CTS_VERIFIER / verifier 
Suite / Build 13_r3 / 0 


现象：请看测试截图


分析：上传了测试fail的截图与log，请帮忙看下
|
==== State: NeedInfo by: cmadmin on 10 May 2023 15:06:30 ====

  == Alex.Lv@unisoc.com On 20230510T07:05:01 (xml) ==
您好，
1. 自带供电的otg转接线，贵司网上查一查，有点像是个“Y”形线路。一头连otg，一头接电源。另外一头接host侧。

2.
9863A也不支持usb hub。

谢谢
(20230510T03:40:06)

==== State: Opened by: waterworld on 10 May 2023 11:35:08 ====

Dera unisoc：
  确实是因为供电不够，所以使用了外接的usb hub，请问一下带外部电源供电口的otg转接线应该是什么样子，另外9863A平台是否支持usb hub的使用。

==== State: NeedInfo by: cmadmin on 09 May 2023 20:15:07 ====

  == Alex.Lv@unisoc.com On 2023-05-09T12:14:29Z (json) ==
dear customer，

贵司为何要使用usb hub？ 从log里看到了usb2.0 hub的使用。我司9320E平台是不支持usb hub的。
如果是因为供电驱动能力问题，驱动不起来这个audiobox，那么请使用带外部电源供电口的otg转接线对audiobox供电。

Line 6094: 04E1A < 6> [  487.541914] [05-04 19:17:17.541] usb 1-1: Product: USB2.0 Hub 


谢谢

\loopback\ylog\ap\000-0504_191116\0-kernel.log：
        ..............
	Line 5473: 04BAD < 6> [  465.933066] [05-04 19:16:55.933] sc27xx-typec 40380000.spi:pmic@0:typec@380: now works as DRP and is in 5 state, event 1
	Line 5474: 04BAE < 6> [  465.933182] [05-04 19:16:55.933] musb-sprd 20200000.usb: sprd_musb_work enter!
	Line 5479: 04BB3 < 6> [  466.140274] [05-04 19:16:55.140] musb-sprd 20200000.usb: sprd_musb_enable:HOST ENABLE 99
	Line 5480: 04BB4 < 6> [  466.140310] [05-04 19:16:55.140] musb-sprd 20200000.usb: enter into resume mode
	Line 5481: 04BB5 < 6> [  466.140349] [05-04 19:16:55.140] musb-sprd 20200000.usb: is running as HOST
	Line 6037: 04DE1 < 6> [  485.777461] [05-04 19:17:15.777] sprd-hsphy 20e00000.hsphy: USB PHY is host mode
	Line 6038: 04DE2 < 6> [  485.777474] [05-04 19:17:15.777] musb-sprd 20200000.usb: musb_sprd_vbus_notifier event:1!
	Line 6039: 04DE3 < 6> [  485.777483] [05-04 19:17:15.777] musb-sprd 20200000.usb: ignore device connection detected from VBUS GPIO.
	Line 6085: 04E11 < 6> [  487.360289] [05-04 19:17:17.360] usb 1-1: new high-speed USB device number 2 using musb-hdrc
	Line 6092: 04E18 < 6> [  487.541894] [05-04 19:17:17.541] usb 1-1: New USB device found, idVendor=2109, idProduct=2815, bcdDevice= 7.04
	Line 6093: 04E19 < 6> [  487.541905] [05-04 19:17:17.541] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
	Line 6094: 04E1A < 6> [  487.541914] [05-04 19:17:17.541] usb 1-1: Product: USB2.0 Hub    //<<存在usb hub， 而9320E平台，并不支持usb hub！         
	Line 6095: 04E1B < 6> [  487.541922] [05-04 19:17:17.541] usb 1-1: Manufacturer: VIA Labs, Inc.         
	Line 6096: 04E1C < 6> [  487.543802] [05-04 19:17:17.543] hub 1-1:1.0: USB hub found
	Line 6121: 04E35 < 6> [  488.280280] [05-04 19:17:18.280] usb 1-1.1: new high-speed USB device number 3 using musb-hdrc
	Line 6126: 04E3A < 6> [  488.461162] [05-04 19:17:18.461] usb 1-1.1: New USB device found, idVendor=194f, idProduct=0303, bcdDevice= 1.12
	Line 6127: 04E3B < 6> [  488.461175] [05-04 19:17:18.461] usb 1-1.1: New USB device strings: Mfr=1, Product=2, SerialNumber=3
	Line 6128: 04E3C < 6> [  488.461183] [05-04 19:17:18.461] usb 1-1.1: Product: AudioBox USB 96
	Line 6129: 04E3D < 6> [  488.461191] [05-04 19:17:18.461] usb 1-1.1: Manufacturer: PreSonus
	Line 6130: 04E3E < 6> [  488.461198] [05-04 19:17:18.461] usb 1-1.1: SerialNumber: 000000000000
	Line 6133: 04E41 < 7> [  488.468929] [05-04 19:17:18.468] probe of 1-1.1:1.0 returned 1 after 5261 usecs
	Line 6134: 04E42 < 3> [  488.472304] [05-04 19:17:18.472] snd-usb-audio 1-1.1:1.0: control 2:0:0:USB_AUD_OFLD_P_EN:0 is already present
	Line 6135: 04E43 < 3> [  488.472317] [05-04 19:17:18.472] usb 1-1.1: cannot add control.
	Line 6198: 04E82 < 3> [  490.753846] [05-04 19:17:20.753] snd_usb_endpoint_start unknown pcm format 10
	Line 6199: 04E83 < 6> [  490.753853] [05-04 19:17:20.753] snd_usb_endpoint_start channels = 2, is stereo, pcm 16bit
	Line 6200: 04E84 < 6> [  490.753858] [05-04 19:17:20.753] sprd_usb_audio_offload_check usb stream=playback, enter offload mode 0
(2023-05-09T07:28:30Z)

==== State: Opened by: waterworld on 09 May 2023 11:18:57 ====

请看视频和log

==== State: NeedInfo by: cmadmin on 09 May 2023 11:13:18 ====

  == yi.cao@unisoc.com On 20230509T03:12:03 (xml) ==
hi,
    先不敲这个显示时间的，按上条comment描述的测试下，提供下相关信息
(20230509T02:38:26)

==== State: Opened by: waterworld on 09 May 2023 10:33:39 ====

BUZZ_4Lite:/ $ pm enable com.android.systemui/com.android.systemui.tuner.TunerActivity

Exception occurred while executing 'enable':
java.lang.SecurityException: Shell cannot change component state for ComponentInfo{com.android.systemui/com.android.systemui.tuner.TunerActivity} to 1
        at com.android.server.pm.PackageManagerService.setEnabledSettings(PackageManagerService.java:3814)
        at com.android.server.pm.PackageManagerService.-$$Nest$msetEnabledSettings(Unknown Source:0)
        at com.android.server.pm.PackageManagerService$IPackageManagerImpl.setComponentEnabledSetting(PackageManagerService.java:5668)
        at com.android.server.pm.PackageManagerShellCommand.runSetEnabledSetting(PackageManagerShellCommand.java:2363)
        at com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:270)
        at com.android.modules.utils.BasicShellCommandHandler.exec(BasicShellCommandHandler.java:97)
        at android.os.ShellCommand.exec(ShellCommand.java:38)
        at com.android.server.pm.PackageManagerService$IPackageManagerImpl.onShellCommand(PackageManagerService.java:6063)
        at android.os.Binder.shellCommand(Binder.java:1049)
        at android.os.Binder.onTransact(Binder.java:877)
        at android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4332)
        at com.android.server.pm.PackageManagerService$IPackageManagerImpl.onTransact(PackageManagerService.java:6047)
        at android.os.Binder.execTransactInternal(Binder.java:1286)
        at android.os.Binder.execTransact(Binder.java:1244)

使用pm enable com.android.systemui/com.android.systemui.tuner.TunerActivity命令会有如上报错

==== State: NeedInfo by: cmadmin on 06 May 2023 14:20:56 ====

  == yi.cao@unisoc.com On 20230506T06:20:11 (xml) ==
hi, customer
    请合入附件debug patch（路径是/hardware/libhardware/modules/usbaudio/），按如下命令打开状态栏中的时分秒显示，用另一台手机拍一下单独测试usb项的测试过程以及测试结果，重新抓一下ylog和dump（测试完后dump在/data/vendor/local/media/下，usb_hal_in.pcm和usb_hal_out.pcm），另外，请在安静的环境中测试

adb root
adb remount
adb shell
pm enable com.android.systemui/com.android.systemui.tuner.TunerActivity
am start -n com.android.systemui/com.android.systemui.tuner.TunerActivity
在弹出的界面中选择状态栏--时间--显示时分秒
(20230505T12:06:48)

==== State: Opened by: waterworld on 05 May 2023 17:42:42 ====

已重新上传

==== State: NeedInfo by: cmadmin on 05 May 2023 17:39:58 ====

  == Jen.Li@unisoc.com On 2023-05-05T09:37:20Z (json) ==
hi customer

下午修改后上传了测试第三项失败的log吗，这边没有看到，请重新上传，谢谢
(2023-05-05T08:25:13Z)

==== State: Opened by: waterworld on 05 May 2023 16:22:46 ====

Dear unisoc:
  项目不带副mic，修改之后第一项测试pass了，目前剩余第三项fail，请继续帮忙看下，目前测试时，点击start，3秒后就fail了，上传了ylog与测试结果照片。

==== State: NeedInfo by: cmadmin on 05 May 2023 13:22:40 ====

  == Jen.Li@unisoc.com On 20230505T05:21:57 (xml) ==
hi customer,

你们项目是否有副MIC，如没有请按照下面将副MIC配置删除后测试，谢谢

请把device/sprd/mpool/module/odm/audio/msoc/芯片名称/system/etc/audio_policy_config/primary_audio_policy_configuration.xml中的Built-In Back Mic相关内容全部删掉，重新测试下，如有问题，请再提供下ylog
(20230505T03:33:02)
|
# SPCSS01164708|[6部遵义][HMD][TRALNA-2372]Unable to check voice mail spooler icon in VoLTE scenario since call forwarding to voice mail settings when busy is not able to activate on DuT
步骤：
A.- Overview Description (technical background, concise explanation of the bug):

Unable to check voice mail spooler icon in VoLTE scenario since call forwarding to voice mail settings when busy is not able to activate on DuT
________________________________________________________________________________
B.- Steps to Reproduce (initial conditions, required resources, step by step instructions to reproduce):

PRECONDITIONS
DUT = VoLTE registered UE
REF = Non-IMS capable UE attached to 3G/2G
 

DESCRIPTION                                                              
1. Enable 'Call Forwarding Conditional - User Busy' on DUT 1 to voicemail centre i.e. 901.  
2. Place a call from REF to DUT.
3. Reject the call on DUT and verify successful voicemail redirection on REF. 
4. Deposit a voicemail for DUT via REF.
 

ADDITIONAL INFO: 
For UK: 
This TC is not applicable for TESCO IMS Sanity check, set the test case as “N/A” and include the following comment in T4U: “Not requested by OB for TESCO IMS Sanity testing”.
  

________________________________________________________________________________
C.- Actual Result (current bad behaviour that is reported as a bug):
SW: 10.0.0.11.02

Unable to check voice mail spooler icon in VoLTE scenario since call forwarding to voice mail settings when busy is not able to activate on DuT.
But call forwarding worked on the reference device (HMD G10) and was able to see the voice mail spooler icon. But the user is able to deactivate/delete the number from the G10 reference device. When we tried to activate it again on the reference device, it failed to do so. But it was set to voice mail number when busy by default on G10 device and it successfully shows the voice mail spooler icon and message retrieved successfully.
________________________________________________________________________________
D.- Expected Result (correct behaviour wished):

EXPECTED RESULTS
Verify successful voicemail notification and retrieval on DUT.
现象：

分析：
|
==== State: NeedInfo by: cmadmin on 05 May 2023 15:42:03 ====

  == Melody.Yang@unisoc.com On 20230505T07:40:34 (xml) ==
客户你好

如电话沟通，麻烦提供当前问题的操作视频以及对比机pass log
(20230505T07:36:35)

==== State: Opened by: cmadmin on 05 May 2023 13:35:18 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
