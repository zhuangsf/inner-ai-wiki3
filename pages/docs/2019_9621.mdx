# SPCSS00562782|[SL8521E][Waterworld][AD119]通过蓝牙一键快联wifi|
现在基于这个版本MOCOR5_SFPHONE_17F_RLS1_W18.52.5_P1
通过蓝牙一键快联wifi
如果有patch请提供或者源码已经包含  说明整个操作流程|
==== State: Closed by: cmadmin on 19 April 2019 00:35:25 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 28 March 2019 17:11:49 ====

  == Xiang.Qiu@unisoc.com On 20190328T08:54:41 (xml) ==
Dear customer,
   如电话沟通，新的方案比较稳定

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:蓝牙一键快联dhcp 不稳定

[2.Resolution        ]:将DHCP移到网络管理模块



==== State: Opened by: cmadmin on 25 March 2019 16:17:46 ====

  == Peiyong.Feng@unisoc.com On 2019-03-25T08:17:04Z (json) ==
dear customer,

提醒一下：

上述第二条中的enrollee配置参数不要从直接从邮件里面copy（邮件里面不是纯文本，会导致enrollee识别不了配置参数）。一定要保证配置参数为纯文本，最好用文本编辑器打开init.rc文件，手动修改。

==== State: Opened by: cmadmin on 25 March 2019 15:45:14 ====

  == Xiang.Qiu@unisoc.com On 2019-03-25T07:39:09Z (json) ==
Dear customer,
新的wifi快联方案需要配合网络管理模块来使用，
网络管理使用方法详细请参考贵公司提的另一个CQ SPCSS00555329
附件提供了最新的code

ConnectivityServiceDemo.zip是consrvdemo的源码


测试方法：
按照之前wifi蓝牙快联的方式测试

note:需要修改device/sprd/sharkle/sl8521e_3h10/rootdir/root/init.sl8521e_3h10.rc
1.加入 consrvdemo需要加到
service consrvdemo /system/bin/consrvdemo
    class main
    user root
    group root

2.修改enrollee的启动参数为
/vendor/bin/enrollee -I 100 -g@sniffer –D 90 -K 10 -K 228 -t 2 -p key.txt

3. 删除app_demo
------#service app_demo /system/bin/app_demo -a /dev/ttyGS1
------#    class main
------#    user root
------#    group root
------#    oneshot

consrvdemo可以用这个附件中的，也可以用源码编译，参考 CQ SPCSS00555329

==== State: Opened by: waterworld on 12 March 2019 17:27:00 ====

Dear 展讯：
一直处于正在连接中，附件66.png是adb 信息，ReceivedTofile-COM8-2019_3_12_16-07-53.DAT是串口打印。
slog_ble_wifi.tar.gz是slog

==== State: NeedInfo by: cmadmin on 12 March 2019 10:31:15 ====

  == lidf0428@spreadst.com On 20190312T02:28:30 (xml) ==
Dear Customer;

经电话联系，此cq还未验证，您需要去确认另一个一键快联的问题。
若您没有时间验证此cq,请先帮忙关闭此CQ，
待后续您验证有疑问时，在重提CQ。

thanks！

==== State: NeedInfo by: cmadmin on 08 March 2019 13:55:28 ====

  == lidf0428@spreadst.com On 2019-03-08T05:44:50Z (json) ==
Dear Customer；

蓝牙手机端apk已上传至ftp，请安装在android8.1以上的机器使用。

使用方法：
1、打开apk。
2、8521e进行 adb root， 在执行bt_test bin文件。
3、依次输入 1，3,4,5 命令。
4、手机apk点击搜索，在点击搜索到的8521e设备进行连接
5、连接成功后，手机侧发送ssid和psk。

以上为蓝牙的流程。
请悉知。

手机端apk和8521e上的bt_test仅用于验证蓝牙一键快联wifi的samplecode。不能直接进行商用。
请悉知。
(2019-03-08T04:14:20Z)

==== State: Opened by: cmadmin on 08 March 2019 12:14:07 ====

  == caich0625@spreadst.com On 2019-03-08T04:11:44Z (json) ==
尊敬的客户，
您好。

如电话沟通，

1.airkiss-driver侧patch.rar请按照对应patch合入到项目代码中，
2.enrollee.rar解压出的enrollee替换掉vendor/sprd/modules/wlan/smartconfig/enrollee即可。

所有patch合入后编译版本验证即可，如您提到蓝牙需要直接提供apk及操作说明。稍候会提供给您对应蓝牙apk和操作说明。

感谢！

==== State: Opened by: cmadmin on 08 March 2019 11:42:47 ====

  == lidf0428@spreadst.com On 20190308T03:36:14 (xml) ==
Dear Customer；

请ble.tar.xz解压，
1、将bttest放置源码下编译，将编译出的bt_test文件push进8521e的单板中。执行bt_test,依次执行 
   1,3,4,5命令。
2、将BleClient使用androidStudio编译apk，安装进手机，搜索连接8521e。发送ssid和psk给8521e即 
   可

配网方便，请wifi帮忙向客户说明。

Thanks！

==== State: Opened by: waterworld on 07 March 2019 19:36:40 ====

Dear 展讯：
有四个附件，都需要吗？
airkiss-driver侧patch  和 ble.tar.xz  是放在那里？怎么编译的？   还有放到板子上如何使用的

==== State: NeedInfo by: cmadmin on 07 March 2019 18:37:31 ====

  == Mingwen.Chen@unisoc.com On 2019-03-07T10:33:05Z (json) ==
Dear customer
    patch已放入附件PatchesForCUS 中，请麻烦验证下
(2019-03-07T10:01:57Z)

==== State: Opened by: cmadmin on 06 March 2019 09:52:20 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562765|[SC7715][Waterworld][FS331][6部]系统当前时间为3：42，若设置闹钟时间为3:40后，进入设置，修改系统时间为3:38，到点后闹钟不会响起|步骤：系统当前时间为3:38，设置闹钟时间为3:40，时间到是闹钟正常响起
        
        
现象：系统当前时间为3：42，若设置闹钟时间为3:40后，进入设置，修改系统时间为3:38，到点后闹钟不会响起。桌面显示闹钟将于响起。


分析：请帮忙分析修改，附件“闹钟问题.zip”为对应log，
|
==== State: Closed by: waterworld on 08 March 2019 13:49:02 ====

问题关闭

==== State: Resolved by: cmadmin on 06 March 2019 16:39:10 ====

  == Anthony.Chen@unisoc.com On 2019-03-06T08:32:51Z (json) ==
姚工您好，

如电话沟通，samplecode验证通过，这边fix
后续有任何问题请及时联系，或另提CQ进行跟踪，
非常感谢

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:修改系统时间后，instance时间未更新

[2.Resolution        ]:修改系统时间后，删除旧的instance，重写instance时间



==== State: Opened by: waterworld on 06 March 2019 14:59:34 ====

dear sprd:
       合入修改后验证ok,问题可关闭

==== State: Opened by: cmadmin on 05 March 2019 20:19:19 ====

  == Anthony.Chen@unisoc.com On 2019-03-05T12:16:21Z (json) ==
姚工您好，

附件中添加了samplecode，地址是ftp://ftp.unisoc.com/SPCSS/2019-1/SPCSS00562765/PatchesForCUS/
麻烦帮忙在贵司机器上合入验证一下，看是否达到预期
非常感谢

==== State: Opened by: cmadmin on 05 March 2019 19:46:24 ====

Dear Customer:
 The Issue is under processing now.
Thank you


==== State: Submitted by: waterworld on 05 March 2019 19:14:09 ====

dear sprd;
        DeskClock.zip附件已上传，请帮忙分析修改，谢谢。

==== State: Submitted by: cmadmin on 05 March 2019 19:09:00 ====

  == Anthony.Chen@unisoc.com On 20190305T11:03:57 (xml) ==
尊敬的客户您好，

如电话沟通，本地没有7715的机器和代码，还需要您帮忙上传贵司deskclock的代码，方便这边check
非常感谢
|
# SPCSS00562674|[SC9863A][Waterworld][FS168][TRX][XM]帮忙看下附件《软件是否支持这些功能.docx》的内容，哪些是支持的，哪些是不支持的？|帮忙看下附件《软件是否支持这些功能.docx》的内容，哪些是支持的，哪些是不支持的？

谢谢！|
==== State: Closed by: waterworld on 06 March 2019 11:19:20 ====

您好，客户说已经知道结果了，关闭吧
谢谢！

==== State: NeedInfo by: cmadmin on 05 March 2019 20:44:56 ====

  == lidf0428@spreadst.com On 2019-03-05T12:43:33Z (json) ==
Dear Customer；

请帮忙和您的客户确认如下是需要支持什么功能。

-advanced Bluetooth features as well as improved copy and paste function

Thanks！
(2019-03-05T11:44:08Z)

==== State: Opened by: cmadmin on 05 March 2019 19:42:22 ====

  == lidf0428@spreadst.com On 2019-03-05T11:37:51Z (json) ==
Dear Customer;

经电话沟通，请帮忙和您客户确认如下是要支持什么样的功能。

Thanks！

-advanced Bluetooth features as well as improved copy and paste function

==== State: Opened by: cmadmin on 05 March 2019 16:18:16 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562671|[SC9863A][Waterworld][FS168]【TCL】【Auto Focus】AF Time测试过程中，20lux 3m存在还未对焦成功时，对焦框消失，然后大步拉伸后，秀绿框的情况|【Auto Focus】AF Time测试过程中，20lux 3m存在还未对焦成功时，对焦框消失，然后大步拉伸后，秀绿框的情况,附件是视频

有疑问可以直接电话现场吕婷：15989477706，或者你们tunning同事Jacky.Huang|
==== State: Closed by: cmadmin on 30 March 2019 00:34:29 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 08 March 2019 18:38:12 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
更新af库后，问题解决
Solution:
更新af库后，问题解决

==== State: Opened by: waterworld on 08 March 2019 15:12:13 ====

已经解决，谢谢支持

==== State: Opened by: waterworld on 07 March 2019 17:16:41 ====

请问这个问题怎么样了

==== State: Opened by: waterworld on 07 March 2019 09:35:07 ====

# SPCSS00562671.rar里面有log和视频

==== State: NeedInfo by: cmadmin on 06 March 2019 14:08:26 ====

  == tangchao@spreadst.com On 2019-03-06T06:04:11Z (json) ==
Dear customer :
   如电话沟通，请及时提供userdebug版本的ylog 
   谢谢
(2019-03-05T11:55:46Z)

==== State: Opened by: waterworld on 05 March 2019 19:52:26 ====

附件是视频：Farady 20lux 3m.MOV，log后面再提供

==== State: NeedInfo by: cmadmin on 05 March 2019 18:10:12 ====

  == chencs@spreadst.com On 2019-03-05T10:05:08Z (json) ==
Dear customer :
   请提供一份userdebug版本的ylog  以及一份视屏
   谢谢
(2019-03-05T07:47:46Z)

==== State: Opened by: cmadmin on 05 March 2019 16:05:56 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562664|[SC9820E][Waterworld][A355]【1部】【TCL】【KAIOS】【P1的O2/EE/TIM/orange/optus 的vowifi参数】|Dear:

      我司SC9820E平台KAIOS系统项目A355,需要贵司协助 合入O2/EE/TIM/orange/optus 的vowifi参数，烦请支持，谢谢|
==== State: Closed by: cmadmin on 03 April 2019 00:34:49 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 12 March 2019 16:42:20 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]: Need to support new operators 

[2.Resolution        ]: Added support for new operators



==== State: Opened by: cmadmin on 12 March 2019 10:44:38 ====

  == Katrina.Tseng@unisoc.com On 2019-03-12T02:38:06Z (json) ==
更正下：
Italy TIM 运营商未支持Vowifi， Italy TIM 不需配置Vowifi 参数

==== State: Opened by: cmadmin on 05 March 2019 15:36:31 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562660|[SC6531E][Waterworld][FF122_6][6部 遵义]目前6531E没有做过64X64的三卡软件，请帮忙提供下三卡库文件，谢谢！|步骤：

现象：

分析：
|
==== State: Closed by: cmadmin on 30 March 2019 00:34:30 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 08 March 2019 11:26:12 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

[1.Root Cause        ]:
帮忙提供下三卡库文件
[2.Resolution        ]:
合入附件库验证


==== State: Opened by: cmadmin on 08 March 2019 09:00:58 ====

  == Andrew.Kao@unisoc.com On 20190308T00:46:40 (xml) ==
你好，

之后若有其他问题，请另开一笔CQ询问，
我们会尽快分析与反馈。谢谢！
N2AInBug


==== State: NeedInfo by: cmadmin on 07 March 2019 10:08:44 ====

  == Andrew.Kao@unisoc.com On 20190307T02:04:45 (xml) ==
Dear customer:
  请及时反馈问题状态，问题是否已经解决？如无问题，可以关闭该问题。谢谢。
thanks

==== State: NeedInfo by: cmadmin on 05 March 2019 16:18:04 ====

  == Andrew.Kao@unisoc.com On 20190305T08:02:25 (xml) ==
你好,
请合入附件库验证.  谢谢
(20190305T07:34:12)

==== State: Opened by: cmadmin on 05 March 2019 15:51:21 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562659|[SC7731E][Waterworld][WW835_V7.3][18部]WW835 7731E之前有优化过双方同时说话时听不到对方说话内容，但客户一直抓着此问题不放，麻烦再优化一下。|步骤：

现象：

分析：
|
==== State: Closed by: cmadmin on 04 April 2019 00:34:43 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 06 March 2019 16:50:44 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
RootCause:
调试完毕，参数见附件。
这种压制回音后造成双工断续的问题之后还是要从结构入手，目前的参数只能说稍微做了点平衡，实际上还是有点断续的。
Solution:
调试完毕

==== State: Opened by: cmadmin on 05 March 2019 16:17:49 ====

  == Yang.Bai@unisoc.com On 20190305T08:09:15 (xml) ==
这个问题没有办法的，只能结构解决。如果贵司结构上能做到堵住mic上行响度和不堵住相差20dB以上，双工性能完全能保证。
否则此问题靠调参数无法解决。客户应该抓住贵司结构不放把，而不是抓着调参数不放。

==== State: Opened by: cmadmin on 05 March 2019 16:05:23 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562652|[SC9832E][Waterworld][FS097]六部客户，腾志FS097M11-T10 项目 Peru秘鲁 传导样机需求，请安排，谢谢！|硬件配置：
SC9832E+EMCP/DDR3(64Gb+8Gb)+GSM4+EDGE+WCDMA(B2/4/5/8)+LTE(B2/4/5/7/28AB)
提供8台样机，挑选6台样机。
脚本见附件。|
==== State: Closed by: cmadmin on 09 April 2019 00:35:03 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 11 March 2019 15:29:19 ====

  == xingqiang.li@unisoc.com On 20190311T07:25:42 (xml) ==
测试需求完成

Analysis and Solution:
RootCause:
测试需求完成
Solution:
无

==== State: Opened by: cmadmin on 11 March 2019 15:29:13 ====

  == xingqiang.li@unisoc.com On 20190311T07:25:21 (xml) ==
测试需求完成

==== State: Opened by: Xingqiang.Li on 11 March 2019 15:24:28 ====

DEAR
          8台样机挑选5台全部PASS， 报告如附件
           和戴工确认5台样品就可以，样机已交给贵公司戴工，请知晓，谢谢！

==== State: Opened by: cmadmin on 05 March 2019 16:05:16 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562649|[SC7731E][Waterworld][FS361][6部]BBAT 按键无法正常测试|步骤：

现象：

分析：|
==== State: Closed by: cmadmin on 02 April 2019 00:34:26 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 11 March 2019 09:06:50 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
更新工具配置已解决按键问题
Solution:
更新工具配置已解决按键问题

==== State: Opened by: waterworld on 08 March 2019 09:52:46 ====

已按定义接线 ，量按键电压正常，请求现场支持

==== State: Opened by: cmadmin on 05 March 2019 16:51:29 ====

  == Shigang.Tang@unisoc.com On 20190305T08:27:13 (xml) ==
刘工，请先按9820E接线定义接线，接完后再按照对应的自定义GPIO。谢谢

==== State: Opened by: waterworld on 05 March 2019 16:07:06 ====

唐工，如需要其他信息请尽快联系

==== State: Opened by: waterworld on 05 March 2019 15:47:57 ====

已上传fail log

==== State: Opened by: waterworld on 05 March 2019 15:42:22 ====

open ScriptFile success
-->INIT
-->KEYPAD_OPEN
-->PRESS_POWERKEY
Test pbint
-->KEYPAD_READ
Set:116, read:0
pbint pass
-->LOG KEY2
KEY2
-->AFCB_GPIO_OUT_0 A07
-->PHONE_GPIO_READ_0 66
gpio value 0 fail

==== State: Opened by: cmadmin on 05 March 2019 15:07:57 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562628|[SC7731E][Waterworld][FS280][六部][遵义]修改设置下二级菜单的字体大小,帮忙分析如何修改|步骤：

现象：

分析：
|
==== State: Closed by: waterworld on 08 March 2019 09:13:44 ====

谢谢

==== State: Resolved by: cmadmin on 07 March 2019 16:42:43 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
修改二级菜单下actionbar标题大小
Solution:
修改actionbar主题

==== State: Opened by: cmadmin on 06 March 2019 17:22:49 ====

  == wangjie0714@spreadst.com On 20190306T09:17:45 (xml) ==
尊敬的客户，您好：
   请合入如下patch验证，textSize大小请按照贵司要求改

diff --git a/res/values/themes.xml b/res/values/themes.xml
index f27bdfe..c60d914 100644
--- a/res/values/themes.xml
+++ b/res/values/themes.xml
@@ -213,8 +213,20 @@
 
     <style name="Theme.ActionBar" parent="@android:style/Widget.Material.ActionBar.Solid">
         <item name="android:contentInsetStart">@dimen/actionbar_contentInsetStart</item>
+        <item name="android:titleTextAppearance">@style/ActionBarTitleAppearance</item>
+        <item name="android:titleTextStyle">@style/ActionBarTitleStyle</item>
     </style>
 
+     <!-- Added Start -->
+    <style name="ActionBarTitleStyle" parent="@android:style/TextAppearance.Material.Widget.ActionBar.Title">
+       <item name="android:textSize">10dp</item>
+    </style>
+
+     <style name="ActionBarTitleAppearance" parent="@android:style/TextAppearance.Material.Widget.ActionBar.Title">
+         <item name="android:textSize">10dp</item>
+     </style>
+     <!-- Added End -->
+
     <style name="Theme.ActionBar.SubSettings" parent="Theme.ActionBar">
         <item name="android:contentInsetStart">@dimen/actionbar_subsettings_contentInsetStart</item>
     </style>
(END)

另外该方案只能修改设置页面中的actionbar，有些界面跳转的页面可能在其他的包里
可通过adb shell dumpsys activity | grep "mResumedActivity"
命令查看当前界面所在的应用包，
如果发现此类界面不能生效，请查看该界面属于的应用，需要在该应用中修改
有问题随时电话沟通
谢谢

==== State: Opened by: cmadmin on 06 March 2019 10:18:09 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562618|[SC9863A][Waterworld][FS168][XM][TCL][7394896]高速上测GPS的时候丢星次数过多|步骤：

接CQ：SPCSS00560162上的问题

在SPCSS00560162上按照之前给出的回复log信息是看出了只有一次丢星的情况，不过我们客户那边根据提供的NMEA文件看出了两个丢星情况
所以看下另外一次的丢星情况是怎么回事

客户操作:获取出NMEA 数据转KMZ文件在Goolge earth上分析结果

他们的分析结果已上传附件，
注:该项是block项，请尽快处理
现象：

分析：
|
==== State: Closed by: waterworld on 07 March 2019 15:26:14 ====

多谢支持,经分析该问题主要是第三方apk的问题,关闭该CQ

==== State: NeedInfo by: cmadmin on 06 March 2019 17:22:38 ====

  == eric.wf@unisoc.com On 20190306T09:13:55 (xml) ==
Dear customer,
    从log来看，这是com.baidu.BaiduMap自己的行为，18:16.761停止，直到10:18:58.162才再次请求，造成42s的时间没有位置上报。这种行为是baiduMap内部逻辑，Unisoc无法控制。
	Line 39754: M062F31 02-27 10:16:23.967   879  4999 D LocationManagerService: request 97fd1a gps Request[ACCURACY_FINE gps requested=+1s0ms fastest=+1s0ms lowPowerMode=false] from com.baidu.BaiduMap(10125 foreground)
	Line 42098: M063854 02-27 10:16:28.911   879  2286 D LocationManagerService: getLastLocation: Request[ACCURACY_FINE gps requested=0 fastest=0 num=1 lowPowerMode=false]
	Line 96896: M070ACD 02-27 10:18:16.761   879  5011 I LocationManagerService: remove 97fd1a
	Line 113630: M074BC3 02-27 10:18:58.162   879  9594 D LocationManagerService: request 11ea217 gps Request[ACCURACY_FINE gps requested=+1s0ms fastest=+1s0ms lowPowerMode=false] from com.baidu.BaiduMap(10125 foreground)
	Line 729720: M10868B 02-27 10:44:11.974   879  4005 I LocationManagerService: remove 11ea217

    与客户电话沟通，已说明上述情况，先NeedInfo，等客户后续确认。造成地图第三方移除请求可能是由于考虑到卫星信号或者节能方面，Unisoc无法确认。
(20190306T06:15:57)

==== State: Opened by: cmadmin on 06 March 2019 14:20:40 ====

  == Harry.Zeng@unisoc.com On 20190306T06:15:57 (xml) ==
和andy沟通，需要确认10:18:16这个时间点GPS firmware被stop的原因，从AP的log来看，此时间点是被GnssLocationProvider stop的，请eric帮忙看看


062F5B 02-27 10:16:23.995   557   557 E LIBGPS  : gps_start: called,ref is 1
070AD7 02-27 10:18:16.764   879  1697 D GnssLocationProvider: setRequest ProviderRequest[OFF]
070AD8 02-27 10:18:16.764   879  1697 D GnssLocationProvider: stopNavigating
070ADF 02-27 10:18:16.773   557   557 W GnssHAL_GnssExt: gps_stop entry
070AE0 02-27 10:18:16.773   557   557 E LIBGPS  : gps_stop,s->ref is 0
074C0F 02-27 10:18:58.185   557   557 E LIBGPS  : gps_start: called,ref is 1
108698 02-27 10:44:11.981   557   557 W GnssHAL_GnssExt: gps_stop entry
108699 02-27 10:44:11.981   557   557 E LIBGPS  : gps_stop,s->ref is 0

==== State: Opened by: cmadmin on 06 March 2019 11:13:43 ====

  == Andy.Hao@unisoc.com On 20190306T03:04:47 (xml) ==
Hi Jun.An,

如Comment4和3，请帮忙安排分析一下log并回答一下客户的问题：

导航过程中10:18:59 GPS firmware被stop的原因。
log已上传ftp 《ylog-高速GPS丢星-2019.02.27》。

谢谢。

==== State: Opened by: waterworld on 06 March 2019 09:40:31 ====

请问光从目前提供的log信息中可以看出来有什么原因导致的stop么，目前客户那边还没回复，不过大概率会再问关闭的原因

==== State: NeedInfo by: cmadmin on 05 March 2019 17:43:34 ====

  == Andy.Hao@unisoc.com On 2019-03-05T09:24:47Z (json) ==
Dear Customer，

客户提到的另外2个GPS不定位点是02:18:59和02:19:00，位于路测初始时段，不定位原因是GPS firmware模块在02:18:16被关闭，四十秒后02:18:59才刚刚开始工作，且信号环境较差，定位用了3秒，在02:19:01时首次定位。因此对于GPS firmware而言，工作流程是正常的。

但路测过程中GPS firmware模块不应该被关闭，可能是上层调用了gps_stop导致，需要关注stop的原因。

请问该解释是否能够接受？谢谢。

相关log：
TrailCnt:2,TTFF:3,SeqLsq:0,PosSat,5,5,0,TrackSat,11,10,1
$GPGGA,021901.263,2239.012129,N,11349.839652,E,1,05,1.977,22.574,M,0,M,,*4B
(2019-03-05T08:20:44Z)

==== State: Opened by: cmadmin on 05 March 2019 15:06:26 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562616|[SC7731C][Waterworld][fs280][SC7731C][Waterworld][fs280][6部]工程模式下面检测机器是否root，机器没有root也会显示rooted|步骤：

现象：下载pac，开机后输入*#*#83781#*#*进入EngineerMode->HARDWARETEST界面查看root check菜单

现象：root check 菜单一直显示rooted


     目前已按CQ:SPCSS00422463的方法解决了，
但我们的客户已经用没这样改的软件量产了，并且出货到用户手里了。有什么办法让用户手里的机子显示no root   
分析：
|
==== State: Closed by: waterworld on 11 March 2019 15:46:33 ====

    谢谢，客户已经知道OTA升级也无法擦除该root记录，可以关闭这个cq了。

==== State: NeedInfo by: cmadmin on 11 March 2019 15:41:58 ====

  == Peng.Shen@unisoc.com On 2019-03-11T07:38:40Z (json) ==
尊敬的客户，您好：

    该问题还有什么疑问吗？请及时反馈，谢谢。
(2019-03-08T08:24:05Z)

==== State: Opened by: cmadmin on 08 March 2019 16:30:59 ====

  == Peng.Shen@unisoc.com On 2019-03-08T08:24:05Z (json) ==
尊敬的客户，您好：

    这种可能是存在的。手机出厂时，没有root过，就会显示no root；但客户在使用过程中，人为地通过第三方软件获得了root权限，就可能会显示root了。

==== State: Opened by: waterworld on 08 March 2019 15:52:17 ====

   Dear unisoc：
   我想问一下，手机在出厂时是“no root”。但在消费者手中，由于消费者下载其他应用，导致“no root”变成了“root”，这种可能是不是存在。因为我们的客户向我们这么反馈了。

==== State: NeedInfo by: cmadmin on 08 March 2019 15:47:46 ====

  == Peng.Shen@unisoc.com On 2019-03-08T07:43:37Z (json) ==
尊敬的客户，您好：

    请在看到comment 4对root record功能的解释后，及时反馈，如有问题，请及时联系，谢谢。
(2019-03-08T07:27:14Z)

==== State: Opened by: cmadmin on 08 March 2019 15:33:06 ====

  == Feng_feng.Wang@unisoc.com On 2019-03-08T07:27:14Z (json) ==
Dear Customer:

root record设计的初衷是为了记录不在白名单里，但是拥有root权限的进程。
该记录是存储在flash上的，手机端不提供任何擦除该记录的方法，防止用户自己擦除root record记录。同时，OTA升级也无法擦除该记录，防止已root的手机通过OTA方式，从新变成非root手机。这么做的根本原因是root过的手机是不保修的。
唯一的方法是使用researchdownload工具擦除整个flash。

==== State: Opened by: waterworld on 08 March 2019 14:46:00 ====

  Dear unisoc：
我将所加白名单注释,使问题复现。并抓取ylog和rootrecorder节点，如附件。
 可以直接修改 kernel/security/rootrecorder/root_recorder.c 文件把导致 rooted 的
   相关进程记录进白名单:

   在 sys_module_table[] 数组中添加: 
    // {"autotest", "init", 1, 0, 0, 0},

   在 sys_ptrace_table[] 数组中添加: 
 //    {"system_server", "main", 0, 1000, 1000, 0},

==== State: NeedInfo by: cmadmin on 06 March 2019 15:25:53 ====

  == Peng.Shen@unisoc.com On 20190306T07:13:32 (xml) ==
尊敬的客户，您好：

    请重新复现该问题，并抓取一份ylog，同时，请在测试机上查看，是否存在/sys/root_recorder/rootrecorder文件节点。查看方法如下：

    在电脑命令行依次运行：adb root;   adb remount;  adb shell;
cd /sys/root_recorder/;  ls;

   如果有该文件节点，请将该文件节点导出，导出方法如下，一并提供，以供分析，谢谢。
    运行命令：adb pull /sys/root_recorder/rootrecorder
    
    请按照上述进行操作，并反馈，如有问题，请及时联系，谢谢。
(20190305T07:46:00)

==== State: Opened by: cmadmin on 05 March 2019 15:06:32 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562600|[SC9863A][Waterworld][FS168][XM][TCL]DRM视频文件播放完一次不会停止，会自动重新播放|步骤：
1、通过http://hzrd.tcl-ta.com:9000/cailiang/drm/drm.html -> Combined Delivery -> Video Binary -> MP4 binary（3GP binary） -> count 
2、下载count为3的视频文件
3、进入Downloads应用，选择视频播放后

现象：
视频播放完一次，不会停止，会自动重新播放

期望：
视频播放完一次后，停止播放，不要自动重新播放

分析：
之前提的CQ:SPCSS00558721，已经解决DRM视频文件，权限次数消耗完，会继续播放的问题.
使用了谷歌 photos应用播放视频，附件提供了YLOG.zip

请分析解决，谢谢！
|
==== State: Closed by: cmadmin on 21 March 2019 00:33:55 ====

尊敬的客户，NeedInfo状态超过15个工作日贵司未有状态更新和反馈的问题，现做关闭处理。如果还有其他问题，请重新提交CR或者联系对应的TAM处理。 Thanks


==== State: NeedInfo by: cmadmin on 05 March 2019 16:26:15 ====

  == robert.lu@unisoc.com On 2019-03-05T08:23:31Z (json) ==
Dear Customer,

  目前的方案是， 第三方应用可以播放DRM中fl, cd文件类型。 Photos 因此也可以播放DRM中fl, cd文件类型。 谢谢！
(2019-03-05T07:33:22Z)

==== State: Opened by: waterworld on 05 March 2019 15:58:19 ====

您好：
     按客户要求是不应该用谷歌photos播放的，请帮忙解释下为什么photos可以默认播放DRM视频。

谢谢

==== State: NeedInfo by: cmadmin on 05 March 2019 15:50:18 ====

  == robert.lu@unisoc.com On 20190305T07:33:22 (xml) ==
Dear Customer,

  视频播放完一次，不会停止，会自动重新播放, 这是因为photos应用的设置默认为loop video. 修改此设置可以不连续播放。 谢谢！
(20190305T06:28:24)
|
# SPCSS00562592|[SC9863A][Waterworld][FS168-11B][TCL][XM]CET测试反馈WCDMA B4 RSRP Fail，帮忙安排分析原因。|测试CQ：SPCSS00559863，我们前面用RF TEST测试是PASS的，不知道这次测试为什么会Fail，帮忙安排分析下原因，谢谢！
|
==== State: Closed by: waterworld on 07 March 2019 18:33:49 ====

校准后复测PASS。

==== State: Resolved by: cmadmin on 06 March 2019 20:12:31 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
RootCause:
重新校准后复测OK
Solution:
重新校准后复测OK

==== State: Opened by: waterworld on 05 March 2019 18:46:30 ====

好的，谢谢支持！

==== State: Opened by: cmadmin on 05 March 2019 17:10:42 ====

  == Biao.Yang@unisoc.com On 2019-03-05T08:54:47Z (json) ==
林工，重新校准后复测是PASS的。

==== State: Opened by: cmadmin on 05 March 2019 13:27:10 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562553|[SC9820E][Waterworld][A350]做ota差分包的时候，可以升级这个文件吗sharkle_pubcp_customer_Feature_Phone_nvitem.bin,另外校准参数保存在哪个分区里|步骤：

现象：

分析：
|
==== State: Closed by: waterworld on 05 March 2019 13:41:38 ====

Thanks

==== State: NeedInfo by: cmadmin on 05 March 2019 13:33:37 ====

  == Yuanhang.Zhou@unisoc.com On 20190305T05:30:33 (xml) ==
客户：

    如此文件前后两个版本有变化，差分即可升级；
    校准参数保存在product分区
(20190305T05:26:53)

==== State: Opened by: cmadmin on 05 March 2019 13:30:02 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562552|[SC9820E][Waterworld][ww853][18部][ww853]调试横屏，代码应该做哪些修改？|Dear SPRD,
我们这边有个项目是横屏竖用，请问软件应该做哪些修改，是改lcd code和底层，还是改上层UI显示？|
==== State: Closed by: waterworld on 07 March 2019 14:38:08 ====

Dear SPRD,
更改已生效

==== State: NeedInfo by: cmadmin on 07 March 2019 14:09:10 ====

  == xiling1222@spreadst.com On 2019-03-07T06:04:04Z (json) ==
客户您好
请用如下patch验证看是否生效

frameworks/base$ git diff cmds/bootanimation/BootAnimation.cpp
diff --git a/cmds/bootanimation/BootAnimation.cpp b/cmds/bootanimation/BootAnimation.cpp
index ff0e7dd..a4ff59c 100644
--- a/cmds/bootanimation/BootAnimation.cpp
+++ b/cmds/bootanimation/BootAnimation.cpp
@@ -251,13 +251,13 @@ status_t BootAnimation::readyToRun() {
     //sp<SurfaceControl> control = session()->createSurface(String8("BootAnimation"),
     //        dinfo.w, dinfo.h, PIXEL_FORMAT_RGB_565);
     sp<SurfaceControl> control;
-    if (dinfo.w > dinfo.h) {
-        control = session()->createSurface(
-                      String8("BootAnimation"), dinfo.h, dinfo.w, PIXEL_FORMAT_RGB_565, ISurfaceComposerClient::eFXSurfaceNoDisp);
-    } else {
+    //if (dinfo.w > dinfo.h) {
+    //    control = session()->createSurface(
+    //                  String8("BootAnimation"), dinfo.h, dinfo.w, PIXEL_FORMAT_RGB_565, ISurfaceComposerClient::eFXSurfaceNoDisp);
+    //} else {
         control = session()->createSurface(
                       String8("BootAnimation"), dinfo.w, dinfo.h, PIXEL_FORMAT_RGB_565, ISurfaceComposerClient::eFXSurfaceNoDisp);
-    }
+    //}

==== State: NeedInfo by: cmadmin on 07 March 2019 13:27:56 ====

  == xiling1222@spreadst.com On 2019-03-07T05:25:16Z (json) ==
客户您好
如沟通
 在您的代码里找到Bootanimation.zip资源然后解压，再将里面的资源都旋转90度就可以了。
然后再打包回去，打包回去请采用如下方法，否则可能放不出开机动画。
进入desc.txt路径后，执行zip -0qry ../bootanimation.zip ./

测试验证方法可以采用如下方案:
当您旋转并打包完毕后，将bootanimation.zip push到手机的system/media目录下，然后重启就可以看到开机动画了，此时观察图片有没有正常即可。
(2019-03-07T03:16:41Z)

==== State: Opened by: waterworld on 07 March 2019 11:03:40 ====

Dear SPRD,
如刚才电话沟通，我这边需要贵司提供更改开机动画的方法，麻烦陆工你把我昨天拍的图片转给同事看看，就是开机动画偏移的那张，谢谢！

==== State: Opened by: waterworld on 07 March 2019 10:56:43 ====

Dear SPRD,
如刚才电话沟通，点击设置，进入，界面是正常显示的，所以还请贵司提供改launcher和开机动画显示的方案，谢谢！

==== State: Opened by: waterworld on 07 March 2019 09:56:59 ====

Dear SPRD,
麻烦贵司加急处理一下，因为今天要发软件给客户，谢谢！

==== State: Opened by: waterworld on 06 March 2019 17:27:17 ====

Dear SPRD,
1. 照片已上传，照片名字就是当前的状态
2. 如附件
3. 查询出的屏密度是120

ps: adb shell getprop ro.sf.hwrotation的结果为空
我底层设置的分辨率是
.width = 320,
.height = 240,

还请贵司尽快分析，谢谢！

==== State: Opened by: cmadmin on 06 March 2019 17:00:53 ====

  == zhumin0815@spreadst.com On 2019-03-06T08:55:11Z (json) ==
你好尊敬的客户：
   如电话沟通，麻烦提供一下如下信息：
   1.正常的时候照片以及异常时候的照片
   2.在异常的时候提供一下adb shell dumpsys SurfaceFlinger >xxx.txt
   3.可以通过adb shell wm density来查询和设置屏幕密度

如之前沟通，先帮忙提供一下这三个操作的结果，我这边会尽快分析的，

遇到操作问题，请随时联系我，谢谢！

[C][NJ_ST_MM_Graphics][19/03/06][zhumin0815]

==== State: Opened by: waterworld on 06 March 2019 15:33:12 ====

Dear SPRD,
贵司可能没理解我说的意思，我们这边以往的项目都是竖屏，横240x纵320的，
现在的项目是真横屏，横320x纵240，也是需要从左上角为起始点开始从左往右，从上到下扫描，
另外，你提供的旋转270度命令没起作用
谢谢！

==== State: Opened by: cmadmin on 06 March 2019 15:02:11 ====

  == lutong0321@spreadst.com On 2019-03-06T06:50:59Z (json) ==
(In reply to waterworld from comment #9)

您好，
本来是横屏，现在需要变成竖屏吗？
adb shell setprop ro.sf.hwrotation 270，这个270就是旋转的角度，
如果是需要变成正常竖屏显示，你可以把270换成0试试。

遇到操作问题，请随时联系我，谢谢！

[C][NJ_ST_MM_Graphics][19/03/06][lutong0321]

==== State: Opened by: waterworld on 06 March 2019 14:22:07 ====

Dear SPRD,
有什么进展吗？

==== State: Opened by: waterworld on 05 March 2019 18:38:52 ====

Dear SPRD,
附件是屏显示的图，不用执行adb shell setprop ro.sf.hwrotation 270就是直接横屏了，请问如果需要屏显示正常，还需要做什么修改？
谢谢

==== State: Opened by: cmadmin on 05 March 2019 16:25:29 ====

  == lutong0321@spreadst.com On 2019-03-05T08:13:10Z (json) ==
(In reply to waterworld from comment #6)

Dear :
您可以使用以下指令临时测试一下ro.sf.hwrotation属性
adb root;adb remount
adb shell setprop ro.sf.hwrotation 270
adb shell getprop ro.sf.hwrotation
adb shell stop
adb shell start
以上操作在重启手机后属性失效，如果需要使用保持ro.sf.hwrotation属性，可以在system.prop中将该属性值设置为270，之后进行整编

验证开机后是否默认横屏的办法可以从桌面进入到设置等模块，看看这些模块是否横屏。
如果是，证明默认横屏的配置生效了。

[C][NJ_ST_MM_Graphics][19/03/05][lutong0321]

==== State: Opened by: waterworld on 05 March 2019 15:33:29 ====

Dear SPRD,
贵司提供的patch是针对9.0的，而9820e是4.4的，SurfaceFlinger.cpp有很多不同，还请贵司提供针对4.4系统框架层的修改点

==== State: Opened by: cmadmin on 05 March 2019 15:02:52 ====

  == zhumin0815@spreadst.com On 2019-03-05T06:54:38Z (json) ==
你好尊敬的客户：
  因为本地没有复现问题的机器，麻烦使用如下patch，然后根据自己需要的角度来设置，
ts@ts-OptiPlex-3020:~/workspace/sprdroid9.0_trunk_18c/frameworks/native/services/surfaceflinger$ git diff
diff --git a/services/surfaceflinger/SurfaceFlinger.cpp b/services/surfaceflinger/SurfaceFlinger.cpp
index e875670..a488a42 100644
--- a/services/surfaceflinger/SurfaceFlinger.cpp
+++ b/services/surfaceflinger/SurfaceFlinger.cpp
@@ -275,7 +275,7 @@ SurfaceFlinger::SurfaceFlinger() : SurfaceFlinger(SkipInitialization) {
 
     V1_1::DisplayOrientation primaryDisplayOrientation =
         getDisplayOrientation< V1_1::ISurfaceFlingerConfigs, &V1_1::ISurfaceFlingerConfigs::primaryDisplayOrientation>(
-            V1_1::DisplayOrientation::ORIENTATION_0);
+            V1_1::DisplayOrientation::ORIENTATION_270);
 
     switch (primaryDisplayOrientation) {
         case V1_1::DisplayOrientation::ORIENTATION_90:

如遇操作问题，请及时与我联系。

[C][NJ_ST_MM_Graphics][19/3/1][zhumin0815]

==== State: Opened by: evin.wei on 05 March 2019 14:41:59 ====

尊敬的客户，您好!
我们对应模块的同事会答复的
谢谢!

==== State: Opened by: waterworld on 05 March 2019 14:39:49 ====

Dear SPRD,
上层如何修改，能否提供相关的patch，谢谢

==== State: Opened by: cmadmin on 05 March 2019 14:22:53 ====

  == Evin.Wei@unisoc.com On 2019-03-05T06:20:40Z (json) ==
(In reply to waterworld from comment #2)
需要上层旋转90°

==== State: Opened by: waterworld on 05 March 2019 14:17:55 ====

Dear SPRD,
真横屏

==== State: Opened by: cmadmin on 05 March 2019 11:34:14 ====

  == Evin.Wei@unisoc.com On 20190305T03:19:10 (xml) ==
真横屏还是假横屏？
|
# SPCSS00562538|[SC9863A][Waterworld][FS168][XM][TCL]网络设置菜单中，手动搜网后出现modem reset。|Insert a simcard
Go to settings--networks
Perform a manual network scan
Notice that after a while, UE does a modem reset and it disconnects from NW and doesn‘t recognizes the simcard
After that, UE attaches again to NW

客户提供的log已上传CQ的ftp服务器，请帮忙分析。谢谢！|
==== State: Closed by: cmadmin on 28 March 2019 00:34:13 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 06 March 2019 13:14:21 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
PleasePayAttentionTheFollowingRules: 
注意事项：
1. 此文件为展讯提供的研发调试用支持文件，可作为贵司项目研发调试的参考，建议在贵司在使用时自行开展全面测试 
2. 在贵司未测试并确认该文件质量前，请不要将此文件合入贵司项目的量产或者入库的版本
3. 以下情况需要请务必向展讯技术支持人员申请正式Patch或正式版本，不能使用此文件
  A 需要解决的问题是平台问题，且贵司项目已正式量产或者即将量产
  B 展讯工程师在回复问题解决方案时，已经注明必须要“申请正式Patch或正式版本”解决问题的
  C 贵司内部评估风险巨大，必须要“申请正式Patch或正式版本”解决问题的

RootCause:
phone挂了导致掉卡
Solution:
phone挂了导致掉卡

==== State: Opened by: waterworld on 06 March 2019 11:05:20 ====

按照ap侧的修改，客户验证ok。请知悉。谢谢！

==== State: NeedInfo by: cmadmin on 05 March 2019 17:42:27 ====

  == liujing0428@spreadst.com On 2019-03-05T09:20:36Z (json) ==
Dear customer.
    如我们modem同事comments，请验证phone crash，看还有无modem reset，谢谢。
(2019-03-05T08:43:18Z)

==== State: Opened by: cmadmin on 05 March 2019 17:09:23 ====

  == fiona.huang@unisoc.com On 2019-03-05T08:43:18Z (json) ==
客户你好：

从提供的log来看，没有发生由于modem assert引起的modem reset，因为log中级没有memory dump文件也没有mini dump文件

所以猜测该问题仅仅是由于AP crash引起

如果发现modem log中有mini dump或则memory dump，或者AP定位有modem assert导致了reset，请抓取有效的memory dump后再新提交一个CQ给我司modem 分析

该问题先流转给AP作为AP crash跟踪记录

==== State: Opened by: cmadmin on 05 March 2019 15:33:58 ====

  == liujing0428@spreadst.com On 2019-03-05T07:26:02Z (json) ==
Dear customer.
   关于phone进程挂掉，可加下判空处理如下：

    private boolean isCurrent(CellInfo cellInfo) {
        TelephonyManager telephonyManager = (TelephonyManager)
                getContext().getSystemService(Context.TELEPHONY_SERVICE);
        String plmn = CellInfoUtil.getOperatorInfoFromCellInfo(cellInfo).getOperatorNumeric();
        String currentPlmn = telephonyManager.getNetworkOperator(mSubId);
        int cellNetworkClass = getNetworkClass(cellInfo);
        int currentNetworkClass = telephonyManager.getNetworkClass(
                telephonyManager.getVoiceNetworkType(mSubId));

        if(plmn != null && plmn.equals(currentPlmn) && cellNetworkClass == currentNetworkClass) {
           return true;
        }
        return false;
    }

请在606行加下plmn的判空处理，在编译push到手机重新验证下，是否还有问题，谢谢。

==== State: Opened by: waterworld on 05 March 2019 15:08:23 ====

重新传了一下，见附件：NetworkSelectListPreference_new.java。谢谢！

==== State: Opened by: waterworld on 05 March 2019 14:43:57 ====

NetworkSelectListPreference.java已上传附件，里面我们同事应该有按照TCL需求改了一些东西，请帮忙检查一下。谢谢！

==== State: Opened by: cmadmin on 05 March 2019 14:27:21 ====

  == liujing0428@spreadst.com On 20190305T06:21:45 (xml) ==
文件路径如下：
/packages/services/Telephony/src/com/android/phone/NetworkSelectListPreference.java

==== State: Opened by: cmadmin on 05 March 2019 14:12:05 ====

  == liujing0428@spreadst.com On 20190305T06:06:15 (xml) ==
Dear customer.
  如下有phone进程挂掉，会导致掉卡。
00BFEF 03-04 17:17:30.735  1054  1054 E AndroidRuntime: FATAL EXCEPTION: main
03-04 17:17:30.735  1054  1054 E AndroidRuntime: Process: com.android.phone, PID: 1054
03-04 17:17:30.735  1054  1054 E AndroidRuntime: java.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.phone.NetworkSelectListPreference.isCurrent(NetworkSelectListPreference.java:606)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.phone.NetworkSelectListPreference.networksListLoaded(NetworkSelectListPreference.java:547)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.phone.NetworkSelectListPreference.access$1200(NetworkSelectListPreference.java:83)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.phone.NetworkSelectListPreference$1.handleMessage(NetworkSelectListPreference.java:285)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at android.os.Handler.dispatchMessage(Handler.java:106)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at android.os.Looper.loop(Looper.java:193)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at android.app.ActivityThread.main(ActivityThread.java:6852)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at java.lang.reflect.Method.invoke(Native Method)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:504)
03-04 17:17:30.735  1054  1054 E AndroidRuntime: 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)

但是平台基线没有此方法，请问贵司此处是否有修改，还请帮忙提供如下文件，我们帮您 check下。

==== State: Opened by: cmadmin on 05 March 2019 13:37:55 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562537|[SC9863A][Waterworld][FS170][6部]设置-Google-创建您的工作资料，提示“谷歌Play服务没有响应”一次，log时间16:47，见附件|步骤：

现象：

分析：
|
==== State: Closed by: waterworld on 06 March 2019 09:40:12 ====

您好：

     多出操作后未复现，先关闭此问题

==== State: NeedInfo by: cmadmin on 05 March 2019 16:25:11 ====

  == Seth.Lu@unisoc.com On 2019-03-05T08:13:09Z (json) ==
E0DBA94 02-28 16:46:43.793   443   711 I am_anr  : [0,28509,com.google.android.gms.ui,-1597489467,Input dispatching timed out (Waiting to send non-key event because the touched window has not finished processing certain input events that were delivered to it over 500.0ms ago.  Wait queue length: 12.  Wait queue head age: 10706.0ms.)]

com.google.android.gms.ui 發生anr, 但附件没有 trace log 无法有效分析anr 原因.
如果有保留现场的话帮忙将 /data/anr/ 内的档案pull 出来并上传. 如果没有则帮忙再复现提供一份log .

Thanks.
(2019-03-05T07:18:07Z)

==== State: Opened by: cmadmin on 05 March 2019 15:34:11 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
# SPCSS00562521|[SC9863A][Waterworld][FS170][XM]SC9863A平台，FS170项目，客户在上海华东院做CE认证测试，需要测试BT/Wifi的测试脚本文件，麻烦提供下！|[XM]SC9863A平台，FS170项目，客户在上海华东院做CE认证测试，需要测试BT/Wifi的测试脚本文件，麻烦提供下！|
==== State: Closed by: cmadmin on 29 March 2019 00:34:28 ====

尊敬的客户，超过15个工作日未关闭的Resolved状态的问题，我们会定期关闭，如问题仍然存在，您还可以再次通过Reopen重新打开提交此问题。


==== State: Resolved by: cmadmin on 07 March 2019 16:42:35 ====

Dear Customer:
  The Issue has been Fixed now, please check it
Thank you

Analysis and Solution:
RootCause:
提供wifi/BT非信令测试方法
Solution:
提供wifi/BT非信令测试方法

==== State: Opened by: cmadmin on 07 March 2019 16:42:12 ====

  == Vincent.Wang1@unisoc.com On 2019-03-07T08:33:35Z (json) ==
Dear customer:
  已于实验室沟通，提供非信令发送方式就可以了。已解决，问题关闭。

==== State: Opened by: waterworld on 06 March 2019 11:16:38 ====

您好：
关于BT/Wifi的测试文档【《WIFI BT工程模式操作说明 v1.1.pdf》】，这份文档已经发给客户。

但客户也同时需要测试脚本文件---类似做BT/Wifi传导调试测试时所出的报告对应的测试脚本文件。

感谢！

==== State: Opened by: cmadmin on 05 March 2019 12:17:31 ====

  == Vincent.Wang1@unisoc.com On 20190305T04:13:11 (xml) ==
Dear customer:
  是需要测试文档吧，之前你们FS168 项目也刚做过CE 认证，先看下你们内部是否有提供资料。谢谢！

==== State: Opened by: cmadmin on 05 March 2019 11:59:58 ====

Dear Customer:
 The Issue is under processing now.
Thank you

|
