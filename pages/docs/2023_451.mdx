# SPCSS01155984|[UMS512][Waterworld][YK693][13078][Other]腾讯游戏闪退|步骤：进入腾讯游戏
现象：闪退
分析：有很多crash信息，log和视频如附件。
指令异常，请上传下正常机器的
/data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
Timestamp: 2023-04-18 15:31:42+0800
pid: 31301, tid: 31490, name: ace_schedule3  >>> com.tencent.tmgp.speedmobile <<<
uid: 10152
signal 4 (SIGILL), code 1 (ILL_ILLOPC), fault addr 0x725d9bfb80 (*pc=0xd9a050f6)
backtrace:
      #00 pc 000000000018bb80  /data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
      #01 pc 0000000000178d38  /data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
      #02 pc 000000000012303c  /data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
      #03 pc 00000000001243dc  /data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
      #04 pc 0000000000131fe8  /data/app/com.tencent.tmgp.speedmobile-yiPt36TiN9kW-2h7nK4I0g==/lib/arm64/libtersafe.so 
指令数据在映射为readonl.对软件而言是不可写的， 
容易复现的话，建议更换问题机器的  CPU/DDR/EMMC看下问题是不是跟着物料走
(2023-04-21T00:45:13Z)
Dear sprd
1：确认下此问题是偶现还是必现；
    ---》不是必现
2：必现问题，是否是跟单台样机走吗？
    ---》客户有台机器复现
\000-0418_153412--0418_153532_fwkreboot\0-android_crash.log
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: *** FATAL EXCEPTION IN SYSTEM PROCESS: main
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: java.lang.NullPointerException: Attempt to invoke virtual method 'boolean com.android.server.wm.WindowManagerService.detectSafeMode()' on a null object reference
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at com.android.server.SystemServer.startOtherServices(SystemServer.java:1207)
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at com.android.server.SystemServer.run(SystemServer.java:546)
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at com.android.server.SystemServer.main(SystemServer.java:375)
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at java.lang.reflect.Method.invoke(Native Method)
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:503)
C000001  01-01 08:04:37.400  3727  3727 E AndroidRuntime: 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:926)
C000001  04-06 20:12:50.735  4156  4177 F libc    : Fatal signal 6 (SIGABRT), code -1 (SI_QUEUE) in tid 4177 (HeapTaskDaemon), pid 4156 (system_server)
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : Native Crash TIME: 46877
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : Build fingerprint: 'Philips/Philips_S6505/Philips_S6505:10/QP1A.190711.020/2023_20230406:user/release-keys'
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : Revision: '0'
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : ABI: 'arm64'
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : Timestamp: 2023-04-06 20:12:50+0800
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : pid: 4156, tid: 4177, name: HeapTaskDaemon  >>> system_server <<<
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : uid: 1000
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : signal 6 (SIGABRT), code -1 (SI_QUEUE), fault addr --------
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   : Abort message: 'concurrent_copying.cc:3369] Fall-back non-moving space allocation failed for a 1082130856 byte object in region type RegionTypeFromSpace'   //分配内存过大   1G的内存分配
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x0  0000000000000000  x1  0000000000001051  x2  0000000000000006  x3  00000077d40d5040
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x4  00000077d40d4d6c  x5  00000077d40d4d6c  x6  00000077d40d4d6c  x7  0000000000000000
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x8  00000000000000f0  x9  00000078642bf4e0  x10 0000000000000000  x11 0000000000000001
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x12 000000000bdbb548  x13 0000000000000001  x14 0000000000000004  x15 ffffffffffffffff
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x16 000000786438a8c0  x17 00000078643680a0  x18 00000077832c8000  x19 000000000000103c
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x20 0000000000001051  x21 00000000ffffffff  x22 0000007752e361a0  x23 00000077e32d0555
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x24 00000077e32f2012  x25 0000000000000002  x26 00000077e3f7c258  x27 000000000000000c
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     x28 000000786871e1c0  x29 00000077d40d50e0
C000001  04-06 20:12:50.891  6906  6906 F DEBUG   :     sp  00000077d40d5020  lr  000000786431cc00  pc  000000786431cc30
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   : 
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   : backtrace:
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   :       #00 pc 0000000000081c30  /apex/com.android.runtime/lib64/bionic/libc.so (abort+164) (BuildId: f870d577419d3c0e6b7c369961c66fbd)
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   :       #01 pc 00000000004a9848  /apex/com.android.runtime/lib64/libart.so (art::Runtime::Abort(char const*)+2128) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   :       #02 pc 000000000000c5bc  /system/lib64/libbase.so (android::base::LogMessage::~LogMessage()+608) (BuildId: a2fc70dbacbdf961375fda8bde9e36b2)
C000001  04-06 20:12:51.003  6906  6906 F DEBUG   :       #03 pc 000000000021ab3c  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::Copy(art::Thread*, art::mirror::Object*, art::mirror::Object*, art::MemberOffset)+3708) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #04 pc 000000000021ef14  /apex/com.android.runtime/lib64/libart.so (void art::gc::collector::ConcurrentCopying::Process<true>(art::mirror::Object*, art::MemberOffset)+172) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #05 pc 000000000021e24c  /apex/com.android.runtime/lib64/libart.so (_ZN3art6mirror6Object15VisitReferencesILb1ELNS_17VerifyObjectFlagsE0ELNS_17ReadBarrierOptionE1ENS_2gc9collector17ConcurrentCopying16RefFieldsVisitorILb1EEES9_EEvRKT2_RKT3_+128) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #06 pc 0000000000214a90  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::ProcessMarkStackRef(art::mirror::Object*)+380) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #07 pc 000000000021464c  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::ProcessMarkStackOnce()+1040) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #08 pc 0000000000214224  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::ProcessMarkStack()+28) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #09 pc 000000000020b5e4  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::CopyingPhase()+2248) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #10 pc 0000000000209150  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::ConcurrentCopying::RunPhases()+1060) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #11 pc 0000000000226ddc  /apex/com.android.runtime/lib64/libart.so (art::gc::collector::GarbageCollector::Run(art::gc::GcCause, bool)+288) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #12 pc 0000000000245a58  /apex/com.android.runtime/lib64/libart.so (art::gc::Heap::CollectGarbageInternal(art::gc::collector::GcType, art::gc::GcCause, bool)+3260) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #13 pc 00000000002578dc  /apex/com.android.runtime/lib64/libart.so (art::gc::Heap::ConcurrentGC(art::Thread*, art::gc::GcCause, bool)+124) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #14 pc 000000000025d3b8  /apex/com.android.runtime/lib64/libart.so (art::gc::Heap::ConcurrentGCTask::Run(art::Thread*)+36) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #15 pc 000000000028a96c  /apex/com.android.runtime/lib64/libart.so (art::gc::TaskProcessor::RunAllTasks(art::Thread*)+64) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #16 pc 0000000000338e2c  /system/framework/arm64/boot-core-libart.oat (art_jni_trampoline+124) (BuildId: 2421cc8e551a1d6a29c329c8a08f0f610425c85a)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #17 pc 00000000004f5fd4  /system/framework/arm64/boot-core-libart.oat (java.lang.Daemons$HeapTaskDaemon.runInternal+196) (BuildId: 2421cc8e551a1d6a29c329c8a08f0f610425c85a)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #18 pc 000000000033bc60  /system/framework/arm64/boot-core-libart.oat (java.lang.Daemons$Daemon.run+160) (BuildId: 2421cc8e551a1d6a29c329c8a08f0f610425c85a)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #19 pc 00000000004af778  /system/framework/arm64/boot.oat (java.lang.Thread.run+72) (BuildId: 0b5529e741b72e500f6b863504718c8ebbe942dc)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #20 pc 0000000000136334  /apex/com.android.runtime/lib64/libart.so (art_quick_invoke_stub+548) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #21 pc 0000000000145060  /apex/com.android.runtime/lib64/libart.so (art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)+244) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #22 pc 00000000004a159c  /apex/com.android.runtime/lib64/libart.so (art::(anonymous namespace)::InvokeWithArgArray(art::ScopedObjectAccessAlreadyRunnable const&, art::ArtMethod*, art::(anonymous namespace)::ArgArray*, art::JValue*, char const*)+104) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #23 pc 00000000004a2644  /apex/com.android.runtime/lib64/libart.so (art::InvokeVirtualOrInterfaceWithJValues(art::ScopedObjectAccessAlreadyRunnable const&, _jobject*, _jmethodID*, jvalue const*)+416) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #24 pc 00000000004e1928  /apex/com.android.runtime/lib64/libart.so (art::Thread::CreateCallback(void*)+1332) (BuildId: 538a07c7b409256651a4b5cf963b1a51)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #25 pc 00000000000e1100  /apex/com.android.runtime/lib64/bionic/libc.so (__pthread_start(void*)+36) (BuildId: f870d577419d3c0e6b7c369961c66fbd)
C000001  04-06 20:12:51.004  6906  6906 F DEBUG   :       #26 pc 0000000000083704  /apex/com.android.runtime/lib64/bionic/libc.so (__start_thread+64) (BuildId: f870d577419d3c0e6b7c369961c66fbd)
C000001  04-06 20:12:52.669  5549  5815 E AndroidRuntime: FATAL EXCEPTION: ReaperUpdateConfigThread
C000001  04-06 20:12:52.669  5549  5815 E AndroidRuntime: Process: com.qiku.android.launcher3, PID: 5549
C000001  0(In reply to waterworld from comment #0)
1：确认下此问题是偶现还是必现；
2：必现问题，是否是跟单台样机走吗？
(20230419T02:03:21)
# SPCSS01155978|[SC9863A1][Waterworld][FS301-A13][13411][智能手机]信诺FS301-56G项目申请RFTESTER跑WCDMA上下行吞吐量测试|信诺FS301-56G项目申请RFTESTER跑WCDMA上下行吞吐量测试，机器4pcs，频段W B1/2/4/5/8，样机在惠州，麻烦帮忙安排，谢谢。
' 智_4G_LTE)FS301-M-G10-V5.6(20230309受控),SC9863A1(SR3595D)+EMMC/D4(128GB+4GB）+GSM4+WCDMA1/2/4/5/8+LTE B2/3/4/7/28AB+不带分集开关+带DPDT+WCN(2.4G)+3D+光感(FPC)+前1后2CAM+弹片单真闪+外置K类+耳机座+指纹+OVP+按键弹片+不带SAR+EOS_300V+小板FS301K02-001
RootCause:
测试需求完成
Solution:
—
WCDMA\ThroughPutSprd（吞吐量）的3台机器。 2#/3#/4#全部测试PASS。
# SPCSS01155938|[SC9832E][Waterworld][A507-SC9832E-A13][14037][手机]开机时间偏长，差不多要1分钟，请问可以优化吗|步骤：
请帮忙传下三份log和视频，是首次开机还是非首次开机，
(2023-04-18T09:32:31Z)
# SPCSS01155882|[UMS9230][Waterworld][FS301-POSITIVO][13279][手机][遵义六部]：工厂测试中，wifi测试项首次测试失败|步骤：烧录软件，进入工厂测试，WIFI单项测试
现象：测试fail，再次测试pass
分析：首次测试fail的概率性很大，log已上传附件，请分析。谢谢！
该cq关闭
[1.Root Cause        ]:测试时间太短，只有5s，开启wifi扫面要在5s后，导致还没接收到扫描结果，测试就已经结束了。
[2.Resolution        ]:将测试时间改为20s，测试pass。
Dear Sprd：
        20s测试时间过长，我这边再优化一下，其它没有什么问题了，感谢支持！
是否还有其它问题？该cq可否关闭
(20230427T07:07:33)
Dear Sprd：
        修改为20000后，第一次测试wifi能pass
请将WifiTestActivity.java文件中的private static final int TIMEOUT，将该参数由5000改为20000，进行测试，反馈结果，谢谢。
(20230427T06:59:18)
Dear Sprd：
        WifiTestActivity.java文件已上传附件
麻烦再提供一下WifiTestActivity.java代码，谢谢！
(2023-04-25T12:16:55Z)
        ylog_0425.zip已上传附件，其中包含WifiTestUtil.java文件
请加入以下修改，并提供log。此外，贵司有修改过该部分wifitest的代码吗？
diff --git a/src/com/sprd/validationtools/utils/WifiTestUtil.java b/src/com/sprd/validationtool                                                                                       s/utils/WifiTestUtil.java
index e110631..9d6f6f8 100644
--- a/src/com/sprd/validationtools/utils/WifiTestUtil.java
+++ b/src/com/sprd/validationtools/utils/WifiTestUtil.java
@@ -76,6 +76,7 @@ public class WifiTestUtil {
     public void stopTest() {
         // mWifiManager.cancelDiscovery();
+        Log.d(TAG, Log.getStackTraceString(new Throwable()));
         unregisterAllReceiver();
         Log.d(TAG, "stopTest! mWifiManager.isWifiEnabled=" + mWifiManager.isWifiEnabled());
         mWifiManager.setWifiEnabled(false);
(2023-04-24T11:26:28Z)
       ylog和dump数据已上传至附件：ylog0421.zip
请在代码中加入以下log进行测试，并提供ylog，谢谢。此外，首次测试完，请执行如下指令，并提供dumpsys的信息，谢谢。
adb shell dumpsys activity broadcasts -a 
diff --git a/src/com/sprd/validationtools/utils/WifiTestUtil.java b/src/com/sprd/validationtools/utils/WifiTestUtil.java
index e110631..2f6d20d 100644
--- a/src/com/sprd/validationtools/utils/WifiTestUtil.java
+++ b/src/com/sprd/validationtools/utils/WifiTestUtil.java
@@ -127,10 +127,12 @@ public class WifiTestUtil {
         @Override
         public void onReceive(Context context, Intent intent) {
             String action = intent.getAction();
-
+            Log.d(TAG, "action is : " + action);
+            Log.d(TAG, "action equals : " + action.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
             if (action.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)) {
                 List<ScanResult> wifiScanResultList = mWifiManager.getScanResults();
-
+                Log.d(TAG, "wifiScanResultList is : " + wifiScanResultList.size());
+                Log.d(TAG, "mLastCount is : " + mLastCount);
                 if (wifiScanResultList != null
                         && wifiScanResultList.size() != mLastCount) {
                     wifiDeviceListChange(wifiScanResultList);
(20230420T01:44:58)
Dear Sprd：
       ylog_20230419.zip已上传附件，请分析，谢谢！
Dear customer
请使用userdebug 版本，进入开发者模式-》启用wlan 详细日志后再进行相关测试，以下时间点附近wifi没有收到scan的指令
M008A08 02-23 14:22:46.614 D 8579     8579     WifiTestUtil:                                      startTest mWifiManager.isWifiEnabled=true 
//以下时间点有scan的指令，但是时间太短了，刚下发扫描就关了wifi
M008AB1 02-23 14:22:51.618 I 1029     8347     WifiService:                                       startScan uid=1000 
M008BC3 02-23 14:22:51.656 D 8579     8579     WifiTestUtil:                                      stopTest! mWifiManager.isWifiEnabled=true
(2023-04-19T09:12:16Z)
       第一次测试，wifi热点列表为空
第一次测试有获取到附近的wifi热点列表吗，测试页面有显示附近的wifi热点吗？
(20230418T09:29:13)
# SPCSS01155875|[UMS9117-L][Waterworld][FF627-Terra][13572][CEBU-功能手机][6部遵义][HMD][TRALNA-2340]issue when calling emergency numbers,log见附件|步骤：
when using the Cosmote SIM card the user cannot call any emergency number.
Please find the attached logs (“logs 17.4.23” recorded with SW v10.00.11.02). The .rar file includes: 
pass logs vodafone (202.05) → call to 166 (ambulance) was successful since the answering automated message popped up
pass logs nova (202.10) → call to 166 (ambulance) was successful since the answering automated message popped up
fail logs cosmote (202.01) →  all calls to 166, 100, 911 failed (waited for more than 1 minute and there was no connection at all)
Please remember that for Vodafone (202/05) & for Nova (202/10) the correct behavior is to have the emergency calls established in 2G but for Cosmote (202/01) the emergency calls should be established in 4G (with VoLTE enabled)
客户将log转成了txt文档"TRALNA-2340 G50 passed IMS LOG.txt"，麻烦看看是否是说需要的sip/ims消息的text文本，谢谢
这边依旧打开发现没有有效log，因为高通log一直提供的没有有效log，建议还是提供MTK对比机的，提供不加密的net log或者帮忙过滤sip/ims 消息的text文本，谢谢。
【测试建议】用同一张卡202010927070126先后插测试机和对比机，打相同紧急电话，统计问题发生概率，提供从开机到电话结束的完整的modem log，谢谢。
(20230508T01:40:45)
客户已重新提供了对比机log及视频，麻烦看看是否有效
(In reply to waterworld from comment #20)
提供的三份isf文件这边打开均没有有效sip信息和注册电话过程，还请确认后重新提供，谢谢。
\\shnas02\CustomerData\产品工程管理部\ZYT\FTPDATA\2023-4\SPCSS01155875\logs 28.4.23.rar\nokia G50 (isf)\hmdlogs\mdlog(2023-04-28T08:49:59Z)
客户已按照要求提供log,麻烦看看是否可以，谢谢
【当前结论】之前以为对比机会用MTK，所以特别说明“D:\jiahui.fan\2023\W17\2223287\logs 26.4.23\nokia G50\hmdlogs\mdlog”，这次提供的是高通log，这边无法打开qmdl2文件，无法对比分析。还请帮忙提供不加密 的isf文件，谢谢。
\logs 26.4.23\nokia 110 4G\2023_04_26_15_41_53_742_armlog
172620-1	15:42:25.740	--	Time: 3729 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE[20]
399509-1	15:43:11.883	--	Time: 7200 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:28, string: ^DSCI: 1,0,6,0,0,166,129,,16
418969-1	15:43:17.361	--	Time: 7200 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE[20]
419935-1	15:43:17.382	--	Time: 9157 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:24, string: ^DSCI: 1,0,2,1,0,166,129
\logs 26.4.23\nokia G50\hmdlogs\mdlog
diag_log_20230426_1523341682511814332.qmdl2
(2023-04-27T01:13:16Z)
客户已反馈log,麻烦看看是否有效，以下是客户抓log的步骤
please find attached the logs (“logs 26.4.23”) of both Nokia 110 4G (luna) & Nokia G50 (punisher) using the same SIM card (202/01) 
both devices were factory reset and the logs were recorded before inserting the same SIM card on both devices.
on both devices i attempted to make emergency calls (166) 2 times. with Nokia G50 i succeeded both times without any network drop. with luna i got the same result.. the device gets “stuck” on “emergency” screen
on Luna:
factory reset the device
OOBE without using SIM card
settings → security → lock phone
power off device
insert SIM card
turn on device
connect to the pc
start logging
entered phone lock pin (12345)
entered SIM pin 
registered to 4G with VoLTE enabled
made 2 attempts to call the 166
device was “stuck” each time on the “emergency” screen
on Nokia G50
factory reset the device
OOBE without using SIM card
sideloaded the “getlogapkInstall_Punisher_A13.apk” (in order to get the logs)
opened the “getlog” app
cleared all logs
started logging
power off device
insert SIM card
turn on device
entered SIM pin 
registered to 4G with VoLTE enabled
made 2 attempts to call the 166
successfully managed to hear the auto record message of 166 without any network drop both times
如果担心问题超期可以间隔两天反馈当前进展，先need-info，谢谢。
(2023-04-26T01:17:35Z)
客户暂时未反馈，未避免超期关闭，现做reopen处理
【当前结论】怀疑终端配置或网络问题，请按要求复测。提供的对比机MTK 的log打不开，请帮忙提供不加密的net log或者帮忙过滤sip/ims 消息的text文本。
【测试建议】用同一张卡202010927070126先后插测试机和对比机，打相同紧急电话，统计问题发生概率，提供从开机到电话结束的完整的modem log，谢谢。
【分析过程】下发EMERGENCY_IMS_ENABLE，网络不回SYN包，终端没有发紧急注册的register，拖到定时器超时。
log：emergency_2340\cosmote SIM 1\logs (from device startup)\2023_04_18_18_24_14_238_armlog
176629-1	18:24:46.937 	SIM1	IMS   	--	-> [0]REGISTER  
176630-1   	18:24:46.937 	18:24:46.937 	Time: 4619 REGISTER sip:ims.mnc001.mcc202.3gppnetwork.org SIP/2.0                                                                                                	           	
176633-1   	18:24:46.937 	18:24:46.937 	Time: 4619 From: <sip:202010927070126@ims.mnc001.mcc202.3gppnetwork.org>;tag=15oiUZ                                                                              	           	
176634-1   	18:24:46.937 	18:24:46.937 	Time: 4619 To: <sip:202010927070126@ims.mnc001.mcc202.3gppnetwork.org>                                                                                           	           	
176646-1   	18:24:46.937 	18:24:46.937 	Time: 4619 P-Access-Network-Info: 3GPP-E-UTRAN-FDD;utran-cell-id-3gpp=20201122c30d8617                                                                           	           	                             	                                             
177272-1	18:24:47.068 	SIM1	IMS   	--	<- [0]401                                    	                                             
178502-1	18:24:47.349 	SIM1	IMS   	--	-> [0]REGISTER                               	                                             
179099-1	18:24:47.473 	SIM1	IMS   	--	<- [0]200                                    	                                             
179197-1	18:24:47.476 	SIM1	IMS   	--	-> [0]SUBSCRIBE                              	                                             
179888-1	18:24:47.533 	SIM1	IMS   	--	<- [0]200                                    	                                             
179987-1	18:24:47.536 	SIM1	IMS   	--	<- [0]NOTIFY                                 	                                             
180072-1	18:24:47.538 	SIM1	IMS   	--	-> [0]200      
191218-1	18:24:49.758	--	Time: 4680 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE[20]
191606-1	18:24:49.771	--	Time: 4680 IMS: Service Id: 2, exiting state Service:Reset
191607-1	18:24:49.771	--	Time: 4680 IMS: Service Id: 2, entering state Service:Login
191612-1	18:24:49.771	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_STATE[15]
191810-1	18:24:49.773	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
191822-1	18:24:49.774	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REQ[32]
192151-1	18:24:49.776	--	Time: 4903 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_HANDSHAKE_RSP_SUCCESS[33]
193416-1	18:24:49.887	--	Time: 4903 [ TCPIP ] MtSend, pkt(0):8295e524, netif(81b80d04), IP6, cksum(2d0d), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
198501-1	18:24:50.727	--	[ TCPIP ] MtSend, pkt(0):8295ea64, netif(81b80d04), IP6, cksum(2d04), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
200245-1	18:24:51.086	--	[ TCPIP ] MtRecv, pkt(0):8295eb24, netif(81b80d04), IP6, cksum(c42c), Type(134), Code(0), ICMP6_RA(88)
202937-1	18:24:51.631	--	[ TCPIP ] MtSend, pkt(0):8295eca4, netif(81b80d04), IP6, cksum(2cfb), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
223298-1	18:24:55.892	--	mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
223571-1	18:24:55.894	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REQ[32]
223898-1	18:24:55.895	--	Time: 5515 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_HANDSHAKE_RSP_SUCCESS[33] 
224027-1	18:24:55.899	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):829561e4, netif(81b80d04), IP6, cksum(aa6b), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
227558-1	18:24:56.676	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956664, netif(81b80d04), IP6, cksum(aa63), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
233200-1	18:24:57.576	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956964, netif(81b80d04), IP6, cksum(aa5a), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
238952-1	18:24:58.478	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956a24, netif(81b80d04), IP6, cksum(aa51), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
244031-1	18:24:59.378	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956ba4, netif(81b80d04), IP6, cksum(aa48), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
248218-1	18:25:00.278	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956d24, netif(81b80d04), IP6, cksum(aa3f), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)                             	                                             
255422-1   	18:25:01.773 	18:25:01.773 	Time: 5515 _SAPP_processEvt EmergRegTmr expires  //sip_timerTemergency=12000（ms），超时    
255517-1	18:25:01.778	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]                                                                                        
255517-1	18:25:01.778	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
255786-1	18:25:01.780	--	Time: 6104 IMS: Service Id: 2, exiting state Service:Login
255787-1	18:25:01.780	--	Time: 6104 IMS: Service Id: 2, entering state Service:Reset
(20230421T08:23:11)
(In reply to 范家辉 (Jiahui Fan) 中央研究院/中央研究院-通信软件技术资源部/SWVC Ⅱ/(583)-1421 from comment #11)
Hi,jiahui，
SYN 包及时发送到网侧，L2数据通路未见异常，麻烦再确认一下IMS相关参数是否有问题，为什么网侧没有给回复。如果没问题，可能是网络问题导致网侧不给回复，谢谢。
//重新确认了一下，紧急注册 SYN 包走的紧急业务的承载。这些 SYN 包成功发送到网侧，并收到网侧rlc ack ，上下行数据传输未见异常。
230	2023-04-18 18:24:49.887000	2a02:1388:41f1:f900::c1c7:ca28	2a02:587:48ff:1101:0:deaf:5060:6	TCP	94				1030 → 5060 [SYN] Seq=0 Win=65535 Len=0 MSS=1200 SACK_PERM=1 WS=1 TSval=552 TSecr=0
231	2023-04-18 18:24:49.888000	2a02:1388:41f1:f900::c1c7:ca28	2a02:587:48ff:1101:0:deaf:5060:6	TCP	94				[TCP Out-Of-Order] 1030 → 5060 [SYN] Seq=0 Win=65535 Len=0 MSS=1200 SACK_PERM=1 WS=1 TSval=552 TSecr=0
232	2023-04-18 18:24:50.727000	2a02:1388:41f1:f900::c1c7:ca28	2a02:587:48ff:1101:0:deaf:5060:6	TCP	94				[TCP Retransmission] 1030 → 5060 [SYN] Seq=0 Win=65535 Len=0 MSS=1200 SACK_PERM=1 WS=1 TSval=561 TSecr=0
233	2023-04-18 18:24:50.728000	2a02:1388:41f1:f900::c1c7:ca28	2a02:587:48ff:1101:0:deaf:5060:6	TCP	94				[TCP Retransmission] 1030 → 5060 [SYN] Seq=0 Win=65535 Len=0 MSS=1200 SACK_PERM=1 WS=1 TSval=561 TSecr=0
1650	193588-1	18:24:49.889	--	Time: 4903 MAC_SubHeader_UL_MSG: LCID=5, Length=38.
1651	193589-1	18:24:49.889	--	Time: 4903 MAC_CE_BSR_UL_MSG: LCG=1, BSR=11.
1653	193592-1	18:24:49.889	--	Time: 4903 MAC_SubHeader_UL_MSG: LCID=5, Length=40.
1656	193595-1	18:24:49.889	--	Time: 4903 MAC_SubHeader_UL_MSG: LCID=5, Length=10.
1658	193597-1	18:24:49.889	--	Time: 4903 MAC_CE_BSR_UL_MSG: Long BSR = 0, 0, 0, 0.
1659	193612-1	18:24:49.889	--	Time: 4903 MAC_SubHeader_DL_MSG: LCID=5, Length=2.
//下一步建议提供一下pass log，用于对比DNS相关配置
//此处上网承载被去激活，后面没有再配置上网承载，导致SYN包发不出去，麻烦NAS同事看一下这边流程是否有问题，谢谢。
148218-1	18:24:38.392 	SIM1	LTE   	                                             	<- RRCCONNECTIONRECONFIGURATION              	0:00:43.790  	
148284-1	18:24:38.393 	SIM1	LTE   	                                             	-> RRCCONNECTIONRECONFIGURATIONCOMPLETE      	0:00:43.791  	
148362-1	18:24:38.393 	SIM1	      	<- DEACTIVATE_EPS_BEARER_CONTEXT_REQUEST     	                                             	0:00:43.791  	
148422-1	18:24:38.393 	SIM1	      	-> DEACTIVATE_EPS_BEARER_CONTEXT_ACCEPT      	                                             	0:00:43.791  	
//这边没有配置上网承载
189930-1   	18:24:49.637 	SIM1  	  	-> PDN_CONNECTIVITY_REQUEST                         	                                             	0:00:55.035  	
190000-1   	18:24:49.638 	SIM1  	LTE	                                                    	-> ULINFORMATIONTRANSFER                     	0:00:55.036  	
190541-1   	18:24:49.733 	SIM1  	LTE	                                                    	<- RRCCONNECTIONRECONFIGURATION              	0:00:55.131  	
190768-1   	18:24:49.735 	SIM1  	  	<- ACTIVATE_DEFAULT_EPS_BEARER_CONTEXT_REQUEST      	                                             	0:00:55.133  	
190803-1   	18:24:49.735 	SIM1  	  	-> ACTIVATE_DEFAULT_EPS_BEARER_CONTEXT_ACCEPT       	                                             	0:00:55.133  	
//SYN 包发不出去
193416-1   	18:24:49.887 	18:24:49.887 	Time: 4903 [ TCPIP ] MtSend, pkt(0):8295e524, netif(81b80d04), IP6, cksum(2d0d), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)                          	           	0:00:55.285  	
193421-1   	18:24:49.888 	18:24:49.888 	Time: 4903 DSM_DSB_UlData_RcvNewPkt stGetAckList: ulPktCnt=1, ulByteSize=80                                                                                      	DSM        	0:00:55.286  	
193423-1   	18:24:49.888 	18:24:49.888 	Time: 4903 tcpip: iproute() - invalid host or hop1!                                                                                                              	           	0:00:55.286
Hi guoqing，
【当前结论】还请帮忙分析18:24:49.887到18:24:51.631、18:24:55.895到18:25:00.278建链是否正常，谢谢。
【分析过程】下发EMERGENCY_IMS_ENABLE，TCP建链无响应，一直重发SYN包，终端没有发紧急注册的register，拖到定时器超时。
log：emergency_2340\cosmote SIM 1\logs (from device startup)\2023_04_18_18_24_14_238_armlog
176629-1	18:24:46.937 	SIM1	IMS   	--	-> [0]REGISTER                               	                                             
177272-1	18:24:47.068 	SIM1	IMS   	--	<- [0]401                                    	                                             
178502-1	18:24:47.349 	SIM1	IMS   	--	-> [0]REGISTER                               	                                             
179099-1	18:24:47.473 	SIM1	IMS   	--	<- [0]200                                    	                                             
179197-1	18:24:47.476 	SIM1	IMS   	--	-> [0]SUBSCRIBE                              	                                             
179888-1	18:24:47.533 	SIM1	IMS   	--	<- [0]200                                    	                                             
179987-1	18:24:47.536 	SIM1	IMS   	--	<- [0]NOTIFY                                 	                                             
180072-1	18:24:47.538 	SIM1	IMS   	--	-> [0]200      
191218-1	18:24:49.758	--	Time: 4680 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE[20]
191606-1	18:24:49.771	--	Time: 4680 IMS: Service Id: 2, exiting state Service:Reset
191607-1	18:24:49.771	--	Time: 4680 IMS: Service Id: 2, entering state Service:Login
191612-1	18:24:49.771	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_STATE[15]
191810-1	18:24:49.773	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
191822-1	18:24:49.774	--	Time: 4680 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REQ[32]
192151-1	18:24:49.776	--	Time: 4903 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_HANDSHAKE_RSP_SUCCESS[33]
193416-1	18:24:49.887	--	Time: 4903 [ TCPIP ] MtSend, pkt(0):8295e524, netif(81b80d04), IP6, cksum(2d0d), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
198501-1	18:24:50.727	--	[ TCPIP ] MtSend, pkt(0):8295ea64, netif(81b80d04), IP6, cksum(2d04), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
200245-1	18:24:51.086	--	[ TCPIP ] MtRecv, pkt(0):8295eb24, netif(81b80d04), IP6, cksum(c42c), Type(134), Code(0), ICMP6_RA(88)
202937-1	18:24:51.631	--	[ TCPIP ] MtSend, pkt(0):8295eca4, netif(81b80d04), IP6, cksum(2cfb), S:2144df, A:0, W:65535, l:0, 1030 -> 5060, TCP_SYN(80)
223298-1	18:24:55.892	--	mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
223571-1	18:24:55.894	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REQ[32]
223898-1	18:24:55.895	--	Time: 5515 mn_al[0]: MN --> CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_SERVICE_REASON_HANDSHAKE_RSP_SUCCESS[33] 
224027-1	18:24:55.899	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):829561e4, netif(81b80d04), IP6, cksum(aa6b), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
227558-1	18:24:56.676	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956664, netif(81b80d04), IP6, cksum(aa63), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
233200-1	18:24:57.576	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956964, netif(81b80d04), IP6, cksum(aa5a), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
238952-1	18:24:58.478	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956a24, netif(81b80d04), IP6, cksum(aa51), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
244031-1	18:24:59.378	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956ba4, netif(81b80d04), IP6, cksum(aa48), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)
248218-1	18:25:00.278	--	Time: 5515 [ TCPIP ] MtSend, pkt(0):82956d24, netif(81b80d04), IP6, cksum(aa3f), S:2d02d3, A:0, W:65535, l:0, 1031 -> 5060, TCP_SYN(80)                             	                                             
255422-1   	18:25:01.773 	18:25:01.773 	Time: 5515 _SAPP_processEvt EmergRegTmr expires  //sip_timerTemergency=12000（ms），超时    
255517-1	18:25:01.778	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]                                                                                        
255517-1	18:25:01.778	--	Time: 5515 mn_al[0]: MN <-- CSM,CSM_EVENT_TYPE_SERVICE[2],CSM_OUTPUT_REASON_SERVICE_HANDSHAKE_REL[54]
255786-1	18:25:01.780	--	Time: 6104 IMS: Service Id: 2, exiting state Service:Login
255787-1	18:25:01.780	--	Time: 6104 IMS: Service Id: 2, entering state Service:Reset
N2AInBug
(In reply to 范家辉 (Jiahui Fan) 中央研究院/中央研究院-通信软件技术资源部/SWVC Ⅱ/(583)-1421 from comment #7)
   麻烦jiahui再确认下IMS的紧急注册问题，SERVICE_STATE不是active的导致电话不会下发。
log：emergency_2340\cosmote SIM 1\logs (from device startup)\2023_04_18_18_24_14_238_armlog
39	189744-1	18:24:49.637	--	Time: 4680 mncall_volte: MO call domain:2	MN_AL		
41	190053-1	18:24:49.638	--	Time: 4680 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:24, string: ^DSCI: 1,0,2,1,0,166,129	ATC		
47	191360-1	18:24:49.770	--	Time: 4680 IMS: MN->CSM[0] CSM_EVENT_TYPE_SERVICE CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE			
48	191609-1	18:24:49.771	--	Time: 4680 IMS: CSM->MN[0] CSM_EVENT_TYPE_SERVICE CSM_OUTPUT_REASON_SERVICE_STATE			
64	658874-1	18:26:23.284	--	Time: 12683 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:28, string: ^DSCI: 1,0,6,0,0,166,129,,16	ATC		
65	678678-1	18:26:27.176	--	Time: 12683 mncall_volte: MO call domain:4	MN_AL		
70	678751-1	18:26:27.177	--	Time: 12683 IMS: MN->CSM[0] CSM_EVENT_TYPE_SERVICE CSM_SERVICE_REASON_EMERGENCY_IMS_ENABLE			
71	679000-1	18:26:27.179	--	Time: 12683 IMS: CSM->MN[0] CSM_EVENT_TYPE_SERVICE CSM_OUTPUT_REASON_SERVICE_STATE
(20230420T07:51:22)
Hi qiqing，
【当前结论】测试机log没有看到几个紧急电话下发，对比机MTK log打不开，没法看，请帮忙分析测试机是否有洗发紧急电话，谢谢。
log：emergency_2340\cosmote SIM 1\logs (from device startup)\2023_04_18_18_24_14_238_armlog
190053-1	18:24:49.638	--	Time: 4680 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:24, string: ^DSCI: 1,0,2,1,0,166,129
658874-1	18:26:23.284	--	Time: 12683 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:28, string: ^DSCI: 1,0,6,0,0,166,129,,16
680173-1	18:26:27.205	--	Time: 14644 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:24, string: ^DSCI: 1,0,2,1,0,911,129
1218602-1	18:28:12.107	--	Time: 23498 ATC: BuildUnsolicitedInfo, link_id:0, sim:0, len:28, string: ^DSCI: 1,0,6,0,0,911,129,,16
麻烦IMS进一步查看对比机log（pass logs G50）使用SIM卡（202010927070126）拨打166, 100, 911情况。
当前DUT拨打使用网络上报ECC号码配置（带categories）失败的分析如下：
log：emergency_2340\cosmote SIM 1\logs (from device startup)\2023_04_18_18_24_14_238_armlog
100169-1   	18:24:33.085 	18:24:33.085 	[IMS]:ims_general_set_imsi: 202010927070126                                                                                                                      	           	0:00:38.483  	
118038-1   	18:24:34.626 	18:24:34.626 	Time: 3387 HandlePsAndRefMsg:receive APP_MN_NW_ECC_INFO_IND                                                                                                      	           	0:00:40.024  	
118039-1   	18:24:34.626 	18:24:34.626 	Time: 3387 HandleNwECCInfoInd dual_sys=0, num=5                                                                                                                  	           	0:00:40.024  	
118042-1   	18:24:34.626 	--	*Unknown:0xA268                                     	P_MN->P_APP                                  	0:00:40.024  	
====》开机log中上报了ECC号码，共5个，丢了log无法确认
189712-1   	18:24:49.630 	18:24:49.630 	Time: 4680 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=100                                                                                               	           	0:00:55.028  	
189713-1   	18:24:49.630 	18:24:49.630 	Time: 4680 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=108                                                                                               	           	0:00:55.028  	
189714-1   	18:24:49.630 	18:24:49.630 	Time: 4680 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=112                                                                                               	           	0:00:55.028  	
189715-1   	18:24:49.630 	18:24:49.630 	Time: 4680 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=166                                                                                               	           	0:00:55.028  	
189716-1   	18:24:49.630 	18:24:49.630 	Time: 4680 ccapp: MMIAPICC_EmergencyCallCheckType: [NW] emgcy_ctgry_value=2                                                                                      	           	0:00:55.028  	 	
====》后续拨打电话中的log中可见上报了100、1008、112、166
189719-1   	18:24:49.630 	18:24:49.630 	Time: 4680 MNCALL_StartCallWithEscvEx,call_type:1,escvP:1,escv:2                                                                                                 	MN_AL      	0:00:55.028 
====》拨打166 携带categories=2失败
抱歉，上传错测试机log了,对比机视频也上传了，已重新上传麻烦在看看
但是看了下客户未使用上次提供fail logSIM卡（imsi：20201122c30d8653）,但都是202/01的卡，麻烦看看是否可用，以下是客户测试的具体步骤，
scenario 1: i disable the airplane mode → call the 166 (ambulance) → the device stays on 4G (VoLTE enabled), the screen shows “emergency call” and after >1 minute of waiting i hang up the call → i call 911 and i get the exact same behavior
scenario 2: i start recording logs before i enter the SIM pin → wait until the device connects to 4G (VoLTE enabled) → call the 166 (ambulance) → the device stays on 4G (VoLTE enabled), the screen shows “emergency call” and after >1 minute of waiting i hang up the call → i call 911 and i get the exact same behavior
当前提供的log压缩包中18.4.23 (1)并无上次提供failedlog中的SIM卡（imsi：20201122c30d8653），并且只有开机log，没有拨打操作。
请使用上次failed log中log：logs 17.4.23\fail logs cosmote (202.01)\2023_04_17_17_34_03_877_armlog所用SIM卡（imsi：20201122c30d8653），抓取开机log并且包含拨打166, 100, 911的操作。
对比机也必须使用此张SIM卡（imsi：20201122c30d8653）。
请自行检测后再提交log，关键字搜索例如：
LOG:logs 18.4.23 (1)\emergency alerts (cosmote SIM card)\2023_04_18_16_27_21_281_armlog
134263-1   	16:27:31.234 	16:27:31.234 	[IMS]:ims_general_set_imsi: 202010927070126                                                                                                                      	           	0:00:44.163  	
140864-1   	16:27:31.575 	16:27:31.575 	Time: 3840 HandlePsAndRefMsg:receive APP_MN_NW_ECC_INFO_IND                                                                                                      	           	0:00:44.504  	
以及拨打电话操作
221312-1   	17:34:23.461 	17:34:23.461 	Time: 4402 MNCALL_StartCallWithEscvEx,call_type:1,escvP:1,escv:2                                                                                                 	MN_AL      	0:00:53.394
(2023-04-19T05:35:25Z)
客户已重新提供了pass log和测试机log,麻烦看看是否有用
当前SIM卡应该是收到了网络消息，配置100/108/112/166为ECC
与其他两张Pass log无对比意义，建议重新抓取log。
1. 使用该张SIM卡（imsi：20201122c30d8653）的开机log并拨打ECC（166、100、 911）
2. 其他对比机使用该卡（imsi：20201122c30d8653）的开机log并拨打ECC（166、100、 911），对比机行为是客户认为正确的log
log：logs 17.4.23\fail logs cosmote (202.01)\2023_04_17_17_34_03_877_armlog
221305-1   	17:34:23.461 	17:34:23.461 	Time: 4402 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=100                                                                                               	           	0:00:53.394  	
221306-1   	17:34:23.461 	17:34:23.461 	Time: 4402 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=108                                                                                               	           	0:00:53.394  	
221307-1   	17:34:23.461 	17:34:23.461 	Time: 4402 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=112                                                                                               	           	0:00:53.394  	
221308-1   	17:34:23.461 	17:34:23.461 	Time: 4402 ccapp: MMIAPICC_EmergencyCallCheckType: network_num=166                                                                                               	           	0:00:53.394  	
221309-1   	17:34:23.461 	17:34:23.461 	Time: 4402 ccapp: MMIAPICC_EmergencyCallCheckType: [NW] emgcy_ctgry_value=2                                                                                      	           	0:00:53.394  	
221312-1   	17:34:23.461 	17:34:23.461 	Time: 4402 MNCALL_StartCallWithEscvEx,call_type:1,escvP:1,escv:2                                                                                                 	MN_AL      	0:00:53.394
(20230418T08:32:05)
# SPCSS01155873|[SC9863A1][Waterworld][FS170-SC9863A1][13252][手机][XM]客户送测RF样机测试TRP掉线，查到SPI干扰，现在贵司RF给的方案是在SPI上并100PF电容能解决问题，但RF不确定会不会存在风险，请BB同事帮忙加急确认下！！！|客户送测RF样机测试TRP掉线，查到是SPI干扰，现在贵司RF给的方案是在SPI上并100PF电容能解决问题，但RF不确定会不会存在风险，请贵司BB同事帮忙加急确认下这个问题，是否一定要改板？|
关闭。
[1.Root Cause        ]:SPI上并100PF电容
[2.Resolution        ]:建议只在SPIB 上增加电容
如沟通，回复如下：
1）从波形上看，没有发现异常。
2) SPIA 会影响到校准，建议只在SPIB 上增加电容。
谢谢。
尊敬的展讯，您好！ 
    帮忙看一下今天上传的波形变化对RF会不会有影响？谢谢！
尊敬的展讯，您好！ 
    我们重新确认了，用Pandora方式不出波形。后面还是有白卡连接仪器测试的，连WCDMA B1波形如附件！比较明显就是100PF上升沿变平滑了，没那么陡了。
尊敬的展讯，您好！ 
    贵司有没有测试过这个SPI信号的波形？现在测试了波形没法确定对不对。
    用Pandora 方式按你们给的建议试都没有波形出来，手机要开机吗？以前我们用Pandora是一般不开机，只上电连接。
如沟通，回复如下：
1）建议用贵司容易复现问题的频段和测试方法，测试SPIA和SPIB信号。
2）再用Pandora 方式，测试SPIA和 SPIB信号。
谢谢。
(2023-04-21T02:32:23Z)
尊敬的展讯，您好！ 
1）之前校准不过，是因为SPIA没有改匹配造成的。
---这点你理解错了，我的意思是SPIA上并的物料从22PF改成100PF后会校准不过，所以这个就没有更改，保持原来物料22PF。并且我们验证掉线只要把SPIB的三个并的物料从22PF改成100PF就可以解决问题。
1、我们想法是减少影响，想SPIA不动匹配，只改SPIB，这个方案是否可行？可以的话我们是不是就需要测试SPIB的波形就好了？SPIA不用管？
2、前面咨询的：SPIA是PCC才使用？SPIB是SCC才使用的信号？如果是，我们这个项目只做了PCC，我理解改动SPIB对实际使用是不是应该没啥影响？
从贵司反馈看：
1）之前校准不过，是因为SPIA没有改匹配造成的。
2）使用Pandora，建议测试SPIA 波形。
谢谢。
(2023-04-20T06:09:31Z)
我们SPIA没有改匹配，校准会不良，改的SPIB信号上的，SPIA应该不用测试了吧？
第3步，先在debug栏，分别输出0x2，0x1，0x0 ，然后再点击debug，具体见附件截图。
写操作，RX ON，不要和第3步一起执行，分开来执行。
上述步骤，分别测试SPIA和SPIB。触发方式采用单次，不要用自动。
谢谢。
(20230420T01:35:30)
尊敬的展讯，您好！ 
    如附件图片，帮忙看一下操作有没有问题？其中第3步不知道是怎么操作的？帮忙说明下，谢谢！
建议用Pandora工具：
1）WCDMA CAL 模式 connect，Entermode sucess
2）Wcdma active succeed.
3）debug 2，1，ADDR1 （00） 这是读。
4）写操作，RX ON
5) 复测下SPI波形。
谢谢。
(20230419T12:07:17)
尊敬的展讯，您好！
    对比波形如附件，帮忙看一下是否可接受。
    另外我想了解一下SPIA和SPIB两组信号的差别？是否一个主集信号一个分集信号用的？还是PCC和SCC的差别？因为我发现如果在SPIA上加100PF直接校准会不良，SPIB上加就不会。
需要对比测试下22pF与100pF：
1)用示波器 抓取下LE,CLK,DATA 信号,信号飞线长度小于3cm。
2）示波器至少500MHZ。
3）时间刻度100ns，50ns分别抓取。
4) 测试sleep wakeup时的信号波形有无明显异常。
谢谢。
(2023-04-18T07:49:35Z)
原理图和位号图我也放上去了，SPI更改100PF对应位号是C0609/C0610/C0611/C0612/C0613/C0614.
不好意思，漏放上去了，关联CQ：SPCSS01149289
关联CQ SPCSS01149289
是否有关联的RF CQ，如有请提供一下，以便沟通确认，谢谢~
(2023-04-18T06:47:50Z)
# SPCSS01155836|[UMS9230][Waterworld][A567-V3-A13][13741][CEBU-智能手机]开启数据漫游怎么默认数据漫游为"仅限国内漫游"。|步骤：
我默认开启了--- a/vendor/sprd/platform/frameworks/base/core/res/res/values/config_ex.xml
+++ b/vendor/sprd/platform/frameworks/base/core/res/res/values/config_ex.xml
@@ -58,7 +58,7 @@
     </string-array>
     <!-- UNISOC: national data roaming -->
-    <bool name="national_data_roaming" translatable="false">false</bool>
+    <bool name="national_data_roaming" translatable="false">true</bool>
然后在
--- a/packages/apps/Settings/src_unisoc/com/unisoc/settings/network/NationalRoamingPreferenceController.java
+++ b/packages/apps/Settings/src_unisoc/com/unisoc/settings/network/NationalRoamingPreferenceController.java
@@ -59,7 +59,7 @@ public class NationalRoamingPreferenceController extends TelephonyBasePreference
         super.updateState(preference);
         final ListPreference listPreference = (ListPreference) preference;
         final int roamingType = getNationalRoamingType();
-        log("updateState: roamingType = "  + roamingType + " ,mSubId = " + mSubId);
+        log("lrw updateState: roamingType = "  + roamingType + " ,mSubId = " + mSubId);
         listPreference.setValue(Integer.toString(roamingType));
         listPreference.setSummary(getPreferredNationalRoamingTypeSummaryResId(roamingType));
     }
@@ -84,9 +84,9 @@ public class NationalRoamingPreferenceController extends TelephonyBasePreference
     private int getNationalRoamingType() {
         boolean defaultValue = mUniTelephonyManager.isDefaultDataRoamingEnabled(mSubId);
-        log("defaultValue = " + defaultValue);
+        log("lrw defaultValue = " + defaultValue);
         return GlobalSettingsHelper.getInt(mContext, Settings.Global.DATA_ROAMING,
-                mSubId, defaultValue ? 1:0);
+                mSubId, defaultValue ? 2:0);
     }
--- a/vendor/sprd/platform/frameworks/telephony-injection/uni-telephony-common/src/java/com/android/internal/telephony/data/UniDataSettingsManager.java
+++ b/vendor/sprd/platform/frameworks/telephony-injection/uni-telephony-common/src/java/com/android/internal/telephony/data/UniDataSettingsManager.java
@@ -178,7 +178,7 @@ public class UniDataSettingsManager extends DataSettingsManager {
         public void onChange(boolean selfChange) {
             boolean alwaysOnline = GlobalSettingsHelper.getInt(mPhone.getContext(),
                     UniSettings.UniGlobal.MOBILE_DATA_ALWAYS_ONLINE, mPhone.getSubId(), 1) == 1 ? true : false;
-            log("onChange: alwaysOnline = " + alwaysOnline);
+            log("lrw onChange: alwaysOnline = " + alwaysOnline);
             if (mAlwaysOnline != alwaysOnline) {
                 if (alwaysOnline) {
                     cancelAlarmForDeepSleep();
@@ -314,7 +314,7 @@ public class UniDataSettingsManager extends DataSettingsManager {
         if (mPhone.getContext().getResources().getBoolean(
                     com.unisoc.internal.R.bool.national_data_roaming)) {
             int dataRoaming =  GlobalSettingsHelper.getInt(mPhone.getContext(),
-                    Settings.Global.DATA_ROAMING, mSubId, defaultValue ? 1 : 0);
+                    Settings.Global.DATA_ROAMING, mSubId, defaultValue ? 2 : 0);
             boolean isDataRoamingEnabled = false;
             switch (dataRoaming) {
                 case NATIONAL_ROAMING_TYPE_ALL_NETWORKS:
@@ -331,7 +331,7 @@ public class UniDataSettingsManager extends DataSettingsManager {
                     isDataRoamingEnabled = false;
                     break;
             }
-            log("dataRoaming = " + dataRoaming + " ,isDataRoamingEnabled = " + isDataRoamingEnabled);
+            log("lrw dataRoaming = " + dataRoaming + " ,isDataRoamingEnabled = " + isDataRoamingEnabled);
             return isDataRoamingEnabled;
RootCause:
客户打开自研feature，需要再次定制
Solution:
客户自己完成功能
电话沟通客户自己已经解决，客户关闭
关闭，已解决
# SPCSS01155819|[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]手机使用蓝牙耳机听音乐，信号不好【CDBUG-8873】|手机使用蓝牙耳机听音乐，信号不好
1.会出现噪音，失真等情况
2.调整音量的时候，会延迟1-2秒生效。
好的，谢谢
    平台设计如此。
(20230510T06:09:44)
那这个怎么解决呢？还是说设计就是这样的呢？
   蓝牙播放时的音量是通过修改音源来实现的，有延时是因为已经缓存到蓝牙里的音源部分没有修改到，要过一段时间才会播放到修改音量后的部分。请知悉。
(2023-05-10T02:47:31Z)
看起来这个是调整的音源，调整的控制不是起的蓝牙avrcp，请audio帮忙看一下从按键到设置生效，花了多少时间；
对的，“调整音量”是指在手机上面按音量加减，不是在耳机上面按音量加减
(In reply to waterworld from comment #18)
log上没有看到有在耳机端调整音量，但hci dump里面听到的声音是有在变小；
-------------
再确认一下：你所谓的“调整音量”是在手机上面按音量加减？而不是在耳机上面按音量加减？
(20230509T08:11:16)
请问下，有什么进展了吗？
上传了新的log在FTP上，麻烦帮忙分析下
这样抓通常比较全：关闭蓝牙-打开log工具-等trace那一页开始正常刷新-打开蓝牙-做复现操作-出现问题，导出log.
可以看一下出来的这个文件---xxx_bt.cap 是否能被wireshark 软件打开（打开是否有内容）
---------
wireshark 会解出蓝牙协议的东西；看蓝牙相关的hci log；
针对你说的这个延时1-2秒，我们需要找到一个时间标记，或者动作标记；比如你说的按了音量减，那我可以看hci log上音量减收到的时间点，跟真正调整音量的时间点进行比较，看看是否有延时，如果有延时，那就是说延时是在ap侧；如果进来没有延时，那就有可能是对方发给我就慢了，或者我收慢了，这个需要抓空口看，这个方向就不好排查；建议还是寄一台过来；
(2023-05-08T09:47:22Z)
    失真问题:我们这边确认了跟耳机有关系，但是延时的问题还是存在。  
可以教一下我们大概如何看下log,这样也方便我们提供你需要的log
(In reply to waterworld from comment #13)
请问一下,
    两份log都有“延迟”没有你说的 1.会出现噪音，失真等情况 这个情况吗？
    目前log来看，第一份有hci log，第二份没有；
    第一份只有看到有在耳机上按播放按钮，没有看到有调整音量的操作；
-------------------
    情况对不齐，而且时间点不好把握，要不你详细写一下你的操作步骤；在哪一个操作的时候发现了你说的问题，然后寄台手机给我，我自己来复现好了；
-------------------
     地址：四川省，成都市，武侯区，天华二路219号天府软件园C5栋4F 展讯半导体(成都)有限公司。
     收件人：高家伟
     电话：15902895175
(20230508T03:56:05)
最新的log，已上传到FTP
 == CustomerPhone Changed from == 
18359199264
To
17689487337
 == Contacter Changed from == 
李为
To
郑炜灵
还末得到日志，need infor
(2023-04-28T06:50:39Z)
    硬件部门同时那边验证测试，是否和标准 调过的 没有问题 那我这边安排抓下日志
(In reply to waterworld from comment #7)
蓝牙耳机声音延迟1
->这一份都是有的，只是你要等到trace那个log在刷新了，再去打开蓝牙，就有整个复现过程的log了；默认应该是打开的，没有单独打开的操作；
(In reply to waterworld from comment #6)
指天线的性能和传导；调了通常有报告，你找硬件要一下；我们看一下是否达标；
(20230428T01:41:02)
抓HCI log 需要开什么配置开关吗，请提供一下详细的操作步骤谢谢
你好
   天线有调过对应的NV参数，你说的调过还有指其他吗
(In reply to waterworld from comment #4)
看xxxx_bt.cap里面是否有内容；
--------------
1,先确认一下 ，这个项目的天线是否有调过，是正常的吗？
->天线的事情，先确认一下；
(2023-04-28T01:07:02Z)
    要有hci log  这个要怎么弄，抓完后要怎么确认是否有hci
ly - 》此份无有效hci log:
蓝牙耳机声音延迟1 ->没有抓耳机的连接过程，profile解析不出来；
蓝牙耳机声音延迟2 ->没有有效hci log; 
--------------
1,先确认一下 ，这个项目的天线是否有调过，是正常的吗？
2,抓log的时候，请保证有hci log，并从耳机的连接过程就要开始抓。
(2023-04-25T07:25:22Z)
 == Headline Changed from == 
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]手机使用蓝牙耳机听音乐，信号不好
To
[UMS9117-L][Waterworld][FF622-Reliance][13424][功能手机]手机使用蓝牙耳机听音乐，信号不好【CDBUG-8873】
您好：
    这边有在处理吗
对应日志已经上传到FTP
# SPCSS01155799|[SC9863A1][Waterworld][FS301-A13][13411][智能手机][6部][遵义]:同机器，分别下载A12  A13的软件，音频参数一致的情况下,播放声音大小有区别|步骤：同机器，分别下载A12  A13的软件，音频参数一致
现象：A12的MP3声音会稍微强2-3db左右
分析：测量了两个机器音频功放输出到喇叭的功率一致，对比log已上传附件，这个项目比较急，麻烦尽快帮忙分析一下，谢谢|
RootCause:
Android版本升级声音大小不一样
Solution:
音频参数不一样导致的
bug关闭
N2AInBug
两个音频参数根本不一样啊，请贵司自查。
(2023-04-26T09:47:29Z)
hi Yabin.Mu:
对应音频参数已上传附件：音频参数_NV.zip，麻烦帮忙分析一下，谢谢
连上audiotester工具export就可以了，xml文件没法离线导入audiotester工具。
(20230425T03:46:08)
hi Yabin.Mu:
请教一下具体是怎么导呢，用ResearchDownload工具吗，如果是ResearchDownload工具具体是哪个文件呢
要把NV文件用工具导出来。
(2023-04-24T10:08:43Z)
Hi Yabin.Mu:
对应音频参数已上传附件：音频参数.zip，麻烦帮忙分析一下谢谢
请上传两个版本的音频参数。
(20230424T06:49:43)
hi  Baolin.Li:
问题一对应的同事还未反馈
问题二所需的数据已上传附件：dump HAL pcm数据和tinymix和寄存器.zip
麻烦帮忙看一下，谢谢
hi customer
1.你们分析说是测量了机器音频功放输出到喇叭的功率一致？
我看你们是HP接的外置PA，是否可以测量送到PA前的信号，谢谢
2.请帮忙dump HAL pcm数据和tinymix和寄存器，A12和A13分别操作保存文件
a. dump：
请先输入下面命令,然后复现问题,最后将/data/vendor/local/media/ 目录下的数据pull出来上传，谢谢
adb root
adb shell "setenforce 0"
adb shell "echo loglevel=5 > /data/vendor/local/media/mmi.audio.ctrl"
adb shell "setprop af.media.audiofw.devices.dump 0xffffff"
adb shell "setprop af.media.audiofw.dump 0xffffff"
adb shell "echo set_dump_data_switch=0x0fff >
/data/vendor/local/media/mmi.audio.ctrl"
adb shell "echo set_dump_data_path=/data/vendor/local/media/ >
/data/vendor/local/media/mmi.audio.ctrl"
adb shell "echo vbc_pcm_dump=vbc_dac0 >
/data/vendor/local/media/mmi.audio.ctrl"
b.寄存器
adb shell
su
cat /proc/asound/sprdphone/vbc
cat /proc/asound/sprdphone/sprd-codec
c.tinymix
adb shell
su
tinymix
(20230423T02:45:02)
hi  Baolin.Li:
音量都最大的情况，测试方法是播放MP3同一个音频文件，主观上去听声音A13整体偏小，我们把A12的音频参数换到A13现象一致，麻烦帮忙看看可以优化的方法
对比了下 Music流 的音频曲线是一样的，音量等级是一样的。
声音都调到最大，上层衰减值为 0 ， 都没有衰减， 都是走的 offload 通路。
A12:
  1 Tracks of which 1 are active
    Type     Id Active Client Session Port Id S  Flags   Format Chn mask  SRate ST Usg CT  G db  L dB  R dB  VS dB   Server FrmCnt  FrmRdy F Underruns  Flushed
             75    yes   6639    1113      57 A  0x000 01000000 00000003  44100  3   1  0     0     0     0     0  001E0000  65536   65536 A         0        0
A13:
  1 Tracks of which 1 are active
    Type     Id Active Client Session Port Id S  Flags   Format Chn mask  SRate ST Usg CT  G db  L dB  R dB  VS dB   Server FrmCnt  FrmRdy F Underruns  Flushed
             60    yes   5708     193      20 A  0x000 01000000 00000003  44100  3   1  0     0     0     0     0  002C0000  65536   65536 A         0        0
音量都最大的情况下， 测量的强度还是不一样 ？  这个是测的哪里的值 ？
多谢！~
(20230419T02:35:59)
hi Baolin.Li:
音乐播放器都用的YouTube Music，音量等级都开到25
对应1和2操作的文件已上传A12和A13声音大小不一致.zip，麻烦帮忙分析一下谢谢
请用同一个音乐播放器播放声音，音量等级调成一致 (贵司对比时，音量等级调的几对比的？)
请把上面两个条件对齐下， 然后针对 A12 / A13 均做如下处理。
1. 提供手机中如下文件:
/vendor/etc/audio_policy_engine_stream_volumes.xml
/vendor/etc/audio_policy_engine_default_stream_volumes.xml
2. 播放音乐时， 分别做如下dump:
adb shell dumpsys audio > audio.txt
adb shell dumpsys media.audio_flinger >audio_flinger.txt
多谢！~
(2023-04-18T06:07:36Z)
# SPCSS01155797|[SC9863A1][Waterworld][FS170-SC9863A1][13252][手机][A6][ZY]GO项目使用202301月的谷歌包，谷歌助手异常，无法点击|步骤：主界面点击谷歌助手或者主菜单界面点击谷歌助手
现象：无法进入谷歌助手APP内
1.可以通过HOME进入
2.可以长按电源键进入
3.主观项中
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
谷歌助手无法测试通过
4.手动更新谷歌助手后也无法手动进入
请帮忙检查，附件是测试ylog和视频，谢谢！
hi 邱国银同志：
    合入您的方案测试ok,谢谢您的支持，祝你五一快乐。
内部碉认, gms包有问题，google预计下周会出新版本. 
关於
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
请合入如下的代码
请修改gms中的google_go.xml
diff --git a/etc/preferred-apps/google_go.xml b/etc/preferred-apps/google_go.xml
index 80c5160..052a200 100644
--- a/etc/preferred-apps/google_go.xml
+++ b/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
RootCause:
内部碉认, gms包有问题，google预计下周会出新版本. 
关於
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
请合入如下的代码
请修改gms中的google_go.xml
diff --git a/etc/preferred-apps/google_go.xml b/etc/preferred-apps/google_go.xml
index 80c5160..052a200 100644
--- a/etc/preferred-apps/google_go.xml
+++ b/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
Solution:
内部碉认, gms包有问题，google预计下周会出新版本. 
关於
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
请合入如下的代码
请修改gms中的google_go.xml
diff --git a/etc/preferred-apps/google_go.xml b/etc/preferred-apps/google_go.xml
index 80c5160..052a200 100644
--- a/etc/preferred-apps/google_go.xml
+++ b/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
内部碉认, gms包有问题，google预计下周会出新版本. 
关於
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
请合入如下的代码
请修改gms中的google_go.xml
diff --git a/etc/preferred-apps/google_go.xml b/etc/preferred-apps/google_go.xml
index 80c5160..052a200 100644
--- a/etc/preferred-apps/google_go.xml
+++ b/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
hi 邱国银同志：
    测试ok，感谢您的支持，祝你工作愉快~~~~
请将gms应用都全部升级完再试试
(20230419T11:09:07)
HI 邱国银同志：   
   你这个修改方案无效，请您确认
--- a/SPRD-13-202301/etc/preferred-apps/google_go.xml
+++ b/SPRD-13-202301/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
内部碉认, gms包有问题，google预计下周会出新版本. 
关於
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
请合入如下的代码
请修改gms中的google_go.xml
diff --git a/etc/preferred-apps/google_go.xml b/etc/preferred-apps/google_go.xml
index 80c5160..052a200 100644
--- a/etc/preferred-apps/google_go.xml
+++ b/etc/preferred-apps/google_go.xml
@@ -65,4 +65,18 @@
             <type name="video/x-matroska" />
         </filter>
     </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.intent.action.VOICE_COMMAND"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
+    <item name="com.google.android.apps.searchlite/.assistant.AssistantActivity">
+        <filter>
+            <action name="android.speech.action.WEB_SEARCH"/>
+            <cat name="android.intent.category.DEFAULT"/>
+            <cat name="android.intent.category.BROWSABLE"/>
+        </filter>
+    </item>
 </preferred-activities>
(20230419T02:04:28)
HI 邱国银同志：
    测试是必现的，目前有客户发现了这个问题，我们这边GMS负责的同志，联系了贵司的谷歌包释放的同志，确认是有这个问题，现在我们想确认的是在当前情况下，使用1月份谷歌包是否影响GMS认证，因为主观项：adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
adb shell “am start -W -a android.intent.action.VOICE_COMMAND | grep -c com.google.android.apps.searchlite”
无法测试通过
有看到点，但是没有谷歌助手有打印,  Input focus has changed to null from 743c2d com.android.launcher3/com.android.launcher3，可否协助分析为何点没有迈入谷歌助手apk?
同时没有其他客户报此问题·此问题是否100%发生，如果用其他测试机测试是否也是会有问题?
(20230418T06:45:51)
你好 这边本地测试 如果更新了GOOGLE GO APK 和GOOGLE ASSITANT GO apk 就不会有这个问题
这边有如下疑惑
请问这个问题是不是1月份GMS包问题  ，如果是的话 会不会影响到预置1月份GMS包的送测
