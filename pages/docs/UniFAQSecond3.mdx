### 问题: GC0309/GC0328分别用作前后摄像头，出现识别异常的原因分析和解决方法
解决方案: 怪异现象:烧机后第一次进相机会先提示"很抱歉,相机已停止运行",第二次才能正常进入. 典型logel: 对应第一次摄像头Identify的异常logel段: Sensor_GetCurId: Sensor_GetCurId,sensor_id =0 _Sensor_Identify: SENSOR:identify Sensor 01 GC0328_Identify: GC0328_Identify GC0328_ReadReg: SENSOR: GC0328_ReadReg reg/value(f0,f3) !! GC0328_ReadReg: SENSOR: GC0328_ReadReg reg/value(f0,f3) !! GC0328_ReadReg: SENSOR: GC0328_ReadReg reg/value(f0,f3) !! GC0328_ReadReg: SENSO
完整回答请参考FAQ: FAQ30200
### 问题: 7715 T卡不能识别
解决方案: 请在软件上将idh.code\kernel\arch\arm\mach-sc目录下将devices-sc8830.c文件下的 static struct sprd_sdhci_host_platdata sprd_sdio0_pdata = { .caps = MMC_CAP_HW_RESET | MMC_CAP_4_BIT_DATA, .caps2 = MMC_CAP2_HC_ERASE_SZ | MMC_CAP2_CACHE_CTRL, .vdd_extmmc = "vddsd", #ifdef CONFIG_ARCH_SCX15 .detect_gpio = 193, #else .detect_gpio = 71, #endif 修改为 static struct sprd_sdhci_host_platdata sprd_sdio0_pdata = { .caps = MMC_C
完整回答请参考FAQ: FAQ29153
### 问题: 为什么system server进程的异常退出会导致手机重启
解决方案: linux中进程在退出时内核都会发送SIGCHLD信号给其父进程,如果父进程对其子进程的存活感兴趣的话,可以设置处理该信号.zygote进程对其子进程system server的监管就是基于上述理论.zygote在fork子进程system server时,会设置SIGCHLD信号.相关代码在dalvik\vm\native\dalvik_system_Zygote.c(cpp)中 --setSignalHandler() //设置SIGCHLD信号的处理程序sigchldHandler --sigchldHandler() //有该信号产生时,该处理程序被调用 --waitpid() // 监 听 任 一 子 进 程 , 且 返 回 已 终 止 进 程 的 pid , 当 返 回 的 pid 是systemServerPid时,会重启手机. 重启之前的last_log中的main.log
完整回答请参考FAQ: FAQ29161
### 问题: 在联系人详情中显示铃声信息
解决方案: 在联系人详情页面加载后,铃声信息已经查询出来,但是没有做显示,可以修改packages/apps/Contacts/src/com/android/contacts/detail/ContactDetailFragment.java添加上显示的逻辑,具体修改为, 增加addCustomRingtone方法: private void addCustomRingtone(){ if(mContactData != null){ String kind = mContext.getString(R.string.ring_tone); mAllEntries.add(new KindTitleViewEntry(kind.toUpperCase())); String ringtone = mContactData.getCustomRingtone(); final DetailViewEn
完整回答请参考FAQ: FAQ29183
### 问题: 如何切换集成至系统中的Launcher应用(Launcher3、Launcher2)？
解决方案: 系统中有多套Android原生Launcher源码,如Launcher3、Launcher2,默认情况下使用Launcher3(替换了Launcher2),如果需要切换回Launcher2,可以按如下方法修改以集成: --- a/build/target/product/generic_no_telephony.mk +++ b/build/target/product/generic_no_telephony.mk @@ -33,7 +33,7 @@ PRODUCT_PACKAGES := \ InputDevices \ Keyguard \ LatinIME \ - Launcher3 \ + Launcher2 \ Music \ MusicFX \ OneTimeInitializer \ 这是修改调整Launcher集成选择的最快捷方式,另外也可以通过修改各LauncherX对
完整回答请参考FAQ: FAQ29197
### 问题: 什么是CTS Verifier测试？
解决方案: CDD对于CTS Verifier的解释: Device implementations MUST correctly execute all applicable cases in the CTS Verifier. The CTS Verifier is included with the Compatibility Test Suite, and is intended to be run by a human operator to test functionality that cannot be tested by an automated system, such as correct functioning of a camera and sensors. The CTS Verifier has tests for many kinds of hardware, incl
完整回答请参考FAQ: FAQ29198
### 问题: 什么是CAT测试？
解决方案: CAT测试全称CTS audio quality test,用来测试音频录制和回放质量的一组CASE,是CTS测试的一部分: The CTS audio quality test suite helps you verify the audio recording and playback quality of Android devices. The goal of the test suite is to provide a way to test the audio quality of your hardware without requiring full-blown test environments that include an anechoic chamber and calibrated instruments. This test suite, however, do
完整回答请参考FAQ: FAQ29205
### 问题: 为什么system server进程会异常退出
解决方案: 正常情况下作为android java世界的两大支柱之一,system server进程是不会退出的.造成其异常退出的常见情况有以下三种: 1. uncaught Java exception未捕获的java异常,当system server进程中的某个线程出现未捕获的java异常时,该进程就会被杀掉.关键log如下: system.log——*** FATAL EXCEPTION IN SYSTEM PROCESS: main.log——threadid=%d: thread exiting with uncaught exception(group=%p) 2. system server发生了native crash,当发生native crash时内核会发送特定的信号给该进程,导致进程异常退出.常见的信号有SIGILL,SIGBUS,SIGSEGA,关键log如下: main.lo
完整回答请参考FAQ: FAQ29186
### 问题: 如何获取slog当前的状态
解决方案: 如果用户想查看slog当前的状态,有以下两种方式 1.通过工程模式,进入slog界面,可以查看当前都有哪些log处于抓取状态,但是,这种方式一般可知晓的信息比较少,我们选择第二种方式 2.使用slogctl query,执行完毕后可以获取如下 root@scx15_sp7715ga:/ # slogctl query state: 1 backend threads(stream snapshot notify bt tcp modem): 1 0 1 0 0 0 current logpath,/data/slog, config logpath,/storage/sdcard0/slog, internal storage,/data/slog, external storage,/storage/sdcard0/slog, stream kernel on 0 7 stream km
完整回答请参考FAQ: FAQ29200
### 问题: android.mediastress全部FAIL，T卡上有媒体文件但找不到？
解决方案: 将媒体文件直接拷到T卡上,在内置T卡为主卡情况下,从/mnt/sdcard下将找不到媒体文件,需要将媒体文件复制到/mnt/sdcard下,或者用android-cts-media-1.0.zip包下的copy_media.sh命令直接复制. 原因如下: init.board.rc开头会有一段storage相关的代码 (1)内卡为主卡,/mnt/sdcard映射到/storage/emulated/legacy,是内置T卡 # add for emulated internal storage as primary @{ on early-fs export EXTERNAL_STORAGE /storage/emulated/legacy export SECONDARY_STORAGE /storage/sdcard0 symlink /storage/emulated/legacy 
完整回答请参考FAQ: FAQ29247
### 问题: 一个可能被忽略的问题--如何根据运营商动态调整相关的值
解决方案: 经常有客户要求需要根据各国运营商信息在代码中动态调整相关的值(不管是FW中的数据还是APP中的数据),有时候开发人员会忽略掉android 资源文件的运营商字串匹配的相关机制而在代码中根据运营商作许多switch...case,这样代码上可能会显得比较臃肿,以致于还会存在一些逻辑问题. android 提供了这样一个机制,根据运营商作动态匹配,可进入到目录frameworks\base\core\res\res,有大量values开头的文件夹,平时工作中用得多的可能是与多语相关的语言字段,如中文简体文件夹:values-zh-rCN .另外有一些MCC MNC相关的文件夹,如:values-mcc302-mnc500.其代表国家码302,网段500代表的运营商下的资源.开发人员可以在该文件夹下作处理,其应用效果是全局的.另外也可以在app层面下的res目录下增加MNC ,MCC相关的字源文
完整回答请参考FAQ: FAQ29273
### 问题: 浏览器访问有些网页双击屏幕不能放大页面的原因
解决方案: 打开http://i.ifeng.com/,查看源代码: <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <meta content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" name="viewport" /> <title>手机凤凰网</title> <link href="http://s3.mimg.ifeng.com/static/css/ifeng_v2_index.css" rel="stylesheet" type="text/css" /> </head> 网页源码中<header>标记中content并没有user-scalable = no属性的定义,可
完整回答请参考FAQ: FAQ29257
### 问题: CTS Verifier: SUID File Scanner: many file has suid permission
解决方案: 安装Cts Verifier并运行SUID File Scanner,扫描完成后会列出所有带SUID权限的文件,列表如下: /proc/pin_switch/iis01_loop_sel /proc/pin_switch/iis02_loop_sel /proc/pin_switch/iis23_loop_sel /proc/pin_switch/cp0_iis0 /proc/pin_switch/cp0_iis1 /proc/pin_switch/cp0_iis2 /proc/pin_switch/cp0_iis3 /proc/pin_switch/cp1_iis0 /proc/pin_switch/cp1_iis1 /proc/pin_switch/cp1_iis2 /proc/pin_switch/cp1_iis3 /proc/pin_switch/ap_iis0 /proc/pin
完整回答请参考FAQ: FAQ29260
### 问题: com.android.cts.usb.TestUsbTest#testUsbSerial测试FAIL
解决方案: com.android.cts.usb.TestUsbTest#testUsbSerial 这条CASE的代码流程如下:通过adb获取手机端的serialno: getprop ro.serialno,然后PC端执行 lsusb -v命令,从返回的设备信息中搜索iSerial,不匹配serialno则FAIL. 为了让lsusb -v正确输出SPRD的iSerial,需要在host端按下面的步骤重新配置: 1.sudo vim /etc/udev/rules.d/51-android.rules 2.add the following content: #SPRD SUBSYSTEM=="usb", ATTRS{idVendor}=="1782", MODE="0666", GROUP="plugdev" #Google SUBSYSTEM=="usb", ATTRS{idVendor}=
完整回答请参考FAQ: FAQ29317
### 问题: android.provider.cts.Settings_SecureTest#testUnknownSourcesOffByDefault测试FAIL
解决方案: android.provider.cts.Settings_SecureTest#testUnknownSourcesOffByDefault 这条CASE检查Settings.Global.INSTALL_NON_MARKET_APPS这个值是否设置,设置则FAIL: public void testUnknownSourcesOffByDefault() throws SettingNotFoundException { assertEquals("Device should not ship with 'Unknown Sources' enabled by default.", 0, Settings.Global.getInt(cr, Settings.Global.INSTALL_NON_MARKET_APPS)); } 执行CTS测试时,系统设置项中,允许安装未知来源的应用程
完整回答请参考FAQ: FAQ29318
### 问题: 如何查看SQLiteConnectionPool的大小？
解决方案: 在SQLiteConnectionPool类的构造函数, private SQLiteConnectionPool(SQLiteDatabaseConfiguration configuration) { mConfiguration = new SQLiteDatabaseConfiguration(configuration); setMaxConnectionPoolSizeLocked(); } 中会调用setMaxConnectionPoolSizeLocked()方法.在此方法中进行如下设置: private void setMaxConnectionPoolSizeLocked() { if ((mConfiguration.openFlags & SQLiteDatabase.ENABLE_WRITE_AHEAD_LOGGING) != 0) { mMaxConnectio
完整回答请参考FAQ: FAQ29319
### 问题: 如何让自己的app以应用源码形式导入Android源码库
解决方案: 如何让自己的app以应用源码形式导入Android源码库 这里我用eclipse 建了一个MKTest 的测试项目 举例 一.将app整个工程copy到source tree下的某个目录即可 一般习惯放到packages/apps 也可以放在packages/experimental 实际上package在编译时所放的目录并没有明确限定,编译后apk和so存放的位置是根据目录下Android.mk所指定的编译类型所决定的 二.添加Android.mk 可以参考项目中的app 所含的Android.mk 文件 修改一下即可 如: LOCAL_PATH:= $(call my-dir) include $(CLEAR_VARS) LOCAL_MODULE_TAGS := optional LOCAL_SRC_FILES := $(call all-java-files-under, src) 
完整回答请参考FAQ: FAQ29324
### 问题: 如何监听多媒体数据库的变化
解决方案: ContentResolver中有这样一个方法: public final void registerContentObserver(Uri uri, boolean notifyForDescendents, ContentObserver observer) 参数说明: uri:针对感兴趣的URI的变化进行监听 notifyForDescendents:true表示以uri前缀开始的任何变化都进行通知;false表示完全匹配才进行通知; observer:IContentObserver接口,提供了一个方法onChange,变化发生时Cursor需要更新时调用 以下为一个简单的使用例子,供参考: getContentResolver().registerContentObserver( MediaStore.Images.Media.EXTERNAL_CONTENT_URI, true
完整回答请参考FAQ: FAQ29331
### 问题: SQLite向连接池申请一个连接的等待时间是多少？
解决方案: 若进行数据库操作,需要在SQLite连接池中申请一个连接.这个连接池是唯一的,是多个线程共享的.在frameworks\base\core\java\android\database\sqlite\SQLiteConnectionPool.java中通过acquireConnection()方法进行连接的申请: public SQLiteConnection acquireConnection(String sql, int connectionFlags, CancellationSignal cancellationSignal) { return waitForConnection(sql, connectionFlags, cancellationSignal); } 在waitForConnection()方法中如果没有获取到连接,则会新建一个waiter对象,加入等待队列.线程
完整回答请参考FAQ: FAQ29334
### 问题: 如何去掉TabWidget底部的下划线
解决方案: TabWidget的下划线有时影响布局效果,需要除其下划线,有下面几种方法: 1. 如果是采用xml布局文件,在TabWidget的属性项设置 android:tabStripEnabled="false". 2. 其实同1相同,不过是在代码中修改添加 tabWidget.setStripEnabled(false); 这种方式限于android2.2以上版本. 3. 对于android2.1以下版本 Field mBottomLeftStrip; Field mBottomRightStrip; if (Float.valueOf(Build.VERSION.RELEASE.substring(0, 3)) <= 2.1){ try{ mBottomLeftStrip = mTabWidget.getClass().getDeclaredField ("mBottomLeftStrip"
完整回答请参考FAQ: FAQ29366
### 问题: Android的弱指针和强指针
解决方案: Android中定义了两种智能指针类型,一种是强指针sp(strong pointer),另外一种是弱指针(weak pointer).其实称之为强引用和弱引用更合适一些.强指针与一般意义的智能指针概念相同,通过引用计数来记录有多少使用者在使用一个对象,如果所有使用者都放弃了对该对象的引用,则该对象将被自动销毁. 弱指针也指向一个对象,但是弱指针仅仅记录该对象的地址,不能通过弱指针来访问该对象,也就是说不能通过弱指针来调用对象的成员函数或访问对象的成员变量.要想访问弱指针所指向的对象,需首先通过wp类所提供的promote()方法将弱指针升级为强指针.弱指针所指向的对象是有可能在其它地方被销毁的,如果对象已经被销毁,wp的promote()方法将返回空指针,这样就能避免出现地址访问错的情况. 弱指针是怎么做到这一点的呢?其实说白了一点也不复杂,原因就在于每一个可以被智能指针引用的对象都同时
完整回答请参考FAQ: FAQ29420
### 问题: 如何查看cpu占用率
解决方案: 在Android中可以使用top命令查看cpu占用率 top命令的使用方法: adb shell $ top -h top -h Usage: top [-m max_procs] [-n iterations] [-d delay] [-s sort_column] [-t] [-h] -m num Maximum number of processes to display. // 最多显示多少个进程 -n num Updates to show before exiting. // 刷新次数 -d num Seconds to wait between updates. // 刷新间隔时间(默认5秒) -s col Column to sort by // 按哪列排序 -t Show threads instead of processes. // 显示线程信息而不是进程 -h Di
完整回答请参考FAQ: FAQ29422
### 问题: 如何获取手机内存和剩余内存大小？
解决方案: 1、android的总内存大小信息存放在系统的/proc/meminfo文件里面,可以通过读取这个文件来获取这些信息: public void getTotalMemory() { String str1 ="/proc/meminfo"; String str2=""; try{ FileReader fr =newFileReader(str1); BufferedReader localBufferedReader =newBufferedReader(fr,8192); while((str2 = localBufferedReader.readLine()) !=null) { Log.i(TAG,"---"+ str2); } }catch(IOException e) { } } 2、获取当前剩余内存(RAM)大小的方法 : public long getAvailMemor
完整回答请参考FAQ: FAQ29451
### 问题: 如何查看CPU信息？
解决方案: 获取CPU信息 可以读取/proc/cpuinfo文件获取; 1、通过代码获取: private String getCPUInfo() { StringBuffer sb = new StringBuffer(); sb.append("abi: ").append(Build.CPU_ABI).append("\n"); if (new File("/proc/cpuinfo").exists()) { try { BufferedReader br = new BufferedReader(new FileReader(new File("/proc/cpuinfo"))); String aLine; while ((aLine = br.readLine()) != null) { sb.append(aLine + "\n"); } if (br != null) { br.c
完整回答请参考FAQ: FAQ29465
### 问题: 联系人、拨号盘如何屏蔽IP拨号
解决方案: 主要包含三块 一、通话记录详情 1.删除布局中的ip拨号元素 packages\apps\Dialer\res\layout\call_detail_sprd.xml删除以下项 - <LinearLayout - android:id="@+id/ip_call_new_ui" - android:layout_width="match_parent" - android:layout_height="@dimen/call_log_list_item_height_new_ui" - android:layout_gravity="center" - android:layout_weight="1" - android:background="#00000000" - android:gravity="center" - android:orientation="horizontal"
完整回答请参考FAQ: FAQ39878
### 问题: event-log-tags是如何生成的
解决方案: 1.event-log-tags在system/etc目录下,event-log-tags文件中定义着event log中监听的事件,例如: 30011 am_proc_died (User|1|5),(PID|1|5),(Process Name|3), 在event log中具体输出为,可以和上面的对应: am_proc_died: [1346,com.sprd.fileexplorer] 2.event-log-tags是由下面几个文件组成的,每个文件记录着不同模块监听的不同事件,而framework/base/services/java/com/android/server/am/EventLogTags.logtags中主要记录的就是activity的一些事件,例如: 30011 am_proc_died (User|1|5),(PID|1|5),(Process Name|3)
完整回答请参考FAQ: FAQ29502
### 问题: android4.4内卡为主卡和T卡为主卡两种模式的切换
解决方案: 需要修改文件init.board.rc和overlay/frameworks/base/core/res/res/xml /storage_list.xml 1、init.board.rc开头会有一段storage相关的代码 内卡为主卡的为: # add for emulated internal storage as primary @{ on early-fs export EXTERNAL_STORAGE /storage/emulated/legacy export SECONDARY_STORAGE /storage/sdcard0 symlink /storage/emulated/legacy /sdcard symlink /storage/emulated/legacy /mnt/sdcard setprop persist.storage.type 2 setprop 
完整回答请参考FAQ: FAQ29617
### 问题: SC7715平台设置闪光灯电流值的方法
解决方案: SC7715平台设置闪光灯电流值的方法 以工程样机sp7715ea为例: 1.设置闪光灯电流值的实现函数,位于 kernel/drivers/media/sprd_dcam/flash/flash_common.c 普通亮度照明为 int sprd_flash_on(void) { printk("sprd_flash_on \n"); sci_adi_set(SPRD_ADISLAVE_BASE + SPRD_FLASH_OFST, SPRD_FLASH_CTRL_BIT | SPRD_FLASH_LOW_VAL); // 0x3 = 110ma return 0; } 高亮度照明为 int sprd_flash_high_light(void) { printk("sprd_flash_high_light \n"); sci_adi_set(SPRD_ADISLAVE_BASE + 
完整回答请参考FAQ: FAQ29667
### 问题: Linux命令返回值列表
解决方案: 在Linux中不管是启动桌面程序还是在控制台执行命令都会有一个返回值,可以叫做错误号(perror),在linux中执行命令后可通过命令:echo $? 来查看上一条命令的返回值. Android继承自Linux,当然也有这个属性,在Java中可以使用Runtime.getRuntime().exec(cmd) 执行命令,exec(prams)返回的是一个Process,可通过Process.waitFor()获取返回值,以下是Linux返回值对应表: 以下是Linux中返回值对照表 "OS error code 0: Operation succeed" "OS error code 1: Operation not permitted" "OS error code 2: No such file or directory" "OS error code 3: No such proc
完整回答请参考FAQ: FAQ29770
### 问题: 为啥voice search离线搜索功能不能使用？
解决方案: Google设计离线语音搜索是不支持低内存设备的,如果手机内存低于512 ,屏幕分辨率小于480x800,这种设备会被Google认为是低内存设备,反编译的Velvet代码中可以看到,在SearchController内恰好调用了isLowRamDevice.isLowRamDevice的返回值来自于 ro.config.low_ram 的Property,修改ro.config.low_ram为false之后,离线搜索功能可以使用. 由于ro.config.low_ram 是Android原生定义的属性,Android对低内存的处理和我们的LMK一些机制等都依赖于此,所以不建议如此修改.对此可以在获取低内存属性getMemoryInfo和isLowRamDevice这两个方法时,针对packageName做特殊处理. 如下: frameworks/base 内 diff --git a/
完整回答请参考FAQ: FAQ29843
### 问题: 用自带的视频播放器播放视频时，触摸视频播放区域可以暂停/播放视频，但没有触摸提示音
解决方案: 触屏提示音是要触摸到控件才会有提示音的,用自带的视频播放器播放视频时,如果触摸视频播放器区域中间的按钮进行暂停/播放,则会有触屏提示音,当触摸视频播放区域时,也可以进行暂停/播放视频,这个功能是代码中特别这么做的,方便用户使用暂停/播放功能,由于此时触摸的地方并不是控件,所以不会有触屏提示音,如果不需要代码中添加的这个功能,可以做如下修改: --- a/src/com/android/gallery3d/app/MovieControllerOverlay.java +++ b/src/com/android/gallery3d/app/MovieControllerOverlay.java @@ -145,7 +145,7 @@ public class MovieControllerOverlay extends CommonController case MotionEvent.AC
完整回答请参考FAQ: FAQ29867
### 问题: Android Broadcast 和 BroadcastReceiver的权限限制
解决方案: 在Android应用开发中,有时会遇到一下两种情况, 1. 有一些敏感的广播并不想让第三方的应用收到 ; 2. 是想要限制自己的Receiver接收某广播来源,避免被恶意的同样的ACTION的广播所干扰. 在这些场景下就需要用到广播的权限限制. 第一种场景: 谁有权收我的广播? 在这种情况下,可以在自己应用发广播时添加参数声明Receiver所需的权限. 首先,在Androidmanifest.xml中定义新的权限RECV_XXX,例如: <permission android:name = "com.android.permission.RECV_XXX"/> 然后,在Sender app发送广播时将此权限作为参数传入,如下: sendBroadcast("com.android.XXX_ACTION", "com.android.permission.RECV_XXX"); 这样做之后
完整回答请参考FAQ: FAQ29858
### 问题: 针对SC7715手机 4.4 版本的UUI主题，如何将状态栏中的WIFI信号显示格数从 3个修改成4个？
解决方案: 针对SC7715 手机的4.4版本的UUI主题,Settings里的WLAN扫描列表四格信号等级,但是状态栏显示却是3格,如何修改成一致 答:状态栏是三格,如果要改成4格的,代码不用改变,只需修改相应图片即可,如果用的也是UUI的主题,UUI主题分为 HelloColor和SimpleStyle 手机默认用的是SimpleStyle主题,如果是SimpleStyle主题的,那么需要替换在 vendor/sprd/UniverseUI/ThemeRes/SimpleStyle替换相应文件,如下是要替换的六个图片: vendor/sprd/UniverseUI/ThemeRes/SimpleStyle/SystemUIRes/res/drawable-hdpi/stat_sys_wifi_signal_0.png vendor/sprd/UniverseUI/ThemeRes/SimpleSt
完整回答请参考FAQ: FAQ29897
### 问题: android4.4 如何关闭IP拨号功能
解决方案: android4.4版本,按照如下步骤关闭IP拨号功能: 1:删除 <item android:id="@+id/menu_ip_dial" android:showAsAction="never" android:title="@string/call_ip" android:orderInCategory="1" /> 在如下两个文件中: Dialpad_options.xml (packages\apps\dialer\res\menu) Dialpad_options_sprd.xml (packages\apps\dialer\res\menu) 2:删除 set_ip_dailing_preference 在如下两个文件中 Call_common_settings_sprd.xml (packages\services\telephony\res\xml) Mobile_sim
完整回答请参考FAQ: FAQ29901
### 问题: MTP问题：电脑中显示的盘符图标和盘符名称，如何更改？
解决方案: USB对应型号请在对应的usb.rc文件(根据项目确定,如device/sprd/scx35/init.sc8830.usb.rc)中修改以下地方: on boot write /sys/class/android_usb/android0/iManufacturer Spreadtrum write /sys/class/android_usb/android0/iProduct Spreadtrum Phone write /sys/class/android_usb/android0/iSerial $ro.serialno write /sys/class/android_usb/android0/f_rndis/manufacturer Spreadtrum write /sys/class/android_usb/android0/f_rndis/vendorID 8 注意,如
完整回答请参考FAQ: FAQ29964
### 问题: 如何显示hotseat图标下面的应用名称？
解决方案: 1.代码调整: CellLayout.java 里面的BubbleTextView bubbleChild = (BubbleTextView) child; bubbleChild.setTextVisibility(!mIsHotseat); 改为bubbleChild.setTextVisibility(true); Workspace.java 里面的((FolderIcon)child).setTextVisible(false);改为 ((FolderIcon)child).setTextVisible(true); 2.修改hotseat.xml布局文件: 根据需要调整,例如: 修改为 <com.android.sprdlauncher2.Hotseat xmlns:android="http://schemas.android.com/apk/res/android" xm
完整回答请参考FAQ: FAQ30099
### 问题: android4.4 如何预置IP号码
解决方案: ipdailinginfo添加初始化标记,开机启动后,先check ipdailinginfo是否有过初始化. 如果没有初始化,参考如下demo code,初始化IP号码. BootCompletedReceiver.java private void initIpNumber() { IpDailingUtils mIpDailingUtils; String[] ipNumbers = new String[]{"17951", "12593","17911"}; mIpDailingUtils = new IpDailingUtils(mContext); int i = 0; for (String ipNumber:ipNumbers) { Log.d(TAG, "Save ipnumber.Number" + i + " is : " + ipNumber); mIpDaili
完整回答请参考FAQ: FAQ30206
### 问题: android4.4 如何添加IP拨号相关的属性
解决方案: android4.4 如果需要添加IP拨号相关的属性, 例: 需要添加初始化属性,用来标识是否初始化过IP号码,demo code如下 1:在IpDailingUtils.java中添加字段. private static final String KEY_INIT_PREFERENCES_NUMBER = "hasinitpreferencenumber"; 2:在IpDailingUtils.java中添加接口方法. public void setInitIpPreferenceNumber(boolean isInit){ mEditor.putInt(KEY_INIT_PREFERENCES_NUMBER, isInit); mEditor.apply(); } public boolean getInitIpPreferenceNumber() { return mPrefere
完整回答请参考FAQ: FAQ30207
### 问题: Android4.4 如何修改蓝牙的默认名称
解决方案: 可按照如下方式进行修改: 涉及的文件所在目录: Btif_dm.c (external\bluetooth\bluedroid\btif\src): 将 btif_default_local_name 设置为想要修改的名称即可. static char btif_default_local_name[DEFAULT_LOCAL_NAME_MAX+1] = {'\0'}; static char* btif_get_default_local_name() { if (btif_default_local_name[0] == '\0') { int max_len = sizeof(btif_default_local_name) - 1; if (BTM_DEF_LOCAL_NAME[0] != '\0') { strncpy(btif_default_local_name, BTM_D
完整回答请参考FAQ: FAQ30244
### 问题: 在开启蓝牙的前提下, 卸载SD卡, 蓝牙耳机链接是否会断开?
解决方案: 1. 在工程模式开启btlog的前提下,开启USB存储或者卸载sd卡,系统将会kill掉所有读写SD卡的进程,而此时由于蓝牙正在向SD卡中写入hci log,因此蓝牙应用会被kill掉, 导致相关的链接断开; 可通过类似的如下LOG进行确认: 07-01 13:17:13.500 554 624 W ActivityManager: Killing processes unmount media at adjustment 1 07-01 13:17:13.500 554 624 I ActivityManager: Killing 1372:com.android.bluetooth/1002 (adj 1): unmount media 2. 蓝牙属于核心服务,因此在每次关闭后都会被系统重新加载启动, 这样耳机会重新进行连接; 3. 在User版本下由于Slog默认是关闭的,因此不会存
完整回答请参考FAQ: FAQ30246
### 问题: 如何查看进程里的fd内容？
解决方案: 1. 通过adb shell连接手机,进入到需要查看进程的proc对应fd目录,比如进程号是228的进程, 目录是/proc/228/fd; 2. 通过ls -l 查看使用的文件描述符,如下所示; l-wx------ root system 2012-01-01 08:08 10 -> /dev/slog_wcn l-wx------ root system 2012-01-01 08:08 11 -> /dev/ttyGS3 lr-x------ root system 2012-01-01 08:08 13 -> /dev/slog_wcn lrwx------ root system 2012-01-01 08:08 14 -> /dev/ttyGS2 l-wx------ root system 2012-01-01 08:08 15 -> /dev/log/main l-wx-
完整回答请参考FAQ: FAQ30292
### 问题: 如何使用kmemleak检查内存泄漏
解决方案: 内核中配置CONFIG_DEBUG_KMEMLEAK=y 操作命令如下: #echo scan > /sys/kernel/debug/kmemleak 扫描泄漏 #cat /sys/kernel/debug/kmemleak 查看泄漏 例如:在leak_test模块的leakfunc中使用vmalloc后不free unreferenced object 0xf9061000 (size 512): comm "insmod", pid 12750, jiffies 14401507 (age 110.217s) hex dump (first 32 bytes): 1c 0f 00 00 01 12 00 00 2a 0f 00 00 01 12 00 00 ........*....... 38 0f 00 00 01 12 00 00 bc 0f 00 00 01 12 00 00
完整回答请参考FAQ: FAQ30309
### 问题: 如何调试启动时发生的内存破坏
解决方案: 内核配置为使用slub作为内存分配器,slub本身提供了检查越界的接口. 如果kernel刚启动就发生内存破坏,则需要编译的时候配置CONFIG_SLUB_DEBUG_ON,打开后,slub会在内存后面加一些关键字,释放的时候会检查是否被破坏.如果破坏了,check_bytes_and_report中警告 例如: BUG kmalloc-8: Redzone overwritten -------------------------------------------------------------------- INFO: 0xc90f6d28-0xc90f6d2b. First byte 0x00 instead of 0xcc INFO: Slab 0xc528c530 flags=0x400000c3 inuse=61 fp=0xc90f6d58 INFO: Object 0x
完整回答请参考FAQ: FAQ30320
### 问题: ffos如何push单个应用到手机？
解决方案: 此处以email应用为例: 编译email会生成email.gaiamobile.org包(包所在的目录为gaia/profile/webapp或者out/target/product/XXX/system/b2g/webapp),email.gaiamobile.org包中会有manifest.webapp,application.zip这两个文件,按照如下步骤将这两个文件push到手机对应的目录: 1、adb root 2、adb remount 3、adb start-server 4、adb shell stop b2g 5、adb shell rm -r /cache/* 6、adb push "manifest.webapp" /system/b2g/webapps/email.gaiamobile.org/manifest.webapp 7、adb push "applica
完整回答请参考FAQ: FAQ30302
### 问题: ffos如何实现build-time客制化？
解决方案: ffos有一套自己的build-time客制化机制,这套机制可以在不修改gaia代码的情况下,实现编译时进行wallpaper、ringtone、相关客制化设置等的配置. 具体有哪些可以进行客制化配置可以参考https://developer.mozilla.org/en-US/Firefox_OS/Developing_Gaia/Market_customizations_guide. 具体实现步骤为: 1、gaia/customization目录提供了一套customization sample,可以将此目录下的内容copy到自己的客制化目录(此处假设为vendor/my_customization). 2、按照自己的需要编辑客制化内容,如加入自己的wallpaper、ringtone、以及修改默认wallpaper等. 3、配置GAIA_DISTRIBUTION_DIR,目前7715
完整回答请参考FAQ: FAQ30327
### 问题: android4.4 activity在配置FULL_SCREEN下如何完全屏蔽状态栏
解决方案: android4.4 在配置了full_screen后activity依然可以在上屏幕边缘把状态栏下拉.(比如照相界面) 1. 在frameworks\base\core\java\android\view\View.java设置一个自定义的flag public static final int SYSTEM_UI_FLAG_FULL_SCREEN_DISABLE = 0x00002000; 2. frameworks\base\policy\src\com\android\internal\policy\impl\PhoneWindowManager.java 在手势操作监听函数里添加 mSystemGestures = new SystemGesturesPointerEventListener(context, new SystemGesturesPointerEventListe
完整回答请参考FAQ: FAQ30333
### 问题: 为什么Camera2目录下java文件import android.os.SystemProperties编译出错
解决方案: 编译出错的错误提示是找不到android.os.SystemProperties这个类. 这是因为Camera2目录下的Android.mk有这样一个定义LOCAL_SDK_VERSION := current,它会导致无法访问"hide"的API(如SystemProperties). 有两种办法来解决这种问题: 1.通过Java反射机制: try { @SuppressWarnings("rawtypes") Class classz = Class.forName("android.os.SystemProperties"); @SuppressWarnings("unchecked") Method method = classz.getMethod("get", new Class[] { String.class, String.class }); Object obj = m
完整回答请参考FAQ: FAQ30352
### 问题: Camera2中切换前后摄图标的显示以及前后摄切换过程
解决方案: 在CameraSettings.java中,会执行buildCameraId这个方法,这里会判断当前camera个数是否小于2,若是,则会将KEY_CAMERA_ID对应的preference给移除掉,如下: if (numOfCameras < 2) { removePreference(group, preference.getKey()); return; } 那么,在UI上,如PhotoUI.java中,会去判断KEY_CAMERA_ID对应的preference是否存在,若存在则显示,不存在则不显示. visibility = ((preference != null) ? View.VISIBLE : View.GONE); mSwitchButton.setVisibility(visibility); 在buildCameraId方法中,若存在多个摄像头的情况下(一般都是两
完整回答请参考FAQ: FAQ30355
### 问题: 如何禁止通知栏下拉？
解决方案: 由于StatusBarManager具有hide属性,应用层无法调用其方法disable(0禁用通知栏,同通过下面方法来实现 Object mService = getSystemService("statusbar"); try { Class<?> statusBarManager = Class.forName ("android.app.StatusBarManager"); Method expand = statusBarManager.getMethod("disable", int.class); expand.invoke(mService, 0x00010000); } catch (Exception e) { Log.d(TAG," failed to " + e.getMessage()); } expand.invoke(mService, 0x00010000
完整回答请参考FAQ: FAQ30361
### 问题: 横竖屏切换时不会重新加载画面的方法
解决方案: 在默认情况下横竖屏幕切换时会重新载入画面,导致一些不必要的资源浪费,更严重的是画面上保持的数据也都被重置了(当然可以在重置前保存这些数据到数据库或者到文本文件中),但是这么做也比较麻烦,下面提供了避免画面重新载入的方法. 1.首先要在 AndroidManifest.xml中找到你所指定的activity 中加上android:configChanges="orientation|keyboardHidden", 这样在横竖屏切换时调用onConfigurationChanged(Configuration newConfig),而不是从OnCreate开始重新启动Activity; 2.然后在activity的逻辑处理中(代码部分)去重载onConfigurationChanged事件,可以把横竖屏切换时,画面不切换,且都当成竖屏处理. publicvoidonConfiguration
完整回答请参考FAQ: FAQ42075
### 问题: 为何用adb命令不能正常安装apk
解决方案: 问题原因: adb push apk名称 /system/app ush到system或者data的app目录,系统有实现自动监测这些app目录,只要有apk拷贝进来,会自动安装. adb install -r apk名称 adb instll的函数入口是frameworks/base/cmds/pm/src/com/android/commands/pm/pm.java 界面安装 把APK安装包保存在SD卡中,从手机里访问SD卡中的APK安装包,点击就可以启动安装界面,系统应用Packageinstaller.apk处理这种方式下的安装及卸载界面流程 函数入口是:public voidinstallPackage(android.net.Uri packageURI,android.content.pm.IPackageInstallObserver observer, int flag
完整回答请参考FAQ: FAQ30442
### 问题: 某些应用识别不到T卡中的文件夹怎么处理
解决方案: 问题描述: 在T卡中创建Assistant文件夹,并在其中放入apk,某个应用,例如Palmplay应用不能扫描到Assistant文件夹中的apk 原因分析: 7715当前存储方案,主卡为内卡.这就可能导致部分APK无法识别到外置T卡. 从代码来看,使用getExternalStorageDirectory函数去SD卡中查找Assistant文件夹, this.e = Environment.getExternalStorageDirectory().getAbsolutePath(); 查看log,OK的版本使用getExternalStorageDirectory返回的是/storage/sdcard0, 出错的版本使用getExternalStorageDirectory返回的是/storage/emulated/0,自然就找不到Assistant目录 需要修改存储方案. 解决方案
完整回答请参考FAQ: FAQ30444
### 问题: 如何查看系统内存分布
解决方案: 知道系统整体内存的分布,有助于了解当前系统对内存的使用情况. 可以通过如下命令来获取当前系统内存分布: root@scx15_sp6815ea:/ # cat /sys/kernel/debug/sprd_debug/mem/phymemdist mem: 2359296kB |--mem_other: 2097152kB |--mem_linux: 262144kB |--reserved: 31512kB |--mem_total: 230632kB |--free: 9832kB |--buffer: 2660kB |--cache: 55404kB |--swapcache: 0kB |--user: 99804kB | |--active anon: 44872kB | |--inactive anon: 54932kB |--kernel: 62932kB |--stack: 
完整回答请参考FAQ: FAQ31310
### 问题: 为什么NAND方案异常掉电开机不会报Android正在升级，而eMMC方案会必现Android正在升级？
解决方案: 原因有如下: 在eMMC方案上为了过谷歌CTS测试默认使能了SELinux功能,该功能对系统的权限管控非常严格,由于权限问题导致zygote进程没有执行system系统调用的权限,进而导致crc校验本身执行失败,每次开机都会删除data/dalvik-chache 下边的文件,开机界面会提示android正在升级. DEBUG的方法: 相关代码位于framwork/base/cmds/app_process/app_main.cpp中,可以在code中打印system系统调用的返回值. 如果system系统调用fork的子进程没权限执行sh命令,或者sh执行失败都会返回127. 修改方案: 在device/sprd/scx15(或scx35)/sepolicy/zygote.te 中增加zygote的权限 allow zygote shell_exec:file { open read w
完整回答请参考FAQ: FAQ30436
### 问题: 如何查看每个进程使用的栈大小？
解决方案: 在kernel config中打开CONFIG_DEBUG_STACK_USAGE,此选项可输出每个进程的栈使用情况. 此选项会作如下操作: 进程创建时,栈用0来填充(kernel/fork.c) sysrq 't', 通过调用stack_not_used()显示空余(kernel/sched.c) 系统运行时,一旦stack使用超过水印,会打印到kernel log. 例如: # dmesg | grep greatest kworker/u:0 used greatest stack depth: 10564 bytes left busybox used greatest stack depth: 9512 bytes left busybox used greatest stack depth: 9504 bytes left grep used greatest stack de
完整回答请参考FAQ: FAQ30486
### 问题: android.graphics.Matrix简介
解决方案: Matrix ,中文里叫矩阵,在图像处理方面,主要是用于平面的缩放、平移、旋转等操作. 在android.graphics.Matrix中, Matrix的操作,总共分为四种: translate(平移) rotate(旋转) scale(缩放) skew(倾斜) 每一种变换在Android的API里都提供了set, post和pre三种操作方式,除了translate,其他三种操作都可以指定中心点. 1.set操作是直接设置Matrix的值,每次set一次,整个Matrix的数组都会变掉. 2.post操作是后乘,当前的矩阵乘以参数给出的矩阵.可以连续多次使用post,来完成所需的整个变换.例如,要将一个图片旋转30度,然后平移到(100,100)的地方,可以这样做: Matrix m = new Matrix(); m.postRotate(30); m.postTranslate(1
完整回答请参考FAQ: FAQ30555
### 问题: 关于dispc_run 和sprdfb_dispc_esd_check中ESD_lock的作用
解决方案: 原因:.在sprdfb_dispc.c中函数中dispc_run中有如下代码 down(&dev->ESD_lock); ..... up(&dev->ESD_lock); sprdfb_dispc_esd_check函数也有这样的代码包裹: down(&dev->ESD_lock); dispc_stop() .... dispc_run() 可以想象一下下面的情景: a.dispc_run拿到的锁, 这样esd_check就不会运行,直到等待dispc_run运行完成.一但dispc_run运行完毕,16ms后才会再次被调用.这样esd_check一定会拿到锁. esd_check拿到锁后,经过dispc_stop 后,会自己调用 dispc_run(自己会试图拿锁),这样就会卡住刷屏进程.结果就是 esd_check进程只会运行一次.而dispc_run永久卡住. 解决方案: 把do
完整回答请参考FAQ: FAQ30592
### 问题: progressbar style配置
解决方案: 应用程序可如下配置: 1:xml文件中的配置: <progressBar android:id="@+id/progressbar_updown" android:layout_width="wrap_content" android:layout_height="wrap_content" style="?android:attr/progressBarStyleHorizontal" //这是配置水平长条显示 android:layout_gravity="center_vertical" / > <progressBar android:id="@+id/widget196" android:layout_width="wrap_content" android:layout_height="wrap_content" style="?android:attr/progressBar
完整回答请参考FAQ: FAQ30614
### 问题: Dolphin项目使用NAND4+4规格MCP应该如何配置？
解决方案: 平台驱动已经调通,只要是市场上标准的4Gb NAND + 4Gb LPDDR2器件都是可以支持的,不需要patch,但需要做适当的配置从底层传给上层告知RAM容量. 配置方法如下: 1.修改chipram/include/configs//sp7715ga.h,将#define DDR_TYPE DRAM_LPDDR2_1CS_2G_X32宏定义关掉,打开 #define DDR_TYPE DRAM_LPDDR2_1CS_4G_X32 (一般市场上标准的4Gb RAM器件都是32位单片选4Gb规格) 2.修改u-boot/include/configs//sp7715ga.h (1)将#define CONFIG_RAM256M改成#define CONFIG_RAM512M (2)将#define CONFIG_BOOTARGS "mem=256M loglevel=1 console=
完整回答请参考FAQ: FAQ30646
### 问题: 如何查看某一号码的通话记录详情？
解决方案: 请参考如下方法: 1 由于一个号码可能存在多条通话信息,首先需要查找这些信息,这一过程不能放在主线程进行,因此需要定义工作线程: class CallLogQueryThread extends Thread { String callLognumber; CallLogQueryThread(String number) { callLognumber = number; } @Override public void run() { Cursor cursor = null; try { cursor = mContext.getContentResolver().query(CallLog.Calls.CONTENT_URI, new String[] { CallLog.Calls._ID }, CallLog.Calls.NUMBER + "=?", new String[] {
完整回答请参考FAQ: FAQ30647
### 问题: 无GPS硬件的项目如果过CTS GPS测试
解决方案: 您好, 请按照下面的修改意见修改: 1. linux kernel 请移除以下开关 文件路径:arch/arm/configs/spxxxxec-native_defconfig CONFIG_CGX=y CONFIG_CGX_DRIVER=y CONFIG_CGX_VIRTUALCOM=y 2. device/sprd 请不要包含GPS软件, 并在启动脚本中清楚GPS服务 文件路径:sp8830ec/base.mk $(call inherit-product, device/sprd/partner/sprd_gps/device-sprd-gps.mk) 文件路径:spxxxxec/init.scxxxx.rc mkdir /data/cg/ 0777 system system mkdir /data/cg/online 0777 system system mkdir /data
完整回答请参考FAQ: FAQ30728
### 问题: 从拨号界面拨出电话后如何不隐藏拨号盘
解决方案: 请参考如下修改 DialpadFragment.java中: 1 public void dialButtonPressed() { if (isDigitsEmpty()) { // No number entered. } else { if (number != null && !TextUtils.isEmpty(mProhibitedPhoneNumberRegexp) && number.matches(mProhibitedPhoneNumberRegexp) && (SystemProperties.getInt("persist.radio.otaspdial", 0) != 1)) { ... } else { ... - hideAndClearDialpad(); + clearDialpad(); } } } 2 public boolean onMenuItem
完整回答请参考FAQ: FAQ30758
### 问题: 如何编译user版本?
解决方案: 使用lunch选择编译user版本: 在device/sprd/scx15_sp7715ga/vendorsetup.sh中有如下配置: add_lunch_combo scx15_sp7715gabase-userdebug add_lunch_combo scx15_sp7715gaplus-userdebug add_lunch_combo scx15_sp7715gacuccspecAplus_UUI-userdebug 上边这些都是userdebug版本的,改成user版本只需要选择对应的工程将userdebug改成user即可. add_lunch_combo scx15_sp7715gacuccspecAplus_UUI-user 这样就可以编译user版本了. 使用choosecombo编译user版本: 操作命令: choosecombo 1 PRODUCT 1 例如编译
完整回答请参考FAQ: FAQ30794
### 问题: 如何过滤多次的power按键消息？
解决方案: 按下手机power键后会去点亮屏幕,如果连续的power按键,系统会将该按键消息放到消息队列中处理多次;而系统中power的按键消息是在PhoneWindowManager.java 的interceptKeyBeforeQueueing中被进行消息的拦截和处理的.所以,如果想避免连续的power按键消息处理的情况,可以按如下处理:在按第一次按键处理后,置一个标志位将后续的消息处理屏蔽;同时延迟发送一个消息,时间超时后再改变该标志位,继续处理后续的消息. private boolean mPowerDoublePressPending = false; private final Runnable mPowerDoublePressTimeoutRunnable = new Runnable() { @Override public void run() { mPowerDoublePre
完整回答请参考FAQ: FAQ30826
### 问题: 为什么会出现DDR TRAINING ERROR的串口log无法开机
解决方案: 出现此类问题的原因一般在硬件方面: 1. 最普遍的情况是客户板子硬件设计不合格,导致无法下载或无法开机,此类问题一般需要从硬件设计方面改板解决,如急于调试可以尝试DDR降频,修改chipram/include/configs/projectname.h文件,如果是shark项目修改#define DDR_CLK 464,可以将DDR Clock降到400、333、200MHz验证调试,如果是dolphin项目修改#define DDR_FREQ 333000000,可以将DDR Clock降到192000000验证调试(注意此方法只能用于调试,根源还是需要硬件改板,DDR降频出货会损失一定的性能) 2. memory不良,可以通过更换同一厂家或不同厂家的memory物料定位是否此问题,如果是在我司2ndSource验证List上的物料,一般可能只是个体不良,如果非验证物料则不能保证,所以请
完整回答请参考FAQ: FAQ31321
### 问题: TraceView分析应用中函数耗时
解决方案: TraceView 是对Android的应用程序以及Framework层的代码进行性能分析的图形化工具,用于热点分析和性能优化,分析每个函数占用的CPU时间,调用次数,函数调用关系等.TraceView的使用需要SD卡的支持,生成的trace文件会存放在SD卡中. TraceView的使用 (1)代码中加入调试函数 开始处activity的onCreate(): android.os.Debug.startMethodTracing(); 或android.os.Debug.startMethodTracing("mytrace"); 结束处activtity的onStop(): android.os.Debug.stopMethodTracing(); AndroidManifest.xml中加入写入SD卡权限: <uses-permission android:name="androi
完整回答请参考FAQ: FAQ31020
### 问题: 如何确认IO性能问题？
解决方案: MMC_TRACE 使用说明如下: [Log输出频率]: 每500ms会在Kernel Log中输出一次统计数据,可根据需要调整. [使用方法]: 在kernel Log中搜索关键字[MMC_TRACE] [Side effect]: 打开该功能后会对I/O的性能产生一定的影响,在user build中会关闭该功能. Log示例:
07-18 13:22:29.575 <3>[   34.892647] c0 [MMC_TRACE] mmcqd:52 Workload=35%,
duty 179005118, period 500243500, req_cnt=52
07-18 13:22:29.575 <3>[   34.892665] c0 [MMC_TRACE] mmcqd:52 WriteCnt
req_cnt=33, tract_cnt=0, bit_cnt=0
07-
完整回答请参考FAQ: FAQ30901
### 问题: IO性能优化工具BLKTRACE介绍
解决方案: 1. 简述: BLKTRACE是块层IO路径监控和分析工具,使用它可以深入了解IO通路(如IO请求提交,入队,合并,完成等等一些列的信息),对监控,性能调优都有很大助.BLKTRACE分内核空间和用户空间两部分实现,内核空间里面主要是给块层IO路径上的关键点添加tracepoint,然后借助RELAYFS系统特性将收集到的数据写到buffer去,再从用户空间去收集.用户空间还实现了几个小工作如:BLKPARSE,BTT等用来分析收集到的数据.目前展讯平台尚不支持BLKTRACE. 2. 应用: 我们在做块设备调优的时候, 我们关心的是块设备是如何被访问的,也就是访问模式(比如说每次从什么地方读,每次读多少块,热点在哪里等),至于每次读写的什么数据我们并不关心. 这些模式当然可以自己去构造,但是如果能把真实应用的访问模式记录下来,并且在调优的时候能重放,我们就可以一遍又一遍的调试直到达到最佳
完整回答请参考FAQ: FAQ30921
### 问题: IO性能优化工具IOSTAT介绍
解决方案: 1. 简述: IOSTAT是I/O statistics(输入/输出统计)的缩写,IOSTAT工具将对系统的块设备操作活动进行监视.它的特点是汇报块设备活动统计情况,同时也会汇报出CPU使用情况.同vmstat一样,IOSTAT也有一个弱点,就是它不能对某个进程进行深入分析,仅对系统的整体情况进行分析. 2. 输出示例: avg-cpu: %user %nice %system %iowait %steal %idle 1.10 0.00 4.82 39.54 0.07 54.46 Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s avgrq-sz avgqu-sz await svctm %util sda 0.00 3.50 0.40 2.50 5.60 48.00 18.48 0.00 0.97 0.97 0.28 参数解释: rrqm/s: 每
完整回答请参考FAQ: FAQ30927
### 问题: AP设置WPS时，如果加密方式设置为WPA(TKIP)-PSK, ,4.4版本手机无法利用WPS连接该AP，怎么办？
解决方案: 答: 首先来看WPS1.0和2.0的所允许的认证方式差异,如下: WPS 1.0 OPEN Configuration WEP WPA(TKIP)-PSK WPA2(AES)-PSK WPA/WPA2-PSK mixed WPS 2.0 OPEN WPA2(AES)-PSK 通过上面描述的差异可知,4.4 手机应用的标准为WPS2.0,所以只支持 open或WPA2(AES)两种加密方式进行WPS连接 如果AP路由器遵循WPS2.0的话是不允许用户设置为WPA(TKIP)-PSK 加密方式的进行WPS连接的 但是遗憾的是有很多AP路由器是用老的WPS1.0 版本,是可以设置为WPA(TKIP)-PSK ,这样的话,与4.4版本手机不兼容,导致手机无法利用WPS方式连接这个AP,如果想做到兼容,可以按照下面的方法进行修改(但是改的话就违反WPS2.0规范了): externl/wpa_sup
完整回答请参考FAQ: FAQ30959
### 问题: 如何解决systrace运行错误“error opening /sys/kernel/debug/tracing/options/print-tgid:permission denied(13)” ?
解决方案: Systrace是Android4.1中新增的性能数据采样和分析工具.它可帮助开发者收集Android关键子系统(如surfaceflinger、WindowManagerService等Framework部分关键模块、服务)的运行信息,从而帮助开发者更直观的分析系统瓶颈,改进性能. Systrace的功能包括跟踪系统的I/O操作、内核工作队列、CPU负载以及Android各个子系统的运行状况等 在使用systrace功能时,有时会遇到运行错误"error opening /sys/kernel/debug/tracing/options/print-tgid:permission denie
完整回答请参考FAQ: FAQ31109
### 问题: 在RAM256M机器上运行百度视频会闪屏是什么原因
解决方案: 闪屏时对应的log: 01-01 08:12:10.750 D/OpenGLRenderer( 1371): GL error from OpenGLRenderer: 0x501 01-01 08:12:10.770 D/OpenGLRenderer( 1371): GL error from OpenGLRenderer: 0x501 01-01 08:12:10.770 D/OpenGLRenderer( 1371): GL error from OpenGLRenderer: 0x505 01-01 08:12:10.770 E/OpenGLRenderer( 1371): OpenGLRenderer is out of memory! 从log来看此问题是由于low memory导致的,而low memory又是由于apk本身申请的buffer没有释放. 在apk运行时使用pr
完整回答请参考FAQ: FAQ31163
### 问题: wifi regulatory domain 功能是什么?
解决方案: 一般来说,WiFi设备工作在2.4和5GHz频段.然而由于无线链路的开放性,无线设备会存在相互干扰和影响.因此,不同地区和国家都WiFi设备都有一定的要求和限制.这些要求和限制体现在频谱、射频功率、安全性及其他方面.因此,在不同国家销售的WiFi设备应遵循该国家或地区的要求.这也即是wifi regulatory domain功能需求的由来. 中国地区可使用的5GHz频段仅包括5.725~5.85GHz, 2.4GHz频段信道:1-13. 欧盟ETSI标准 5GHz频段包括5.15-5.35GHz以及5.47-5.725GHz 2.4GHz频段信道:1-13. 美洲FCC 标准 5GHz频段包括5.15-5.35GHz以及5.5-5.825GHz 2.4GHz频段信道:1-11. 日本 2.4GHz频段信道:1-14. 由此可见,各个国家和地区支持的信道,射频功率等方面的不统一,导致wif
完整回答请参考FAQ: FAQ31159
### 问题: 使用802.1x认证加密的AP如何登录？
解决方案: 手机中wifi搜索到的AP 列表中,一般会看到AP的名称下方有加密方式的说明.例如:通过WPA/WPA2进行保护(可使用WPS),通过802.1x进行保护,通过WEP进行保护等. 通常WPA/WPA2加密方式使用的较多,用户只需要输入预先知道的密码,即可连接上.而802.1x又是什么东西呢? 802.1x协议是IEEE802 LAN/WAN委员会为解决无线局域网网络安全问题而提出的.它是基于Client/Server的访问控制和认证协议,包括三个实体:客户端(Client)、设备端(Device)和认证服务器(Server). 由于802.1x协议采用的EAP架构,所以一般使用802.1x加密的AP,通常都会支持EAP-PEAP,EAP-TLS, EAP-TTLS方法,此三种方法中使用的匿名身份以及CA证书都由提供AP的服务商发布给个人,需要事先获取.而运营商提供使用802.1x加密方式的
完整回答请参考FAQ: FAQ31175
### 问题: 如何定制化ProgressBar UI
解决方案: Progressbar有两种样式:STYLE_SPINNER(圆形),STYLE_HORIZONTAL(水平长条),如下且针对STYLE_SPINNER作说明 一:首先在布局文件 xml中如下配置progressbar: <ProgressBar android:id="@+id/progress" android:layout_width="wrap_content" android:layout_height="wrap_content" android:indeterminateDrawable="@drawable/progress_custmise"/>//说明:配置progressbar的UI的动画文件 PS:FW层的progressbar的动态效果也是通过rotate动画效果实现的 二:接下来就是可在progress_custmise.xml中自定义动画效果和背景图片 <la
完整回答请参考FAQ: FAQ31160
### 问题: android4.4如何编译更新icu4c中数据
解决方案: android4.4 icu所在的目录为external/icu4c/, 编译步骤及更新: a. 在external/icu4c下新建目录icuBuild 临时文件夹 b. cd icuBuild c. 执行 ../runConfigureICU Linux/gcc d. make -j2 e. cp data/out/tmp/icudt51l.dat ../stubdata/icudt51l-all.dat(icudt51l-all.dat包含了所有的资源) f. cd ../ stubdata g. 执行./icu_dat_generator.py (该命令会根据icu-data-default.txt生成新的资源文件,多语言的会生成icudt51l-default.dat,否则会生成icudt51l-zh.dat) h.执行mm -B i.执行adb push out/target/
完整回答请参考FAQ: FAQ31215
### 问题: 出现蓝牙停止运行如何全面的提供信息
解决方案: 1.在slog目录下corefile文件夹如果存在文件,则提供corefile 2.misc\tombstones目录下的snapshot-**-**-**文件打开,找到backtrace,如下 #00 pc 00056b5c /system/lib/hw/bluetooth.default.so (GKI_getbuf+131) #01 pc 0002df41 /system/lib/hw/bluetooth.default.so #02 pc 000031cf /system/lib/libbt-hci.so (hci_h4_receive_msg+578) #03 pc 0000185f /system/lib/libbt-hci.so #04 pc 0000d220 /system/lib/libc.so (__thread_entry+72) #05 pc 0000d3bc /s
完整回答请参考FAQ: FAQ31212
### 问题: Framework层Progressbar旋转实现原理
解决方案: android提供控件ProgressBar有两种:STYLE_SPINNER(圆形),STYLE_HORIZONTAL(水平长条),如下且针对STYLE_SPINNER作说明 1:当在应用程序使用的progressbar配置 <ProgressBar android:id="@+id/progress" android:layout_width="wrap_content" android:layout_height="wrap_content" style="?android:attr/progressBarStyleSmall" />//小型的progressbar 接下来在系统主题themes.xml中有如下配置 <item name="progressBarStyleSmall">@android:style/Widget.ProgressBar.Small</item> 当然对
完整回答请参考FAQ: FAQ31209
### 问题: [SC7730]UAP如何修改
解决方案: 参考如下方法修改,修改完之后可以通过浏览器上网抓cap包查看http请求中x_wap_profile字段进行确认是否添加成功. public void loadUrl(String url, Map<String, String> headers) { /** *SPRD: * add for cmcc start *@{ */ if((url.equals(Controller.HOME_URL))&&(Util.SUPPORT_CMCC)){ mWebViewController.openTab(url, false, true, true); return; } /** *@} */ if (mMainView != null) { mPageLoadProgress = INITIAL_PROGRESS; mInPageLoad = true; mCurrentState = ne
完整回答请参考FAQ: FAQ31240
### 问题: ActionBar上添加searchView
解决方案: 可在actionbar上添加一个操作视图(可以在不替换操作栏、不改变activity和fragment的的情况下提供快速访问副操作入口):下面介绍如何添加 SearchView 控件: 1:xml文件中配置 <?xml version="1.0" encoding="utf-8"?> <menu xmlns:android="http://schemas.android.com/apk/res/android" xmlns:android="http://schemas.android.com/apk/res-auto" > <item android:id="@+id/action_search" android:title="@string/action_search" android:icon="@drawable/ic_action_search" android:showAsAc
完整回答请参考FAQ: FAQ31238
### 问题: 如何有效加载大图片
解决方案: 加载大图片需要考虑几个因素: 1. 估计加载全部图片时的内存 2. 你的应用能够请求到的内存以及加载后剩余的内存 3. UI组件显示图片时的size 4. 当前屏幕的分辨率 例如,如果你要显示一个128x96大小的图片,就不需要将1024x768的图片完整加载进来.以下提供了一种加载的方式: 首先使用inSampleSize对图片采样 public static int calculateInSampleSize( BitmapFactory.Options options, int reqWidth, int reqHeight) { // Raw height and width of image final int height = options.outHeight; final int width = options.outWidth; int inSampleSize = 1;
完整回答请参考FAQ: FAQ31266
### 问题: 如何使用LruCache缓冲加载的图片
解决方案: 使用缓冲手段加载图片可以让操作更加流畅.提升滑动图片时的用户体验 (注:不推荐使用SoftReference和WeakReference) 使用Cache时注意,太小会增加系统开销,太大又会出现OOM(Out of memory).所以如何平衡Cache很重要.示例如下: private LruCache<String, Bitmap> mMemoryCache; @Override protected void onCreate(Bundle savedInstanceState) { ... // Get max available VM memory, exceeding this amount will throw an // OutOfMemory exception. Stored in kilobytes as LruCache takes an // int in its 
完整回答请参考FAQ: FAQ31278
### 问题: Android4.4上nand驱动如何配置？
解决方案: 在Android4.4上配置nand驱动需要修改三处: 第一处、修改chipram/include/sprd_nand_param.h 首先、在sprd_nand_param_table[]中增加一组使用flash对应的id信息,参考如下: //Arvak { { 0x01, 0xBC, 0x90, 0x55, 0x56 }, 0x01, 0xBC, SZ_K_BLOCK(128), NUM_BLOCK(4096), SZ_K_PAGE(2), SZ_B_SECTOR(512), SZ_B_SPARE(64), BW_16, CYCLES_5, { 10, 21 ,10 }, //ace, rwl, rwh { SZ_B_OOB(16), ECC_BITS(4), POS_ECC(9), SZ_ECC(7), POS_INFO(9), SZ_INFO(0) } }, SZ_K_BLOCK(
完整回答请参考FAQ: FAQ31292
### 问题: 如何查看当前cpu使用情况
解决方案: 通常可以通过top命令来查看系统CPU的使用情况,但top不能比较精确的反映当前CPU的使用情况. 可以通过如下命令获取当前9秒内的信息: root@scx15_sp6815ea:/ # cat /sys/kernel/debug/sprd_debug/cpu/cpu_usage Cpu Core Count: 1 Timer Circle: 3000ms. From time 504146ms(2014-07-25 11:02:59.298729781 UTC) to 507146ms(2014-07-25 11:03:02.298731953 UTC). * CPU USAGE: | * OTHER COUNTS: -0- IDLE USER SYSTEM NICE IOWAIT IRQ SOFTIRQ STEAL TOTAL | CTXT_SWITCH FG_FAULT FG_MAJ
完整回答请参考FAQ: FAQ31301
### 问题: 为什么可以下载但无法开机，没有或只有很少量的串口log输出
解决方案: 可能有以下几个方面原因: 1. 开机无任何串口log输出: 板子串口电路有问题,或者芯片单体不良; 2. 开机或DDR扫描只有UUUUU等少量log输出: 需要先定位是挂在ROMCODE中还是挂在SPL中,请参考"FAQ20320 如何在SPL阶段增加串口打印调试信息"的方法在chipramchipram/arch/arm/cpu/armv7/sc8830/umctl.c文件sdram_init函数接口开头加一句ddr_print("sdram_init start\n"); 重新编译chipram下载新生成的u-boot-spl-16k.bin,抓串口log确认这句打印是否有输出?如果无此log输出,一般是挂在ROMCODE中,如果有此输出则可能挂在SPL中. (1)如果挂在ROMCODE中,基本是RomCode加载SPL失败,在NAND方案上容易出现,多数原因可能是NAND patch
完整回答请参考FAQ: FAQ31289
### 问题: ROMCODE输出的串口log有什么意义？
解决方案: 1. 芯片开机,UART1口一般首先会有"UUUU"的串口log输出,表示芯片电气特性特性正常; 2. "UUUUU"之后会跟一些其它的log,常见log意义如下: (1)UBD:USB DOWNLOAD LOG (2)UBT:USB DOWNLOAD TIMEOUT LOG (3)NIS:NAND IDENTIFY SUCCESS LOG (4)NIF:NAND IDENTIFY FAIL LOG (5)NRS:NAND READ BOOTLOADER SUCCESS LOG (6)NRT:NAND READ BOOTLOADER TIMEOUT LOG (7)MCI:EMMC INIT LOG (8)EGF:EMMC GO IDLE FAIL LOG (9)ERF:EMMC READ BOOTLOADER FAIL LOG (10)ECF:EMMC CHECK DATA FAIL LO
完整回答请参考FAQ: FAQ31334
### 问题: 如何让android log从串口kernel log输出
解决方案: 分析某些system、userdata破坏导致的不开机问题,串口分析kernel log正常但adb连不上时,希望让android log也从串口输出,可以尝试此方法,以下是一个验证过的示例. 原理上就是根据kernel log能够从串口输出,只要将logcat重定向到kmsg即可实现,因此各个平台的原理是一样的应该通用.(但须注意这样打印虽然能够有android log从串口输出,但串口输出量过大可能会出现丢log的情况) devices/sprd/sp8825c-1/init.rc - chmod 0440 /proc/kmsg + chmod 0660 /proc/kmsg +############################################################### +# redirect logs(LOGE, LOGI...) to linux 
完整回答请参考FAQ: FAQ31348
### 问题: 如何测试NAND/EMMC设备的IO速率
解决方案: 可以通过dd命令测试IO速率,一般各家厂家设备固件处理有所不同,可能有快有慢,而且各家性能优缺点也有所区别,可能有的器件读大数据有优势,有的器件写小数据有优势,此测试方法在IO性能类问题分析上可以起到一定的参考作用: 首先必须要有root权限, 1.在文件系统之上测试,需要先在data分区下创建测试的文件,然后执行以下命令,参数可以调整但操作的数据量注意不要操过分区大小 busybox time dd if=/dev/zero of=/data/test/1.txt bs=4096 count=8000 conv=fdatasync //以4k字节size为单位写较大数据 busybox time dd if=/dev/zero of=/data/test/1.txt bs=64 count=512000 conv=fdatasync //以64字节size为单位写较小数据 busybox
完整回答请参考FAQ: FAQ31352
### 问题: 使用MobileTest工具测试时打印出串口log
解决方案: 在使用MobileTest工具测试,并分析问题的时候常需要通过串口把先关的log打印出来,对于不同的Android打印方式基本一致,也有细微的差别,不同平台的修改方法如下: 目录u-boot/include/configs/spxxxx.h 在2.3.5_3.10平台上: #define CONFIG_BOOTARGS "mem=256M loglevel=1 console=null init=/init " MTDPARTS_DEFAULT 修改为: #define CONFIG_BOOTARGS "mem=256M console=ttyS1,115200n8 init=/init "MTDPARTS_DEFAULT 在4.0.3_vlx_3.0_13a平台上: #define CONFIG_BOOTARGS "mem=64M loglevel=1 console=null init
完整回答请参考FAQ: FAQ31399
### 问题: 如何从slog中找到插拔耳机的时间
解决方案: 使用手机抓取一段时间的slog,在抓取log的过程中需要各插拔一次耳机,并持续一小段时间.打开slog并搜索关键字SPRD_HEADSET_INFO,会在搜索的见面显示如下的字段: ........................................ 省略其他的slog ......................................... //耳机工作是否正常 01-01 09:57:25.395 <6>[ 123.196919] c0 [SPRD_HEADSET_INFO][3] headset_type = 0 (HEADSET_NORMAL01-01 ) //耳机插入时间点 09:57:25.395 <6>[ 123.197909] c0 [SPRD_HEADSET_INFO][3] headset plug in (headset_detect_work_
完整回答请参考FAQ: FAQ31406
### 问题: 如何通过adb快速安装APK软件包
解决方案: 通常在手机中安装APK软件时,都是将APK源码包拷贝到内存卡中,然后通过手机进行安装.这里介绍一种简单并快速的方式来安装APK软件,通过adb指令.adb工具是安卓系统一个很实用的工具,我们可以使用它来批量安装apk软件,如何来使用adb工具来给手机安装apk文件,方便快捷.手机的APK软件一般安装在./system/app目录下面,在手机与pc机端连接好usb线,在终端中进行如下操作: 具体操作: 1、首先下载adb工具包 2、在手机上打开usb调试,手机通过数据线连接电脑(确保连接成功) 3、将要安装的apk文件放入adb工具包文件夹内,再打开adb工具包内的cmd.exe文件! adb root 安装在手机输入命令:adb install xxxx.apk ./system/app (xxxxapk文件名) 安装在内存卡输入:adb install -s xxxx.apk (后面可以
完整回答请参考FAQ: FAQ31407
### 问题: SQLite的WAL机制
解决方案: SQLite WAL(Write Ahead Logging)机制是很多数据库中用于实现原子事务的一种机制. 在WAL机制之前,SQLite是基于rollback机制实现原子事务的.在修改数据前先备份所在分页数据,再写入数据.如果事务失败,则恢复备份数据,撤销修改;如果事务成功,则删除备份数据. WAL机制的原理是:修改并不直接写入到数据库文件中,而是写入到一个称为WAL的文件中;如果事务失败,WAL中的记录会被忽略,撤销修改;如果事务成功,它将在随后的某个时间被写回到数据库文件中,提交修改. WAL在实现的过程中,使用了共享内存技术,因此所有的读写进程必须在同一个机器上,否则无法保证数据一致性. WAL的优点与缺点 优点: 1、读和写可完全地并发执行,不会互相阻塞(注:写之间仍然不能并发); 2、WAL在大多数情况下,拥有更好的性能; 3、磁盘I/O行为更容易被预测. 缺点: 1、访问数
完整回答请参考FAQ: FAQ31419
### 问题: 高像素camera拍照(capture)与预览(preview)亮度不一致怎样解决？
解决方案: 由于高像素sensor在大多数情况下预览(preview)与拍照(capture)使用size不一致,出现camera拍照与预览亮度不一致,通常可以从以下几个方面排查问题: 1. 预览与拍照的行信号周期是否配置正确; 在s_(sensorname)_Resolution_Trim_Tab需根据sensor寄存器设置,对sensor行周期时间进行配置,可以联系sensor厂商或自行查阅sensor应用说明等资料看配置是否正确.因为在_(sensorname)_BeforeSnapshot函数会调用这边的参数,进行预览与拍照之间曝光参数变换配置.如果s_(sensorname)_Resolution_Trim_Tab参数设置不正确,且在_(sensorname)_BeforeSnapshot中也没有进行正确配置,肯定会引起曝光参数设置错误,导致拍照亮度错误. 2. _(sensorname)_
完整回答请参考FAQ: FAQ38981
### 问题: repo sync常见错误处理
解决方案: [推荐操作]: cd packages/app/Mms 查看是否有未提交的修改:git status 没有,repo sync . 有,先撤销未提交的修改:git reset --hard HEAD^ repo sync . [同步报错问题] (1)报错:error: packages/apps/Mms/: platform/packages/apps/Mms checkout 14f6397f0dd0168590fae1f7bd524b46b9d67d83 原因:有未提交的修改 解决方法: git checkout 14f6397f0dd0168590fae1f7bd524b46b9d67d83 git status 将列出红色文件 git add 撤销修改: git reset --hard HEAD^ 再进行同步: repo sync . (2)报错:error: .repo/man
完整回答请参考FAQ: FAQ31466
### 问题: 功能机如何调整系统Tone音的音量大小
解决方案: tone音播放音量算法写死的,如果希望增大或减小音量,可以客户尝试修改以下函数,修改volume参数来设定将tone音量大小,以忙音音量为例: DRVAUD_Play() { ... case MMISRVAUD_TYPE_TONE_GENERIC: { GENERIC_TONE_ADP_EXT_OPE_PLAY_PARA_T tGenericPara = {0}; MMISRVAUD_TONE_GENERIC_T *tone = (MMISRVAUD_TONE_GENERIC_T *)(type_ptr); uint32 tone_res = 0; tGenericPara.tone_id = AUD_GENERIC_PRESS_KEY_TONE + tone->id; tGenericPara.duration = tone->duation; tGenericPara.hAudioH
完整回答请参考FAQ: FAQ31497
### 问题: 手机PIFA天线如何实现多频段工作
解决方案: 为适应手机多频段工作,需要内置天线实现多频段工作.PIFA天线实现多频段工作,可以通过使用双馈点,或通过在PIFA天线上采用开槽的技术来实现.使用双馈点时调谐频率调谐范围往往受到一定限制,因此实际手机中的多频段多采用开槽的方式实现多频段工作.以PIFA天线中通常采用的L型开槽为例: L型开槽 PIFA天线辐射单元如下图所示: 通过开槽,在高频和低频下,PIFA天线可以形成两个相对独立的电流回路,这就是开槽的PIFA天线实现双频工作的基本原理.在L型开槽情况下,较低工作频段的谐振频率大致可以表示为: [说明]上述公式只具有近似的指导意义,不具有严格的意义.比如手机实际设计的预留尺寸不能根据上述公式不能严格计算出就是谐振在880～960MHz之间. 而较高的工作频率由于受多个因素的控制,因此不能用封闭公式表示.影响较高的工作频率的因素主要有: G1:L1和L2之间的缝宽; G2:辐射单元中间的
完整回答请参考FAQ: FAQ31538
### 问题: 如何修改浏览器的默认文字样式。
解决方案: 文件路径:\packages\apps\Browser\res\xml\accessibility_preferences.xml 代码: <ListPreference android:key="text_format" android:title="@string/pref_text_format" android:defaultValue="sans-serif" //这里的defaultValue值就是默认文字样式的值,浏览器可设置的的文字样式在下面的entryValues中 android:entries="@array/pref_text_format_choices" android:entryValues="@array/pref_text_format_values" //此处的array/pref_text_format_values定义在\packages\apps\
完整回答请参考FAQ: FAQ31593
### 问题: 为什么会遇到_Sensor_SetMode参数mode大到不可思议如65537，从而引起crash?
解决方案: 在函数camera_snapshot_start_set里面相关调用是 Sensor_Ioctl(SENSOR_IOCTL_BEFORE_SNAPSHOT, (cxt->sn_cxt.capture_mode | (cxt->sn_cxt.preview_mode<<CAP_MODE_BITS))); 所以往下传递的参数是capture_mode和 preview_mode左移了CAP_MODE_BITS的组合,接下来相应sensor对应的SENSOR_IOCTL_BEFORE_SNAPSHOT命令处理函数GC0328_BeforeSnapshot会收到此参数并调用Sensor_SetMode,进而调用_Sensor_SetMode 可以看到如果和命令SENSOR_IOCTL_BEFORE_SNAPSHOT相伴的参数原封不动地传到这里,会是一个很大的数. 如果capture_mode和pr
完整回答请参考FAQ: FAQ31578
### 问题: 如何在状态栏显示电池电量百分比？
解决方案: frameworks/base/packages/SystemUI/src/com/android/systemui/BatteryMeterView.java 是否显示电量百分比主要和变量mShowPercent有关,默认 boolean mShowPercent = true; public static final boolean ENABLE_PERCENT = true; //一定要设置为true 然后修改构造函数中mShowPercent的值即可: public BatteryMeterView(Context context, AttributeSet attrs, int defStyle) { mShowPercent = ENABLE_PERCENT && 0 != Settings.System.getInt( context.getContentResolver()
完整回答请参考FAQ: FAQ31644
### 问题: 为什么使用AsyncTask时，有时候不执行doInBackground方法？
解决方案: [问题原因] 线程任务的调度通过内部创建一个进程作用域的线程池来管理要运行的任务,也就就是说当你调用了AsyncTask#execute()后,AsyncTask会把任务交给线程池,由线程池来管理创建Thread和运行Therad.对于内部的线程池不同版本的Android的实现方式是不一样的: Android2.3以前的版本,也即SDK/API 10和以前的版本 内部的线程池限制是5个,也就是说同时只能有5个线程运行,超过的线程只能等待,等待前面的线程某个执行完了才被调度和运行.换句话说,如果一个进程中的AsyncTask实例个数超过5个,那么假如前5个都运行很长时间的话,那么第6个只能等待机会了.这是AsyncTask的一个限制,而且对于2.3以前的版本无法解决.如果你的应用需要大量的后台线程去执行任务,那么你只能放弃使用AsyncTask,自己创建线程池来管理Thread,或者干脆不用
完整回答请参考FAQ: FAQ31670
