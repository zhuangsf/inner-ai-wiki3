### 问题: Android8.1上如何使能PWMA?
解决方案: 1、修改Pinmap文件 查阅SL8541E规格说明书,找到PWMA对应的pin脚 u-boot15/board/spreadstrum/sl8541e_xxx/pinmap-sl8541e_32b.c -- {REG_PIN_GPIO32, BITS_PIN_AF(3)}, ++ {REG_PIN_GPIO32, BITS_PIN_AF(1)}, {REG_MISC_PIN_GPIO32, BITS_PIN_DS(1)|BIT_PIN_NULL|BIT_PIN_NUL|BIT_PIN_SLP_AP|BIT_PIN_SLP_NUL|BIT_PIN_SLP_IE}, 2、修改dts文件 /kernel/arch/arm/boot/dts/sharkle.dtsi -- pwms: pwm@40260020 { ++ pwms: pwm@40260000 { #pwm-cells = <2>;
完整回答请参考FAQ: FAQ202274007
### 问题: DreamCamera2如何将动态照片从top_panel移到设置列表中
解决方案: diff --git a/res/values-zh-rCN/strings.xml b/res/values-zh-rCN/strings.xml
old mode 100644
new mode 100755
index b4788f0c9..214968226
--- a/res/values-zh-rCN/strings.xml
+++ b/res/values-zh-rCN/strings.xml
@@ -425,6 +425,7 @@
     <string name="camera_mode_portrait_new">人像</string>
     <string name="motion_photo_on">动态照片已开启</string>
     <string name="motion_photo_off">动态照片已关闭</string>

完整回答请参考FAQ: FAQ202274010
### 问题: GSM 多UP场景PVT和开关谱（ORFS）调试分享
解决方案: 诸多transceiver IC 为SR3595D或者SR3595D1芯片的配套项目,如SC9863A,UMS312或UMS512等等,会出现GSM部分band 单UP下的PVT和开关谱(ORFS)余量充足,但是多UP场景余量不够或者Fail,多UP大多在1D3U,或者1D4U,如PCS 1D3U,PCL 0/15/0场景下开关谱Fail. 在解决问题之前,先简单说明一下平台现状: 上述罗列到的平台皆为V2平台,(V2特指modem软件划分,主要指4G平台,内部使用词汇)V2平台暂不支持分Up调试,即多UP下的性能调试接口都在单UP. 遇到多UP Fai问题,分两个方面着手解决: 1、使用我司内部套片RTM7916-51,RTM7916-31等,可尝试优化单UP下不同PCL等级的PA Delta 和duration,具体调试方法见下述文档第19页. Notes:Ramp曲线是4个PCL一档
完整回答请参考FAQ: FAQ202274016
### 问题: A12 QAW(Quick Access Wallet)快速访问钱包功能配置
解决方案: 1.A12平台在配置QAW快速访问功能时,并没有更多差异化的内容,只需按照以下添加插件预编译并将其设置白名单即可: 1)预编译QuickAccessWallet插件 diff --git a/packages/SystemUI/Android.bp b/packages/SystemUI/Android.bp index 3b33f4d..c1d85abb 100644 --- a/packages/SystemUI/Android.bp +++ b/packages/SystemUI/Android.bp @@ -196,6 +196,8 @@ ], dxflags: ["--multi-dex"], - required: ["privapp_whitelist_com.android.systemui"], + required: ["privapp_whitelist_com.an
完整回答请参考FAQ: FAQ202274049
### 问题: CMW500测试WIFI TX指标时为什么出不来值？
解决方案: CMW500测试不同模式WIFI TX指标前的需进行如下关键设置: 1、需选择精准的trigger: 在信令连接界面,进入config,在Trigger中找到RX frame trigger选项. RX Frame Trigger: 若为11b,则选择DSSS/CCK Bursts". 若为11g,则选择Non-HT burst. 若为11n,则选择HT burst. 若为11ac,则选择VHT burst.注意:11ac 80M时,需要将OFDM payload Min length改成user define,并设置为4 symbols. 若为11ax,则选择HE burst. 2、同时选择不同模式下的指定速率: 在Supported Rates选项中,Configuration选择User Defined 在不同模式下指定需要测试的速率,将Disabled选为Mandatory 3、最
完整回答请参考FAQ: FAQ202274051
### 问题: DreamCamera2 App，shortcut中“慢动作”未翻译问题
解决方案: 该问题是Android shortcut 动态加载的共性问题,是因为 DreamCamera2 App 的 shortcut 列表中的慢录采用的是动态加载方式导致的.同样的,如支付宝等三方 App 存在同样的问题. ① shortcut 动态加载是当 App 运行后进行加载的,未运行 App 打开 shortcut 列表,是无法加载到 shortcut 列表的. ②系统语言由中文切换为 English 后,由于没有重新打开 App 而直接去打开 shortcut,导致 shortcut 列表的慢录模块使用的还是中文(上一次打开 App 加载的);先打开应用,再看shortcut,此时的 shortcut 列表会是英文显示 那为什么 DreamCamera2 App 的 shortcut 列表中的慢录要采用动态加载呢?主要是为了动态判断芯片平台是否支持慢录模式,如果支持,shortcut 会
完整回答请参考FAQ: FAQ202274059
### 问题: UMP510G  REF_OUT输出时钟为三角波的原因
解决方案: REF_OUT0~REF_OUT4能否输出正弦波:通过软件配置相关寄存器可以输出近似方波或经RC滤波后的近似三角波,不能输出标准正弦波; 三角波浮高(最低电平在0V以上)原因:时钟驱动电路电源是0和1.8V,输出方波时,幅度为0~1.8V,当有RC低通滤波存在时,R较大(驱动能力较弱)时,电容在半个时钟周期内,不能被完全充满(1.8V)或放干(0V),则表现有浮高,这时VPP也不能达到1.8V,VPP越小,浮高也越明显. 这五路时钟的内部路径为: 震荡电路->多级反向器->Driver电路->REF_OUTx , 经过多级反向器后,震荡电路输出的正弦波就被转换成方波,后级的Driver电路结构如下图: 用户只能通过软件配置Driver电路的相关寄存器去调节驱动能力和是否bypass串联电阻,bypass开关闭合时,输出近似方波,bypass开关断开时,方波经过RC滤波后,输出近似三角波. 
完整回答请参考FAQ: FAQ202274077
### 问题: GPRS 1D2U不同Burst下功率值测试异常如何处理？
解决方案: GPRS 1D2U不同Burst下功率值测试异常. 例如:测试PCS GPRS 1D2U时 ,burst 1设置为PCL0,burst 2设置为PCL15时,功率值测试异常. 1、首先确保GPRS 1D1U下,功率值测试正常; 2、其次检查nv中小功率等级下duration值是否异常,delta_timing+duration值需要满足640左右,否侧会出现不同Burst下功率值异常的情况. nv中PCS delta_timing和duration修改路径如下: GSM_optimize\GSM_calibration_param_optimize\rf_param_dsp_use\rf_pcs_param_dsp_use\RF_ramp_delta_timing\RF_ramp_delta_timing[*]=20 GSM_optimize\GSM_calibration_param_o
完整回答请参考FAQ: FAQ202274086
### 问题: HSUPA/HSDPA功率调整与哪些补偿因素有关？
解决方案: HSPA场景下只有温补补偿(w_apc_temp_compensation)和HSPA功率补偿(tx_subtest_compensation_band_sequence)有效,其它地方补偿无效. HSPA场景下PDET功能也不生效(既PDET温度补偿不起作用). 1、若高低温下,HSDPA或HSUPA需要整体补偿的话,在如下NV中进行补偿: WCDMA_optimize\WCDMA_download_params_optimize\w_apc_temp_compensation\band\band[*]\gain_mode\gain_mode[0]\freq\freq[0]\gain_mode_comp\comp[14]=0X*(HSDPA;unit:1/32dB;负数用补码表示) WCDMA_optimize\WCDMA_download_params_optimize\w_apc_t
完整回答请参考FAQ: FAQ202274102
### 问题: 如何判断手动搜网结果来源？
解决方案: 搜网相关代码路径: /packages/apps/Settings/src/com/android/settings/network/telephony/NetworkScanHelper.java /vendor/sprd/platform/frameworks/base/telephony/java/com/android/internal/telephony/uicc/UniOperatorNameHandler.java 通过在log中搜索关键字UniOperatorNameHandler,可以判断搜网结果来源,具体分析过程如下: 1.首先判断搜网结果来自PNN/OPL,如果log打印中getpnn有输出结果,则说明搜网结果来自PNN.
2.如果搜网结果不是来自PNN,然后判断搜网结果是否来自ONS.在驻网条件下进行搜网时,搜的与驻的是同一个PLMN时,搜网结果则来自ONS.

完整回答请参考FAQ: FAQ202274140
### 问题: 如何判断手动搜网结果能否修改以及如何修改
解决方案: 搜网相关代码路径: /packages/apps/Settings/src/com/android/settings/network/telephony/NetworkScanHelper.java /vendor/sprd/platform/frameworks/base/telephony/java/com/android/internal/telephony/uicc/UniOperatorNameHandler.java 根据搜网结果来源,搜网结果显示相关修改可分为如下四种情况: 1.如果搜网结果来自PNN时,若必须修改,只能针对该mccmnc写死,代码修改位置为:UniOperatorNameHandler类的getHighPriorityPlmn方法,请客户自行修改实现.
2.如果搜网结果来自ONS,客户需要修改,则属于需求定制.
3.如果搜网结果来自NITZ,也即来自网络
完整回答请参考FAQ: FAQ202274142
### 问题: kernel log中添加的驱动probe返回值是-517
解决方案: kernel5.4/drivers/base/dd.c
673  static int really_probe_debug(struct device *dev, struct device_driver *drv)
674  {
675  	ktime_t calltime, delta, rettime;
676  	int ret;
677  
678  	calltime = ktime_get();
679  	ret = really_probe(dev, drv);
680  	rettime = ktime_get();
681  	delta = ktime_sub(rettime, calltime);
682  	printk(KERN_DEBUG "probe of %s returned %d after %lld usecs\n",
68
完整回答请参考FAQ: FAQ202274145
### 问题: 如何新增USB ACM端口
解决方案: 1、kernel config 参考如下修改

CONFIG_USB_F_SERIAL=y
+ CONFIG_USB_F_ACM=y
CONFIG_USB_F_RNDIS=y
CONFIG_USB_F_MASS_STORAGE=y
CONFIG_USB_F_FS=y
CONFIG_USB_F_MIDI=y
CONFIG_USB_F_MTP=y
CONFIG_USB_F_PTP=y
CONFIG_USB_F_AUDIO_SRC=y
CONFIG_USB_F_ACC=y
CONFIG_USB_F_VSERIAL=y
CONFIG_USB_CONFIGFS=y
CONFIG_USB_CONFIGFS_SERIAL=y
- # CONFIG_USB_CONFIGFS_ACM is not set
+ CONFIG_USB_CONFIGFS_ACM=y
-----#
完整回答请参考FAQ: FAQ202274146
### 问题: 如何修改PMIC UMP510输出供给SR3595D芯片的26M时钟波形-UMS9230平台
解决方案: UMS9230平台PMIC的CLK输出端口为REF_OUT2时,当实验需要验证26M时钟波形不同幅值不同形状对于射频性能的影响时,可以通过临时手段修改波形形状与幅值.具体操作步骤如下: 1.首先手机开机,通过USB与电脑相连,通过ADB命令进行修改 adb root adb shell (进入adb环境) lookat 寄存器地址(读取当前寄存器的值) lookat -s 寄存器值 寄存器地址(将寄存器值写入当前寄存器) 例:将0.8V三角波修改为1.8V方波, 修改波形对应的寄存器地址为:0x64221b24; 0.8V三角波对应的寄存器值:0x47E 1.8V方波对应的寄存器值:0x57E 具体ADB命令如下: 测量修改前后TR处26M时钟的波形,具体图形如下: 2.修改三角波幅值的寄存器地址为:0x64221afc,不同寄存器值对应的幅值(约存在±0.05V的误差)如下: 可以按照需
完整回答请参考FAQ: FAQ202274152
### 问题: 若引入闪光灯保护方案，限制主闪最大曝光时间为500s， 效果参数应该如何设置才不影响flash效果
解决方案: 结论:限制主闪最大曝光时间为500ms的前提下,ISP-AE-flash-control-param中的main_capture_delay如果设置为6,则需要Max capture shutter小于71ms,才不会影响到闪光灯的效果. 分析如下: 已知: 1.Autoflash模式下,主闪高亮的持续时间有以下关系: (闪光灯主闪高亮的最大持续时间)=(main_capture_delay+ 1)×(Max capture shutter) (特别说明:此处或后面所有加1的原因是delay值从0开始算) 2.强制打闪的模式下,主闪高亮的持续时间有以下关系: (闪光灯主闪高亮的最大持续时间)=(main_open_delay+ 1)×(Max capture shutter) 3.main_capture_delay和main_open_delay又有如下关系: main_capture_
完整回答请参考FAQ: FAQ202274154
### 问题: Agilent  8960如何测量WCDMA的非信令EVM及其星座图
解决方案: 对于EVM的问题,有时需要看它的星座图来确认EVM的恶化原因,需要确认射频前端每一级的EVM状态,此时需要用Pandora强发确认,具体操作如下: 1.首先Pandora工具 Enter mode,根据Pandora User Guide(https://unisupport.unisoc.com/file/index?fileid=34327)设置WCDMA的TX ON发射状态 2.仪表端设置:首先Operating Mode选择FDD Test 然后仪表设置与Pandora设置相对应的信道,仪表端还需设置Uplink DPCH Scrambling Code为74565以及Trigger Source; Uplink DPCH Scrambling Code设置位置如下: Trigger Source 设置:首先点击仪表盘右上方的:MEASUREMENT在出来的界面中选择IQ Tuni
完整回答请参考FAQ: FAQ202274170
### 问题: WCDMA限制芯片口输出功率方法
解决方案: 产线进行常规老化和PA专项测试时,由于温漂等原因,会有小概率功率过大导致射频前端器件烧坏,此时可以通过限制TR的输出功率来保护射频前端器件,具体限制方法如下: 1,首先确认需要限制的控制字:以WCDMA B5为例,将功率限制到26dbm,初始校准结果如下, 由于WCDMA 限功率方案,不区分信道,所以限功率时要以饱和功率最低的信道功率为准,并且跟目标功率之间留有2dbm左右的余量,避免因主板一致性差异导致校准fail.B5饱和功率最低的信道为4152,26.96dbm对应的Gain index为32(十进制),根据换算关系,8个index为1dbm,故26dbm 对应的 gainIndex限制在40(十进制). 2.NV配置位置: •WCDMA_optimize\WCDMA_download_params_optimize\w_cal_config\pa_config\band\pa_sw
完整回答请参考FAQ: FAQ202274172
### 问题: NV维护及升级要点
解决方案: 4G平台,NV是由NV aide工具配置的,配置信息全面,建议在此工具配置出的.NV 文件基础上维护,如果有修改项直接拷贝放到NV aide配置的.NV文件里面,建议直接放在最后,不能放在整段NV的中间被打断后文件有一部分会失效;如果有多次修改则最后一次结果放在最后即可,NV写入的是最后一次的结果;直接修改操作也支持,可以通过搜索找到当前的修改项,自行填写修改值. 5G平台,基本是手动配置,我司提供的配置一般会把所有要配置的项都写一遍,即使和原始NV一致我们也会写一遍,即提供的.NV 文件也是一份完整的配置,如果有修改和4G平台操作方法一致. 不推荐维护方法:将之前的.NV文件导入最新版本的Base NV,得到最新的差分文件,然后使用最新的这个.NV作为NV的维护文件. 不推荐原因:要配置的NV可能存在和Base NV是一致的,写入值和原始值一致就无法变红,导出差分就不能保证每一项需要配置
完整回答请参考FAQ: FAQ202274177
### 问题: 距感工厂校准后校准数据未得到应用
解决方案: 1. 工厂校准后需重启才能生效,请先检查距感校准数据有无成功下发到CM4,以及下发数据是否满足预期,查看kernel Log 关键词:raw_cali_data / proximity download calibration data 2. 平台自带动态校准机制,用以检查工厂校准数是否存在问题,该检查逻辑在距感每次enable时都会执行,其中: 1)有工厂自动校准(获得校准底噪:factory_ground_noise) 对工厂校准底噪的判断条件: raw_data > (factory_ground_noise + low_add - sensor_measure_accuracy) || raw_data < (factory_ground_noise – sensor_measure_accuracy) 2)有工厂手动校准(获得高/低阈值:factory_cali_high/fac
完整回答请参考FAQ: FAQ202274187
### 问题: SC6533G平台如何支持BBAT
解决方案: SC6533G进BBAT模式,先讲一下BBAT模式下USB是VCOM模式,用来传输Diag命令的. 所以在使用之前需要先按照VCom的驱动程序,手机插入USB之后,会弹出USB功能选择窗口,选择VCOM,然后安装响应的驱动程序,程序安装之后,在设备管理器里面端口应该会被识别成SPRD U2S Diag. 进BBAT模式,首先需要软件上支持. Target.def 中需要增加 SUPPORT_SPRD_BBAT ?= 1 CT_MODEM = 2 如果想支持开机之后快速进入BBAT模式,还需要增加下面的修改 (1)target.def中 添加 GLOBAL_EXPORT_FLAG += SUPPORT_QUICK_VCOM (2) 如果是采用增加BBAT_GPIO的方式的话,还需要在tgt_board_cfg.h 中添加 #define TGT_PMD_CONFIG \ { \ ......
完整回答请参考FAQ: FAQ202274207
### 问题: 修改相机模式列表单个模式的布局高度
解决方案: 正常情况下单个模式之间距离已经是足够的,但是如果修改了lcd_density屏幕密度,可能会出现上下模式之间距离过近导致对应模式图标不能显示完全的情况,可以通过修改单个模式的布局高度解决此问题 按如下修改,增加单个模式的布局高度: vendor/sprd/platform/packages/apps/DreamCamera2/src/com/android/camera/ui/ModeListView.java:
...
 public void updateList(int mode, int camera) {
...
         params.height = getContext().getResources().getDimensionPixelSize(R.dimen.mode_selector_item_height) + 20; //此处增加,参数20仅供参考
完整回答请参考FAQ: FAQ202274208
### 问题: 恢复原生信号格（信号强度图标）显示
解决方案: 平台默认假5格显示:只要in_service则显示一格信号,没有0格 原生为真4格显示:0-4格,有0格显示 恢复原生显示方法: 将以下平台资源替换为原生资源 平台: sprdroidr_trunk/frameworks/base/packages/SystemUI/res-unisoc/drawable/ stat_sys_signal_0_ex.xml stat_sys_signal_1_ex.xml stat_sys_signal_2_ex.xml stat_sys_signal_3_ex.xml stat_sys_signal_4_ex.xml 原生: /vendor/sprd/carriers/cucc/overlays/frameworks/base/packages/SystemUI/res-unisoc/drawable/ stat_sys_signal_0_ex.xml 
完整回答请参考FAQ: FAQ202274210
### 问题: 在opencpu中给客户开放的FLASH_EXTAPP_SIZE
解决方案: 1、flash_extapp_size这个是用来放客户的app的


2、大小可以更改.根据你的需要进行修改target.config文件:
-----# FLASH layout
-----#
CFG_FLASH_SIZE=0x400000
CFG_FLASH_BOOT_OFFSET=0x10000
CFG_FLASH_EXTAPP_BASE=0x370000
CFG_FLASH_EXTAPP_SIZE=0x10000
CFG_RAM_EXTAPP_SIZE=0x10000
CFG_FOTA_BACKUP_AREA_START=0x380000
CFG_FOTA_BACKUP_AREA_SIZE=0x10000
-----# CFG_USE_LEGACY_SPIFFS is not set
CFG_SPIFFS_FLASH_START=0x390000
CF
完整回答请参考FAQ: FAQ202274223
### 问题: 平台Vbat的相关的电压保护门限有哪些？
解决方案: 平台Vbat相关的保护电压门限如下: 1.当VBAT<2.95V 时, PMIC内部的UVLO模块将POR_VBAT_N拉低, PMIC处于复位状态(Power On Reset).所以,此时即便PBINT 按下也不会执行上电时序,该门限值不可修改; 2.当VBAT>2.95V后,UVLO模块将POR_VBAT_N释放, PMIC进入正常工作状态.PBINT/VCHG/RTC Active后PMIC执行上电时序,系统可正常开机; 3. 当VBAT<3.4V时,此时PMIC可上电、系统SoC可正常开机执行软件.但执行到UBOOT阶段后,UBOOT将判断VBAT电压:. 当VBAT低于3.4V且没有充电器插入时将执行关机掉电流程; 当VBAT低于3.4V但处于充电状态时,UBOOT将等待VBAT 高于3.4V后进入Kernel;目的是保障VDDUSB,VDDEMMCCORE, VDDWIFIP
完整回答请参考FAQ: FAQ202274240
### 问题: Android R的IMS User Agent 配置方法
解决方案: [推荐·方案二] 方案一、随board配置:"ro.config.sipua" PRODUCT_PROPERTY_OVERRIDES += \ ro.config.sipua=XXX (XXX为想要配置的UserAgent) 例如:device/sprd/mpool/module/telephony/msoc/sharkl3/sharkl3.mk 注意:此方案只适用于volte user agent. 方案二、随运营商mccmnc: (1)配置vendor/sprd/telephony-res/ims_user_agent下的imsUserAgent.xml 有相同UserAgent的plmn放到同一value值下,现最多支持4个. 如需扩展,修改vendor/sprd/proprietories-source/rild/impl-ril/ril_userAgent.cpp中的 #defi
完整回答请参考FAQ: FAQ202274246
### 问题: 新的MIPI器件配置文件如何配合NVAide工具使用
解决方案: 紫光展锐的NVAide工具可以支持市场上主流RF器件,无法覆盖全部射频器件,遇到工具不支持的器件可以向展锐提出需求,当得到展锐工程师的支持后,会得到一个类似 "mipi_xxxx.xlsx"的文件,那么该文件如何使用呢? 1、打开该文件,找到最后一个名为"notice"的工作表,里面记录了该文件适用的版本,比如:NVAide V2.2.5 2、打开工具所在路径,找到release文件夹,里面存在三个子文件夹,分别为NVAide V1.6.3,NVAide V2.1.2 和 NVAide V2.2.5 3、打开步骤1里得到的工具版本对应名字的文件夹,比如NVAide V2.2.5,然后打开Configuration Files文件夹 4、在Configuration Files文件夹里寻找当前射频器件对应的文件夹,这里的文件夹以供应商名字命名或其简写,如:QORVO, MXD 5、将我们提供
完整回答请参考FAQ: FAQ202274250
### 问题: UIS8910平台 VS2010 模拟器问题
解决方案: 建议修改 APP_RegisterPsService @ mmimain.c 

LOCAL void APP_RegisterPsService( void )
{
++#ifndef WIN32
    if(RM_GetCalibrationPostMode())
    {
        SDI_TRACEID_INTEGER(AP_MMI_MAIN_MMI_APP_COMMON, APP_RegisterPsService___not_handle_all_ps_event_for_calibratiion_post_mode, "APP_RegisterPsService,  not handle all ps event for calibratiion post mode");
        return;
    }
++#endif
 提示 R
完整回答请参考FAQ: FAQ202274258
### 问题: 如何在FOTA升级进度条阶段显示图片？
解决方案: 若要显示图片 , 先将图片制作成点阵图的array , 然后跑个2维的for loop 依序把像素点点进lcd buffer中

1.用图片转换工具将BMP format 24bit转化成RGB565
2.__align(4) const uint16 boot_image_small[]为图片RGB565 raw data
3.参考代码
Boot_LcdDisplayLogo(void)@MS_Code\fdl_bootloader\chip_drv\src\lcd\src\boot_lcd.c
{
    uint16 width = 192;
    uint16 height = 96;
    POINT start = {0};
    POINT end = {0};
    LCD_INFO_T lcd_info = {0};
    uint16 
完整回答请参考FAQ: FAQ202274260
### 问题: WCDMA内环功控调试指导
解决方案: 内环功控(ILPC)定义:上行内环功控是UE发射机根据接收到的一个或多个下行TPC命令来调节其输出功率的能力. ILPC的影响:内环功控主要影响通信网络的容量. 常见的问题:一般情况下模式E和F容易fail,因其精度要求最高,其他模式fail的很少见. 内环功控问题的可调参数:(1)PA增益mode (2)PA的bias (3)PA的DCDC电压 (4)PA的增益切换点功率和DCDC切换点功率 (5)NV中的功率补偿 调试建议: (1) Fail点功率在PA的增益切换点或DCDC切换点附近(不超过1dB)时,一般调整切换点功率都会有改善或pass. 例如:在1.5dBm处fail,则可以认为是fail在low0的DCDC切换点start_power ,同时也是增益切换点low_start_power . 调整切换点时需要注意,为保持中低增益之间的2dB overlap,如果low_star
完整回答请参考FAQ: FAQ202274271
### 问题: UWS6130/UWS6131(W307/W317)音频参数合入方法
解决方案: 重点是此平台的通话和多媒体的nv工程是在两个位置,需要分别合参数: 音频参数用audiotester工具调试完毕后,分别导出通话部分的audio.nv 和多媒体部分的music.nv 参数. 通话部分audio.nv参数合之前一样,用nvtool工具打开modem文件夹中的nvitem来合入.操作步骤是:1.nvtool 打开nvitem中的xprj文件.2.在工具顶部选择facility--import按钮,导入audio.nv参数.更新的部分会变红.3.点击工具顶部的save image合save project按钮即可保存更新好的nv工程. 多媒体部分music.nv参数需要合入AP侧的nvitem中.首先在软件包的image文件夹中找到UWS6130E_WA_1h10_nvitem文件夹.然后用nvtool打开它的xprj文件,合入多媒体的music.nv参数.操作方法和上面一步一
完整回答请参考FAQ: FAQ202274272
### 问题: 如何判断拍照帧的metadata具体下发值
解决方案: 通过在camera service截取capture请求的request参数,解析出想要的metadata,下面的代码以metadata值ANDROID_SPRD_FLASH_LCD_MODE为例,获取他在拍照帧中的下发值 frameworks\av\services\camera\libcameraservice\device3\Camera3Device.cpp status_t Camera3Device::submitRequestsHelper( if (repeating) { res = mRequestThread->setRepeatingRequests(requestList, lastFrameNumber); } else { +++ for (List<sp<CaptureRequest> >::iterator it = requestList.begin()
完整回答请参考FAQ: FAQ202274277
### 问题: 如何在camera api1下新增客制化的parameters的值
解决方案: 下面的修改基于安卓8.1的代码,版本9以上的代码会稍有区别,此修改需要编译四个模块, 1. libcamera: 生成文件名字 : camera.xxxx.so xxxx 是平台名 vendor/sprd/modules/libcamera/include/SprdCamera3Tags.h vendor/sprd/modules/libcamera/hal3_2v1/SprdCamera3.h 修改:sprd_camera_ext_tags和android_add_parameters两个结构体中对应位置新增tag值 2. libcameraservice: 生成文件名字: licameraservice.so vendor/sprd/platform/frameworks/av/service/camera/libcameraservice/api1/client2/Parameter
完整回答请参考FAQ: FAQ202274278
### 问题: UMS9117游戏版权问题
解决方案: 目前IDH包里面提供的游戏只能使用目录在MS_MMI_Main\source\mmi_app\app\od_game 下的游戏,
注:MS_MMI_Main\source\mmi_app\app\game 下面的游戏没有版权,不能使用!!

MS_MMI_Main\source\mmi_app\app\od_game 下的游戏是由第三方星创提供的,
我们不收取任何费用,费用问题都是由第三方负责的.其中有两个游戏好像是完全免费,其他的游戏是只有5次试玩机会,试玩次数用完之后是需要收取终端用户的费用的,会提示用户需要交费才能完全激活游戏.

具体版权信息如下:

                     Doodle Jump   ---- Copyright by Lima Sky
                     Stick Hero   -----  Copyr
完整回答请参考FAQ: FAQ202274287
### 问题: 如何基于NVTOOL工具准确导出射频差分NV
解决方案: 展锐的NVTOOL工具具有import和export功能,import功能使得我们可以导入预先准备好的.NV文件,export功能使得我们可以导出工具里的部分NV. 1、当用import导入预先准备好的.NV文件时,如果导入的内容与base NV里的内容不同,则不同的内容会显示为红色,相同内容则维持原黑色字体. 2、当导入NV文件内容本身存在重复时,则重复的内容维持黑色字体,比如NV文件里存在如下两行: WCDMA_logic\WCDMA_rf_gpio_config\GSM_Used_GPIO=0x480 WCDMA_logic\WCDMA_rf_gpio_config\GSM_Used_GPIO=0x480 则导入NV文件后以上内容在NVTOOL里显示依然为黑色字体,而该内容很可能是有别于base NV的内容,工程师本想让其显示为红色,此时如果用export功能只导出红色内容,那么就漏
完整回答请参考FAQ: FAQ202274289
### 问题: AndroidQ如何修改首选网络模式
解决方案: AndroidQ版本中包含了定制可选网络模式的代码: packages/apps/Settings/src/com/android/settings/network/telephony/EnabledNetworkModePreferenceController.java private void updatePreferenceEntries(ListPreference preference) { .. Resources resource = SubscriptionManager.getResourcesForSubId(mContext, mSubId); boolean carrierCustomize = resource.getBoolean(R.bool.config_carrier_customize_network); if (carrierCustomize) { 
完整回答请参考FAQ: FAQ202274293
### 问题: 平台上A+G sensor使用SPI通信模式需要注意哪些？
解决方案: 当A+G sensor使用SPI通信模式时候,除了在硬件电路上选择SPI接口,还需要注意下pin map的配置: 因为A+G sensor要在sensor HUB上控制,所以在pin map的 SPI 开关要切换到CM4的控制器 如下以UMS512T为例,A+G sensor挂载在SPI0上的配置: 1.首先在pin map里面把SPI的开关配置到CM4侧: {REG_PIN_SPI_MATRIX_MTX_CFG,0x00000001},//SPI0->CM4_SPI0;SPI1->AP_SPI1;SPI2->AP_SPI2;SPI3->AP_SPI3; 如下图是SPI的开关寄存器配置 SPI_matrix_mtx_cfg(不同平台可能不同,具体参考芯片规格书) 寄存器最后一位配置为"1"表示 SPI0挂在CM4侧;如果使用其他SPI,同步进行修改即可; 2.在pin map上需要把SPI
完整回答请参考FAQ: FAQ202274305
### 问题: UIS8910 LTE In-band blocking项fail如何处理
解决方案: 当干扰信号落在终端的接收机频段向低,向高两个反向各延伸15MHz 的频率范围内,终端的接收机性能测试即带内阻塞测试.在这种场景下,终端的流量必须达到或者超过终端定义的参考测量信道最大流量的95%.不能满足本项指标的终端在存在临近小区干扰的情况下降低覆盖范围 1、测试带内阻塞务必逐一检查如下内容: ①.务必关闭屏蔽门 ②.正确连接双天线 ③.关闭数据开关 ④.关闭VoLTE ⑤.工程模式中CFU设置为永不查询,再务必重启机器测试 2、确认接收灵敏度方面有余量,若是灵敏度较差需要先排查一下接收链路先解决灵敏度问题 3、NV中有部分参数用于定义算法中AGC的目标值,不通同band情况下可进行有针对性的修改,主要应用于Block的场景,,当识别到有block时,会在此基础上再减去6dB,可以在NV修改如下路径: RF_nv\RF_NV_T\RF_Common_NV_T\SYSCTRL\LTE_AG
完整回答请参考FAQ: FAQ202274310
### 问题: Android12dm-verity校验镜像回读方法
解决方案: 问题现象: 1.手机自动重启,重启后能正常开机 2.手机开开机后一直重启,无法开机 关键log信息:c0 reboot: Restarting system with command 'dm-verity device corrupted' 出现以上问题现象,且log中能读到以上信息时说明出现了dm-verity校验失败现象,一般问题方向有两个: 1.emmc问题导致只读镜像被篡改 2.某次ddr跳变导致内存变化,使dm-verity校验失败 问题方向可通过回读镜像是否一致来确认 镜像回读方法: ResearchDownload工具: 1. 加载原始pac包,在Main Page页只勾选FDL1/FDL2(可以通过Select All Files复选框来选中所有后,再取消选中). 2. 在Flash Operation页勾选Active Read Flash,并勾选列表中需回读镜像.需回读
完整回答请参考FAQ: FAQ202274311
### 问题: wifi项目去掉DreamCamera电话权限
解决方案: 平板项目不需要申请电话权限,去掉电话权限申请的弹窗
 1. 在manifest中去掉 READ_PHONE_STATE
 路径:vendor/sprd/platform/packages/apps/DreamCamera2/AndroidManifest.xml 去掉 <uses-permission android:name="android.permission.READ_PHONE_STATE"/> 2. 在动态权限申请时去掉READ_PHONE_STATE
 路径:vendor\sprd\platform\packages\apps\DreamCamera2\src\com\android\camera\CameraActivity.java 去掉READ_PHONE_STATE相关的权限申请, checkPermissions(), checkSubPermissions(
完整回答请参考FAQ: FAQ202274316
### 问题: #testFrameTracerProducerAvailable
解决方案: 报错讯息为执行 adb shell command "perfetto, --query-raw, |, base64" 后直接报错, 可排查 "persist.traced.enable" 该属性是否被修改成 0, 需将之改为默认的 1 02-19 11:25:16 D/RunUtil: Running command [adb, -s, 211215B9eyjaA00435, shell, perfetto, --query-raw, |, base64] with timeout: 2m 0s
02-19 11:25:16 I/TestFailureListener: FailureListener.testFailed android.graphics.gpuprofiling.cts.CtsFrameTracerDataSourceTest#testFrameTracerPro
完整回答请参考FAQ: FAQ202274318,含图片
### 问题: CTS测试CtsCarrierApiTestCases模块子项测试报错
解决方案: 分析报错信息: 范例测试使用CTS_11.0_r7工具 //测试过看到getCarrierPrivilegeStatus: No UICC的打印, 后续报错显示"This test requires a SIM card with carrier privilege rule on it." 03-21 01:23:06.586 9042 9067 I TestRunner: started: testRequestNetworkScanLocationOffPass(android.carrierapi.cts.NetworkScanApiTest) ... 3-21 01:23:06.625 1043 2137 E PhoneInterfaceManager: [PhoneIntfMgr] getCarrierPrivilegeStatus: No UICC ... 03-21 01:
完整回答请参考FAQ: FAQ202274335
### 问题: 距感规避动态校准
解决方案: 距感每次enable都会执行一次动态校准,会采集前几次数据取均值作为参考raw_data,可参照以下两种方式进行规避 1. 采用距感动态加载,最大程度规避动态校准 2. 调整opcode参数 1)工厂自动校准,获取底噪 factory_ground_noise,此时高低限为 ps_threshold_low = factory_ground_noise + high_add; ps_threshold_low = factory_ground_noise + low_add; 此时做动态校准修改的判据为: raw_data+ sensor_measure_accuracy > ps_threshold_low || raw_data+ sensor_measure_accuracy < factory_ground_noise 如使用工厂自动校准,则难以通过修改sensor_measure
完整回答请参考FAQ: FAQ202274336
### 问题: 相机设置黑白模式
解决方案: 只需要app中下发MONO模式就可以切换预览、视频/拍照为黑白模式 mCameraSettings.setColorEffect(CameraCapabilities.ColorEffect.MONO);
 例如需要把videoModule的预览和视频流都设置为黑白模式,可直接这样修改: diff --git a/src/com/android/camera/VideoModule.java b/src/com/android/camera/VideoModule.java
index 1437468ed..5d8c4d8cb 100755
--- a/src/com/android/camera/VideoModule.java
+++ b/src/com/android/camera/VideoModule.java
@@ -1342,10 +1342,7 @@ public
完整回答请参考FAQ: FAQ202274337
### 问题: 如何在api层屏蔽系统的一些功能特性
解决方案: 以屏蔽系统的FEATURE_PRINTING功能为例,可以通过如下修改,使得系统对app屏蔽了打印机功能 1、frameworks/base/core/java/com/android/server/SystemConfig.java 加载完所有的xml文件后,将FEATURE_PRINTING特性去除 --- a/core/java/com/android/server/SystemConfig.java +++ b/core/java/com/android/server/SystemConfig.java @@ -403,6 +403,8 @@ public class SystemConfig { Environment.getProductServicesDirectory(), "etc", "sysconfig"), ALLOW_ALL); readPermissions(E
完整回答请参考FAQ: FAQ202274338
### 问题: #testVendorFingerprint
解决方案: 报错讯息为 "Build fingerprint does not match expected format expected:<6> but was:<1>" 对应的代码为检查 "ro.vendor.build.fingerprint" 是否有6个由 "/" 区分的 segments 一般是由客户修改到 "ro.vendor.build.fingerprint" 相关代码或配置,需自行排查下 另外 CDD 要求 fingerprint 需以如下命名格式,也需符合 CDD 规定 $(BRAND)/$(PRODUCT)/$(DEVICE):$(VERSION.RELEASE)/$(ID)/$(VERSION.INCREMENTAL):$(TYPE)/$(TAGS)
 报错讯息 01-28 15:18:50 I/ModuleListener: [1/1] com.android.tests
完整回答请参考FAQ: FAQ202274341
### 问题: VTS USB queryPortStatus/0_default fail
解决方案: 1.与客户先确认是micro USB or TypeC 2.若是micro USB, 因为系统vts默认的是针对typec接口做的, 建议取消相关测试项 3.取消方法如下: /device/sprd/mpool/module/usb/main.mk 中,去掉这两项 18 #add USB vts service 19 ifneq ($(strip $(TARGET_HAS_USB_TYPEC)),false) 20 PRODUCT_PACKAGES += \ 21 android.hardware.usb@1.1-service 22 endif 23 24 ifneq ($(strip $(TARGET_HAS_USB_TYPEC)),false) 25 DEVICE_MANIFEST_FILE += $(call md-path-cur)/manifest_typec.xml 26 e
完整回答请参考FAQ: FAQ202274345
### 问题: VtsHalUsbGadgetV1 模块测试例需要libusb1套件
解决方案: 报错log: 10-22 16:24:50 D/RunUtil: Running command [/tmp/vts-virtualenv-2/bin/pip, install, --upgrade, libusb1] with timeout: 5m 0s 10-22 16:24:51 D/VtsPythonVirtualenvPreparer: Result FAILED. stdout: Collecting libusb1 Using cached libusb1-2.0.1.tar.gz (82 kB) 10-22 16:24:50 E/VtsPythonVirtualenvPreparer: Installing libusb1 from PyPI failed. 10-22 16:24:55 E/VtsPythonVirtualenvPreparer: Installing 
完整回答请参考FAQ: FAQ202274346
### 问题: 重启后首次无法启动锁屏相机
解决方案: 平台机和google原生机,在重启后未解锁前都不会启动camera,是正常现象. 对应代码如下: /frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/StatusBar.java if (!mNotificationPanelViewController.canCameraGestureBeLaunched() || (mKeyguardStateController.isMethodSecure() && mScrimController.getState() == ScrimState.UNLOCKED)) { if (DEBUG_CAMERA_LIFT) Slog.d(TAG, "Can't launch camera right now"); return; } public boo
完整回答请参考FAQ: FAQ202274349
### 问题: UIS8850BM flash及ram空间优化指导
解决方案: UIS8850BM flash及ram空间优化指导 1. AT命令 components/atr/src/at_cmd_table.gperf关掉不想要的AT命令 2. PPP target.config中关掉这个开关CONFIG_NET_LWIP_PPP_ON 3. Audio 3.1 audio (no cvs) target.config中打开 3.2 audio(full) target.config中除以上开关外,打开这个开关 CONFIG_AUDIO_CVS_SUPPORT=y 3.3 codec使用说明 libaudio_core.a库包含所有encoder和decoder. 如果不想使用某个encoder或decoder,可以在target.config里关闭对应的DEC/ENC开关,并确保代码里不调用对应的API,编译后即不会占用flash空间. 4. USB devic
完整回答请参考FAQ: FAQ202274357
### 问题: 手动选网后重启，网络选择菜单显示自动选网
解决方案: 定位方法: 1. 通过搜索打印"MMISET_AppendSelectNetworkListItem"确认重启前后 MMI 侧设置后菜单显示的搜网类型. eg: 1 108259-1 21:01:08.005 -- Time: 3221 MMISET_AppendSelectNetworkListItem:select network mode is 1!,dual_sys = 0 ———— 其中 network mode 表示搜网类型:0 为自动搜网,1 为手动搜网;dual_sys 表示 SIM 卡 ID ,0 为 SIM 卡 1,1 为 SIM 卡 2. 2. 通过搜索打印 "manual_plmn_sel_flag " 确认当前网络选择维持的方式: eg: 0 13140-1 21:00:43.655 -- mm_ph: manual_plmn_sel_flag is 0 ————
完整回答请参考FAQ: FAQ202274360
### 问题: CtsPermission3TestCases模块测试报错
解决方案: 范例测试工具信息 Suite / Plan CTS / cts Suite / Build 11_r7 / 8072971 报错例: android.permission3.cts.PermissionTest23#testGranted android.permission3.cts.PermissionTest23#testRevokeAffectsWholeGroup android.permission3.cts.PermissionTest23#testGrantPreviouslyRevokedWithPrejudiceShowsPrompt android.permission3.cts.PermissionTest23#testNoResidualPermissionsOnUninstall 报错信息皆为 java.lang.RuntimeException: com.an
完整回答请参考FAQ: FAQ202274362
### 问题: 安卓平台如何实现将安卓日志通过uart口输出
解决方案: 请参考如下修改: diff --git a/common/rootdir/root/init.common.rc b/common/rootdir/root/init.common.rc index 196fa2a..310747b 100755 --- a/common/rootdir/root/init.common.rc +++ b/common/rootdir/root/init.common.rc @@ -202,6 +202,18 @@ chown audioserver audio /dev/audio_pipe_recordproc chown audioserver audio /dev/audio_pipe_voice +#for logcat +service logcat /system/bin/logcat -f /dev/kmsg + class core + 
完整回答请参考FAQ: FAQ202274365
### 问题: 距感动态校准会使用opcode 中哪些参数得到高低阈值
解决方案: opcode中距感校准参数为: static prox_cali_t eProxCaliArray[] = { { .collect_num = 7, .ps_threshold_high = 250, .ps_threshold_low = 200, .dyna_cali = 1000, .dyna_cali_add = 20, .noise_threshold = 350, .noise_high_add = 50, .noise_low_add = 35, .ps_threshold_high_def = 250, .ps_threshold_low_def = 200, .dyna_cali_threahold = 30, .dyna_cali_reduce = 60, .value_threshold = 350, .noise_reference = 190, }, }; 距感
完整回答请参考FAQ: FAQ202274366
### 问题: #testGetDisplayAttrs 语言没有设置英文，导致失败
解决方案: -----#testGetDisplayAttrs 测项要获取 SecondaryDisplay 的名字,比对是否有包含 "Overlay #",比对失败;该名字是在 framework 底下设置,读取字串资源 com.android.internal.R.string.display_manager_overlay_display_name 后写入,CTS 有些测项需要判断字串,代码都是以英文字串为比对关键字,若设置为其它语言,会导置判断报错. 因此测试 CTS 需在 English 模式下测试 测项要获取 SecondaryDisplay 的名字 https://android.googlesource.com/platform/cts/+/refs/tags/android-cts-11.0_r6/tests/tests/display/src/android/display/cts
完整回答请参考FAQ: FAQ202274370
### 问题: #testSoftErrorRetriesActiveApp 测项报错
解决方案: cts 测试 app1 被 kill 掉, 导致 SyncManager 无法和 app1 sync 超时报错, 可查找 ActivityManagerConstants.java 内的值 DEFAULT_MAX_CACHED_PROCESSES 是多少? 旧有代码为 hard code 写死 6, 该值太小,app 应用容易被 kill, 目前代码为 SystemProperties.getInt("ro.max.cached,process", 32) 改为 32 后,cts 应用不会被 kill 掉,就能通过测项. frameworks/base/services/core/java/com/android/server/am/ActivityManagerConstants.java cts app 被 kill 掉 03-05 15:40:40.505 866 4060 I Ac
完整回答请参考FAQ: FAQ202274371
### 问题: 录像中快速连续点击照相，拍照过程中手机闪屏是问题吗？
解决方案: (1)客户经常会把录像的拍照动画误认为闪频.这个就是录像后拍照闪动动画效果,非闪屏. (2)如果去掉mAppController.startFlashAnimation(false);就没有闪动效果. vendor/sprd/platform/packages/apps/DreamCamera2/src/com/android/camera/VideoModule.java void showVideoSnapshotUI(boolean enabled) { if (enabled) { mAppController.startFlashAnimation(false); (3)如果客户想自定义闪动动画可以在这个函数里面调整动画时长和透明度,让拍照效果既保留,又不要有那么闪屏的效果. vendor/sprd/platform/packages/apps/DreamCamera2/src/
完整回答请参考FAQ: FAQ202274375
### 问题: SPDIF各通道DB调整
解决方案: 由于在硬件测试的时候,各通道SPDIF DB不一致 现可以在软件中调整各个通道SPDIF音量,各通道差异通过volumeOffset aps\application\s2tek\rda_atv\app_common_api\audio\app_audio.c BOOLEAN APP_Audio_SetSPDIFVolumn(UINT32 Param)
{
  i16VolumeOffset = g_stFactoryUserData.Audio.AudioVolumeOffset[u32Count].OffsetValue;
  
  SPDIF_Volume_Config.Volume = g_arSPDIF_pathVolumeTable[Param] + i16VolumeOffset;
  SPDIF_Volume_Config.Vol_Path = TVFE_AUDIO
完整回答请参考FAQ: FAQ202274379
### 问题: LTE SAR功率回退注意事项
解决方案: 我们的功率补偿, 有一个power detect 功率补偿,就是有一个返回环路,可以实时读取当时状态下的功率值,然后根据此时采样的的power detect adc value.也就是hdet value.去实时补偿功率. 但是这个power detect 范围很窄,只有19db到25dbm,不在这个范围之内的, hdet 补偿自动关闭. 现在功率功率回退值过大, 超出了这个范围.power detect 反馈回路的补偿.就马上不生效了. 所以会有这个现象. 例如lte tx power 是23db,举个例子:power detect 补偿了3db, 实际功率是20dbm,所以加起来是23dbm, 但是此时突然功率回退5db,所以看到现象是回退到了15db?为什么呢? 因为实际功率只是打到20db,3db 的pwer detect,因为功率回退而突然消失.所以看到好像功率多回退了. 这样的
完整回答请参考FAQ: FAQ202274392
### 问题: Google Dialer部分ICON客制化
解决方案: Google目前提供以下Google Dialer的ICON客制化参数: Enable Wi-Fi icon on a dial button. com.google.android.dialer.display_wifi_calling_button_bool true/false Display HD icon. display_hd_audio_property_bool true/false Display HD+ icon. display_hd_plus_icon_bool true/false Display call type (VoLTE, VoWifi). display_call_type_icon_bool true/false display_wifi_icon_type_string vowifi(预设值), 或是可修改成自己要的字符串, 例如:vozwifi 
完整回答请参考FAQ: FAQ202274398
### 问题: #testRequestChildRectangleOnScreen_onScrollChanged
解决方案: 范例工具: Suite / Build 11_r7 / 8072971 分析报错原因: 由于没有触发listView中的 onScrollChanged方法,而导致case失败 03-21 14:17:58 I/TestFailureListener: FailureListener.testFailed android.widget.cts.AbsListViewTest#testRequestChildRectangleOnScreen_onScrollChangedCalled false 03-21 14:17:58 I/ModuleListener: [1/1] android.widget.cts.AbsListViewTest#testRequestChildRectangleOnScreen_onScrollChangedCalled FAILURE: java.lang.
完整回答请参考FAQ: FAQ202274402
### 问题: DreamCamera2 APP，微距模式配置失败问题
解决方案: DreamCamera2 APP 通过底层的微距拍照 persist 来判断是否配置微距拍照模式,如果底层支持,则注册并添加此模式. Android 12 微距拍照底层配置方案: platform/device/sprd/芯片型号/camera/md.mk
-----#camera macrophoto 
PRODUCT_PROPERTY_OVERRIDES += persist.vendor.cam.macrophoto.enable =1  //微距拍照模式的persist配置为1
-----#camera macrovideo
 为了双摄标定,辅摄一般配广角(物理 id 为2),长焦配置物理 id 为 3,底层微距的物理 id 默认设置为 4(sensor_config.xml中配置),因此 DreamCamera2 APP 也将上层的微距拍照的逻辑 id 设置为4. 但是,
完整回答请参考FAQ: FAQ202274404
### 问题: oled屏如何设置背光
解决方案: uboot阶段: 需要删除对sprd_bl.c的编译,在lcd驱动里面添加set_brightiness的接口,具体参考如下: /bsp/bootloader/u-boot15/configs/uis7862s_xxx_defconfig + #define CONFIG_BACKLIGHT_DSI /bsp/bootloader/u-boot15/board/spreadtrum/uis7862s_XXX/Makefile - obj-y := uis7862s_1h10.o sdio_cfg.o sprd_kp.o modem_entry.o pinmap.o ldo_sleep.o sprd_bl.o regulator_init.o lcd_printf.o sprd_uart_matrix_cfg.o + obj-y := uis7862s_1h10.o sdio_cfg.o s
完整回答请参考FAQ: FAQ202274413
### 问题: UIS8910DM 中断使能控制相关的一些API封装
解决方案: UIS8910DM 中断使能控制相关的一些API封装 components\kernel\chip\8910\portmacro.h ======================================== #define portENTER_CRITICAL() uxPortEnterCritical() #define portEXIT_CRITICAL( x ) vPortExitCritical( x ) #define portDISABLE_INTERRUPTS() vPortDisableInterrupts() #define portSET_INTERRUPT_MASK_FROM_ISR() uxPortSetInterruptMaskFromISR() #define portCLEAR_INTERRUPT_MASK_FROM_ISR( x ) vPortCle
完整回答请参考FAQ: FAQ202274422
### 问题: UIS8850 OPENCPU使用方法
解决方案: UIS8850 OPENCPU使用方法 1. 修改core_export.list声明APP需要调用的接口; components\apploader\src\core_export.list 2. 配置留给APP使用的flash及静态ram空间; flash配置修改:components\hal\config\8850\partinfo_8850_8m.json ram配置:menuconfig.py 3. 编译生成core SDK; TARGET=8850DG_cat1bis_ds TARGET_OUT=out/${TARGET}_debug source tools/launch.sh $TARGET cout cmake ../.. -G Ninja ninja croot tools/deliverpack.py load --keyword TARGET_OUT=$TARGET
完整回答请参考FAQ: FAQ202274423
### 问题: 在SC6533G平台如何配置单SIM卡项目
解决方案: 目前我们采取的方案是,协议栈单SIM卡和双SIM卡共用双卡的Lib文件,也就是说协议栈都是双卡的.
具体应用使用的是单卡还是双卡由MMI来配置.
所以target.def中继续使用 NUMBER_OF_SIM =2
mmi_config.def和conversion.mk中关于MMI SIM卡数量的宏定义均保持不变.

所需要修改方式如下:

1. 在target.def里面添加
GLOBAL_EXPORT_FLAG += __MMI_DUAL_SIM_SINGLE_OPENED_

2. 有几处编译错误,需要修改一下
 (1)application/coolmmi/mmi/Messages/src/SmsMoMtGuiInterface.c
   函数mmi_msg_entry_master_send_option 往上几行的
-----#ifdef __SEN
完整回答请参考FAQ: FAQ202274428
### 问题: #HalsAreServed 客制化修改导致测项 fail
解决方案: 报错讯息为获取 "privileged_device@1.0::IPrivilegedDevice default" 该接口超时, 在 Android 12 分支,平台内部没有 IPrivilegedDevice 相关代码 客户排查后为客制化需求添加该接口,移除相关修改后,即可通过测项. // 报错讯息 Getting: vendor.sprd.hardware.privileged_device@1.0::IPrivilegedDevice/default Timed out on: vendor.sprd.hardware.privileged_device@1.0::IPrivilegedDevice default test/vts-testcase/hal/treble/vintf/SingleManifestTest.cpp:59: Failure Failed vendor.
完整回答请参考FAQ: FAQ202274438
### 问题: #testGetNetworkCountryIso测试报错
解决方案: 测试报错信息: R00BA5E 09-23 09:29:03.033 1427 2148 D SubscriptionController: [getActiveSubscriptionInfoForSimSlotIndex]+ slotIndex=0 subId={id=1 iccId=898600F9261783849551 simSlotIndex=0 carrierId=1435 displayName=China Mobile carrierName=CMCC nameSource=1 iconTint=-16746133 number=+8615291685251 dataRoaming=0 iconBitmap=android.graphics.Bitmap@189a8e1 mcc=460 mnc=02 countryIso=cn isEmbedded=false nativ
完整回答请参考FAQ: FAQ202274441
### 问题: 不需要充电功能时PMIC的VBAT_SENSE, VCHG，SENSE_P/N, ISENSE如何接
解决方案: VBAT_SENSE:不可悬空,需要连至PMIC主电源(VBATA所连的电源,平台参考设计的VBAT网络),建议串接0欧电阻(浪涌或ESD问题调试位). VCHG: 有USB插拔功能(平台USB需要与外设通信),参照平台参考设计; 无USB插拔功能(平台USB不需要与外设通信),可悬空(VCHG工厂下载测试点还需按参考设计留串位电阻、对地电容和防浪涌管); VCHG悬空,无外部电源触发中断时,USB枚举触发方式需要修改软件,根据实际需求提软件CQ咨询如何修改. SENSE_P、SENSE_N、BAT_DET: 无电池或有电池但不用此三PIN的电池电流和电池温度检测功能时,可以悬空; 需要用到BAT_DET的ADC功能时,SENSE_P需要通过0欧电阻接地,SENSE_N可悬空;其它应用场景请提CQ咨询. ISENSE: PMIC线性充电控制电路的电流检测脚,可以悬空,相关的VDRV, CH
完整回答请参考FAQ: FAQ202274445
### 问题: 蓝牙BLE信令测试设置项
解决方案: 1:首先手机进入工程模式,点击connectivity,进入Bluetooth Setting界面,点击BT LE BQB,controller bqb enable; 2:手机通过USB连接至CMW270/500,进入CMW270/500的 System Properties,进入Device Manger ; 3:进入Device Manager后,找到Pores(COM&LPT),更新端口驱动; ４:选择SPRD LTE AT/DIAG,SPRD WCN AT/DIAG等端口,右键propertie,设置波特率为115200,选择com port number(小于30.尽量选择小的port),点击OK; ５:CMW270/500 设置Burst Type选择Low Energy,进入EUT,HW Interface 设置为USB to RS232 adapter,EUT Comm 
完整回答请参考FAQ: FAQ202274459
### 问题: 如何去掉安全相机的启动背景
解决方案: 从锁屏界面启动相机(通过双击power/volume up或keyguard右下角滑动)时,为了有一个从keyguard到camera的过度效果,让人看起来不那么突兀,启动过程中会先显示一个带有相机图标的灰色背景,待keyguard准备好退去后此背景便消失.这个背景可能会延缓打开相机的速度.若要关掉此背景,可以按照如下修改代码: SystemUI/src/com/android/systemui/statusbar/KeyguardAffordanceView.java
179      public void setPreviewView(View v) {
180          if (mPreviewView == v) {
181              return;
182          }
/*注释掉下面代码
183          View oldP
完整回答请参考FAQ: FAQ202274464
### 问题: 如何去掉安全相机启动后的scrim动画效果
解决方案: 安全相机启动后显示带相机图标的灰色背景,待Keyguard准备好后此背景消失,然后会触发scrim动画效果.具体表现为:一层黑色半透明的阴影的alpha值越来越小、相机界面越来越亮,直至该阴影完全透明、消失.此scrim动画效果有可能会造成闪屏、以及造成视觉上打开相机偏慢.若要关闭此动画,可以按照如下修改: SystemUI/src/com/android/systemui/statusbar/phone/StatusBar.java
diff --git a/StatusBar.java b/StatusBar.java
index 3cea274..059194a 100755
--- a/StatusBar.java
+++ b/StatusBar.java
@@ -3598,7 +3598,8 @@ public class StatusBar extends Syste
完整回答请参考FAQ: FAQ202274466
### 问题: 如何实现在锁屏界面按音量键弹出音量框
解决方案: A11中可以在锁屏界面/息屏通过双击Volume Up键来快速打开相机,这可能会与调节音量相冲突,所以在SprdPhoneWindowManager中对锁屏界面按下音量键做了拦截,不会分发此按键事件.相关拦截代码在isAllowVolumeKeyDispatch方法中实现: frameworks/base/services/core/java/com/android/server/policy/SprdPhoneWindowManager.java
 public boolean isAllowVolumeKeyDispatch(){
...
207  
208          if(!isRing && !isMusicActive && !isInCall && !isInAlarm){
209              Slog.d(TAG," isAllowVolume
完整回答请参考FAQ: FAQ202274469
### 问题: 如何根据包名屏蔽全面屏手势
解决方案: 在某个应用中可以通过如下修改拦截手势导航: 在EdgeBackGestureHandler中新增对包名的获取方法; 在下面mAllowGesture的判断条件中新增对包名的判断. diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/EdgeBackGestureHandler.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/EdgeBackGestureHandler.java
old mode 100644
new mode 100755
index 304fe0090e77..a809600728a3
--- a/packages/SystemUI/src/com/android/systemui/sta
完整回答请参考FAQ: FAQ202274470
### 问题: 如何在某个Activity中屏蔽状态栏与导航键
解决方案: 1.在某个Activity界面禁止下拉状态栏: //获取StatusBarManager StatusBarManager mStatusBarManager = (StatusBarManager) mContext.getSystemService(Context.STATUS_BAR_SERVICE); //禁止下拉状态栏 mStatusBarManager.disable(StatusBarManager.DISABLE_EXPAND); //退出时解除禁止 mStatusBarManager.disable(StatusBarManager.DISABLE_NONE); 2.在某个Activity界面禁用某个导航键: 可以通过如下flag分别屏蔽导航栏Back/Home/Recent键,屏蔽方式与上面一致.StatusBarManager.DISABLE_BACK/StatusB
完整回答请参考FAQ: FAQ202274472
### 问题: 如何抓取安兔兔 Antutu 小分
解决方案: 安装好 antutu v8.0.5 apk 和对应的 antutu 3DBench apk PS. 若网络上找不到对应的 apk, 可向展锐 benchmark FAE 获取 1. 将 settings.xml push 进到样机后,再进行测试 > adb push settings.xml /sdcard/.antutu/settings.xml 2. 测试完成后,将结果导出 > adb pull /sdcard/.antutu/last_result.json settings.xml 为 antutu 各项测试的配置文件,设为 1 测试该项目,设为 0 跳过此测项 例如 只让antutu运行cpu常用算法三项:则只修改 <BID_MAP> <BID_PNG_Decode> <BID_2D_Physics>为1,其他均为0 如下这二项 Log 和 Result 为必要设定,均需设定为 
完整回答请参考FAQ: FAQ202274474
### 问题: 发生sysdump后，确认提供的log是否能解析
解决方案: 1. 下载客户dump log和vmlinux(bsp/out/${project}/obj/kernel/vmlinux) 2. 组合dump log为一个文件 cd ap_sys_dump$ cat sysdump.core.0* >vmcore (将多个dump 文件组合成一个dump) 3. 确定dump log 和 vmlinux使用的是同一时期编译的kernel strings vmlinux | grep "Linux version" Linux version 4.14.98 (renyinshan@us160405-Tower) (gcc version 7.2.1 20171011 (Linaro GCC 7.2-2017.11)) #1 SMP PREEMPT Wed Feb 23 08:36:45 UTC 2022 strings vmcore | grep "L
完整回答请参考FAQ: FAQ202274509
### 问题: T117 FM如何实现以0.05MHz微调
解决方案: 修改思路: 当前Fm的搜台使用的接口为Fm_AutoSeek,上次将需要搜台的频道参数传入底层实现对应频道的搜台,目前上层传入底层的最大值为1080对应108.0MHz,最小值为875对应87.5MHz,搜台间隔为加减1操作,即搜索完87.5MHz,下一个搜索的频道为87.6MHz,每次切换间隔为0.1MHz.若要实现0.05MHz频率切换,需要底层接口做出相关调整,当上层传入8750参数时,底层实现87.50MHz频道的搜索,上层在切换频道时进行加减5的操作,则下一个搜索的频道为8755对应到底层搜索的频道即为87.55MHz,可实现每次0.05MHz频率的切换. 具体底层代码修改如下: Index: fm_drv.c
===================================================================
--- fm_drv.c	(r
完整回答请参考FAQ: FAQ202274513
### 问题: HDR3中ref1_enhance参数设置的确认方法
解决方案: HDR照片的exif 信息中没有ref1_enhance信息,可以通过ylog关键词"re1_enhance",可以找到当前照片设置的re1_enhance值,如下log,能列出所有参数的exif信息: sprd_hdr3: HDR3_EXIF_INFO:[838860800], gain_ae[ 1192, 128, 128, 0, 0, 0, 0], shutter_ae[9996789, 2054676, 8231875, 0, 0, 0, 0], bv(1191), face_flag(1), prop_dark(1844), prop_bright(348146), tuning_param_index(4), sceneChosen(0), ev[-350, -200], scene_flag(1), pylevel(10, 9, 8, 8, 8), exposureThres
完整回答请参考FAQ: FAQ202274551
### 问题: #setNetworkSelectionModeManual_1_5/1_slot2 测项报错
解决方案: 报错讯息为获取 slot2 的 cardStatus.base.base.base.cardState 为 ABSENT; 通常是卡槽 2 没有插入 SIM 卡,或者插入的为无效 SIM 卡, 故测试失败时,可先检查二个卡槽是否有插入 SIM 卡, 或先在其它对比机确认该 SIM 卡能 pass 测项. 报错讯息: 04-29 09:11:35 E/GTestResultParser: Name for current test does not match test we started with, expected: getBarringInfo/1_slot2  but got: getBarringInfo/1_slot2, where GetParam() = "slot2"
04-29 09:11:35 I/TestFailureListener: FailureListen
完整回答请参考FAQ: FAQ202274553
### 问题: 使用Google Dialer拨打紧急拨号112, 挂断后自动闪退到桌面
解决方案: 如果发生使用Google Dialer拨打紧急拨号112或是其他紧急电话, 挂断后自动闪退到桌面, 可以先查看log, 看是否有看到以下提示: am_kill : [0,4454,com.google.android.dialer,0,permissions revoked] ActivityManager: Killing 11590:com.google.android.dialer/u0a133 (adj 0): permissions revoked 如果有看到上述log提示, 再到项目代码GMS包路径vendor/partner_gms/overlay/gms_overlay_comms/packages/services/Telecomm/res/values/config.xml确认config.xml内的grant_location_permission_enabled这个
完整回答请参考FAQ: FAQ202274554
### 问题: 如何精准抓取安兔兔各个跑分项的systrace文件
解决方案: 因安兔兔跑分为连续执行过程,若抓取全部项的systrace文件过大且增加分析难度, 故建议确认需要重新抓取systrace的跑分项,预先执行安兔兔并观察与记录跑分项执行的先后场景与时长, 例如: 针对fisheye,blur与JPG decoding项抓取systrace文件, 如下范例装V9.3.5版本运行时观察每个项先后程序与测项执行的时长: 1. 孤立 2. 海岸线 3. fisheye + blur －时长8s 4. MEM 5. GPU 6. UX 6.1 Hash checksum 6.2 Secure message 6.3 XML parsing 6.4 JSON parsing 6.5 Scroll delay 6.6 webview rendering 6.7 QRCode 6.8 JPG decoding - 时长30s 6.9 HEIF decoding 6.10 
完整回答请参考FAQ: FAQ202274557
### 问题: A11上Launcher主界面禁止移除指定应用的shortcut
解决方案: 定位到src/com/android/launcher3/ButtonDropTarget.java中
...
public void onDragStart(DropTarget.DragObject dragObject, DragOptions options) {
+     if("com.android.xxx".equals(dragObject.dragInfo.getTargetComponent().getPackageName()))  //com.android.xxx为不可移除的应用包名
+        {
+            setVisibility(View.GONE);
+        }
+        else
+        {
            mActive = supportsDrop(dragObject
完整回答请参考FAQ: FAQ202274563
### 问题: 插入otg，图库音乐等多媒体应用不显示otg内的图片和音乐文件的问题
解决方案: 该现象为正常现象,在R上,otg作为即插即拔的设备,已回归到谷歌原生设计,对应用来说是不可见存储,所以不会发送Mount广播给meidaprovider进行扫描,没有扫描,故media数据库中无相应信息.相关媒体应用(图库/音乐)在media数据库中找不到相关数据信息就不会把文件显示在应用中 提供以下一种修改方案: 即将otg设备对应用可见,发送mounted广播,mediaprovider进行otg文件的扫描,然后应用就可看到otg内的内容 --- services/core/java/com/android/server/StorageManagerService.java (date 1610443512000) +++ services/core/java/com/android/server/StorageManagerService.java (revision ) @@ -1
完整回答请参考FAQ: FAQ202274564
### 问题: A11 智能分辨率白名单配置方式
解决方案: 展锐智能分辨率功能(ISR)是指,基于原生窗口兼容模式实现,动态调节分辨率,在特定条件下将分辨率由1080P降低至720P. 此功能没有用户手动开关,需要配置至此应用白名单在如下位置,可以参考如下已经配置的应用案例(只修改对应的应用包名即可,后面的参数和参考配置一样): /frameworks/base / core/res/res/values/config_ex.xml ... <!-- UNISOC: Add for ISR feature. --> <!-- <item>packagename;ivnscale;scaleinfo;density</item> --> <!-- for example: <item>com.tencent.pocket;1.5;0.66666667;320</item> --> <string-array name="isr_compat_conf
完整回答请参考FAQ: FAQ202274570
### 问题: 射频子单元静电防护电路参考设计
解决方案: 射频电路前端需要通过严格ESD测试,首选内置TVS的ASM, 如果是临界测试要求,可以选取以下电路进行静电防护能力加强,并予以充分验证: 注意,12pF是按照选取cellular频段选取的低插损隔直器件,C0G(NP0)电容在射频常用pF级容值范围内,其耐压值是一样的. 并联电感是按照通流量和阻抗影响的比值取相对较优做的选型,可以适当增加感值.此处的匹配网络如为了尽可能减小匹配插损,按Q值对电感选型,需要充分考虑高Q值一般是绕线贴片电感,注意额定通流量,成本也会有所上升. 对于射频电路来说,在功率输出端贴双向TVS二极管能够极大地增强抗静电性能,注意TVS的选型尽量选择寄生容值较小耐压值较高的器件,随着越来越多ASM器件内置ESD SHUNT,单独的射频用小封装TVS将会逐渐退出市场. 注意应用TVS后,发射信号波形会产生如下变化: 根据波形分析,输出信号的奇次谐波分量会恶化.传导测试一般
完整回答请参考FAQ: FAQ202274578
### 问题: USB降速修改方式
解决方案: USB最大速度降低,要区分两种模式情况下,即手机端做DEVICE模式,或HOST模式的情况.一般常见是做DEVICE模式下的降速. 以下以usb2.0(即musb架构),kernel4.14代码为例(kernel5.4可以参考) (1). 做DEVICE模式情况下的降速调整方法参考: <1> 通过adb指令,或者上层访问文件节点的方式降低速率: 您要先在dtsi文件里查看一下usb对应的地址,之后通过adb指令 例如 echo 2 > /sys/devices/platform/soc/soc:aon/地址.usb/maximum_speed 例如sharkle.dtsi中,usb@20200000{ echo 2 > /sys/devices/platform/soc/soc:aon/20200000.usb/maximum_speed 目录下还有current_speed节点,可以读取
完整回答请参考FAQ: FAQ202274582
### 问题: 视频拉伸问题
解决方案: 问题描述: 点击录像键,录像过程中对焦拉伸严重 ﻿问题分析: 1,确认afMode 下发是否正确 afMode不同数字对应apk不同下发模式,分别为: − 0:off,表示镜头位置不受AF控制,由应用直接控制镜头位置. − 1:auto,表示点击屏幕主动对焦. − 2:macro,表示微距模式. − 3:video,表示video录像. − 4:picture,表示普通camera或video预览. 2,若切换至视频模式并点击录像键后,afMode未下发成3,可让客户app同事修改,使得afMode值下发正确 Line 16938: M16BCCD 12-07 01:09:17.889 1957 3298 D Cam3OEMIf: 11128, SetCameraParaTag: ANDROID_CONTROL_AF_MODE, AfMode 4 Line 173512: M191EAB 
完整回答请参考FAQ: FAQ202274587
### 问题: WCDMA综测RSCP报错问题
解决方案: 产线生产中,WCDMA综测概率性报RSCP的问题,在Trace Log中搜索到如下测试项fail: RSSI BAND 1; Channel = 10562; CellPower=-70.00; AntMode = 0 [-74.00, -74.77, -66.00] dB fail RSSI BAND 1; Channel = 10562; CellPower=-70.00; AntMode = 0 [-74.00, -65.45, -66.00] dB fail. Pass的指标都在70-70.3,Fail的都是较为临界的状态.压力测试了一个模块测了100次,只测试WCDMA,RSCP有4次Fail. 查看上传的Fail Log,AGC校准中的RSSI值如下: 结果显示第一行CellPower下的RSSI值偏大,导致综测时RSCP不稳定,概率性出现fail,因此需要调整wcdma ca
完整回答请参考FAQ: FAQ202274589
### 问题: activity如何浮在锁屏上方
解决方案: 参考紧急拨号: 1.frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java 在锁屏界面点击数字键1,进入紧急拨号界面(并将输入的数字传入): case KeyEvent.KEYCODE_1: if (down && keyguardActive && isScreenOn) { Log.i(TAG, "KEYCODE_1 dowm, start EmergencyDialer"); Intent intent = new Intent("com.android.phone.EmergencyDialer.DIAL"); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM
完整回答请参考FAQ: FAQ202274593
### 问题: GPIO plus 电平和边沿中断切换注意事项
解决方案: GPIO plus的电平触发中断有两种模式(irq_request时传入参数是一样的): (1)dbnc (支持硬件去抖) (2)level 只是在调用gpio_set_debounce后,才会根据去抖时间判断是否要切到dbnc模式,相关代码如下: static int sprd_gpio_plus_set_debounce() { …… if (value) sprd_gpio_plus_update(chip, INT_CRL(channel), BIT_INT_MODE_MASK, SPRD_GPIO_PLUS_DEBOUNCE); else sprd_gpio_plus_update(chip, INT_CRL(channel), BIT_INT_MODE_MASK, SPRD_GPIO_PLUS_LEVEL); return 0; } 如果需要动态切换电平(DBNC)和边沿的中断
完整回答请参考FAQ: FAQ202274599
### 问题: 多媒体Text自动侦测检测Codepage配置
解决方案: 多媒体Text自动侦测检测Codepage配置方法如下: 1.make menuconfig make menuconfig===》
  │ Prompt: Support Match Character Set Codepage                                                                                                                                                   
  │   Defined at aps/customer/Kconfig.module:510                                                                                       
完整回答请参考FAQ: FAQ202274602
### 问题: A11中如何让锁屏界面左下角图标固定显示为phone
解决方案: 在打开锁屏界面下方图标显示后,左下角图标一般优先显示为麦克风图标.若需要固定显示为phone图标以快速打开dialer,可做如下修改:在KeyguardBottomAreaView.java的getIcon()方法中将mLeftIsVoiceAssist置为false,后面则会加载Phone图标.     private class DefaultLeftButton implements IntentButton {

        private IconState mIconState = new IconState();

        @Override
        public IconState getIcon() {
            mLeftIsVoiceAssist = canLaunchVoiceAssist();

			//将mLe
完整回答请参考FAQ: FAQ202274614
### 问题: A11中如何屏蔽长按home键启动google assistant的功能
解决方案: 直接在NavigationBarFragment.java中onHomeLongClick方法中return false即可. SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarFragment.java 
1056      @VisibleForTesting
1057      boolean onHomeLongClick(View v) {
              //注释掉后面的代码,直接返回false.
              return false;
              /*
1058          if (!mNavigationBarView.isRecentsButtonVisible()
1059                  && ActivityM
完整回答请参考FAQ: FAQ202274616
### 问题: A11中如何动态打开SystemUI中debug开关
解决方案: SystemUI里SprdActivityDebugConfigsUtil.java中定义了很多debug开关,这些开关可以通过如下命令去动态打开: adb shell cmd activity log_switch pkg-bundle com.android.systemui --ez DEBUG_DEBUG true --ez DEBUG_SPEW true --ez DEBUG_CHATTY true --ez DEBUG_DUMPTRUCK true --ez DEBUG_MEDIA_FAKE_ARTWORK true --ez DEBUG_CAMERA_LIFT true --ez DEBUG_WINDOW_STATE true --ez DEBUG_MULTIUSER true 如果只打开其中一个 adb shell cmd activity log_switch pkg-b
完整回答请参考FAQ: FAQ202274617
### 问题: A11中如何实现截图操作更灵敏
解决方案: 截屏时需要同时按下Power键+Volume down键并持续一段时间才执行截屏动作,给人一种不灵敏的感觉,这是由于PhoneWindowManager.java中给截屏操作加了一个延时.可按如下修改实现快速截屏: frameworks/base/services/core/java/com/android/server/policy/PhoneWindowManager.java diff --git a/PhoneWindowManager.java b/PhoneWindowManager.java index 5973330..534d0b2 100755 --- a/PhoneWindowManager.java +++ b/PhoneWindowManager.java @@ -1365,7 +1365,8 @@ public class PhoneWindowManager 
完整回答请参考FAQ: FAQ202274619
### 问题: A11中如何使下拉QS栏编辑界面展开及退出动画更流畅
解决方案: 下拉QS栏点击编辑按钮时展开及退出动画在如下位置定义,可通过减少Animator的duration来使编辑界面展开及退出动画更流畅.




SystemUI/src/com/android/systemui/qs/QSDetailClipper.java 



            //在此处修改animator的duration, 可以把此处的系数由1.2减为更小
68     mAnimator.setDuration((long)(mAnimator.getDuration() * 1.2));//UNISOC: modify for bug 1401264

69     if (listener != null) {

70       mAnimator.addListener(listener);

71     }

72     
完整回答请参考FAQ: FAQ202274620
### 问题: A11中下拉QS栏位置调整
解决方案: 如何调整下拉QS栏顶部距离屏幕顶部的距离或者下拉QS栏时状态栏的高度(此时状态栏背景为黑色),可以通过修改配置文件中的quick_qs_offset_height来实现: frameworks/base/core/res/res/values/dimens.xml <dimen name="quick_qs_offset_height">48dp</dimen> 此时若要调整状态栏中时钟位置,则可在如下布局文件中调整clock的gravity: SystemUI/res/layout/quick_status_bar_header_system_icons.xml 18 xmlns:android="http://schemas.android.com/apk/res/android" 19 xmlns:systemui="http://schemas.android.com/apk/re
完整回答请参考FAQ: FAQ202274621
### 问题: 9117项目关于相机预览和拍照完成的图片不一样，取景区会变大的修改
解决方案: 相机预览和拍照完成的图片不一样,取景区会变大,使用初始size回显,不做裁剪
LOCAL int _DCAMERA_DoSnapShotReview (DCAMERA_SNAPSHOT_PARAM_T const *param_ptr,
		                    LCD_INFO_T *lcd_info_ptr,
				    BOOLEAN select_personal)
{
//大约1381行:
	//Use orginal cap img size to review ,no need to trim img,otherwise 
       //the review img will be different from preview img.
//请把下面这个调用的注释打开尝试一下:
		_DCamera_AdjustRect (&img
完整回答请参考FAQ: FAQ202274624
### 问题: camera 打开失败，但是log里面可以看出第一帧图像已经送显，LCD没有使用TE
解决方案: 从log里面可以看出第一帧图像已经送显,log显示ISP_DRV: _ISP_ISRCapStartOfFrame, wait for the next frame unlocked
因为没有TE信号,导致不刷图
需要将LCD里面的TE关闭,可以参考如下代码:
const LCD_SPEC_T g_lcd_GC9106 = {
	LCD_WIDTH,
	LCD_HEIGHT,
	SCI_NULL,
	SCI_NULL,
	WIDTH_8,
	(LCD_TIMING_U *) &s_GC9106_spitiming,
	(LCD_OPERATIONS_T *) &GC9106_operations,
	1,
	0
};
改成

const LCD_SPEC_T g_lcd_GC9106 = {
	LCD_WIDTH,
	LCD_HEIGHT,
	SCI_
完整回答请参考FAQ: FAQ202274625
### 问题: [A12]游戏应用中，开启语音，游戏背景音乐声音会变小
解决方案: 在PhoneState为COMMUNICATION状态时,会对同时存在的相关播放stream的分贝值减小25db,导致声音变小. 相关判断逻辑在AudioPolicyManager.cpp中,可不做修改,维持现有逻辑. 若一定要修改,请参考如下: --- a/services/audiopolicy/managerdefault/AudioPolicyManager.cpp +++ b/services/audiopolicy/managerdefault/AudioPolicyManager.cpp @@ -66,7 +66,6 @@ using content::AttributionSourceState; // Largest difference in dB on earpiece in call between the voice volume and another // m
完整回答请参考FAQ: FAQ202274627
